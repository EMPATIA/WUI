function _init(){"use strict";$.AdminLTE.layout={activate:function(){var e=this;e.fix(),e.fixSidebar(),$(window,".wrapper").resize(function(){e.fix(),e.fixSidebar()})},fix:function(){var e=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),t=$(window).height(),n=$(".sidebar").height();if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",t-$(".main-footer").outerHeight());else{var r;t>=n?($(".content-wrapper, .right-side").css("min-height",t-e),r=t-e):($(".content-wrapper, .right-side").css("min-height",n),r=n);var i=$($.AdminLTE.options.controlSidebarOptions.selector);"undefined"!=typeof i&&i.height()>r&&$(".content-wrapper, .right-side").css("min-height",i.height())}},fixSidebar:function(){return $("body").hasClass("fixed")?("undefined"==typeof $.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),void($.AdminLTE.options.sidebarSlimScroll&&"undefined"!=typeof $.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void("undefined"!=typeof $.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"))}},$.AdminLTE.pushMenu={activate:function(e){var t=$.AdminLTE.options.screenSizes;$(e).on("click",function(e){e.preventDefault(),$(window).width()>t.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=t.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var e=this,t=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>t&&e.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>t&&e.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},$.AdminLTE.tree=function(e){var t=this,n=$.AdminLTE.options.animationSpeed;$(document).on("click",e+" li a",function(e){var r=$(this),i=r.next();if(i.is(".treeview-menu")&&i.is(":visible"))i.slideUp(n,function(){i.removeClass("menu-open")}),i.parent("li").removeClass("active");else if(i.is(".treeview-menu")&&!i.is(":visible")){var o=r.parents("ul").first(),a=o.find("ul:visible").slideUp(n);a.removeClass("menu-open");var s=r.parent("li");i.slideDown(n,function(){i.addClass("menu-open"),o.find("li.active").removeClass("active"),s.addClass("active"),t.layout.fix()})}i.is(".treeview-menu")&&e.preventDefault()})},$.AdminLTE.controlSidebar={activate:function(){var e=this,t=$.AdminLTE.options.controlSidebarOptions,n=$(t.selector),r=$(t.toggleBtnSelector);r.on("click",function(r){r.preventDefault(),n.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?e.close(n,t.slide):e.open(n,t.slide)});var i=$(".control-sidebar-bg");e._fix(i),$("body").hasClass("fixed")?e._fixForFixed(n):$(".content-wrapper, .right-side").height()<n.height()&&e._fixForContent(n)},open:function(e,t){t?e.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(e,t){t?e.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(e){var t=this;$("body").hasClass("layout-boxed")?(e.css("position","absolute"),e.height($(".wrapper").height()),$(window).resize(function(){t._fix(e)})):e.css({position:"fixed",height:"auto"})},_fixForFixed:function(e){e.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(e){$(".content-wrapper, .right-side").css("min-height",e.height())}},$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(e){var t=this;e||(e=document),$(e).on("click",t.selectors.collapse,function(e){e.preventDefault(),t.collapse($(this))}),$(e).on("click",t.selectors.remove,function(e){e.preventDefault(),t.remove($(this))})},collapse:function(e){var t=this,n=e.parents(".box").first(),r=n.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");n.hasClass("collapsed-box")?(e.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),r.slideDown(t.animationSpeed,function(){n.removeClass("collapsed-box")})):(e.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),r.slideUp(t.animationSpeed,function(){n.addClass("collapsed-box")}))},remove:function(e){var t=e.parents(".box").first();t.slideUp(this.animationSpeed)}}}function oneDelete(action){var ele=document.getElementById("delete-modal");null!=ele&&(ele.outerHTML=""),$.get(action,function(data){$('<div id="delete-modal" class="modal fade">'+data+"</div>").modal(),$(window).on("shown.bs.modal",function(){$("#delete-modal").find("script").each(function(i){eval($(this).text())})})})}function oneActivate(action){var ele=document.getElementById("activate-modal");null!=ele&&(ele.outerHTML=""),$.get(action,function(data){$('<div id="activate-modal" class="modal fade">'+data+"</div>").modal(),$(window).on("shown.bs.modal",function(){$("#delete-modal").find("script").each(function(i){eval($(this).text())})})})}function loadDatePickers(){$(".oneDatePicker").datepicker({format:"yyyy-mm-dd",orientation:"bottom auto",autoclose:!0,todayHighlight:!0})}function loadTimePickers(){$(".oneTimePicker").clockpicker({"default":"now",donetext:"OK"})}function loadDateRangePickers(){$(".input-daterange").datepicker({format:"yyyy-mm-dd",orientation:"bottom auto"})}function convertTimezone(){$(".convertTimezone").each(function(){var e=(new Date).getTimezoneOffset(),t=e/60,n=$(this).attr("data-format"),r="",i="+";t>0&&(i="-");var o=new Date(1e3*$(this).attr("data-timestamp"));if(n){for(var a=o.getFullYear(),s=o.getMonth()+1,l=o.getDate(),u=n.toLowerCase().split("-"),c=[],f=0;f<u.length;f++)switch(u[f]){case"y":c[f]=a;break;case"m":c[f]=s;break;case"d":c[f]=l}r=c[0]+"-"+c[1]+"-"+c[2]+" "+o.getHours()+":"+o.getMinutes()}else r=o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear()+" "+o.getHours()+":"+o.getMinutes();$(this).html(r+"  GMT "+i+" "+Math.abs(t))})}if(!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=K.type(e);return"function"!==n&&!K.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(K.isFunction(t))return K.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return K.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return K.filter(t,e,n);t=K.filter(t,e)}return K.grep(e,function(e){return Y.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=pe[e]={};return K.each(e.match(he)||[],function(e,n){t[n]=!0}),t}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),K.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=K.expando+s.uid++}function l(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xe.test(n)?K.parseJSON(n):n)}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function f(){try{return Q.activeElement}catch(e){}}function d(e,t){return K.nodeName(e,"table")&&K.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)me.set(e[n],"globalEval",!t||me.get(t[n],"globalEval"))}function v(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(me.hasData(e)&&(o=me.access(e),a=me.set(t,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)K.event.add(t,i,u[i][n])}ye.hasData(e)&&(s=ye.access(e),l=K.extend({},s),ye.set(t,l))}}function m(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&K.nodeName(e,t)?K.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ae.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=K(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:K.css(i[0],"display");return i.detach(),o}function b(e){var t=Q,n=Be[e];return n||(n=x(e,t),"none"!==n&&n||(Le=(Le||K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Le[0].contentDocument,t.write(),t.close(),n=x(e,t),Le.detach()),Be[e]=n),n}function w(e,t,n){var r,i,o,a,s=e.style;return n=n||Ve(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||K.contains(e.ownerDocument,e)||(a=K.style(e,t)),Ue.test(a)&&qe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Je.length;i--;)if(t=Je[i]+n,t in e)return t;return r}function A(e,t,n){var r=He.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=K.css(e,n+_e[o],!0,i)),r?("content"===n&&(a-=K.css(e,"padding"+_e[o],!0,i)),"margin"!==n&&(a-=K.css(e,"border"+_e[o]+"Width",!0,i))):(a+=K.css(e,"padding"+_e[o],!0,i),"padding"!==n&&(a+=K.css(e,"border"+_e[o]+"Width",!0,i)));return a}function z(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ve(e),a="border-box"===K.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ue.test(i))return i;r=a&&(G.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(a?"border":"content"),r,o)+"px"}function M(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=me.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&ke(r)&&(o[a]=me.access(r,"olddisplay",b(r.nodeName)))):(i=ke(r),"none"===n&&i||me.set(r,"olddisplay",i?n:K.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function C(e,t,n,r,i){return new C.prototype.init(e,t,n,r,i)}function T(){return setTimeout(function(){Ge=void 0}),Ge=K.now()}function E(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=_e[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function D(e,t,n){var r,i,o,a,s,l,u,c,f=this,d={},h=e.style,p=e.nodeType&&ke(e),g=me.get(e,"fxshow");n.queue||(s=K._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,K.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=K.css(e,"display"),c="none"===u?me.get(e,"olddisplay")||b(e.nodeName):u,"inline"===c&&"none"===K.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ze.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}d[r]=g&&g[r]||K.style(e,r)}else u=void 0;if(K.isEmptyObject(d))"inline"===("none"===u?b(e.nodeName):u)&&(h.display=u);else{g?"hidden"in g&&(p=g.hidden):g=me.access(e,"fxshow",{}),o&&(g.hidden=!p),p?K(e).show():f.done(function(){K(e).hide()}),f.done(function(){var t;me.remove(e,"fxshow");for(t in d)K.style(e,t,d[t])});for(r in d)a=j(p?g[r]:0,r,f),r in g||(g[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,i,o,a;for(n in e)if(r=K.camelCase(n),i=t[r],o=e[n],K.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=K.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function N(e,t,n){var r,i,o=0,a=tt.length,s=K.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Ge||T(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ge||T(),duration:n.duration,tweens:[],createTween:function(t,n){var r=K.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>o;o++)if(r=tt[o].call(u,e,c,u.opts))return r;return K.map(c,j,u),K.isFunction(u.opts.start)&&u.opts.start.call(e,u),K.fx.timer(K.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(he)||[];if(K.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function F(e,t,n,r){function i(s){var l;return o[s]=!0,K.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===xt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function I(e,t){var n,r,i=K.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&K.extend(!0,e,r),e}function R(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function L(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function B(e,t,n,r){var i;if(K.isArray(t))K.each(t,function(t,i){n||At.test(e)?r(e,i):B(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==K.type(t))r(e,t);else for(i in t)B(e+"["+i+"]",t[i],n,r)}function q(e){return K.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],V=U.slice,$=U.concat,H=U.push,Y=U.indexOf,W={},X=W.toString,J=W.hasOwnProperty,G={},Q=e.document,Z="2.1.4",K=function(e,t){return new K.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};K.fn=K.prototype={jquery:Z,constructor:K,selector:"",length:0,toArray:function(){return V.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:V.call(this)},pushStack:function(e){var t=K.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return K.each(this,e,t)},map:function(e){return this.pushStack(K.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:U.sort,splice:U.splice},K.extend=K.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||K.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(u&&r&&(K.isPlainObject(r)||(i=K.isArray(r)))?(i?(i=!1,o=n&&K.isArray(n)?n:[]):o=n&&K.isPlainObject(n)?n:{},a[t]=K.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},K.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!K.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===K.type(e)&&!e.nodeType&&!K.isWindow(e)&&!(e.constructor&&!J.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[X.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=K.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?K.merge(r,"string"==typeof e?[e]:e):H.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:Y.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),l=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&l.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&l.push(i);return $.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),K.isFunction(e)?(r=V.call(arguments,2),i=function(){return e.apply(t||this,r.concat(V.call(arguments)))},i.guid=e.guid=e.guid||K.guid++,i):void 0},now:Date.now,support:G}),K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,a,s,l,u,f,h,p,g;if((t?t.ownerDocument||t:B)!==D&&j(t),t=t||D,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&N){if(11!==s&&(i=ye.exec(e)))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&R(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!P||!P.test(e))){if(h=f=L,p=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=S(e),(f=t.getAttribute("id"))?h=f.replace(be,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+d(u[l]);p=xe.test(e)&&c(t.parentNode)||t,g=u.join(",")}if(g)try{return Z.apply(n,p.querySelectorAll(g)),n}catch(v){}finally{f||t.removeAttribute("id")}}}return M(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[L]=!0,e}function i(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)_.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=U++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[q,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[L]||(t[L]={}),(s=l[r])&&s[0]===q&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function m(e,t,n,i,o,a){return i&&!i[L]&&(i=m(i)),o&&!o[L]&&(o=m(o,a)),r(function(r,a,s,l){var u,c,f,d=[],h=[],p=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:v(m,d,e,s,l),x=n?o||(r?e:p||i)?[]:a:y;if(n&&n(y,x,s,l),i)for(u=v(x,h),i(u,[],s,l),c=u.length;c--;)(f=u[c])&&(x[h[c]]=!(y[h[c]]=f));if(r){if(o||e){if(o){for(u=[],c=x.length;c--;)(f=x[c])&&u.push(y[c]=f);o(null,x=[],u,l)}for(c=x.length;c--;)(f=x[c])&&(u=o?ee(r,f):d[c])>-1&&(r[u]=!(a[u]=f))}}else x=v(x===a?x.splice(p,x.length):x),o?o(null,a,x,l):Z.apply(a,x)})}function y(e){for(var t,n,r,i=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,l=h(function(e){return e===t},a,!0),u=h(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==C)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];i>s;s++)if(n=_.relative[e[s].type])c=[h(p(c),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[L]){for(r=++s;i>r&&!_.relative[e[r].type];r++);return m(s>1&&p(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&d(e))}c.push(n)}return p(c)}function x(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,f,d,h=0,p="0",g=r&&[],m=[],y=C,x=r||o&&_.find.TAG("*",u),b=q+=null==y?1:Math.random()||.1,w=x.length;for(u&&(C=a!==D&&a);p!==w&&null!=(c=x[p]);p++){if(o&&c){for(f=0;d=e[f++];)if(d(c,a,s)){l.push(c);break}u&&(q=b)}i&&((c=!d&&c)&&h--,r&&g.push(c))}if(h+=p,i&&p!==h){for(f=0;d=n[f++];)d(g,m,a,s);if(r){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=G.call(l));m=v(m)}Z.apply(l,m),u&&!r&&m.length>0&&h+n.length>1&&t.uniqueSort(l)}return u&&(q=b,C=y),g};return i?r(a):a}var b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L="sizzle"+1*new Date,B=e.document,q=0,U=0,V=n(),$=n(),H=n(),Y=function(e,t){return e===t&&(E=!0),0},W=1<<31,X={}.hasOwnProperty,J=[],G=J.pop,Q=J.push,Z=J.push,K=J.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ke=function(){j()};try{Z.apply(J=K.call(B.childNodes),B.childNodes),J[B.childNodes.length].nodeType}catch(Ae){Z={apply:J.length?function(e,t){Q.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},A=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,O=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),N=!A(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(r.getElementsByClassName),w.getById=i(function(e){return O.appendChild(e).id=L,!r.getElementsByName||!r.getElementsByName(L).length}),w.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.CLASS=w.getElementsByClassName&&function(e,t){return N?t.getElementsByClassName(e):void 0},F=[],P=[],(w.qsa=me.test(r.querySelectorAll))&&(i(function(e){O.appendChild(e).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+L+"-]").length||P.push("~="),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+L+"+*").length||P.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(w.matchesSelector=me.test(I=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(e){w.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),F.push("!=",ae)}),P=P.length&&new RegExp(P.join("|")),F=F.length&&new RegExp(F.join("|")),t=me.test(O.compareDocumentPosition),R=t||me.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===B&&R(B,e)?-1:t===r||t.ownerDocument===B&&R(B,t)?1:T?ee(T,e)-ee(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:T?ee(T,e)-ee(T,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===B?-1:u[i]===B?1:0},r):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&j(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!N||F&&F.test(n)||P&&P.test(n)))try{var r=I.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&j(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&j(e);var n=_.attrHandle[t.toLowerCase()],r=n&&X.call(_.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==r?r:w.attributes||!N?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(E=!w.detectDuplicates,T=!w.sortStable&&e.slice(0),e.sort(Y),E){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return T=null,e},k=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(we,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),
e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,h,p,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(v){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(c=v[L]||(v[L]={}),u=c[e]||[],h=u[0]===q&&u[1],d=u[0]===q&&u[2],f=h&&v.childNodes[h];f=++h&&f&&f[g]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[q,h,d];break}}else if(y&&(u=(t[L]||(t[L]={}))[e])&&u[0]===q)d=u[1];else for(;(f=++h&&f&&f[g]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++d||(y&&((f[L]||(f[L]={}))[e]=[q,d]),f!==t)););return d-=i,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,n){var i,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[L]?o(n):o.length>1?(i=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=z(e.replace(le,"$1"));return i[L]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,_e),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,_e).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=l(b);return f.prototype=_.filters=_.pseudos,_.setFilters=new f,S=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=$[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=_.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(a in _.filter)!(i=pe[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):$(e,l).slice(0)},z=t.compile=function(e,t){var n,r=[],i=[],o=H[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=y(t[n]),o[L]?r.push(o):i.push(o);o=H(e,x(i,r)),o.selector=e}return o},M=t.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,f=!r&&S(e=u.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&N&&_.relative[o[1].type]){if(t=(_.find.ID(a.matches[0].replace(we,_e),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((l=_.find[s])&&(r=l(a.matches[0].replace(we,_e),xe.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Z.apply(n,r),n;break}}return(u||z(e,f))(r,t,!N,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=L.split("").sort(Y).join("")===L,w.detectDuplicates=!!E,j(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);K.find=ie,K.expr=ie.selectors,K.expr[":"]=K.expr.pseudos,K.unique=ie.uniqueSort,K.text=ie.getText,K.isXMLDoc=ie.isXML,K.contains=ie.contains;var oe=K.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;K.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?K.find.matchesSelector(r,e)?[r]:[]:K.find.matches(e,K.grep(t,function(e){return 1===e.nodeType}))},K.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(K(e).filter(function(){for(t=0;n>t;t++)if(K.contains(i[t],this))return!0}));for(t=0;n>t;t++)K.find(e,i[t],r);return r=this.pushStack(n>1?K.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?K(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=K.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof K?t[0]:t,K.merge(this,K.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),ae.test(n[1])&&K.isPlainObject(t))for(n in t)K.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):K.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(K):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))};ce.prototype=K.fn,le=K(Q);var fe=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};K.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&K(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),K.fn.extend({has:function(e){var t=K(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(K.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=oe.test(e)||"string"!=typeof e?K(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&K.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?K.unique(o):o)},index:function(e){return e?"string"==typeof e?Y.call(K(e),this[0]):Y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(K.unique(K.merge(this.get(),K(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,n){return K.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,n){return K.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return K.dir(e,"previousSibling",n)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return e.contentDocument||K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(n,r){var i=K.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=K.filter(r,i)),this.length>1&&(de[e]||K.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var he=/\S+/g,pe={};K.Callbacks=function(e){e="string"==typeof e?pe[e]||o(e):K.extend({},e);var t,n,r,i,a,s,l=[],u=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,a=l.length,r=!0;l&&a>s;s++)if(l[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:f.disable())},f={add:function(){if(l){var n=l.length;!function o(t){K.each(t,function(t,n){var r=K.type(n);"function"===r?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=l.length:t&&(i=n,c(t))}return this},remove:function(){return l&&K.each(arguments,function(e,t){for(var n;(n=K.inArray(t,l,n))>-1;)l.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?K.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(n){K.each(t,function(t,o){var a=K.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,r):r}},i={};return r.pipe=r.then,K.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=V.call(arguments),a=o.length,s=1!==a||e&&K.isFunction(e.promise)?a:0,l=1===s?e:K.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?V.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&K.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}});var ge;K.fn.ready=function(e){return K.ready.promise().done(e),this},K.extend({isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){(e===!0?--K.readyWait:K.isReady)||(K.isReady=!0,e!==!0&&--K.readyWait>0||(ge.resolveWith(Q,[K]),K.fn.triggerHandler&&(K(Q).triggerHandler("ready"),K(Q).off("ready"))))}}),K.ready.promise=function(t){return ge||(ge=K.Deferred(),"complete"===Q.readyState?setTimeout(K.ready):(Q.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),ge.promise(t)},K.ready.promise();var ve=K.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===K.type(n)){i=!0;for(s in n)K.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,K.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(K(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o};K.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=K.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,K.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(K.isEmptyObject(o))K.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,K.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{K.isArray(t)?r=t.concat(t.map(K.camelCase)):(i=K.camelCase(t),t in a?r=[t,i]:(r=i,r=r in a?[r]:r.match(he)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!K.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var me=new s,ye=new s,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;K.extend({hasData:function(e){return ye.hasData(e)||me.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return me.access(e,t,n)},_removeData:function(e,t){me.remove(e,t)}}),K.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ye.get(o),1===o.nodeType&&!me.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=K.camelCase(r.slice(5)),l(o,r,i[r])));me.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ve(this,function(t){var n,r=K.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,r),void 0!==n)return n;if(n=l(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),K.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=me.get(e,t),n&&(!r||K.isArray(n)?r=me.access(e,t,K.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=K.queue(e,t),r=n.length,i=n.shift(),o=K._queueHooks(e,t),a=function(){K.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return me.get(e,n)||me.access(e,n,{empty:K.Callbacks("once memory").add(function(){me.remove(e,[t+"queue",n])})})}}),K.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?K.queue(this[0],e):void 0===t?this:this.each(function(){var n=K.queue(this,e,t);K._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=K.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=me.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)},Ae=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),G.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";G.focusinBubbles="onfocusin"in e;var ze=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Ce=/^(?:focusinfocus|focusoutblur)$/,Te=/^([^.]*)(?:\.(.+)|)$/;K.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,h,p,g,v=me.get(e);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=K.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof K!==Se&&K.event.triggered!==t.type?K.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],u=t.length;u--;)s=Te.exec(t[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(f=K.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=K.event.special[h]||{},c=K.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&K.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=l[h])||(d=l[h]=[],d.delegateCount=0,f.setup&&f.setup.call(e,r,p,a)!==!1||e.addEventListener&&e.addEventListener(h,a,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),K.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,h,p,g,v=me.hasData(e)&&me.get(e);if(v&&(l=v.events)){for(t=(t||"").match(he)||[""],u=t.length;u--;)if(s=Te.exec(t[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(f=K.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&f.teardown.call(e,p,v.handle)!==!1||K.removeEvent(e,h,v.handle),delete l[h])}else for(h in l)K.event.remove(e,h+t[u],n,r,!0);K.isEmptyObject(l)&&(delete v.handle,me.remove(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,u,c,f,d=[r||Q],h=J.call(t,"type")?t.type:t,p=J.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!Ce.test(h+K.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),u=h.indexOf(":")<0&&"on"+h,t=t[K.expando]?t:new K.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:K.makeArray(n,[t]),f=K.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!K.isWindow(r)){for(l=f.delegateType||h,Ce.test(l+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||Q)&&d.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=d[o++])&&!t.isPropagationStopped();)t.type=o>1?l:f.bindType||h,c=(me.get(a,"events")||{})[t.type]&&me.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&K.acceptData(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!K.acceptData(r)||u&&K.isFunction(r[h])&&!K.isWindow(r)&&(s=r[u],s&&(r[u]=null),K.event.triggered=h,r[h](),K.event.triggered=void 0,s&&(r[u]=s)),t.result}},dispatch:function(e){e=K.event.fix(e);var t,n,r,i,o,a=[],s=V.call(arguments),l=(me.get(this,"events")||{})[e.type]||[],u=K.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=K.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((K.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],n=0;s>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?K(i,this).index(l)>=0:K.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Me.test(i)?this.mouseHooks:ze.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new K.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&K.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return K.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=K.extend(new K.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?K.event.trigger(i,null,t):K.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},K.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},K.Event=function(e,t){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&K.extend(this,t),this.timeStamp=e&&e.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(e,t)},K.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},K.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!K.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),G.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=me.access(r,t);i||r.addEventListener(e,n,!0),me.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=me.access(r,t)-1;i?me.access(r,t,i):(r.removeEventListener(e,n,!0),me.remove(r,t))}}}),K.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return K().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=K.guid++)),this.each(function(){K.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,K(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){K.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?K.event.trigger(e,t,n,!0):void 0}});var Ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je=/<([\w:]+)/,De=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,K.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=K.contains(e.ownerDocument,e);if(!(G.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(a=m(s),o=m(e),r=0,i=o.length;i>r;r++)y(o[r],a[r]);if(t)if(n)for(o=o||m(e),a=a||m(s),r=0,i=o.length;i>r;r++)v(o[r],a[r]);else v(e,s);return a=m(s,"script"),a.length>0&&g(a,!l&&m(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c=t.createDocumentFragment(),f=[],d=0,h=e.length;h>d;d++)if(i=e[d],i||0===i)if("object"===K.type(i))K.merge(f,i.nodeType?[i]:i);else if(De.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(je.exec(i)||["",""])[1].toLowerCase(),s=Re[a]||Re._default,o.innerHTML=s[1]+i.replace(Ee,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;K.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",d=0;i=f[d++];)if((!r||-1===K.inArray(i,r))&&(l=K.contains(i.ownerDocument,i),o=m(c.appendChild(i),"script"),l&&g(o),n))for(u=0;i=o[u++];)Pe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=K.event.special,a=0;void 0!==(n=e[a]);a++){if(K.acceptData(n)&&(i=n[me.expando],i&&(t=me.cache[i]))){if(t.events)for(r in t.events)o[r]?K.event.remove(n,r):K.removeEvent(n,r,t.handle);me.cache[i]&&delete me.cache[i]}delete ye.cache[n[ye.expando]]}}}),K.fn.extend({text:function(e){return ve(this,function(e){return void 0===e?K.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?K.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||K.cleanData(m(n)),n.parentNode&&(t&&K.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(K.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Re[(je.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ee,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(K.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,K.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=$.apply([],e);var n,r,i,o,a,s,l=0,u=this.length,c=this,f=u-1,d=e[0],g=K.isFunction(d);if(g||u>1&&"string"==typeof d&&!G.checkClone&&Ne.test(d))return this.each(function(n){var r=c.eq(n);g&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(u&&(n=K.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=K.map(m(n,"script"),h),o=i.length;u>l;l++)a=n,l!==f&&(a=K.clone(a,!0,!0),o&&K.merge(i,m(a,"script"))),t.call(this[l],a,l);if(o)for(s=i[i.length-1].ownerDocument,K.map(i,p),l=0;o>l;l++)a=i[l],Pe.test(a.type||"")&&!me.access(a,"globalEval")&&K.contains(s,a)&&(a.src?K._evalUrl&&K._evalUrl(a.src):K.globalEval(a.textContent.replace(Ie,"")))}return this}}),K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(e){for(var n,r=[],i=K(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),K(i[a])[t](n),H.apply(r,n.get());return this.pushStack(r)}});var Le,Be={},qe=/^margin/,Ue=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Ve=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,
i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),e.getComputedStyle&&K.extend(G,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),a.removeChild(n),t}}))}(),K.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var $e=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+we+")(.*)$","i"),Ye=new RegExp("^([+-])=("+we+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Je=["Webkit","O","Moz","ms"];K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K.camelCase(t),l=e.style;return t=K.cssProps[s]||(K.cssProps[s]=k(l,s)),a=K.cssHooks[t]||K.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:(o=typeof n,"string"===o&&(i=Ye.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(K.css(e,t)),o="number"),void(null!=n&&n===n&&("number"!==o||K.cssNumber[s]||(n+="px"),G.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=K.camelCase(t);return t=K.cssProps[s]||(K.cssProps[s]=k(e.style,s)),a=K.cssHooks[t]||K.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(o=parseFloat(i),n===!0||K.isNumeric(o)?o||0:i):i}}),K.each(["height","width"],function(e,t){K.cssHooks[t]={get:function(e,n,r){return n?$e.test(K.css(e,"display"))&&0===e.offsetWidth?K.swap(e,We,function(){return z(e,t,r)}):z(e,t,r):void 0},set:function(e,n,r){var i=r&&Ve(e);return A(e,n,r?S(e,t,r,"border-box"===K.css(e,"boxSizing",!1,i),i):0)}}}),K.cssHooks.marginRight=_(G.reliableMarginRight,function(e,t){return t?K.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+_e[r]+t]=o[r]||o[r-2]||o[0];return i}},qe.test(e)||(K.cssHooks[e+t].set=A)}),K.fn.extend({css:function(e,t){return ve(this,function(e,t,n){var r,i,o={},a=0;if(K.isArray(t)){for(r=Ve(e),i=t.length;i>a;a++)o[t[a]]=K.css(e,t[a],!1,r);return o}return void 0!==n?K.style(e,t,n):K.css(e,t)},e,t,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?K(this).show():K(this).hide()})}}),K.Tween=C,C.prototype={constructor:C,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(K.cssNumber[n]?"":"px")},cur:function(){var e=C.propHooks[this.prop];return e&&e.get?e.get(this):C.propHooks._default.get(this)},run:function(e){var t,n=C.propHooks[this.prop];return this.options.duration?this.pos=t=K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.fx=C.prototype.init,K.fx.step={};var Ge,Qe,Ze=/^(?:toggle|show|hide)$/,Ke=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[D],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ke.exec(t),o=i&&i[3]||(K.cssNumber[e]?"":"px"),a=(K.cssNumber[e]||"px"!==o&&+r)&&Ke.exec(K.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,K.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};K.Animation=K.extend(N,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),K.speed=function(e,t,n){var r=e&&"object"==typeof e?K.extend({},e):{complete:n||!n&&t||K.isFunction(e)&&e,duration:e,easing:n&&t||t&&!K.isFunction(t)&&t};return r.duration=K.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in K.fx.speeds?K.fx.speeds[r.duration]:K.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){K.isFunction(r.old)&&r.old.call(this),r.queue&&K.dequeue(this,r.queue)},r},K.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=K.isEmptyObject(e),o=K.speed(t,n,r),a=function(){var t=N(this,K.extend({},e),o);(i||me.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=K.timers,a=me.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&et.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&K.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=me.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=K.timers,a=r?r.length:0;for(n.finish=!0,K.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),K.each(["toggle","show","hide"],function(e,t){var n=K.fn[t];K.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(E(t,!0),e,r,i)}}),K.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),K.timers=[],K.fx.tick=function(){var e,t=0,n=K.timers;for(Ge=K.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||K.fx.stop(),Ge=void 0},K.fx.timer=function(e){K.timers.push(e),e()?K.fx.start():K.timers.pop()},K.fx.interval=13,K.fx.start=function(){Qe||(Qe=setInterval(K.fx.tick,K.fx.interval))},K.fx.stop=function(){clearInterval(Qe),Qe=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fn.delay=function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",G.checkOn=""!==e.value,G.optSelected=n.selected,t.disabled=!0,G.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",G.radioValue="t"===e.value}();var rt,it,ot=K.expr.attrHandle;K.fn.extend({attr:function(e,t){return ve(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})}}),K.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Se?K.prop(e,t,n):(1===o&&K.isXMLDoc(e)||(t=t.toLowerCase(),r=K.attrHooks[t]||(K.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=K.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void K.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(he);if(o&&1===e.nodeType)for(;n=o[i++];)r=K.propFix[n]||n,K.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!G.radioValue&&"radio"===t&&K.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?K.removeAttr(e,n):e.setAttribute(n,n),n}},K.each(K.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||K.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var at=/^(?:input|select|textarea|button)$/i;K.fn.extend({prop:function(e,t){return ve(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[K.propFix[e]||e]})}}),K.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!K.isXMLDoc(e),o&&(t=K.propFix[t]||t,i=K.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),G.optSelected||(K.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),K.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){K.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;K.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,l=0,u=this.length;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=K.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?K.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(K.isFunction(e)?function(n){K(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=K(this),o=e.match(he)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Se||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||e===!1?"":me.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;K.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=K.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,K(this).val()):e,null==i?i="":"number"==typeof i?i+="":K.isArray(i)&&(i=K.map(i,function(e){return null==e?"":e+""})),t=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=K.valHooks[i.type]||K.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)):void 0}}),K.extend({valHooks:{option:{get:function(e){var t=K.find.attr(e,"value");return null!=t?t:K.trim(K.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(G.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&K.nodeName(n.parentNode,"optgroup"))){if(t=K(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=K.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=K.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]={set:function(e,t){return K.isArray(t)?e.checked=K.inArray(K(e).val(),t)>=0:void 0}},G.checkOn||(K.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),K.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ut=K.now(),ct=/\?/;K.parseJSON=function(e){return JSON.parse(e+"")},K.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&K.error("Invalid XML: "+e),t};var ft=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,vt=/^\/\//,mt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},xt={},bt="*/".concat("*"),wt=e.location.href,_t=mt.exec(wt.toLowerCase())||[];K.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:pt.test(_t[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,K.ajaxSettings),t):I(K.ajaxSettings,e)},ajaxPrefilter:P(yt),ajaxTransport:P(xt),ajax:function(e,t){function n(e,t,n,a){var l,c,m,y,b,_=t;2!==x&&(x=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=R(f,w,n)),y=L(f,y,w,l),l?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(K.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(K.etag[i]=b)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,m=y.error,l=!m)):(m=_,(e||!_)&&(_="error",0>e&&(e=0))),w.status=e,w.statusText=(t||_)+"",l?p.resolveWith(d,[c,_,w]):p.rejectWith(d,[w,_,m]),w.statusCode(v),v=void 0,u&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,f,l?c:m]),g.fireWith(d,[w,_]),u&&(h.trigger("ajaxComplete",[w,f]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,u,c,f=K.ajaxSetup({},t),d=f.context||f,h=f.context&&(d.nodeType||d.jquery)?K(d):K.event,p=K.Deferred(),g=K.Callbacks("once memory"),v=f.statusCode||{},m={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=ht.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(vt,_t[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=K.trim(f.dataType||"*").toLowerCase().match(he)||[""],null==f.crossDomain&&(l=mt.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===_t[1]&&l[2]===_t[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(_t[3]||("http:"===_t[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=K.param(f.data,f.traditional)),F(yt,f,t,w),2===x)return w;u=K.event&&f.global,u&&0===K.active++&&K.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=dt.test(i)?i.replace(dt,"$1_="+ut++):i+(ct.test(i)?"&":"?")+"_="+ut++)),f.ifModified&&(K.lastModified[i]&&w.setRequestHeader("If-Modified-Since",K.lastModified[i]),K.etag[i]&&w.setRequestHeader("If-None-Match",K.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(d,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=F(xt,f,t,w)){w.readyState=1,u&&h.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(m,n)}catch(_){if(!(2>x))throw _;n(-1,_)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return K.get(e,t,n,"json")},getScript:function(e,t){return K.get(e,void 0,t,"script")}}),K.each(["get","post"],function(e,t){K[t]=function(e,n,r,i){return K.isFunction(n)&&(i=i||r,r=n,n=void 0),K.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),K._evalUrl=function(e){return K.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},K.fn.extend({wrapAll:function(e){var t;return K.isFunction(e)?this.each(function(t){K(this).wrapAll(e.call(this,t))}):(this[0]&&(t=K(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(K.isFunction(e)?function(t){K(this).wrapInner(e.call(this,t))}:function(){var t=K(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(n){K(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()}}),K.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)};var kt=/%20/g,At=/\[\]$/,St=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;K.param=function(e,t){var n,r=[],i=function(e,t){t=K.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){i(this.name,this.value)});else for(n in e)B(n,e[n],t,i);return r.join("&").replace(kt,"+")},K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=K.prop(this,"elements");return e?K.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!K(this).is(":disabled")&&Mt.test(this.nodeName)&&!zt.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var n=K(this).val();return null==n?null:K.isArray(n)?K.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}}),K.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=0,Tt={},Et={0:200,1223:204},jt=K.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Tt)Tt[e]()}),G.cors=!!jt&&"withCredentials"in jt,G.ajax=jt=!!jt,K.ajaxTransport(function(e){var t;return G.cors||jt&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),a=++Ct;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Tt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Et[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Tt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),K.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=K("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Dt=[],Ot=/(=)\?(?=&|$)|\?\?/;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||K.expando+"_"+ut++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=K.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ot,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||K.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Dt.push(i)),a&&K.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),K.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var r=ae.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=K.buildFragment([e],t,i),i&&i.length&&K(i).remove(),K.merge([],r.childNodes))};var Nt=K.fn.load;K.fn.load=function(e,t,n){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=K.trim(e.slice(s)),e=e.slice(0,s)),K.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&K.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?K("<div>").append(K.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},K.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length};var Pt=e.document.documentElement;K.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=K.css(e,"position"),f=K(e),d={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=K.css(e,"top"),l=K.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),K.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):f.css(d)}},K.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){K.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,K.contains(t,r)?(typeof r.getBoundingClientRect!==Se&&(i=r.getBoundingClientRect()),n=q(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===K.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),K.nodeName(e[0],"html")||(r=e.offset()),r.top+=K.css(e[0],"borderTopWidth",!0),r.left+=K.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-K.css(n,"marginTop",!0),left:t.left-r.left-K.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pt;e&&!K.nodeName(e,"html")&&"static"===K.css(e,"position");)e=e.offsetParent;return e||Pt})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;K.fn[t]=function(i){return ve(this,function(t,i,o){var a=q(t);return void 0===o?a?a[n]:t[i]:void(a?a.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),K.each(["top","left"],function(e,t){K.cssHooks[t]=_(G.pixelPosition,function(e,n){return n?(n=w(e,t),Ue.test(n)?K(e).position()[t]+"px":n):void 0})}),K.each({Height:"height",Width:"width"},function(e,t){K.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){K.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return ve(this,function(t,n,r){var i;return K.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?K.css(t,n,a):K.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),K.fn.size=function(){return this.length},K.fn.andSelf=K.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return K});var Ft=e.jQuery,It=e.$;return K.noConflict=function(t){return e.$===K&&(e.$=It),t&&e.jQuery===K&&(e.jQuery=Ft),K},typeof t===Se&&(e.jQuery=e.$=K),K}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e(o);t&&t.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof t?i.to(t):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),
this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,i),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(o)]);f&&f.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),a=o.data("bs.collapse"),s=a?"toggle":i.data();n.call(o,s)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(t(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",l=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var u=l.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](r):a.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var c=this.getPosition(),f=o[0].offsetWidth,d=o[0].offsetHeight;if(u){var h=s,p=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(p);s="bottom"==s&&c.bottom+d>g.bottom?"top":"top"==s&&c.top-d<g.top?"bottom":"right"==s&&c.right+f>g.width?"left":"left"==s&&c.left-f<g.left?"right":s,o.removeClass(h).addClass(s)}var v=this.getCalculatedOffset(s,c,f,d);this.applyPlacement(v,s);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=o&&(t.top=t.top+o-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var f=/top|bottom/.test(n),d=f?2*c.left-i+l:2*c.top-o+u,h=f?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(d,r[0][h],f)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,s,o)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var u=t.left-o,c=t.left+o+n;u<a.left?i.left=a.left-u:c>a.width&&(i.left=a.left+a.width-c)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=e-r)&&"bottom";var s=null==this.affixed,l=s?i:o.top,u=s?a:t;return null!=n&&i<=n?"top":null!=r&&l+u>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=e(document.body).height();"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),function(e,t,n){!function(e){"use strict";"function"==typeof define&&define.amd?define("datatables",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):jQuery&&!jQuery.fn.dataTable&&e(jQuery)}(function(r){"use strict";function i(e){var t,n,o="a aa ai ao as b fn i m o s ",a={};r.each(e,function(r,s){t=r.match(/^([^A-Z]+?)([A-Z])/),t&&o.indexOf(t[1]+" ")!==-1&&(n=r.replace(t[0],t[2].toLowerCase()),a[n]=r,"o"===t[1]&&i(e[r]))}),e._hungarianMap=a}function o(e,t,a){e._hungarianMap||i(e);var s;r.each(t,function(i,l){s=e._hungarianMap[i],s===n||!a&&t[s]!==n||("o"===s.charAt(0)?(t[s]||(t[s]={}),r.extend(!0,t[s],t[i]),o(e[s],t[s],a)):t[s]=t[i])})}function a(e){var t=Xe.defaults.oLanguage,n=e.sZeroRecords;!e.sEmptyTable&&n&&"No data available in table"===t.sEmptyTable&&Ie(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&n&&"Loading..."===t.sLoadingRecords&&Ie(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var r=e.sDecimal;r&&Ye(r)}function s(e){yt(e,"ordering","bSort"),yt(e,"orderMulti","bSortMulti"),yt(e,"orderClasses","bSortClasses"),yt(e,"orderCellsTop","bSortCellsTop"),yt(e,"order","aaSorting"),
yt(e,"orderFixed","aaSortingFixed"),yt(e,"paging","bPaginate"),yt(e,"pagingType","sPaginationType"),yt(e,"pageLength","iDisplayLength"),yt(e,"searching","bFilter");var t=e.aoSearchCols;if(t)for(var n=0,r=t.length;n<r;n++)t[n]&&o(Xe.models.oSearch,t[n])}function l(e){yt(e,"orderable","bSortable"),yt(e,"orderData","aDataSort"),yt(e,"orderSequence","asSorting"),yt(e,"orderDataType","sortDataType");var t=e.aDataSort;t&&!r.isArray(t)&&(e.aDataSort=[t])}function u(e){var t=e.oBrowser,n=r("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(r("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(r('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),i=n.find(".test");t.bScrollOversize=100===i[0].offsetWidth,t.bScrollbarLeft=1!==Math.round(i.offset().left),n.remove()}function c(e,t,r,i,o,a){var s,l=i,u=!1;for(r!==n&&(s=r,u=!0);l!==o;)e.hasOwnProperty(l)&&(s=u?t(s,e[l],l,e):e[l],u=!0,l+=a);return s}function f(e,n){var i=Xe.defaults.column,o=e.aoColumns.length,a=r.extend({},Xe.models.oColumn,i,{nTh:n?n:t.createElement("th"),sTitle:i.sTitle?i.sTitle:n?n.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[o],mData:i.mData?i.mData:o,idx:o});e.aoColumns.push(a);var s=e.aoPreSearchCols;s[o]=r.extend({},Xe.models.oSearch,s[o]),d(e,o,r(n).data())}function d(e,t,i){var a=e.aoColumns[t],s=e.oClasses,u=r(a.nTh);if(!a.sWidthOrig){a.sWidthOrig=u.attr("width")||null;var c=(u.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(a.sWidthOrig=c[1])}i!==n&&null!==i&&(l(i),o(Xe.defaults.column,i),i.mDataProp===n||i.mData||(i.mData=i.mDataProp),i.sType&&(a._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),r.extend(a,i),Ie(a,i,"sWidth","sWidthOrig"),i.iDataSort!==n&&(a.aDataSort=[i.iDataSort]),Ie(a,i,"aDataSort"));var f=a.mData,d=M(f),h=a.mRender?M(a.mRender):null,p=function(e){return"string"==typeof e&&e.indexOf("@")!==-1};a._bAttrSrc=r.isPlainObject(f)&&(p(f.sort)||p(f.type)||p(f.filter)),a.fnGetData=function(e,t,r){var i=d(e,t,n,r);return h&&t?h(i,t,e,r):i},a.fnSetData=function(e,t,n){return C(f)(e,t,n)},"number"!=typeof f&&(e._rowReadObject=!0),e.oFeatures.bSort||(a.bSortable=!1,u.addClass(s.sSortableNone));var g=r.inArray("asc",a.asSorting)!==-1,v=r.inArray("desc",a.asSorting)!==-1;a.bSortable&&(g||v)?g&&!v?(a.sSortingClass=s.sSortableAsc,a.sSortingClassJUI=s.sSortJUIAscAllowed):!g&&v?(a.sSortingClass=s.sSortableDesc,a.sSortingClassJUI=s.sSortJUIDescAllowed):(a.sSortingClass=s.sSortable,a.sSortingClassJUI=s.sSortJUI):(a.sSortingClass=s.sSortableNone,a.sSortingClassJUI="")}function h(e){if(e.oFeatures.bAutoWidth!==!1){var t=e.aoColumns;ye(e);for(var n=0,r=t.length;n<r;n++)t[n].nTh.style.width=t[n].sWidth}var i=e.oScroll;""===i.sY&&""===i.sX||ve(e),qe(e,null,"column-sizing",[e])}function p(e,t){var n=m(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function g(e,t){var n=m(e,"bVisible"),i=r.inArray(t,n);return i!==-1?i:null}function v(e){return m(e,"bVisible").length}function m(e,t){var n=[];return r.map(e.aoColumns,function(e,r){e[t]&&n.push(r)}),n}function y(e){var t,r,i,o,a,s,l,u,c,f=e.aoColumns,d=e.aoData,h=Xe.ext.type.detect;for(t=0,r=f.length;t<r;t++)if(l=f[t],c=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(i=0,o=h.length;i<o;i++){for(a=0,s=d.length;a<s&&(c[a]===n&&(c[a]=A(e,a,t,"type")),u=h[i](c[a],e),u||i===h.length-1)&&"html"!==u;a++);if(u){l.sType=u;break}}l.sType||(l.sType="string")}}function x(e,t,i,o){var a,s,l,u,c,d,h,p=e.aoColumns;if(t)for(a=t.length-1;a>=0;a--){h=t[a];var g=h.targets!==n?h.targets:h.aTargets;for(r.isArray(g)||(g=[g]),l=0,u=g.length;l<u;l++)if("number"==typeof g[l]&&g[l]>=0){for(;p.length<=g[l];)f(e);o(g[l],h)}else if("number"==typeof g[l]&&g[l]<0)o(p.length+g[l],h);else if("string"==typeof g[l])for(c=0,d=p.length;c<d;c++)("_all"==g[l]||r(p[c].nTh).hasClass(g[l]))&&o(c,h)}if(i)for(a=0,s=i.length;a<s;a++)o(a,i[a])}function b(e,t,n,i){var o=e.aoData.length,a=r.extend(!0,{},Xe.models.oRow,{src:n?"dom":"data"});a._aData=t,e.aoData.push(a);for(var s=e.aoColumns,l=0,u=s.length;l<u;l++)n&&S(e,o,l,A(e,o,l)),s[l].sType=null;return e.aiDisplayMaster.push(o),!n&&e.oFeatures.bDeferRender||N(e,o,n,i),o}function w(e,t){var n;return t instanceof r||(t=r(t)),t.map(function(t,r){return n=O(e,r),b(e,n.data,r,n.cells)})}function _(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null}function k(e,t,n){return r.inArray(n,e.aoData[t].anCells)}function A(e,t,r,i){var o=e.iDraw,a=e.aoColumns[r],s=e.aoData[t]._aData,l=a.sDefaultContent,u=a.fnGetData(s,i,{settings:e,row:t,col:r});if(u===n)return e.iDrawError!=o&&null===l&&(Fe(e,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+t,4),e.iDrawError=o),l;if(u!==s&&null!==u||null===l){if("function"==typeof u)return u.call(s)}else u=l;return null===u&&"display"==i?"":u}function S(e,t,n,r){var i=e.aoColumns[n],o=e.aoData[t]._aData;i.fnSetData(o,r,{settings:e,row:t,col:n})}function z(e){return r.map(e.match(/(\\.|[^\.])+/g),function(e){return e.replace(/\\./g,".")})}function M(e){if(r.isPlainObject(e)){var t={};return r.each(e,function(e,n){n&&(t[e]=M(n))}),function(e,r,i,o){var a=t[r]||t._;return a!==n?a(e,r,i,o):e}}if(null===e)return function(e){return e};if("function"==typeof e)return function(t,n,r,i){return e(t,n,r,i)};if("string"!=typeof e||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){return t[e]};var i=function(e,t,r){var o,a,s,l;if(""!==r)for(var u=z(r),c=0,f=u.length;c<f;c++){if(o=u[c].match(xt),a=u[c].match(bt),o){u[c]=u[c].replace(xt,""),""!==u[c]&&(e=e[u[c]]),s=[],u.splice(0,c+1),l=u.join(".");for(var d=0,h=e.length;d<h;d++)s.push(i(e[d],t,l));var p=o[0].substring(1,o[0].length-1);e=""===p?s:s.join(p);break}if(a)u[c]=u[c].replace(bt,""),e=e[u[c]]();else{if(null===e||e[u[c]]===n)return n;e=e[u[c]]}}return e};return function(t,n){return i(t,n,e)}}function C(e){if(r.isPlainObject(e))return C(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,r){e(t,"set",n,r)};if("string"!=typeof e||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){t[e]=n};var t=function(e,r,i){for(var o,a,s,l,u,c=z(i),f=c[c.length-1],d=0,h=c.length-1;d<h;d++){if(a=c[d].match(xt),s=c[d].match(bt),a){c[d]=c[d].replace(xt,""),e[c[d]]=[],o=c.slice(),o.splice(0,d+1),u=o.join(".");for(var p=0,g=r.length;p<g;p++)l={},t(l,r[p],u),e[c[d]].push(l);return}s&&(c[d]=c[d].replace(bt,""),e=e[c[d]](r)),null!==e[c[d]]&&e[c[d]]!==n||(e[c[d]]={}),e=e[c[d]]}f.match(bt)?e=e[f.replace(bt,"")](r):e[f.replace(xt,"")]=r};return function(n,r){return t(n,r,e)}}function T(e){return dt(e.aoData,"_aData")}function E(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0}function j(e,t,r){for(var i=-1,o=0,a=e.length;o<a;o++)e[o]==t?i=o:e[o]>t&&e[o]--;i!=-1&&r===n&&e.splice(i,1)}function D(e,t,r,i){var o,a,s=e.aoData[t],l=function(n,r){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=A(e,t,r,"display")};if("dom"!==r&&(r&&"auto"!==r||"dom"!==s.src)){var u=s.anCells;if(u)if(i!==n)l(u[i],i);else for(o=0,a=u.length;o<a;o++)l(u[o],o)}else s._aData=O(e,s,i,i===n?n:s._aData).data;s._aSortData=null,s._aFilterData=null;var c=e.aoColumns;if(i!==n)c[i].sType=null;else{for(o=0,a=c.length;o<a;o++)c[o].sType=null;P(s)}}function O(e,t,i,o){var a,s,l,u=[],c=t.firstChild,f=0,d=e.aoColumns,h=e._rowReadObject;o=o||h?{}:[];var p=function(e,t){if("string"==typeof e){var n=e.indexOf("@");if(n!==-1){var r=e.substring(n+1),i=C(e);i(o,t.getAttribute(r))}}},g=function(e){if(i===n||i===f)if(s=d[f],l=r.trim(e.innerHTML),s&&s._bAttrSrc){var t=C(s.mData._);t(o,l),p(s.mData.sort,e),p(s.mData.type,e),p(s.mData.filter,e)}else h?(s._setter||(s._setter=C(s.mData)),s._setter(o,l)):o[f]=l;f++};if(c)for(;c;)a=c.nodeName.toUpperCase(),"TD"!=a&&"TH"!=a||(g(c),u.push(c)),c=c.nextSibling;else{u=t.anCells;for(var v=0,m=u.length;v<m;v++)g(u[v])}return{data:o,cells:u}}function N(e,n,r,i){var o,a,s,l,u,c=e.aoData[n],f=c._aData,d=[];if(null===c.nTr){for(o=r||t.createElement("tr"),c.nTr=o,c.anCells=d,o._DT_RowIndex=n,P(c),l=0,u=e.aoColumns.length;l<u;l++)s=e.aoColumns[l],a=r?i[l]:t.createElement(s.sCellType),d.push(a),r&&!s.mRender&&s.mData===l||(a.innerHTML=A(e,n,l,"display")),s.sClass&&(a.className+=" "+s.sClass),s.bVisible&&!r?o.appendChild(a):!s.bVisible&&r&&a.parentNode.removeChild(a),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,a,A(e,n,l),f,n,l);qe(e,"aoRowCreatedCallback",null,[o,f,n])}c.nTr.setAttribute("role","row")}function P(e){var t=e.nTr,n=e._aData;if(t){if(n.DT_RowId&&(t.id=n.DT_RowId),n.DT_RowClass){var i=n.DT_RowClass.split(" ");e.__rowc=e.__rowc?mt(e.__rowc.concat(i)):i,r(t).removeClass(e.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowAttr&&r(t).attr(n.DT_RowAttr),n.DT_RowData&&r(t).data(n.DT_RowData)}}function F(e){var t,n,i,o,a,s=e.nTHead,l=e.nTFoot,u=0===r("th, td",s).length,c=e.oClasses,f=e.aoColumns;for(u&&(o=r("<tr/>").appendTo(s)),t=0,n=f.length;t<n;t++)a=f[t],i=r(a.nTh).addClass(a.sClass),u&&i.appendTo(o),e.oFeatures.bSort&&(i.addClass(a.sSortingClass),a.bSortable!==!1&&(i.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),Ee(e,a.nTh,t))),a.sTitle!=i.html()&&i.html(a.sTitle),Ve(e,"header")(e,i,a,c);if(u&&q(e.aoHeader,s),r(s).find(">tr").attr("role","row"),r(s).find(">tr>th, >tr>td").addClass(c.sHeaderTH),r(l).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==l){var d=e.aoFooter[0];for(t=0,n=d.length;t<n;t++)a=f[t],a.nTf=d[t].cell,a.sClass&&r(a.nTf).addClass(a.sClass)}}function I(e,t,i){var o,a,s,l,u,c,f,d,h,p=[],g=[],v=e.aoColumns.length;if(t){for(i===n&&(i=!1),o=0,a=t.length;o<a;o++){for(p[o]=t[o].slice(),p[o].nTr=t[o].nTr,s=v-1;s>=0;s--)e.aoColumns[s].bVisible||i||p[o].splice(s,1);g.push([])}for(o=0,a=p.length;o<a;o++){if(f=p[o].nTr)for(;c=f.firstChild;)f.removeChild(c);for(s=0,l=p[o].length;s<l;s++)if(d=1,h=1,g[o][s]===n){for(f.appendChild(p[o][s].cell),g[o][s]=1;p[o+d]!==n&&p[o][s].cell==p[o+d][s].cell;)g[o+d][s]=1,d++;for(;p[o][s+h]!==n&&p[o][s].cell==p[o][s+h].cell;){for(u=0;u<d;u++)g[o+u][s+h]=1;h++}r(p[o][s].cell).attr("rowspan",d).attr("colspan",h)}}}}function R(e){var t=qe(e,"aoPreDrawCallback","preDraw",[e]);if(r.inArray(!1,t)!==-1)return void pe(e,!1);var i=[],o=0,a=e.asStripeClasses,s=a.length,l=(e.aoOpenRows.length,e.oLanguage),u=e.iInitDisplayStart,c="ssp"==$e(e),f=e.aiDisplay;e.bDrawing=!0,u!==n&&u!==-1&&(e._iDisplayStart=c?u:u>=e.fnRecordsDisplay()?0:u,e.iInitDisplayStart=-1);var d=e._iDisplayStart,h=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,pe(e,!1);else if(c){if(!e.bDestroying&&!$(e))return}else e.iDraw++;if(0!==f.length)for(var p=c?0:d,g=c?e.aoData.length:h,m=p;m<g;m++){var y=f[m],x=e.aoData[y];null===x.nTr&&N(e,y);var b=x.nTr;if(0!==s){var w=a[o%s];x._sRowStripe!=w&&(r(b).removeClass(x._sRowStripe).addClass(w),x._sRowStripe=w)}qe(e,"aoRowCallback",null,[b,x._aData,o,m]),i.push(b),o++}else{var _=l.sZeroRecords;1==e.iDraw&&"ajax"==$e(e)?_=l.sLoadingRecords:l.sEmptyTable&&0===e.fnRecordsTotal()&&(_=l.sEmptyTable),i[0]=r("<tr/>",{"class":s?a[0]:""}).append(r("<td />",{valign:"top",colSpan:v(e),"class":e.oClasses.sRowEmpty}).html(_))[0]}qe(e,"aoHeaderCallback","header",[r(e.nTHead).children("tr")[0],T(e),d,h,f]),qe(e,"aoFooterCallback","footer",[r(e.nTFoot).children("tr")[0],T(e),d,h,f]);var k=r(e.nTBody);k.children().detach(),k.append(r(i)),qe(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}function L(e,t){var n=e.oFeatures,r=n.bSort,i=n.bFilter;r&&Me(e),i?J(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),t!==!0&&(e._iDisplayStart=0),e._drawHold=t,R(e),e._drawHold=!1}function B(e){var t=e.oClasses,n=r(e.nTable),i=r("<div/>").insertBefore(n),o=e.oFeatures,a=r("<div/>",{id:e.sTableId+"_wrapper","class":t.sWrapper+(e.nTFoot?"":" "+t.sNoFooter)});e.nHolding=i[0],e.nTableWrapper=a[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var s,l,u,c,f,d,h=e.sDom.split(""),p=0;p<h.length;p++){if(s=null,l=h[p],"<"==l){if(u=r("<div/>")[0],c=h[p+1],"'"==c||'"'==c){for(f="",d=2;h[p+d]!=c;)f+=h[p+d],d++;if("H"==f?f=t.sJUIHeader:"F"==f&&(f=t.sJUIFooter),f.indexOf(".")!=-1){var g=f.split(".");u.id=g[0].substr(1,g[0].length-1),u.className=g[1]}else"#"==f.charAt(0)?u.id=f.substr(1,f.length-1):u.className=f;p+=d}a.append(u),a=r(u)}else if(">"==l)a=a.parent();else if("l"==l&&o.bPaginate&&o.bLengthChange)s=ce(e);else if("f"==l&&o.bFilter)s=X(e);else if("r"==l&&o.bProcessing)s=he(e);else if("t"==l)s=ge(e);else if("i"==l&&o.bInfo)s=ie(e);else if("p"==l&&o.bPaginate)s=fe(e);else if(0!==Xe.ext.feature.length)for(var v=Xe.ext.feature,m=0,y=v.length;m<y;m++)if(l==v[m].cFeature){s=v[m].fnInit(e);break}if(s){var x=e.aanFeatures;x[l]||(x[l]=[]),x[l].push(s),a.append(s)}}i.replaceWith(a)}function q(e,t){var n,i,o,a,s,l,u,c,f,d,h,p=r(t).children("tr"),g=function(e,t,n){for(var r=e[t];r[n];)n++;return n};for(e.splice(0,e.length),o=0,l=p.length;o<l;o++)e.push([]);for(o=0,l=p.length;o<l;o++)for(n=p[o],c=0,i=n.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase())for(f=1*i.getAttribute("colspan"),d=1*i.getAttribute("rowspan"),f=f&&0!==f&&1!==f?f:1,d=d&&0!==d&&1!==d?d:1,u=g(e,o,c),h=1===f,s=0;s<f;s++)for(a=0;a<d;a++)e[o+a][u+s]={cell:i,unique:h},e[o+a].nTr=n;i=i.nextSibling}}function U(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],q(n,t)));for(var i=0,o=n.length;i<o;i++)for(var a=0,s=n[i].length;a<s;a++)!n[i][a].unique||r[a]&&e.bSortCellsTop||(r[a]=n[i][a].cell);return r}function V(e,t,n){if(qe(e,"aoServerParams","serverParams",[t]),t&&r.isArray(t)){var i={},o=/(.*?)\[\]$/;r.each(t,function(e,t){var n=t.name.match(o);if(n){var r=n[0];i[r]||(i[r]=[]),i[r].push(t.value)}else i[t.name]=t.value}),t=i}var a,s=e.ajax,l=e.oInstance,u=function(t){qe(e,null,"xhr",[e,t,e.jqXHR]),n(t)};if(r.isPlainObject(s)&&s.data){a=s.data;var c=r.isFunction(a)?a(t,e):a;t=r.isFunction(a)&&c?c:r.extend(!0,t,c),delete s.data}var f={data:t,success:function(t){var n=t.error||t.sError;n&&Fe(e,0,n),e.json=t,u(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(t,n,i){var o=qe(e,null,"xhr",[e,null,e.jqXHR]);r.inArray(!0,o)===-1&&("parsererror"==n?Fe(e,0,"Invalid JSON response",1):4===t.readyState&&Fe(e,0,"Ajax error",7)),pe(e,!1)}};e.oAjaxData=t,qe(e,null,"preXhr",[e,t]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,r.map(t,function(e,t){return{name:t,value:e}}),u,e):e.sAjaxSource||"string"==typeof s?e.jqXHR=r.ajax(r.extend(f,{url:s||e.sAjaxSource})):r.isFunction(s)?e.jqXHR=s.call(l,t,u,e):(e.jqXHR=r.ajax(r.extend(f,s)),s.data=a)}function $(e){return!e.bAjaxDataGet||(e.iDraw++,pe(e,!0),V(e,H(e),function(t){Y(e,t)}),!1)}function H(e){var t,n,i,o,a=e.aoColumns,s=a.length,l=e.oFeatures,u=e.oPreviousSearch,c=e.aoPreSearchCols,f=[],d=ze(e),h=e._iDisplayStart,p=l.bPaginate!==!1?e._iDisplayLength:-1,g=function(e,t){f.push({name:e,value:t})};g("sEcho",e.iDraw),g("iColumns",s),g("sColumns",dt(a,"sName").join(",")),g("iDisplayStart",h),g("iDisplayLength",p);var v={draw:e.iDraw,columns:[],order:[],start:h,length:p,search:{value:u.sSearch,regex:u.bRegex}};for(t=0;t<s;t++)i=a[t],o=c[t],n="function"==typeof i.mData?"function":i.mData,v.columns.push({data:n,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),g("mDataProp_"+t,n),l.bFilter&&(g("sSearch_"+t,o.sSearch),g("bRegex_"+t,o.bRegex),g("bSearchable_"+t,i.bSearchable)),l.bSort&&g("bSortable_"+t,i.bSortable);l.bFilter&&(g("sSearch",u.sSearch),g("bRegex",u.bRegex)),l.bSort&&(r.each(d,function(e,t){v.order.push({column:t.col,dir:t.dir}),g("iSortCol_"+e,t.col),g("sSortDir_"+e,t.dir)}),g("iSortingCols",d.length));var m=Xe.ext.legacy.ajax;return null===m?e.sAjaxSource?f:v:m?f:v}function Y(e,t){var r=function(e,r){return t[e]!==n?t[e]:t[r]},i=W(e,t),o=r("sEcho","draw"),a=r("iTotalRecords","recordsTotal"),s=r("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<e.iDraw)return;e.iDraw=1*o}E(e),e._iRecordsTotal=parseInt(a,10),e._iRecordsDisplay=parseInt(s,10);for(var l=0,u=i.length;l<u;l++)b(e,i[l]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,R(e),e._bInitComplete||le(e,t),e.bAjaxDataGet=!0,pe(e,!1)}function W(e,t){var i=r.isPlainObject(e.ajax)&&e.ajax.dataSrc!==n?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===i?t.aaData||t[i]:""!==i?M(i)(t):t}function X(e){var n=e.oClasses,i=e.sTableId,o=e.oLanguage,a=e.oPreviousSearch,s=e.aanFeatures,l='<input type="search" class="'+n.sFilterInput+'"/>',u=o.sSearch;u=u.match(/_INPUT_/)?u.replace("_INPUT_",l):u+l;var c=r("<div/>",{id:s.f?null:i+"_filter","class":n.sFilter}).append(r("<label/>").append(u)),f=function(){var t=(s.f,this.value?this.value:"");t!=a.sSearch&&(J(e,{sSearch:t,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),e._iDisplayStart=0,R(e))},d=null!==e.searchDelay?e.searchDelay:"ssp"===$e(e)?400:0,h=r("input",c).val(a.sSearch).attr("placeholder",o.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",d?xe(f,d):f).bind("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",i);return r(e.nTable).on("search.dt.DT",function(n,r){if(e===r)try{h[0]!==t.activeElement&&h.val(a.sSearch)}catch(i){}}),c[0]}function J(e,t,r){var i=e.oPreviousSearch,o=e.aoPreSearchCols,a=function(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive},s=function(e){return e.bEscapeRegex!==n?!e.bEscapeRegex:e.bRegex};if(y(e),"ssp"!=$e(e)){Z(e,t.sSearch,r,s(t),t.bSmart,t.bCaseInsensitive),a(t);for(var l=0;l<o.length;l++)Q(e,o[l].sSearch,l,s(o[l]),o[l].bSmart,o[l].bCaseInsensitive);G(e)}else a(t);e.bFiltered=!0,qe(e,null,"search",[e])}function G(e){for(var t,n,r=Xe.ext.search,i=e.aiDisplay,o=0,a=r.length;o<a;o++){for(var s=[],l=0,u=i.length;l<u;l++)n=i[l],t=e.aoData[n],r[o](e,t._aFilterData,n,t._aData,l)&&s.push(n);i.length=0,i.push.apply(i,s)}}function Q(e,t,n,r,i,o){if(""!==t)for(var a,s=e.aiDisplay,l=K(t,r,i,o),u=s.length-1;u>=0;u--)a=e.aoData[s[u]]._aFilterData[n],l.test(a)||s.splice(u,1)}function Z(e,t,n,r,i,o){var a,s,l,u=K(t,r,i,o),c=e.oPreviousSearch.sSearch,f=e.aiDisplayMaster;if(0!==Xe.ext.search.length&&(n=!0),s=te(e),t.length<=0)e.aiDisplay=f.slice();else for((s||n||c.length>t.length||0!==t.indexOf(c)||e.bSorted)&&(e.aiDisplay=f.slice()),a=e.aiDisplay,l=a.length-1;l>=0;l--)u.test(e.aoData[a[l]]._sFilterRow)||a.splice(l,1)}function K(e,t,n,i){if(e=t?e:ee(e),n){var o=r.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if('"'===e.charAt(0)){var t=e.match(/^"(.*)"$/);e=t?t[1]:e}return e.replace('"',"")});e="^(?=.*?"+o.join(")(?=.*?")+").*$"}return new RegExp(e,i?"i":"")}function ee(e){return e.replace(it,"\\$1")}function te(e){var t,n,r,i,o,a,s,l,u=e.aoColumns,c=Xe.ext.type.search,f=!1;for(n=0,i=e.aoData.length;n<i;n++)if(l=e.aoData[n],!l._aFilterData){for(a=[],r=0,o=u.length;r<o;r++)t=u[r],t.bSearchable?(s=A(e,n,r,"filter"),c[t.sType]&&(s=c[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&s.indexOf("&")!==-1&&(wt.innerHTML=s,s=_t?wt.textContent:wt.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),f=!0}return f}function ne(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function re(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function ie(e){var t=e.sTableId,n=e.aanFeatures.i,i=r("<div/>",{"class":e.oClasses.sInfo,id:n?null:t+"_info"});return n||(e.aoDrawCallback.push({fn:oe,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),r(e.nTable).attr("aria-describedby",t+"_info")),i[0]}function oe(e){var t=e.aanFeatures.i;if(0!==t.length){var n=e.oLanguage,i=e._iDisplayStart+1,o=e.fnDisplayEnd(),a=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),l=s?n.sInfo:n.sInfoEmpty;s!==a&&(l+=" "+n.sInfoFiltered),l+=n.sInfoPostFix,l=ae(e,l);var u=n.fnInfoCallback;null!==u&&(l=u.call(e.oInstance,e,i,o,a,s,l)),r(t).html(l)}}function ae(e,t){var n=e.fnFormatNumber,r=e._iDisplayStart+1,i=e._iDisplayLength,o=e.fnRecordsDisplay(),a=i===-1;return t.replace(/_START_/g,n.call(e,r)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,o)).replace(/_PAGE_/g,n.call(e,a?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(e,a?1:Math.ceil(o/i)))}function se(e){var t,n,r,i=e.iInitDisplayStart,o=e.aoColumns,a=e.oFeatures;if(!e.bInitialised)return void setTimeout(function(){se(e)},200);for(B(e),F(e),I(e,e.aoHeader),I(e,e.aoFooter),pe(e,!0),a.bAutoWidth&&ye(e),t=0,n=o.length;t<n;t++)r=o[t],r.sWidth&&(r.nTh.style.width=Ae(r.sWidth));L(e);var s=$e(e);"ssp"!=s&&("ajax"==s?V(e,[],function(n){var r=W(e,n);for(t=0;t<r.length;t++)b(e,r[t]);e.iInitDisplayStart=i,L(e),pe(e,!1),le(e,n)},e):(pe(e,!1),le(e)))}function le(e,t){e._bInitComplete=!0,t&&h(e),qe(e,"aoInitComplete","init",[e,t])}function ue(e,t){var n=parseInt(t,10);e._iDisplayLength=n,Ue(e),qe(e,null,"length",[e,n])}function ce(e){for(var t=e.oClasses,n=e.sTableId,i=e.aLengthMenu,o=r.isArray(i[0]),a=o?i[0]:i,s=o?i[1]:i,l=r("<select/>",{name:n+"_length","aria-controls":n,"class":t.sLengthSelect}),u=0,c=a.length;u<c;u++)l[0][u]=new Option(s[u],a[u]);var f=r("<div><label/></div>").addClass(t.sLength);return e.aanFeatures.l||(f[0].id=n+"_length"),f.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),r("select",f).val(e._iDisplayLength).bind("change.DT",function(t){ue(e,r(this).val()),R(e)}),r(e.nTable).bind("length.dt.DT",function(t,n,i){e===n&&r("select",f).val(i)}),f[0]}function fe(e){var t=e.sPaginationType,n=Xe.ext.pager[t],i="function"==typeof n,o=function(e){R(e)},a=r("<div/>").addClass(e.oClasses.sPaging+t)[0],s=e.aanFeatures;return i||n.fnInit(e,a,o),s.p||(a.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(e){if(i){var t,r,a=e._iDisplayStart,l=e._iDisplayLength,u=e.fnRecordsDisplay(),c=l===-1,f=c?0:Math.ceil(a/l),d=c?1:Math.ceil(u/l),h=n(f,d);for(t=0,r=s.p.length;t<r;t++)Ve(e,"pageButton")(e,s.p[t],t,h,f,d)}else n.fnUpdate(e,o)},sName:"pagination"})),a}function de(e,t,n){var r=e._iDisplayStart,i=e._iDisplayLength,o=e.fnRecordsDisplay();0===o||i===-1?r=0:"number"==typeof t?(r=t*i,r>o&&(r=0)):"first"==t?r=0:"previous"==t?(r=i>=0?r-i:0,r<0&&(r=0)):"next"==t?r+i<o&&(r+=i):"last"==t?r=Math.floor((o-1)/i)*i:Fe(e,0,"Unknown paging action: "+t,5);var a=e._iDisplayStart!==r;return e._iDisplayStart=r,a&&(qe(e,null,"page",[e]),n&&R(e)),a}function he(e){return r("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing","class":e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function pe(e,t){e.oFeatures.bProcessing&&r(e.aanFeatures.r).css("display",t?"block":"none"),qe(e,null,"processing",[e,t])}function ge(e){var t=r(e.nTable);t.attr("role","grid");var n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;var i=n.sX,o=n.sY,a=e.oClasses,s=t.children("caption"),l=s.length?s[0]._captionSide:null,u=r(t[0].cloneNode(!1)),c=r(t[0].cloneNode(!1)),f=t.children("tfoot"),d="<div/>",h=function(e){return e?Ae(e):null};n.sX&&"100%"===t.attr("width")&&t.removeAttr("width"),f.length||(f=null);var p=r(d,{"class":a.sScrollWrapper}).append(r(d,{"class":a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?h(i):"100%"}).append(r(d,{"class":a.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(t.children("thead"))))).append(r(d,{"class":a.sScrollBody}).css({overflow:"auto",height:h(o),width:h(i)}).append(t));f&&p.append(r(d,{"class":a.sScrollFoot}).css({overflow:"hidden",border:0,width:i?h(i):"100%"}).append(r(d,{"class":a.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(t.children("tfoot")))));var g=p.children(),v=g[0],m=g[1],y=f?g[2]:null;return i&&r(m).on("scroll.DT",function(e){var t=this.scrollLeft;v.scrollLeft=t,f&&(y.scrollLeft=t)}),e.nScrollHead=v,e.nScrollBody=m,e.nScrollFoot=y,e.aoDrawCallback.push({fn:ve,sName:"scrolling"}),p[0]}function ve(e){var t,n,i,o,a,s,l,u,c,f=e.oScroll,d=f.sX,h=f.sXInner,g=f.sY,v=f.iBarWidth,m=r(e.nScrollHead),y=m[0].style,x=m.children("div"),b=x[0].style,w=x.children("table"),_=e.nScrollBody,k=r(_),A=_.style,S=r(e.nScrollFoot),z=S.children("div"),M=z.children("table"),C=r(e.nTHead),T=r(e.nTable),E=T[0],j=E.style,D=e.nTFoot?r(e.nTFoot):null,O=e.oBrowser,N=O.bScrollOversize,P=[],F=[],I=[],R=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};if(T.children("thead, tfoot").remove(),a=C.clone().prependTo(T),t=C.find("tr"),i=a.find("tr"),a.find("th, td").removeAttr("tabindex"),D&&(s=D.clone().prependTo(T),n=D.find("tr"),o=s.find("tr")),d||(A.width="100%",m[0].style.width="100%"),r.each(U(e,a),function(t,n){l=p(e,t),n.style.width=e.aoColumns[l].sWidth}),D&&me(function(e){e.style.width=""},o),f.bCollapse&&""!==g&&(A.height=k[0].offsetHeight+C[0].offsetHeight+"px"),c=T.outerWidth(),""===d?(j.width="100%",N&&(T.find("tbody").height()>_.offsetHeight||"scroll"==k.css("overflow-y"))&&(j.width=Ae(T.outerWidth()-v))):""!==h?j.width=Ae(h):c==k.width()&&k.height()<T.height()?(j.width=Ae(c-v),T.outerWidth()>c-v&&(j.width=Ae(c))):j.width=Ae(c),c=T.outerWidth(),me(R,i),me(function(e){I.push(e.innerHTML),P.push(Ae(r(e).css("width")))},i),me(function(e,t){e.style.width=P[t]},t),r(i).height(0),D&&(me(R,o),me(function(e){F.push(Ae(r(e).css("width")))},o),me(function(e,t){e.style.width=F[t]},n),r(o).height(0)),me(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+I[t]+"</div>",e.style.width=P[t]},i),D&&me(function(e,t){e.innerHTML="",e.style.width=F[t]},o),T.outerWidth()<c?(u=_.scrollHeight>_.offsetHeight||"scroll"==k.css("overflow-y")?c+v:c,N&&(_.scrollHeight>_.offsetHeight||"scroll"==k.css("overflow-y"))&&(j.width=Ae(u-v)),""!==d&&""===h||Fe(e,1,"Possible column misalignment",6)):u="100%",A.width=Ae(u),y.width=Ae(u),D&&(e.nScrollFoot.style.width=Ae(u)),g||N&&(A.height=Ae(E.offsetHeight+v)),g&&f.bCollapse){A.height=Ae(g);var L=d&&E.offsetWidth>_.offsetWidth?v:0;E.offsetHeight<_.offsetHeight&&(A.height=Ae(E.offsetHeight+L))}var B=T.outerWidth();w[0].style.width=Ae(B),b.width=Ae(B);var q=T.height()>_.clientHeight||"scroll"==k.css("overflow-y"),V="padding"+(O.bScrollbarLeft?"Left":"Right");b[V]=q?v+"px":"0px",D&&(M[0].style.width=Ae(B),z[0].style.width=Ae(B),z[0].style[V]=q?v+"px":"0px"),k.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(_.scrollTop=0)}function me(e,t,n){for(var r,i,o=0,a=0,s=t.length;a<s;){for(r=t[a].firstChild,i=n?n[a].firstChild:null;r;)1===r.nodeType&&(n?e(r,i,o):e(r,o),o++),r=r.nextSibling,i=n?i.nextSibling:null;a++}}function ye(t){var n,i,o,a,s,l=t.nTable,u=t.aoColumns,c=t.oScroll,f=c.sY,d=c.sX,p=c.sXInner,g=u.length,y=m(t,"bVisible"),x=r("th",t.nTHead),b=l.getAttribute("width"),w=l.parentNode,_=!1,k=l.style.width;for(k&&k.indexOf("%")!==-1&&(b=k),n=0;n<y.length;n++)i=u[y[n]],null!==i.sWidth&&(i.sWidth=be(i.sWidthOrig,w),_=!0);if(_||d||f||g!=v(t)||g!=x.length){var A=r(l).clone().css("visibility","hidden").removeAttr("id");A.find("tbody tr").remove();var S=r("<tr/>").appendTo(A.find("tbody"));for(A.find("tfoot th, tfoot td").css("width",""),x=U(t,A.find("thead")[0]),n=0;n<y.length;n++)i=u[y[n]],x[n].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?Ae(i.sWidthOrig):"";if(t.aoData.length)for(n=0;n<y.length;n++)o=y[n],i=u[o],r(_e(t,o)).clone(!1).append(i.sContentPadding).appendTo(S);if(A.appendTo(w),d&&p?A.width(p):d?(A.css("width","auto"),A.width()<w.offsetWidth&&A.width(w.offsetWidth)):f?A.width(w.offsetWidth):b&&A.width(b),we(t,A[0]),d){var z=0;for(n=0;n<y.length;n++)i=u[y[n]],s=r(x[n]).outerWidth(),z+=null===i.sWidthOrig?s:parseInt(i.sWidth,10)+s-r(x[n]).width();A.width(Ae(z)),l.style.width=Ae(z)}for(n=0;n<y.length;n++)i=u[y[n]],a=r(x[n]).width(),a&&(i.sWidth=Ae(a));l.style.width=Ae(A.css("width")),A.remove()}else for(n=0;n<g;n++)u[n].sWidth=Ae(x.eq(n).width());if(b&&(l.style.width=Ae(b)),(b||d)&&!t._reszEvt){var M=function(){r(e).bind("resize.DT-"+t.sInstance,xe(function(){h(t)}))};t.oBrowser.bScrollOversize?setTimeout(M,1e3):M(),t._reszEvt=!0}}function xe(e,t){var r,i,o=t!==n?t:200;return function(){var t=this,a=+new Date,s=arguments;r&&a<r+o?(clearTimeout(i),i=setTimeout(function(){r=n,e.apply(t,s)},o)):(r=a,e.apply(t,s))}}function be(e,n){if(!e)return 0;var i=r("<div/>").css("width",Ae(e)).appendTo(n||t.body),o=i[0].offsetWidth;return i.remove(),o}function we(e,t){var n=e.oScroll;if(n.sX||n.sY){var i=n.sX?0:n.iBarWidth;t.style.width=Ae(r(t).outerWidth()-i)}}function _e(e,t){var n=ke(e,t);if(n<0)return null;var i=e.aoData[n];return i.nTr?i.anCells[t]:r("<td/>").html(A(e,n,t,"display"))[0]}function ke(e,t){for(var n,r=-1,i=-1,o=0,a=e.aoData.length;o<a;o++)n=A(e,o,t,"display")+"",n=n.replace(kt,""),n.length>r&&(r=n.length,i=o);return i}function Ae(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Se(){var e=Xe.__scrollbarWidth;if(e===n){var t=r("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body");e=t[0].offsetWidth-t[0].clientWidth,Xe.__scrollbarWidth=e,t.remove()}return e}function ze(e){var t,i,o,a,s,l,u,c=[],f=e.aoColumns,d=e.aaSortingFixed,h=r.isPlainObject(d),p=[],g=function(e){e.length&&!r.isArray(e[0])?p.push(e):p.push.apply(p,e)};for(r.isArray(d)&&g(d),h&&d.pre&&g(d.pre),g(e.aaSorting),h&&d.post&&g(d.post),t=0;t<p.length;t++)for(u=p[t][0],a=f[u].aDataSort,i=0,o=a.length;i<o;i++)s=a[i],l=f[s].sType||"string",p[t]._idx===n&&(p[t]._idx=r.inArray(p[t][1],f[s].asSorting)),c.push({src:u,col:s,dir:p[t][1],index:p[t]._idx,type:l,formatter:Xe.ext.type.order[l+"-pre"]});return c}function Me(e){var t,n,r,i,o,a=[],s=Xe.ext.type.order,l=e.aoData,u=(e.aoColumns,0),c=e.aiDisplayMaster;for(y(e),o=ze(e),t=0,n=o.length;t<n;t++)i=o[t],i.formatter&&u++,De(e,i.col);if("ssp"!=$e(e)&&0!==o.length){for(t=0,r=c.length;t<r;t++)a[c[t]]=t;u===o.length?c.sort(function(e,t){var n,r,i,s,u,c=o.length,f=l[e]._aSortData,d=l[t]._aSortData;for(i=0;i<c;i++)if(u=o[i],n=f[u.col],r=d[u.col],s=n<r?-1:n>r?1:0,0!==s)return"asc"===u.dir?s:-s;return n=a[e],r=a[t],n<r?-1:n>r?1:0}):c.sort(function(e,t){var n,r,i,u,c,f,d=o.length,h=l[e]._aSortData,p=l[t]._aSortData;for(i=0;i<d;i++)if(c=o[i],n=h[c.col],r=p[c.col],f=s[c.type+"-"+c.dir]||s["string-"+c.dir],u=f(n,r),0!==u)return u;return n=a[e],r=a[t],n<r?-1:n>r?1:0})}e.bSorted=!0}function Ce(e){for(var t,n,r=e.aoColumns,i=ze(e),o=e.oLanguage.oAria,a=0,s=r.length;a<s;a++){var l=r[a],u=l.asSorting,c=l.sTitle.replace(/<.*?>/g,""),f=l.nTh;f.removeAttribute("aria-sort"),l.bSortable?(i.length>0&&i[0].col==a?(f.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=u[i[0].index+1]||u[0]):n=u[0],t=c+("asc"===n?o.sSortAscending:o.sSortDescending)):t=c,f.setAttribute("aria-label",t)}}function Te(e,t,i,o){var a,s=e.aoColumns[t],l=e.aaSorting,u=s.asSorting,c=function(e,t){var i=e._idx;return i===n&&(i=r.inArray(e[1],u)),i+1<u.length?i+1:t?null:0};if("number"==typeof l[0]&&(l=e.aaSorting=[l]),i&&e.oFeatures.bSortMulti){var f=r.inArray(t,dt(l,"0"));f!==-1?(a=c(l[f],!0),null===a&&1===l.length&&(a=0),null===a?l.splice(f,1):(l[f][1]=u[a],l[f]._idx=a)):(l.push([t,u[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==t?(a=c(l[0]),l.length=1,l[0][1]=u[a],l[0]._idx=a):(l.length=0,l.push([t,u[0]]),l[0]._idx=0);L(e),"function"==typeof o&&o(e)}function Ee(e,t,n,r){var i=e.aoColumns[n];Le(t,{},function(t){i.bSortable!==!1&&(e.oFeatures.bProcessing?(pe(e,!0),setTimeout(function(){Te(e,n,t.shiftKey,r),"ssp"!==$e(e)&&pe(e,!1)},0)):Te(e,n,t.shiftKey,r))})}function je(e){var t,n,i,o=e.aLastSort,a=e.oClasses.sSortColumn,s=ze(e),l=e.oFeatures;if(l.bSort&&l.bSortClasses){for(t=0,n=o.length;t<n;t++)i=o[t].src,r(dt(e.aoData,"anCells",i)).removeClass(a+(t<2?t+1:3));for(t=0,n=s.length;t<n;t++)i=s[t].src,r(dt(e.aoData,"anCells",i)).addClass(a+(t<2?t+1:3))}e.aLastSort=s}function De(e,t){var n,r=e.aoColumns[t],i=Xe.ext.order[r.sSortDataType];
i&&(n=i.call(e.oInstance,e,t,g(e,t)));for(var o,a,s=Xe.ext.type.order[r.sType+"-pre"],l=0,u=e.aoData.length;l<u;l++)o=e.aoData[l],o._aSortData||(o._aSortData=[]),o._aSortData[t]&&!i||(a=i?n[l]:A(e,l,t,"sort"),o._aSortData[t]=s?s(a):a)}function Oe(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var t={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:r.extend(!0,[],e.aaSorting),search:ne(e.oPreviousSearch),columns:r.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:ne(e.aoPreSearchCols[n])}})};qe(e,"aoStateSaveParams","stateSaveParams",[e,t]),e.oSavedState=t,e.fnStateSaveCallback.call(e.oInstance,e,t)}}function Ne(e,t){var i,o,a=e.aoColumns;if(e.oFeatures.bStateSave){var s=e.fnStateLoadCallback.call(e.oInstance,e);if(s&&s.time){var l=qe(e,"aoStateLoadParams","stateLoadParams",[e,s]);if(r.inArray(!1,l)===-1){var u=e.iStateDuration;if(!(u>0&&s.time<+new Date-1e3*u)&&a.length===s.columns.length){for(e.oLoadedState=r.extend(!0,{},s),s.start!==n&&(e._iDisplayStart=s.start,e.iInitDisplayStart=s.start),s.length!==n&&(e._iDisplayLength=s.length),s.order!==n&&(e.aaSorting=[],r.each(s.order,function(t,n){e.aaSorting.push(n[0]>=a.length?[0,n[1]]:n)})),s.search!==n&&r.extend(e.oPreviousSearch,re(s.search)),i=0,o=s.columns.length;i<o;i++){var c=s.columns[i];c.visible!==n&&(a[i].bVisible=c.visible),c.search!==n&&r.extend(e.aoPreSearchCols[i],re(c.search))}qe(e,"aoStateLoaded","stateLoaded",[e,s])}}}}}function Pe(e){var t=Xe.settings,n=r.inArray(e,dt(t,"nTable"));return n!==-1?t[n]:null}function Fe(t,n,r,i){if(r="DataTables warning: "+(null!==t?"table id="+t.sTableId+" - ":"")+r,i&&(r+=". For more information about this error, please see http://datatables.net/tn/"+i),n)e.console&&console.log;else{var o=Xe.ext,a=o.sErrMode||o.errMode;if(qe(t,null,"error",[t,i,r]),"alert"==a)alert(r);else{if("throw"==a)throw new Error(r);"function"==typeof a&&a(t,i,r)}}}function Ie(e,t,i,o){return r.isArray(i)?void r.each(i,function(n,i){r.isArray(i)?Ie(e,t,i[0],i[1]):Ie(e,t,i)}):(o===n&&(o=i),void(t[i]!==n&&(e[o]=t[i])))}function Re(e,t,n){var i;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],r.isPlainObject(i)?(r.isPlainObject(e[o])||(e[o]={}),r.extend(!0,e[o],i)):n&&"data"!==o&&"aaData"!==o&&r.isArray(i)?e[o]=i.slice():e[o]=i);return e}function Le(e,t,n){r(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(e){13===e.which&&(e.preventDefault(),n(e))}).bind("selectstart.DT",function(){return!1})}function Be(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function qe(e,t,n,i){var o=[];if(t&&(o=r.map(e[t].slice().reverse(),function(t,n){return t.fn.apply(e.oInstance,i)})),null!==n){var a=r.Event(n+".dt");r(e.nTable).trigger(a,i),o.push(a.result)}return o}function Ue(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),r=e._iDisplayLength;t>=n&&(t=n-r),t-=t%r,(r===-1||t<0)&&(t=0),e._iDisplayStart=t}function Ve(e,t){var n=e.renderer,i=Xe.ext.renderer[t];return r.isPlainObject(n)&&n[t]?i[n[t]]||i._:"string"==typeof n?i[n]||i._:i._}function $e(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function He(e,t){var n=[],r=Yt.numbers_length,i=Math.floor(r/2);return t<=r?n=pt(0,t):e<=i?(n=pt(0,r-2),n.push("ellipsis"),n.push(t-1)):e>=t-1-i?(n=pt(t-(r-2),t),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=pt(e-i+2,e+i-1),n.push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Ye(e){r.each({num:function(t){return Wt(t,e)},"num-fmt":function(t){return Wt(t,e,ot)},"html-num":function(t){return Wt(t,e,tt)},"html-num-fmt":function(t){return Wt(t,e,tt,ot)}},function(t,n){Je.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(Je.type.search[t+e]=Je.type.search.html)})}function We(e){return function(){var t=[Pe(this[Xe.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Xe.ext.internal[e].apply(this,t)}}var Xe,Je,Ge,Qe,Ze,Ke={},et=/[\r\n]/g,tt=/<.*?>/g,nt=/^[\w\+\-]/,rt=/[\w\+\-]$/,it=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),ot=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,at=function(e){return!e||e===!0||"-"===e},st=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},lt=function(e,t){return Ke[t]||(Ke[t]=new RegExp(ee(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Ke[t],"."):e},ut=function(e,t,n){var r="string"==typeof e;return!!at(e)||(t&&r&&(e=lt(e,t)),n&&r&&(e=e.replace(ot,"")),!isNaN(parseFloat(e))&&isFinite(e))},ct=function(e){return at(e)||"string"==typeof e},ft=function(e,t,n){if(at(e))return!0;var r=ct(e);return r?!!ut(vt(e),t,n)||null:null},dt=function(e,t,r){var i=[],o=0,a=e.length;if(r!==n)for(;o<a;o++)e[o]&&e[o][t]&&i.push(e[o][t][r]);else for(;o<a;o++)e[o]&&i.push(e[o][t]);return i},ht=function(e,t,r,i){var o=[],a=0,s=t.length;if(i!==n)for(;a<s;a++)e[t[a]][r]&&o.push(e[t[a]][r][i]);else for(;a<s;a++)o.push(e[t[a]][r]);return o},pt=function(e,t){var r,i=[];t===n?(t=0,r=e):(r=t,t=e);for(var o=t;o<r;o++)i.push(o);return i},gt=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t},vt=function(e){return e.replace(tt,"")},mt=function(e){var t,n,r,i=[],o=e.length,a=0;e:for(n=0;n<o;n++){for(t=e[n],r=0;r<a;r++)if(i[r]===t)continue e;i.push(t),a++}return i},yt=function(e,t,r){e[t]!==n&&(e[r]=e[t])},xt=/\[.*?\]$/,bt=/\(\)$/,wt=r("<div>")[0],_t=wt.textContent!==n,kt=/<.*?>/g;Xe=function(e){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new Ge(e?Pe(this[Je.iApiIndex]):this)},this.fnAddData=function(e,t){var i=this.api(!0),o=r.isArray(e)&&(r.isArray(e[0])||r.isPlainObject(e[0]))?i.rows.add(e):i.row.add(e);return(t===n||t)&&i.draw(),o.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),r=t.settings()[0],i=r.oScroll;e===n||e?t.draw(!1):""===i.sX&&""===i.sY||ve(r)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===n||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,r){var i=this.api(!0),o=i.rows(e),a=o.settings()[0],s=a.aoData[o[0][0]];return o.remove(),t&&t.call(this,a,s),(r===n||r)&&i.draw(),s},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,r,i,o,a){var s=this.api(!0);null===t||t===n?s.search(e,r,i,a):s.column(t).search(e,r,i,a),s.draw()},this.fnGetData=function(e,t){var r=this.api(!0);if(e!==n){var i=e.nodeName?e.nodeName.toLowerCase():"";return t!==n||"td"==i||"th"==i?r.cell(e,t).data():r.row(e).data()||null}return r.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==n?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if("TR"==n)return t.row(e).index();if("TD"==n||"TH"==n){var r=t.cell(e).index();return[r.row,r.columnVisible,r.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var r=this.api(!0).page(e);(t===n||t)&&r.draw(!1)},this.fnSetColumnVis=function(e,t,r){var i=this.api(!0).column(e).visible(t);(r===n||r)&&i.columns.adjust().draw()},this.fnSettings=function(){return Pe(this[Je.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,r,i,o){var a=this.api(!0);return r===n||null===r?a.row(t).data(e):a.cell(t,r).data(e),(o===n||o)&&a.columns.adjust(),(i===n||i)&&a.draw(),0},this.fnVersionCheck=Je.fnVersionCheck;var t=this,i=e===n,c=this.length;i&&(e={}),this.oApi=this.internal=Je.internal;for(var h in Xe.ext.internal)h&&(this[h]=We(h));return this.each(function(){var h,p={},g=c>1?Re(p,e,!0):e,v=0,m=this.getAttribute("id"),y=!1,_=Xe.defaults,k=r(this);if("table"!=this.nodeName.toLowerCase())return void Fe(null,0,"Non-table node initialisation ("+this.nodeName+")",2);s(_),l(_.column),o(_,_,!0),o(_.column,_.column,!0),o(_,r.extend(g,k.data()));var A=Xe.settings;for(v=0,h=A.length;v<h;v++){var S=A[v];if(S.nTable==this||S.nTHead.parentNode==this||S.nTFoot&&S.nTFoot.parentNode==this){var z=g.bRetrieve!==n?g.bRetrieve:_.bRetrieve,M=g.bDestroy!==n?g.bDestroy:_.bDestroy;if(i||z)return S.oInstance;if(M){S.oInstance.fnDestroy();break}return void Fe(S,0,"Cannot reinitialise DataTable",3)}if(S.sTableId==this.id){A.splice(v,1);break}}null!==m&&""!==m||(m="DataTables_Table_"+Xe.ext._unique++,this.id=m);var C=r.extend(!0,{},Xe.models.oSettings,{sDestroyWidth:k[0].style.width,sInstance:m,sTableId:m});C.nTable=this,C.oApi=t.internal,C.oInit=g,A.push(C),C.oInstance=1===t.length?t:k.dataTable(),s(g),g.oLanguage&&a(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=r.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Re(r.extend(!0,{},_),g),Ie(C.oFeatures,g,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Ie(C,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Ie(C.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Ie(C.oLanguage,g,"fnInfoCallback"),Be(C,"aoDrawCallback",g.fnDrawCallback,"user"),Be(C,"aoServerParams",g.fnServerParams,"user"),Be(C,"aoStateSaveParams",g.fnStateSaveParams,"user"),Be(C,"aoStateLoadParams",g.fnStateLoadParams,"user"),Be(C,"aoStateLoaded",g.fnStateLoaded,"user"),Be(C,"aoRowCallback",g.fnRowCallback,"user"),Be(C,"aoRowCreatedCallback",g.fnCreatedRow,"user"),Be(C,"aoHeaderCallback",g.fnHeaderCallback,"user"),Be(C,"aoFooterCallback",g.fnFooterCallback,"user"),Be(C,"aoInitComplete",g.fnInitComplete,"user"),Be(C,"aoPreDrawCallback",g.fnPreDrawCallback,"user");var T=C.oClasses;if(g.bJQueryUI?(r.extend(T,Xe.ext.oJUIClasses,g.oClasses),g.sDom===_.sDom&&"lfrtip"===_.sDom&&(C.sDom='<"H"lfr>t<"F"ip>'),C.renderer?r.isPlainObject(C.renderer)&&!C.renderer.header&&(C.renderer.header="jqueryui"):C.renderer="jqueryui"):r.extend(T,Xe.ext.classes,g.oClasses),k.addClass(T.sTable),""===C.oScroll.sX&&""===C.oScroll.sY||(C.oScroll.iBarWidth=Se()),C.oScroll.sX===!0&&(C.oScroll.sX="100%"),C.iInitDisplayStart===n&&(C.iInitDisplayStart=g.iDisplayStart,C._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading){C.bDeferLoading=!0;var E=r.isArray(g.iDeferLoading);C._iRecordsDisplay=E?g.iDeferLoading[0]:g.iDeferLoading,C._iRecordsTotal=E?g.iDeferLoading[1]:g.iDeferLoading}var j=C.oLanguage;r.extend(!0,j,g.oLanguage),""!==j.sUrl&&(r.ajax({dataType:"json",url:j.sUrl,success:function(e){a(e),o(_.oLanguage,e),r.extend(!0,j,e),se(C)},error:function(){se(C)}}),y=!0),null===g.asStripeClasses&&(C.asStripeClasses=[T.sStripeOdd,T.sStripeEven]);var D=C.asStripeClasses,N=k.children("tbody").find("tr").eq(0);r.inArray(!0,r.map(D,function(e,t){return N.hasClass(e)}))!==-1&&(r("tbody tr",this).removeClass(D.join(" ")),C.asDestroyStripes=D.slice());var P,F=[],I=this.getElementsByTagName("thead");if(0!==I.length&&(q(C.aoHeader,I[0]),F=U(C)),null===g.aoColumns)for(P=[],v=0,h=F.length;v<h;v++)P.push(null);else P=g.aoColumns;for(v=0,h=P.length;v<h;v++)f(C,F?F[v]:null);if(x(C,g.aoColumnDefs,P,function(e,t){d(C,e,t)}),N.length){var R=function(e,t){return null!==e.getAttribute("data-"+t)?t:null};r.each(O(C,N[0]).cells,function(e,t){var r=C.aoColumns[e];if(r.mData===e){var i=R(t,"sort")||R(t,"order"),o=R(t,"filter")||R(t,"search");null===i&&null===o||(r.mData={_:e+".display",sort:null!==i?e+".@data-"+i:n,type:null!==i?e+".@data-"+i:n,filter:null!==o?e+".@data-"+o:n},d(C,e))}})}var L=C.oFeatures;if(g.bStateSave&&(L.bStateSave=!0,Ne(C,g),Be(C,"aoDrawCallback",Oe,"state_save")),g.aaSorting===n){var B=C.aaSorting;for(v=0,h=B.length;v<h;v++)B[v][1]=C.aoColumns[v].asSorting[0]}je(C),L.bSort&&Be(C,"aoDrawCallback",function(){if(C.bSorted){var e=ze(C),t={};r.each(e,function(e,n){t[n.src]=n.dir}),qe(C,null,"order",[C,e,t]),Ce(C)}}),Be(C,"aoDrawCallback",function(){(C.bSorted||"ssp"===$e(C)||L.bDeferRender)&&je(C)},"sc"),u(C);var V=k.children("caption").each(function(){this._captionSide=k.css("caption-side")}),$=k.children("thead");0===$.length&&($=r("<thead/>").appendTo(this)),C.nTHead=$[0];var H=k.children("tbody");0===H.length&&(H=r("<tbody/>").appendTo(this)),C.nTBody=H[0];var Y=k.children("tfoot");if(0===Y.length&&V.length>0&&(""!==C.oScroll.sX||""!==C.oScroll.sY)&&(Y=r("<tfoot/>").appendTo(this)),0===Y.length||0===Y.children().length?k.addClass(T.sNoFooter):Y.length>0&&(C.nTFoot=Y[0],q(C.aoFooter,C.nTFoot)),g.aaData)for(v=0;v<g.aaData.length;v++)b(C,g.aaData[v]);else(C.bDeferLoading||"dom"==$e(C))&&w(C,r(C.nTBody).children("tr"));C.aiDisplay=C.aiDisplayMaster.slice(),C.bInitialised=!0,y===!1&&se(C)}),t=null,this};var At=[],St=Array.prototype,zt=function(e){var t,n,i=Xe.settings,o=r.map(i,function(e,t){return e.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?(t=r.inArray(e,o),t!==-1?[i[t]]:null):e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?n=r(e):e instanceof r&&(n=e),n?n.map(function(e){return t=r.inArray(this,o),t!==-1?i[t]:null}).toArray():void 0):[]};Ge=function(e,t){if(!(this instanceof Ge))return new Ge(e,t);var n=[],i=function(e){var t=zt(e);t&&n.push.apply(n,t)};if(r.isArray(e))for(var o=0,a=e.length;o<a;o++)i(e[o]);else i(e);this.context=mt(n),t&&this.push.apply(this,t.toArray?t.toArray():t),this.selector={rows:null,cols:null,opts:null},Ge.extend(this,this,At)},Xe.Api=Ge,Ge.prototype={any:function(){return 0!==this.flatten().length},concat:St.concat,context:[],each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new Ge(t[e],this[e]):null},filter:function(e){var t=[];if(St.filter)t=St.filter.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new Ge(this.context,t)},flatten:function(){var e=[];return new Ge(this.context,e.concat.apply(e,this.toArray()))},join:St.join,indexOf:St.indexOf||function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,r,i){var o,a,s,l,u,c,f,d,h=[],p=this.context,g=this.selector;for("string"==typeof e&&(i=r,r=t,t=e,e=!1),a=0,s=p.length;a<s;a++){var v=new Ge(p[a]);if("table"===t)o=r.call(v,p[a],a),o!==n&&h.push(o);else if("columns"===t||"rows"===t)o=r.call(v,p[a],this[a],a),o!==n&&h.push(o);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(f=this[a],"column-rows"===t&&(c=Dt(p[a],g.opts)),l=0,u=f.length;l<u;l++)d=f[l],o="cell"===t?r.call(v,p[a],d.row,d.column,a,l):r.call(v,p[a],d,a,l,c),o!==n&&h.push(o)}if(h.length||i){var m=new Ge(p,e?h.concat.apply([],h):h),y=m.selector;return y.rows=g.rows,y.cols=g.cols,y.opts=g.opts,m}return this},lastIndexOf:St.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(St.map)t=St.map.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)t.push(e.call(this,this[n],n));return new Ge(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:St.pop,push:St.push,reduce:St.reduce||function(e,t){return c(this,e,t,0,this.length,1)},reduceRight:St.reduceRight||function(e,t){return c(this,e,t,this.length-1,-1,-1)},reverse:St.reverse,selector:null,shift:St.shift,sort:St.sort,splice:St.splice,toArray:function(){return St.slice.call(this)},to$:function(){return r(this)},toJQuery:function(){return r(this)},unique:function(){return new Ge(this.context,mt(this))},unshift:St.unshift},Ge.extend=function(e,t,n){if(n.length&&t&&(t instanceof Ge||t.__dt_wrapper)){var i,o,a,s=function(e,t,n){return function(){var r=t.apply(e,arguments);return Ge.extend(r,r,n.methodExt),r}};for(i=0,o=n.length;i<o;i++)a=n[i],t[a.name]="function"==typeof a.val?s(e,a.val,a):r.isPlainObject(a.val)?{}:a.val,t[a.name].__dt_wrapper=!0,Ge.extend(e,t[a.name],a.propExt)}},Ge.register=Qe=function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)Ge.register(e[n],t);else{var o,a,s,l,u=e.split("."),c=At,f=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].name===t)return e[n];return null};for(o=0,a=u.length;o<a;o++){l=u[o].indexOf("()")!==-1,s=l?u[o].replace("()",""):u[o];var d=f(c,s);d||(d={name:s,val:{},methodExt:[],propExt:[]},c.push(d)),o===a-1?d.val=t:c=l?d.methodExt:d.propExt}}},Ge.registerPlural=Ze=function(e,t,i){Ge.register(e,i),Ge.register(t,function(){var e=i.apply(this,arguments);return e===this?this:e instanceof Ge?e.length?r.isArray(e[0])?new Ge(e.context,e[0]):e[0]:n:e})};var Mt=function(e,t){if("number"==typeof e)return[t[e]];var n=r.map(t,function(e,t){return e.nTable});return r(n).filter(e).map(function(e){var i=r.inArray(this,n);return t[i]}).toArray()};Qe("tables()",function(e){return e?new Ge(Mt(e,this.context)):this}),Qe("table()",function(e){var t=this.tables(e),n=t.context;return n.length?new Ge(n[0]):t}),Ze("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),Ze("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),Ze("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),Ze("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),Ze("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),Qe("draw()",function(e){return this.iterator("table",function(t){L(t,e===!1)})}),Qe("page()",function(e){return e===n?this.page.info().page:this.iterator("table",function(t){de(t,e)})}),Qe("page.info()",function(e){if(0===this.context.length)return n;var t=this.context[0],r=t._iDisplayStart,i=t._iDisplayLength,o=t.fnRecordsDisplay(),a=i===-1;return{page:a?0:Math.floor(r/i),pages:a?1:Math.ceil(o/i),start:r,end:t.fnDisplayEnd(),length:i,recordsTotal:t.fnRecordsTotal(),recordsDisplay:o}}),Qe("page.len()",function(e){return e===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(t){ue(t,e)})});var Ct=function(e,t,n){if(n){var r=new Ge(e);r.one("draw",function(){n(r.ajax.json())})}"ssp"==$e(e)?L(e,t):(pe(e,!0),V(e,[],function(n){E(e);for(var r=W(e,n),i=0,o=r.length;i<o;i++)b(e,r[i]);L(e,t),pe(e,!1)}))};Qe("ajax.json()",function(){var e=this.context;if(e.length>0)return e[0].json}),Qe("ajax.params()",function(){var e=this.context;if(e.length>0)return e[0].oAjaxData}),Qe("ajax.reload()",function(e,t){return this.iterator("table",function(n){Ct(n,t===!1,e)})}),Qe("ajax.url()",function(e){var t=this.context;return e===n?0===t.length?n:(t=t[0],t.ajax?r.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource):this.iterator("table",function(t){r.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),Qe("ajax.url().load()",function(e,t){return this.iterator("table",function(n){Ct(n,t===!1,e)})});var Tt=function(e,t,i,o,a){var s,l,u,c,f,d,h=[],p=typeof t;for(t&&"string"!==p&&"function"!==p&&t.length!==n||(t=[t]),u=0,c=t.length;u<c;u++)for(l=t[u]&&t[u].split?t[u].split(","):[t[u]],f=0,d=l.length;f<d;f++)s=i("string"==typeof l[f]?r.trim(l[f]):l[f]),s&&s.length&&h.push.apply(h,s);var g=Je.selector[e];if(g.length)for(u=0,c=g.length;u<c;u++)h=g[u](o,a,h);return h},Et=function(e){return e||(e={}),e.filter&&e.search===n&&(e.search=e.filter),r.extend({search:"none",order:"current",page:"all"},e)},jt=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].length>0)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},Dt=function(e,t){var n,i,o,a=[],s=e.aiDisplay,l=e.aiDisplayMaster,u=t.search,c=t.order,f=t.page;if("ssp"==$e(e))return"removed"===u?[]:pt(0,l.length);if("current"==f)for(n=e._iDisplayStart,i=e.fnDisplayEnd();n<i;n++)a.push(s[n]);else if("current"==c||"applied"==c)a="none"==u?l.slice():"applied"==u?s.slice():r.map(l,function(e,t){return r.inArray(e,s)===-1?e:null});else if("index"==c||"original"==c)for(n=0,i=e.aoData.length;n<i;n++)"none"==u?a.push(n):(o=r.inArray(n,s),(o===-1&&"removed"==u||o>=0&&"applied"==u)&&a.push(n));return a},Ot=function(e,t,n){var i=function(t){var i=st(t);if(null!==i&&!n)return[i];var o=Dt(e,n);if(null!==i&&r.inArray(i,o)!==-1)return[i];if(!t)return o;if("function"==typeof t)return r.map(o,function(n){var r=e.aoData[n];return t(n,r._aData,r.nTr)?n:null});var a=gt(ht(e.aoData,o,"nTr"));return t.nodeName&&r.inArray(t,a)!==-1?[t._DT_RowIndex]:r(a).filter(t).map(function(){return this._DT_RowIndex}).toArray()};return Tt("row",t,i,e,n)};Qe("rows()",function(e,t){e===n?e="":r.isPlainObject(e)&&(t=e,e=""),t=Et(t);var i=this.iterator("table",function(n){return Ot(n,e,t)},1);return i.selector.rows=e,i.selector.opts=t,i}),Qe("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||n},1)}),Qe("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return ht(e.aoData,t,"_aData")},1)}),Ze("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var r=t.aoData[n];return"search"===e?r._aFilterData:r._aSortData},1)}),Ze("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){D(t,n,e)})}),Ze("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),Ze("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,i){var o=t.aoData;o.splice(n,1);for(var a=0,s=o.length;a<s;a++)null!==o[a].nTr&&(o[a].nTr._DT_RowIndex=a);r.inArray(n,t.aiDisplay);j(t.aiDisplayMaster,n),j(t.aiDisplay,n),j(e[i],n,!1),Ue(t)})}),Qe("rows.add()",function(e){var t=this.iterator("table",function(t){var n,r,i,o=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.nodeName&&"TR"===n.nodeName.toUpperCase()?o.push(w(t,n)[0]):o.push(b(t,n));return o},1),n=this.rows(-1);return n.pop(),n.push.apply(n,t.toArray()),n}),Qe("row()",function(e,t){return jt(this.rows(e,t))}),Qe("row().data()",function(e){var t=this.context;return e===n?t.length&&this.length?t[0].aoData[this[0]]._aData:n:(t[0].aoData[this[0]]._aData=e,D(t[0],this[0],"data"),this)}),Qe("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Qe("row.add()",function(e){e instanceof r&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?w(t,e)[0]:b(t,e)});return this.row(t[0])});var Nt=function(e,t,n,i){var o=[],a=function(t,n){if(r.isArray(t)||t instanceof r)for(var i=0,s=t.length;i<s;i++)a(t[i],n);else if(t.nodeName&&"tr"===t.nodeName.toLowerCase())o.push(t);else{var l=r("<tr><td/></tr>").addClass(n);r("td",l).addClass(n).html(t)[0].colSpan=v(e),o.push(l[0])}};a(n,i),t._details&&t._details.remove(),t._details=r(o),t._detailsShow&&t._details.insertAfter(t.nTr)},Pt=function(e,t){var r=e.context;if(r.length){var i=r[0].aoData[t!==n?t:e[0]];i._details&&(i._details.remove(),i._detailsShow=n,i._details=n)}},Ft=function(e,t){var n=e.context;if(n.length&&e.length){var r=n[0].aoData[e[0]];r._details&&(r._detailsShow=t,t?r._details.insertAfter(r.nTr):r._details.detach(),It(n[0]))}},It=function(e){var t=new Ge(e),n=".dt.DT_details",r="draw"+n,i="column-visibility"+n,o="destroy"+n,a=e.aoData;t.off(r+" "+i+" "+o),dt(a,"_details").length>0&&(t.on(r,function(n,r){e===r&&t.rows({page:"current"}).eq(0).each(function(e){var t=a[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on(i,function(t,n,r,i){if(e===n)for(var o,s=v(n),l=0,u=a.length;l<u;l++)o=a[l],o._details&&o._details.children("td[colspan]").attr("colspan",s)}),t.on(o,function(n,r){if(e===r)for(var i=0,o=a.length;i<o;i++)a[i]._details&&Pt(t,i)}))},Rt="",Lt=Rt+"row().child",Bt=Lt+"()";Qe(Bt,function(e,t){var r=this.context;return e===n?r.length&&this.length?r[0].aoData[this[0]]._details:n:(e===!0?this.child.show():e===!1?Pt(this):r.length&&this.length&&Nt(r[0],r[0].aoData[this[0]],e,t),this)}),Qe([Lt+".show()",Bt+".show()"],function(e){return Ft(this,!0),this}),Qe([Lt+".hide()",Bt+".hide()"],function(){return Ft(this,!1),this}),Qe([Lt+".remove()",Bt+".remove()"],function(){return Pt(this),this}),Qe(Lt+".isShown()",function(){var e=this.context;return!(!e.length||!this.length)&&(e[0].aoData[this[0]]._detailsShow||!1)});var qt=/^(.+):(name|visIdx|visible)$/,Ut=function(e,t,n,r,i){for(var o=[],a=0,s=i.length;a<s;a++)o.push(A(e,i[a],t));return o},Vt=function(e,t,n){var i=e.aoColumns,o=dt(i,"sName"),a=dt(i,"nTh"),s=function(t){var s=st(t);if(""===t)return pt(i.length);if(null!==s)return[s>=0?s:i.length+s];if("function"==typeof t){var l=Dt(e,n);return r.map(i,function(n,r){return t(r,Ut(e,r,0,0,l),a[r])?r:null})}var u="string"==typeof t?t.match(qt):"";if(!u)return r(a).filter(t).map(function(){return r.inArray(this,a)}).toArray();switch(u[2]){case"visIdx":case"visible":var c=parseInt(u[1],10);if(c<0){var f=r.map(i,function(e,t){return e.bVisible?t:null});return[f[f.length+c]]}return[p(e,c)];case"name":return r.map(o,function(e,t){return e===u[1]?t:null})}};return Tt("column",t,s,e,n)},$t=function(e,t,i,o){var a,s,l,u,c=e.aoColumns,f=c[t],d=e.aoData;if(i===n)return f.bVisible;if(f.bVisible!==i){if(i){var p=r.inArray(!0,dt(c,"bVisible"),t+1);for(s=0,l=d.length;s<l;s++)u=d[s].nTr,a=d[s].anCells,u&&u.insertBefore(a[t],a[p]||null)}else r(dt(e.aoData,"anCells",t)).detach();f.bVisible=i,I(e,e.aoHeader),I(e,e.aoFooter),(o===n||o)&&(h(e),(e.oScroll.sX||e.oScroll.sY)&&ve(e)),qe(e,null,"column-visibility",[e,t,i]),Oe(e)}};Qe("columns()",function(e,t){e===n?e="":r.isPlainObject(e)&&(t=e,e=""),t=Et(t);var i=this.iterator("table",function(n){return Vt(n,e,t)},1);return i.selector.cols=e,i.selector.opts=t,i}),Ze("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),Ze("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),Ze("columns().data()","column().data()",function(){return this.iterator("column-rows",Ut,1)}),Ze("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),Ze("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,r,i,o){return ht(t.aoData,o,"search"===e?"_aFilterData":"_aSortData",n)},1)}),Ze("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,r,i){return ht(e.aoData,i,"anCells",t)},1)}),Ze("columns().visible()","column().visible()",function(e,t){return this.iterator("column",function(r,i){return e===n?r.aoColumns[i].bVisible:void $t(r,i,e,t)})}),Ze("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?g(t,n):n},1)}),Qe("columns.adjust()",function(){return this.iterator("table",function(e){h(e)},1)}),Qe("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return p(n,t);if("fromData"===e||"toVisible"===e)return g(n,t)}}),Qe("column()",function(e,t){return jt(this.columns(e,t))});var Ht=function(e,t,i){var o,a,s,l,u,c,f,d=e.aoData,h=Dt(e,i),p=gt(ht(d,h,"anCells")),g=r([].concat.apply([],p)),v=e.aoColumns.length,m=function(t){var i="function"==typeof t;if(null===t||t===n||i){for(a=[],s=0,l=h.length;s<l;s++)for(o=h[s],u=0;u<v;u++)c={row:o,column:u},i?(f=e.aoData[o],t(c,A(e,o,u),f.anCells?f.anCells[u]:null)&&a.push(c)):a.push(c);return a}return r.isPlainObject(t)?[t]:g.filter(t).map(function(e,t){return o=t.parentNode._DT_RowIndex,{row:o,column:r.inArray(t,d[o].anCells)}}).toArray()};return Tt("cell",t,m,e,i)};Qe("cells()",function(e,t,i){if(r.isPlainObject(e)&&(e.row===n?(i=e,e=null):(i=t,t=null)),r.isPlainObject(t)&&(i=t,t=null),null===t||t===n)return this.iterator("table",function(t){return Ht(t,e,Et(i))});var o,a,s,l,u,c=this.columns(t,i),f=this.rows(e,i),d=this.iterator("table",function(e,t){for(o=[],a=0,s=f[t].length;a<s;a++)for(l=0,u=c[t].length;l<u;l++)o.push({row:f[t][a],column:c[t][l]});return o},1);return r.extend(d.selector,{cols:t,rows:e,opts:i}),d}),Ze("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,r){var i=e.aoData[t].anCells;return i?i[r]:n},1)}),Qe("cells().data()",function(){return this.iterator("cell",function(e,t,n){return A(e,t,n)},1)}),Ze("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,r){return t.aoData[n][e][r]},1)}),Ze("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,r){return A(t,n,r,e)},1)}),Ze("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:g(e,n)}},1)}),Ze("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,r){D(t,n,e,r)})}),Qe("cell()",function(e,t,n){return jt(this.cells(e,t,n))}),Qe("cell().data()",function(e){var t=this.context,r=this[0];return e===n?t.length&&r.length?A(t[0],r[0].row,r[0].column):n:(S(t[0],r[0].row,r[0].column,e),D(t[0],r[0].row,"data",r[0].column),this)}),Qe("order()",function(e,t){var i=this.context;return e===n?0!==i.length?i[0].aaSorting:n:("number"==typeof e?e=[[e,t]]:r.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),Qe("order.listener()",function(e,t,n){return this.iterator("table",function(r){Ee(r,e,t,n)})}),Qe(["columns().order()","column().order()"],function(e){var t=this;return this.iterator("table",function(n,i){var o=[];r.each(t[i],function(t,n){o.push([n,e])}),n.aaSorting=o})}),Qe("search()",function(e,t,i,o){var a=this.context;return e===n?0!==a.length?a[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&J(n,r.extend({},n.oPreviousSearch,{sSearch:e+"",bRegex:null!==t&&t,bSmart:null===i||i,bCaseInsensitive:null===o||o}),1)})}),Ze("columns().search()","column().search()",function(e,t,i,o){return this.iterator("column",function(a,s){var l=a.aoPreSearchCols;return e===n?l[s].sSearch:void(a.oFeatures.bFilter&&(r.extend(l[s],{sSearch:e+"",bRegex:null!==t&&t,bSmart:null===i||i,bCaseInsensitive:null===o||o}),J(a,a.oPreviousSearch,1)))})}),Qe("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Qe("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Qe("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Qe("state.save()",function(){return this.iterator("table",function(e){Oe(e)})}),Xe.versionCheck=Xe.fnVersionCheck=function(e){for(var t,n,r=Xe.version.split("."),i=e.split("."),o=0,a=i.length;o<a;o++)if(t=parseInt(r[o],10)||0,n=parseInt(i[o],10)||0,t!==n)return t>n;return!0},Xe.isDataTable=Xe.fnIsDataTable=function(e){var t=r(e).get(0),n=!1;return r.each(Xe.settings,function(e,i){var o=i.nScrollHead?r("table",i.nScrollHead)[0]:null,a=i.nScrollFoot?r("table",i.nScrollFoot)[0]:null;i.nTable!==t&&o!==t&&a!==t||(n=!0)}),n},Xe.tables=Xe.fnTables=function(e){return r.map(Xe.settings,function(t){if(!e||e&&r(t.nTable).is(":visible"))return t.nTable})},Xe.util={throttle:xe,escapeRegex:ee},Xe.camelToHungarian=o,Qe("$()",function(e,t){var n=this.rows(t).nodes(),i=r(n);return r([].concat(i.filter(e).toArray(),i.find(e).toArray()))}),r.each(["on","one","off"],function(e,t){Qe(t+"()",function(){var e=Array.prototype.slice.call(arguments);e[0].match(/\.dt\b/)||(e[0]+=".dt");
var n=r(this.tables().nodes());return n[t].apply(n,e),this})}),Qe("clear()",function(){return this.iterator("table",function(e){E(e)})}),Qe("settings()",function(){return new Ge(this.context,this.context)}),Qe("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),Qe("data()",function(){return this.iterator("table",function(e){return dt(e.aoData,"_aData")}).flatten()}),Qe("destroy()",function(t){return t=t||!1,this.iterator("table",function(n){var i,o=n.nTableWrapper.parentNode,a=n.oClasses,s=n.nTable,l=n.nTBody,u=n.nTHead,c=n.nTFoot,f=r(s),d=r(l),h=r(n.nTableWrapper),p=r.map(n.aoData,function(e){return e.nTr});n.bDestroying=!0,qe(n,"aoDestroyCallback","destroy",[n]),t||new Ge(n).columns().visible(!0),h.unbind(".DT").find(":not(tbody *)").unbind(".DT"),r(e).unbind(".DT-"+n.sInstance),s!=u.parentNode&&(f.children("thead").detach(),f.append(u)),c&&s!=c.parentNode&&(f.children("tfoot").detach(),f.append(c)),f.detach(),h.detach(),n.aaSorting=[],n.aaSortingFixed=[],je(n),r(p).removeClass(n.asStripeClasses.join(" ")),r("th, td",u).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),n.bJUI&&(r("th span."+a.sSortIcon+", td span."+a.sSortIcon,u).detach(),r("th, td",u).each(function(){var e=r("div."+a.sSortJUIWrapper,this);r(this).append(e.contents()),e.detach()})),!t&&o&&o.insertBefore(s,n.nTableReinsertBefore),d.children().detach(),d.append(p),f.css("width",n.sDestroyWidth).removeClass(a.sTable),i=n.asDestroyStripes.length,i&&d.children().each(function(e){r(this).addClass(n.asDestroyStripes[e%i])});var g=r.inArray(n,Xe.settings);g!==-1&&Xe.settings.splice(g,1)})}),r.each(["column","row","cell"],function(e,t){Qe(t+"s().every()",function(e){return this.iterator(t,function(n,r,i){e.call(new Ge(n)[t](r,i))})})}),Qe("i18n()",function(e,t,i){var o=this.context[0],a=M(e)(o.oLanguage);return a===n&&(a=t),i!==n&&r.isPlainObject(a)&&(a=a[i]!==n?a[i]:a._),a.replace("%d",i)}),Xe.version="1.10.7",Xe.settings=[],Xe.models={},Xe.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Xe.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},Xe.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Xe.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((e.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(e.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:r.extend({},Xe.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},i(Xe.defaults),Xe.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},i(Xe.defaults.column),Xe.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==$e(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==$e(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,r=this.aiDisplay.length,i=this.oFeatures,o=i.bPaginate;return i.bServerSide?o===!1||e===-1?t+r:Math.min(t+e,this._iRecordsDisplay):!o||n>r||e===-1?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},Xe.ext=Je={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Xe.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Xe.version},r.extend(Je,{afnFiltering:Je.search,aTypes:Je.type.detect,ofnSearch:Je.type.search,oSort:Je.type.order,afnSortData:Je.order,aoFeatures:Je.feature,oApi:Je.internal,oStdClasses:Je.classes,oPagination:Je.pager}),r.extend(Xe.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var e="";e="";var t=e+"ui-state-default",n=e+"css_right ui-icon ui-icon-",i=e+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";r.extend(Xe.ext.oJUIClasses,Xe.ext.classes,{sPageButton:"fg-button ui-button "+t,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:t+" sorting_asc",sSortDesc:t+" sorting_desc",sSortable:t+" sorting",sSortableAsc:t+" sorting_asc_disabled",sSortableDesc:t+" sorting_desc_disabled",sSortableNone:t+" sorting_disabled",sSortJUIAsc:n+"triangle-1-n",sSortJUIDesc:n+"triangle-1-s",sSortJUI:n+"carat-2-n-s",sSortJUIAscAllowed:n+"carat-1-n",sSortJUIDescAllowed:n+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+t,sScrollFoot:"dataTables_scrollFoot "+t,sHeaderTH:t,sFooterTH:t,sJUIHeader:i+" ui-corner-tl ui-corner-tr",sJUIFooter:i+" ui-corner-bl ui-corner-br"})}();var Yt=Xe.ext.pager;r.extend(Yt,{simple:function(e,t){return["previous","next"]},full:function(e,t){return["first","previous","next","last"]},simple_numbers:function(e,t){return["previous",He(e,t),"next"]},full_numbers:function(e,t){return["first","previous",He(e,t),"next","last"]},_numbers:He,numbers_length:7}),r.extend(!0,Xe.ext.renderer,{pageButton:{_:function(e,n,i,o,a,s){var l,u,c,f=e.oClasses,d=e.oLanguage.oPaginate,h=0,p=function(t,n){var o,c,g,v,m=function(t){de(e,t.data.action,!0)};for(o=0,c=n.length;o<c;o++)if(v=n[o],r.isArray(v)){var y=r("<"+(v.DT_el||"div")+"/>").appendTo(t);p(y,v)}else{switch(l="",u="",v){case"ellipsis":t.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=d.sFirst,u=v+(a>0?"":" "+f.sPageButtonDisabled);break;case"previous":l=d.sPrevious,u=v+(a>0?"":" "+f.sPageButtonDisabled);break;case"next":l=d.sNext,u=v+(a<s-1?"":" "+f.sPageButtonDisabled);break;case"last":l=d.sLast,u=v+(a<s-1?"":" "+f.sPageButtonDisabled);break;default:l=v+1,u=a===v?f.sPageButtonActive:""}l&&(g=r("<a>",{"class":f.sPageButton+" "+u,"aria-controls":e.sTableId,"data-dt-idx":h,tabindex:e.iTabIndex,id:0===i&&"string"==typeof v?e.sTableId+"_"+v:null}).html(l).appendTo(t),Le(g,{action:v},m),h++)}};try{c=r(t.activeElement).data("dt-idx")}catch(g){}p(r(n).empty(),o),c&&r(n).find("[data-dt-idx="+c+"]").focus()}}}),r.extend(Xe.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return ut(e,n)?"num"+n:null},function(e,t){if(e&&!(e instanceof Date)&&(!nt.test(e)||!rt.test(e)))return null;var n=Date.parse(e);return null!==n&&!isNaN(n)||at(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return ut(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return ft(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return ft(e,n,!0)?"html-num-fmt"+n:null},function(e,t){return at(e)||"string"==typeof e&&e.indexOf("<")!==-1?"html":null}]),r.extend(Xe.ext.type.search,{html:function(e){return at(e)?e:"string"==typeof e?e.replace(et," ").replace(tt,""):""},string:function(e){return at(e)?e:"string"==typeof e?e.replace(et," "):e}});var Wt=function(e,t,n,r){return 0===e||e&&"-"!==e?(t&&(e=lt(e,t)),e.replace&&(n&&(e=e.replace(n,"")),r&&(e=e.replace(r,""))),1*e):-(1/0)};return r.extend(Je.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return at(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return at(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Ye(""),r.extend(!0,Xe.ext.renderer,{header:{_:function(e,t,n,i){r(e.nTable).on("order.dt.DT",function(r,o,a,s){if(e===o){var l=n.idx;t.removeClass(n.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[l]?i.sSortAsc:"desc"==s[l]?i.sSortDesc:n.sSortingClass)}})},jqueryui:function(e,t,n,i){r("<div/>").addClass(i.sSortJUIWrapper).append(t.contents()).append(r("<span/>").addClass(i.sSortIcon+" "+n.sSortingClassJUI)).appendTo(t),r(e.nTable).on("order.dt.DT",function(r,o,a,s){if(e===o){var l=n.idx;t.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[l]?i.sSortAsc:"desc"==s[l]?i.sSortDesc:n.sSortingClass),t.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass("asc"==s[l]?i.sSortJUIAsc:"desc"==s[l]?i.sSortJUIDesc:n.sSortingClassJUI)}})}}}),Xe.render={number:function(e,t,n,r){return{display:function(i){if("number"!=typeof i&&"string"!=typeof i)return i;var o=i<0?"-":"";i=Math.abs(parseFloat(i));var a=parseInt(i,10),s=n?t+(i-a).toFixed(n).substring(2):"";return o+(r||"")+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+s}}}},r.extend(Xe.ext.internal,{_fnExternApiFunc:We,_fnBuildAjax:V,_fnAjaxUpdate:$,_fnAjaxParameters:H,_fnAjaxUpdateDraw:Y,_fnAjaxDataSrc:W,_fnAddColumn:f,_fnColumnOptions:d,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:g,_fnVisbleColumns:v,_fnGetColumns:m,_fnColumnTypes:y,_fnApplyColumnDefs:x,_fnHungarianMap:i,_fnCamelToHungarian:o,_fnLanguageCompat:a,_fnBrowserDetect:u,_fnAddData:b,_fnAddTr:w,_fnNodeToDataIndex:_,_fnNodeToColumnIndex:k,_fnGetCellData:A,_fnSetCellData:S,_fnSplitObjNotation:z,_fnGetObjectDataFn:M,_fnSetObjectDataFn:C,_fnGetDataMaster:T,_fnClearTable:E,_fnDeleteIndex:j,_fnInvalidate:D,_fnGetRowElements:O,_fnCreateTr:N,_fnBuildHead:F,_fnDrawHead:I,_fnDraw:R,_fnReDraw:L,_fnAddOptionsHtml:B,_fnDetectHeader:q,_fnGetUniqueThs:U,_fnFeatureHtmlFilter:X,_fnFilterComplete:J,_fnFilterCustom:G,_fnFilterColumn:Q,_fnFilter:Z,_fnFilterCreateSearch:K,_fnEscapeRegex:ee,_fnFilterData:te,_fnFeatureHtmlInfo:ie,_fnUpdateInfo:oe,_fnInfoMacros:ae,_fnInitialise:se,_fnInitComplete:le,_fnLengthChange:ue,_fnFeatureHtmlLength:ce,_fnFeatureHtmlPaginate:fe,_fnPageChange:de,_fnFeatureHtmlProcessing:he,_fnProcessingDisplay:pe,_fnFeatureHtmlTable:ge,_fnScrollDraw:ve,_fnApplyToChildren:me,_fnCalculateColumnWidths:ye,_fnThrottle:xe,_fnConvertToWidth:be,_fnScrollingWidthAdjust:we,_fnGetWidestNode:_e,_fnGetMaxLenString:ke,_fnStringToCss:Ae,_fnScrollBarWidth:Se,_fnSortFlatten:ze,_fnSort:Me,_fnSortAria:Ce,_fnSortListener:Te,_fnSortAttachListener:Ee,_fnSortingClasses:je,_fnSortData:De,_fnSaveState:Oe,_fnLoadState:Ne,_fnSettingsFromNode:Pe,_fnLog:Fe,_fnMap:Ie,_fnBindAction:Le,_fnCallbackReg:Be,_fnCallbackFire:qe,_fnLengthOverflow:Ue,_fnRenderer:Ve,_fnDataSource:$e,_fnRowAttributes:P,_fnCalculateEnd:function(){}}),r.fn.dataTable=Xe,r.fn.dataTableSettings=Xe.settings,r.fn.dataTableExt=Xe.ext,r.fn.DataTable=function(e){return r(this).dataTable(e).api()},r.each(Xe,function(e,t){r.fn.DataTable[e]=t}),r.fn.dataTable})}(window,document),function(e,t,n){var r=function(e,n){"use strict";e.extend(!0,n.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),e.extend(n.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"}),n.ext.renderer.pageButton.bootstrap=function(r,i,o,a,s,l){var u,c,f,d=new n.Api(r),h=r.oClasses,p=r.oLanguage.oPaginate,g=0,v=function(t,n){var i,a,f,m,y=function(t){t.preventDefault(),e(t.currentTarget).hasClass("disabled")||d.page(t.data.action).draw(!1)};for(i=0,a=n.length;i<a;i++)if(m=n[i],e.isArray(m))v(t,m);else{switch(u="",c="",m){case"ellipsis":u="&hellip;",c="disabled";break;case"first":u=p.sFirst,c=m+(s>0?"":" disabled");break;case"previous":u=p.sPrevious,c=m+(s>0?"":" disabled");break;case"next":u=p.sNext,c=m+(s<l-1?"":" disabled");break;case"last":u=p.sLast,c=m+(s<l-1?"":" disabled");break;default:u=m+1,c=s===m?"active":""}u&&(f=e("<li>",{"class":h.sPageButton+" "+c,id:0===o&&"string"==typeof m?r.sTableId+"_"+m:null}).append(e("<a>",{href:"#","aria-controls":r.sTableId,"data-dt-idx":g,tabindex:r.iTabIndex}).html(u)).appendTo(t),r.oApi._fnBindAction(f,{action:m},y),g++)}};try{f=e(t.activeElement).data("dt-idx")}catch(m){}v(e(i).empty().html('<ul class="pagination"/>').children("ul"),a),f&&e(i).find("[data-dt-idx="+f+"]").focus()},n.TableTools&&(e.extend(!0,n.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),e.extend(!0,n.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define(["jquery","datatables"],r):"object"==typeof exports?r(require("jquery"),require("datatables")):jQuery&&r(jQuery,jQuery.fn.dataTable)}(window,document),"undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");$.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict";$("body").removeClass("hold-transition"),"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var e=$.AdminLTE.options;_init(),$.AdminLTE.layout.activate(),$.AdminLTE.tree(".sidebar"),e.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),e.navbarMenuSlimscroll&&"undefined"!=typeof $.fn.slimscroll&&$(".navbar .menu").slimscroll({height:e.navbarMenuHeight,alwaysVisible:!1,size:e.navbarMenuSlimscrollWidth}).css("width","100%"),e.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(e.sidebarToggleSelector),e.enableBSToppltip&&$("body").tooltip({selector:e.BSTooltipSelector}),e.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),e.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),e.directChat.enable&&$(document).on("click",e.directChat.contactToggleSelector,function(){var e=$(this).parents(".direct-chat").first();e.toggleClass("direct-chat-contacts-open")}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").on("click",function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})})}),function(e){"use strict";e.fn.boxRefresh=function(t){function n(e){e.append(o),i.onLoadStart.call(e)}function r(e){e.find(o).remove(),i.onLoadDone.call(e)}var i=e.extend({trigger:".refresh-btn",source:"",onLoadStart:function(e){return e},onLoadDone:function(e){return e}},t),o=e('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');return this.each(function(){if(""===i.source)return void(window.console&&window.console.log("Please specify a source first - boxRefresh()"));var t=e(this),o=t.find(i.trigger).first();o.on("click",function(e){e.preventDefault(),n(t),t.find(".box-body").load(i.source,function(){r(t)})})})}}(jQuery),function(e){"use strict";e.fn.activateBox=function(){e.AdminLTE.boxWidget.activate(this)}}(jQuery),function(e){"use strict";e.fn.todolist=function(t){var n=e.extend({onCheck:function(e){return e},onUncheck:function(e){return e}},t);return this.each(function(){"undefined"!=typeof e.fn.iCheck?(e("input",this).on("ifChecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),n.onCheck.call(t)}),e("input",this).on("ifUnchecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),n.onUncheck.call(t)})):e("input",this).on("change",function(){var t=e(this).parents("li").first();t.toggleClass("done"),e("input",t).is(":checked")?n.onCheck.call(t):n.onUncheck.call(t)})})}}(jQuery),function(e){e.fn.extend({slimScroll:function(n){var r={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i=e.extend(r,n);return this.each(function(){function r(t){if(c){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var r=t.target||t.srcTarget||t.srcElement;e(r).closest("."+i.wrapperClass).is(w.parent())&&o(n,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function o(e,t,n){b=!1;var r=e,o=w.outerHeight()-z.outerHeight();if(t&&(r=parseInt(z.css("top"))+e*parseInt(i.wheelStep)/100*z.outerHeight(),r=Math.min(Math.max(r,0),o),r=e>0?Math.ceil(r):Math.floor(r),z.css({top:r+"px"})),v=parseInt(z.css("top"))/(w.outerHeight()-z.outerHeight()),r=v*(w[0].scrollHeight-w.outerHeight()),n){r=e;var a=r/w[0].scrollHeight*w.outerHeight();a=Math.min(Math.max(a,0),o),z.css({top:a+"px"})}w.scrollTop(r),w.trigger("slimscrolling",~~r),l(),u()}function a(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1)):document.attachEvent("onmousewheel",r)}function s(){g=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),x),z.css({height:g+"px"});var e=g==w.outerHeight()?"none":"block";z.css({display:e})}function l(){if(s(),clearTimeout(h),v==~~v){if(b=i.allowPageScroll,m!=v){var e=0==~~v?"top":"bottom";w.trigger("slimscroll",e)}}else b=!1;return m=v,g>=w.outerHeight()?void(b=!0):(z.stop(!0,!0).fadeIn("fast"),void(i.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function u(){i.alwaysVisible||(h=setTimeout(function(){i.disableFadeOut&&c||f||d||(z.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var c,f,d,h,p,g,v,m,y="<div></div>",x=30,b=!1,w=e(this);if(w.parent().hasClass(i.wrapperClass)){var _=w.scrollTop();if(z=w.parent().find("."+i.barClass),S=w.parent().find("."+i.railClass),s(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){w.parent().css("height","auto"),w.css("height","auto");var k=w.parent().parent().height();w.parent().css("height",k),w.css("height",k)}if("scrollTo"in n)_=parseInt(i.scrollTo);else if("scrollBy"in n)_+=parseInt(i.scrollBy);else if("destroy"in n)return z.remove(),S.remove(),void w.unwrap();o(_,!1,!0)}}else if(!(e.isPlainObject(n)&&"destroy"in n)){i.height="auto"==i.height?w.parent().height():i.height;var A=e(y).addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height});w.css({overflow:"hidden",width:i.width,height:i.height,"-ms-touch-action":"none"});var S=e(y).addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.railBorderRadius,background:i.railColor,opacity:i.railOpacity,zIndex:90}),z=e(y).addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.borderRadius,BorderRadius:i.borderRadius,MozBorderRadius:i.borderRadius,WebkitBorderRadius:i.borderRadius,zIndex:99}),M="right"==i.position?{right:i.distance}:{left:i.distance};S.css(M),z.css(M),w.wrap(A),w.parent().append(z),w.parent().append(S),i.railDraggable&&z.bind("mousedown",function(n){var r=e(document);return d=!0,t=parseFloat(z.css("top")),pageY=n.pageY,r.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,z.css("top",currTop),o(0,z.position().top,!1)}),r.bind("mouseup.slimscroll",function(e){d=!1,u(),r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),S.hover(function(){l()},function(){u()}),z.hover(function(){f=!0},function(){f=!1}),w.hover(function(){c=!0,l(),u()},function(){c=!1,u()}),window.navigator.msPointerEnabled?(w.bind("MSPointerDown",function(e,t){e.originalEvent.targetTouches.length&&(p=e.originalEvent.targetTouches[0].pageY)}),w.bind("MSPointerMove",function(e){if(e.originalEvent.preventDefault(),e.originalEvent.targetTouches.length){var t=(p-e.originalEvent.targetTouches[0].pageY)/i.touchScrollStep;o(t,!0),p=e.originalEvent.targetTouches[0].pageY}})):(w.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(p=e.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(e){if(b||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var t=(p-e.originalEvent.touches[0].pageY)/i.touchScrollStep;o(t,!0),p=e.originalEvent.touches[0].pageY}})),s(),"bottom"===i.start?(z.css({top:w.outerHeight()-z.outerHeight()}),o(0,!0)):"top"!==i.start&&(o(e(i.start).position().top,null,!0),i.alwaysVisible||z.hide()),a()}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),function(){"use strict";function e(t,r){function i(e,t){return function(){return e.apply(t,arguments)}}var o;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,u=a.length;l<u;l++)s[a[l]]=i(s[a[l]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,r):i.call(t,e,n,r)},t.addEventListener=function(e,n,r){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(t,e,n,r)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=r&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],r){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||r&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),r&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!r||i||(l=c.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),
e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,r,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),o=r.source,u=r.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",o),n=a(o,t)):(l[u]||(s("new io instance for %s",o),l[u]=a(o,t)),n=l[u]),n.socket(r.path)}var i=e("./url"),o=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=r;var l=n.managers={};n.protocol=o.protocol,n.connect=r,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(e,t,n){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var i=(e("./url"),e("engine.io-client")),o=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),u=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),f=e("indexof"),d=e("backo2");t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=l(t,"open",function(){n.onopen(),e&&e()}),o=l(t,"error",function(t){if(c("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var s=setTimeout(function(){c("connect attempt timed out after %d",a),r.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(r),this.subs.push(o),this},r.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",u(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded"))),this.subs.push(l(e,"error",u(this,"onerror"))),this.subs.push(l(e,"close",u(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~f(n.connected,t)||n.connected.push(t)})}return t},r.prototype.destroy=function(e){var t=f(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},r.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){c("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(e,t,n){function r(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=r},{}],5:[function(e,t,n){function r(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),s=e("./on"),l=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("has-binary");t.exports=n=r;var f={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n=i.EVENT;c(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u("sending ack %j",r);var o=c(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){u("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(e,t,n){(function(n){function r(e,t){var r=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(t&&t.port==r.port?"":":"+r.port),r}var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],9:[function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function r(e){return r.enabled(e)?function(t){t=i(t);var n=new Date,o=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)e=n[o].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,n=6e4,r=60*n;return e>=r?(e/r).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(o){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t,n){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=c(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var i=t.host.split(":");t.hostname=i.shift(),i.length?t.port=i.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),u=e("engine.io-parser"),c=e("parseuri"),f=e("parsejson"),d=e("parseqs");t.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=e("./transport"),r.transports=e("./transports"),r.parser=e("engine.io-parser"),r.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=i(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;f=f||t}f||(s('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!f)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",c),!c)return;r.priorWebsocketSuccess="websocket"==c.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!=d.readyState&&(s("changing transport and sending upgrade packet"),u(),d.setTransport(c),c.send([{type:"upgrade"}]),d.emit("upgrade",c),c=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,d.emit("upgradeError",n)}}))}function n(){f||(f=!0,u(),c.close(),c=null)}function i(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function l(e){c&&e.name!=c.name&&(s('"%s" works - aborting "%s"',e.name,c.name),n())}function u(){c.removeListener("open",t),c.removeListener("error",i),c.removeListener("close",o),d.removeListener("close",a),d.removeListener("upgrading",l)}s('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),f=!1,d=this;r.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",i),c.once("close",o),this.once("close",a),this.once("upgrading",l),c.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(f(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){this.sendPacket("ping")},r.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},r.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:e,data:t};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){s("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=r,o(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){function r(e){var n,r=!1,s=!1,l=!1!==e.jsonp;if(t.location){var u="https:"==location.protocol,c=location.port;c||(c=u?443:80),r=e.hostname!=location.hostname||c!=e.port,s=e.secure!=u}if(e.xdomain=r,e.xscheme=s,n=new i(e),"open"in n&&!e.forceJSONP)return new o(e);if(!l)throw new Error("JSONP disabled");return new a(e)}var i=e("xmlhttprequest"),o=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=r,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,n){(function(n){function r(){}function i(e){o.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}var o=e("./polling"),a=e("component-inherit");t.exports=i;var s,l=/\n/g,u=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=c,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),e=e.replace(u,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(f){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t,n){(function(n){function r(){}function i(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!=n.location.hostname||r!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var s=e("xmlhttprequest"),l=e("./polling"),u=e("component-emitter"),c=e("component-inherit"),f=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,c(i,l),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),r=this;try{if(f("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in t&&(t.withCredentials=!0),
this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},f("xhr data %s",this.data),t.send(this.data)}catch(i){return void setTimeout(function(){r.onError(i)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(t){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){function r(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=r;var u=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();s(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||t()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,r){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(e,t,n){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),u=e("ws");t.exports=r,s(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new u(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var r=0,i=e.length;r<i;r++)o.encodePacket(e[r],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){l("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},r.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===r.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(e,t,n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":38}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function s(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=o,n.formatArgs=i,n.save=a,n.load=s,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":23}],23:[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;s++;var i=n.formatters[r];if("function"==typeof i){var o=a[s];t=i.call(e,o),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=i.log||n.log||void 0;l.apply(e,a)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=l,n.disable=a,n.enable=o,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:24}],24:[function(e,t,n){function r(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*u;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function i(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return a(e,c,"day")||a(e,u,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,u=60*l,c=24*u,f=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):i(e)}},{}],25:[function(e,t,n){(function(t){function r(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}function i(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=m[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}function o(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,r)},i.readAsArrayBuffer(e.data)}function a(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(v)return o(e,t,r);var i=new Uint8Array(1);i[0]=m[e.type];var a=new b([i.buffer,e.data]);return r(a)}function s(e,t,n){for(var r=new Array(e.length),i=d(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},a=0;a<e.length;a++)o(a,e[a],i)}var l=e("./keys"),u=e("has-binary"),c=e("arraybuffer.slice"),f=e("base64-arraybuffer"),d=e("after"),h=e("utf8"),p=navigator.userAgent.match(/Android/i),g=/PhantomJS/i.test(navigator.userAgent),v=p||g;n.protocol=3;var m=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=l(m),x={type:"error",data:"parser error"},b=e("blob");n.encodePacket=function(e,n,o,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof o&&(s=o,o=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return i(e,n,s);if(b&&l instanceof t.Blob)return a(e,n,s);if(l&&l.base64)return r(e,s);var u=m[e.type];return void 0!==e.data&&(u+=o?h.encode(String(e.data)):String(e.data)),s(""+u)},n.encodeBase64Packet=function(e,r){var i="b"+n.packets[e.type];if(b&&e.data instanceof b){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var l=new Uint8Array(e.data),u=new Array(l.length),c=0;c<l.length;c++)u[c]=l[c];a=String.fromCharCode.apply(null,u)}return i+=t.btoa(a),r(i)},n.decodePacket=function(e,t,r){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r)try{e=h.decode(e)}catch(i){return x}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:x}var a=new Uint8Array(e),o=a[0],s=c(e,1);return b&&"blob"===t&&(s=new b([s])),{type:y[o],data:s}},n.decodeBase64Packet=function(e,n){var r=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=f.decode(e.substr(1));return"blob"===n&&b&&(i=new b([i])),{type:r,data:i}},n.encodePayload=function(e,t,r){function i(e){return e.length+":"+e}function o(e,r){n.encodePacket(e,!!a&&t,!0,function(e){r(null,i(e))})}"function"==typeof t&&(r=t,t=null);var a=u(e);return t&&a?b&&!v?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void s(e,o,function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);"function"==typeof t&&(r=t,t=null);var i;if(""==e)return r(x,0,1);for(var o,a,s="",l=0,u=e.length;l<u;l++){var c=e.charAt(l);if(":"!=c)s+=c;else{if(""==s||s!=(o=Number(s)))return r(x,0,1);if(a=e.substr(l+1,o),s!=a.length)return r(x,0,1);if(a.length){if(i=n.decodePacket(a,t,!0),x.type==i.type&&x.data==i.data)return r(x,0,1);var f=r(i,l+o,u);if(!1===f)return}l+=o,s=""}}return""!=s?r(x,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,r,function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}t?i[o++]=0:i[o++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),t(i.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,b){var l=new b([n.buffer,s.buffer,e]);t(null,l)}})}s(e,r,function(e,n){return t(new b(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,o=[],a=!1;i.byteLength>0;){for(var s=new Uint8Array(i),l=0===s[0],u="",f=1;255!=s[f];f++){if(u.length>310){a=!0;break}u+=s[f]}if(a)return r(x,0,1);i=c(i,2+u.length),u=parseInt(u);var d=c(i,0,u);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(h){var p=new Uint8Array(d);d="";for(var f=0;f<p.length;f++)d+=String.fromCharCode(p[f])}o.push(d),i=c(i,u)}var g=o.length;o.forEach(function(e,i){r(n.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],27:[function(e,t,n){function r(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||i,r.count=e,0===e?t():r}function i(){}t.exports=r},{}],28:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},{}],29:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,r,i,o,a,s=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(n=0;n<l;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&a;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),s=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),l=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return a?s?e.Blob:i:l?r:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,n,r){(function(t){!function(i){function o(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function a(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=b(t>>>10&1023|55296),t=56320|1023&t),i+=b(t);return i}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return b(e>>t&63|128)}function u(e){if(0==(4294967168&e))return b(e);var t="";return 0==(4294965248&e)?t=b(e>>6&31|192):0==(4294901760&e)?(s(e),t=b(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=b(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=b(63&e|128)}function c(e){for(var t,n=o(e),r=n.length,i=-1,a="";++i<r;)t=n[i],a+=u(t);return a}function f(){if(x>=y)throw Error("Invalid byte index");var e=255&m[x];if(x++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,n,r,i;if(x>y)throw Error("Invalid byte index");if(x==y)return!1;if(e=255&m[x],x++,0==(128&e))return e;if(192==(224&e)){var t=f();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=f(),n=f(),i=(15&e)<<12|t<<6|n,i>=2048)return s(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=f(),n=f(),r=f(),i=(15&e)<<18|t<<12|n<<6|r,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}function h(e){m=o(e),y=m.length,x=0;for(var t,n=[];(t=d())!==!1;)n.push(t);return a(n)}var p="object"==typeof r&&r,g="object"==typeof n&&n&&n.exports==p&&n,v="object"==typeof t&&t;v.global!==v&&v.window!==v||(i=v);var m,y,x,b=String.fromCharCode,w={version:"2.0.0",encode:c,decode:h};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return w});else if(p&&!p.nodeType)if(g)g.exports=w;else{var _={},k=_.hasOwnProperty;for(var A in w)k.call(w,A)&&(p[A]=w[A])}else i.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],34:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");n!=-1&&o!=-1&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=r.exec(e||""),s={},l=14;l--;)s[i[l]]=a[l]||"";return n!=-1&&o!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],35:[function(e,t,n){function r(e,t,n){var r;return r=t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;t.exports=o?r:null,o&&(r.prototype=o.prototype)},{}],36:[function(e,t,n){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],38:[function(e,t,n){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(i){t.exports=!1}},{global:39}],39:[function(e,t,n){t.exports=function(){return this}()},{}],40:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],41:[function(e,t,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],42:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n}},{}],43:[function(e,t,n){(function(t){var r=e("isarray"),i=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],o=e.data,a=e;return a.data=t(o),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var i=t[e.num];return i}if(r(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,l,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var c=new FileReader;c.onload=function(){u?u[l]=this.result:s=this.result,--a||n(s)},c.readAsArrayBuffer(e)}else if(r(e))for(var f=0;f<e.length;f++)o(e[f],f,e);else if(e&&"object"==typeof e&&!i(e))for(var d in e)o(e[d],d,e)}var a=0,s=e;o(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(e,t,n){function r(){}function i(e){var t="",r=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=f.stringify(e.data)),c("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=h.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}h.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return u();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(i)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(t.nsp+=o,r==e.length)break}else t.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(t.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}if(e.charAt(++r))try{t.data=f.parse(e.substr(r))}catch(s){return u()}return c("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:n.ERROR,data:"parser error"}}var c=e("debug")("socket.io-parser"),f=e("json3"),d=(e("isarray"),e("component-emitter")),h=e("./binary"),p=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=a,r.prototype.encode=function(e,t){if(c("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var r=i(e);t([r])}},d(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){t.exports=e(37)},{}],47:[function(t,n,r){!function(t){function n(e){if(n[e]!==a)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,l="function"==typeof o&&f;if(l){(r=function(){return 1}).toJSON=r;try{l="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(s)===a&&o(a)===a&&o()===a&&"1"===o(r)&&"[1]"==o([r])&&"[null]"==o([a])&&"null"==o(null)&&"[null,null,null]"==o([a,s,null])&&o({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===o(null,r)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==o(new Date((-1)))}catch(u){l=!1}}t=l}if("json-parse"==e){var d=c.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){r=d(i);var h=5==r.a.length&&1===r.a[0];if(h){try{h=!d('"\t"')}catch(u){}if(h)try{h=1!==d("01")}catch(u){}if(h)try{h=1!==d("1.")}catch(u){}}}}catch(u){h=!1}t=h}}return n[e]=!!t}var i,o,a,s={}.toString,l="function"==typeof e&&e.amd,u="object"==typeof JSON&&JSON,c="object"==typeof r&&r&&!r.nodeType&&r;c&&u?(c.stringify=u.stringify,c.parse=u.parse):c=t.JSON=u||{};var f=new Date((-0xc782b5b800cec));try{f=f.getUTCFullYear()==-109252&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(d){}if(!n("json")){var h="[object Function]",p="[object Date]",g="[object Number]",v="[object String]",m="[object Array]",y="[object Boolean]",x=n("bug-string-char-index");if(!f)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(i={}.hasOwnProperty)||(i=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?i=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,i=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,i.call(this,e)});var k={"boolean":1,number:1,string:1,undefined:1},A=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!k[n]};if(o=function(e,t){var n,r,a,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(a in r)i.call(r,a)&&l++;return n=r=null,l?o=2==l?function(e,t){var n,r={},o=s.call(e)==h;for(n in e)o&&"prototype"==n||i.call(r,n)||!(r[n]=1)||!i.call(e,n)||t(n)}:function(e,t){var n,r,o=s.call(e)==h;for(n in e)o&&"prototype"==n||!i.call(e,n)||(r="constructor"===n)||t(n);(r||i.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var n,o,a=s.call(e)==h,l=!a&&"function"!=typeof e.constructor&&A(e,"hasOwnProperty")?e.hasOwnProperty:i;for(n in e)a&&"prototype"==n||!l.call(e,n)||t(n);for(o=r.length;n=r[--o];l.call(e,n)&&t(n));}),o(e,t)},!n("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",M=function(e,t){return(z+(t||0)).slice(-e)},C="\\u00",T=function(e){var t,n='"',r=0,i=e.length,o=i>10&&x;for(o&&(t=e.split(""));r<i;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=S[a];break;default:if(a<32){n+=C+M(2,a.toString(16));break}n+=o?t[r]:x?e.charAt(r):e[r]}}return n+'"'},E=function(e,t,n,r,l,u,c){var f,d,h,x,w,k,A,S,z,C,j,D,O,N,P,F;try{f=t[e]}catch(I){}if("object"==typeof f&&f)if(d=s.call(f),d!=p||i.call(f,"toJSON"))"function"==typeof f.toJSON&&(d!=g&&d!=v&&d!=m||i.call(f,"toJSON"))&&(f=f.toJSON(e));else if(f>-1/0&&f<1/0){if(_){for(w=b(f/864e5),h=b(w/365.2425)+1970-1;_(h+1,0)<=w;h++);for(x=b((w-_(h,0))/30.42);_(h,x+1)<=w;x++);w=1+w-_(h,x),k=(f%864e5+864e5)%864e5,A=b(k/36e5)%24,S=b(k/6e4)%60,z=b(k/1e3)%60,C=k%1e3}else h=f.getUTCFullYear(),x=f.getUTCMonth(),w=f.getUTCDate(),A=f.getUTCHours(),S=f.getUTCMinutes(),z=f.getUTCSeconds(),C=f.getUTCMilliseconds();f=(h<=0||h>=1e4?(h<0?"-":"+")+M(6,h<0?-h:h):M(4,h))+"-"+M(2,x+1)+"-"+M(2,w)+"T"+M(2,A)+":"+M(2,S)+":"+M(2,z)+"."+M(3,C)+"Z"}else f=null;if(n&&(f=n.call(t,e,f)),null===f)return"null";if(d=s.call(f),d==y)return""+f;if(d==g)return f>-1/0&&f<1/0?""+f:"null";if(d==v)return T(""+f);if("object"==typeof f){for(N=c.length;N--;)if(c[N]===f)throw TypeError();if(c.push(f),j=[],P=u,u+=l,d==m){for(O=0,N=f.length;O<N;O++)D=E(O,f,n,r,l,u,c),j.push(D===a?"null":D);F=j.length?l?"[\n"+u+j.join(",\n"+u)+"\n"+P+"]":"["+j.join(",")+"]":"[]"}else o(r||f,function(e){var t=E(e,f,n,r,l,u,c);t!==a&&j.push(T(e)+":"+(l?" ":"")+t)}),F=j.length?l?"{\n"+u+j.join(",\n"+u)+"\n"+P+"}":"{"+j.join(",")+"}":"{}";return c.pop(),F}};c.stringify=function(e,t,n){var r,i,o,a;
if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==h)i=t;else if(a==m){o={};for(var l,u=0,c=t.length;u<c;l=t[u++],a=s.call(l),(a==v||a==g)&&(o[l]=1));}if(n)if((a=s.call(n))==g){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==v&&(r=n.length<=10?n:n.slice(0,10));return E("",(l={},l[""]=e,l),i,o,r,"",[])}}if(!n("json-parse")){var j,D,O=String.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw j=D=null,SyntaxError()},F=function(){for(var e,t,n,r,i,o=D,a=o.length;j<a;)switch(i=o.charCodeAt(j)){case 9:case 10:case 13:case 32:j++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=x?o.charAt(j):o[j],j++,e;case 34:for(e="@",j++;j<a;)if(i=o.charCodeAt(j),i<32)P();else if(92==i)switch(i=o.charCodeAt(++j)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=N[i],j++;break;case 117:for(t=++j,n=j+4;j<n;j++)i=o.charCodeAt(j),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||P();e+=O("0x"+o.slice(t,j));break;default:P()}else{if(34==i)break;for(i=o.charCodeAt(j),t=j;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++j);e+=o.slice(t,j)}if(34==o.charCodeAt(j))return j++,e;P();default:if(t=j,45==i&&(r=!0,i=o.charCodeAt(++j)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(j+1),i>=48&&i<=57)&&P(),r=!1;j<a&&(i=o.charCodeAt(j),i>=48&&i<=57);j++);if(46==o.charCodeAt(j)){for(n=++j;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==j&&P(),j=n}if(i=o.charCodeAt(j),101==i||69==i){for(i=o.charCodeAt(++j),43!=i&&45!=i||j++,n=j;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==j&&P(),j=n}return+o.slice(t,j)}if(r&&P(),"true"==o.slice(j,j+4))return j+=4,!0;if("false"==o.slice(j,j+5))return j+=5,!1;if("null"==o.slice(j,j+4))return j+=4,null;P()}return"$"},I=function(e){var t,n;if("$"==e&&P(),"string"==typeof e){if("@"==(x?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=F(),"]"!=e;n||(n=!0))n&&(","==e?(e=F(),"]"==e&&P()):P()),","==e&&P(),t.push(I(e));return t}if("{"==e){for(t={};e=F(),"}"!=e;n||(n=!0))n&&(","==e?(e=F(),"}"==e&&P()):P()),","!=e&&"string"==typeof e&&"@"==(x?e.charAt(0):e[0])&&":"==F()||P(),t[e.slice(1)]=I(F());return t}P()}return e},R=function(e,t,n){var r=L(e,t,n);r===a?delete e[t]:e[t]=r},L=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(s.call(i)==m)for(r=i.length;r--;)R(i,r,n);else o(i,function(e){R(i,e,n)});return n.call(e,t,i)};c.parse=function(e,t){var n,r;return j=0,D=""+e,n=I(F()),"$"!=F()&&P(),j=D=null,t&&s.call(t)==h?L((r={},r[""]=n,r),"",t):n}}}l&&e(function(){return c})}(this)},{}],48:[function(e,t,n){function r(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}t.exports=r},{}]},{},[1])(1)}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function i(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function o(e){return function(){return this[e].apply(this,arguments)}}function a(e){return e&&!isNaN(e.getTime())}function s(t,n){function r(e,t){return t.toLowerCase()}var i,o=e(t).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in o)n.test(l)&&(i=l.replace(s,r),a[i]=o[l]);return a}function l(t){var n={};if(v[t]||(t=t.split("-")[0],v[t])){var r=v[t];return e.each(g,function(e,t){t in r&&(n[t]=r[t])}),n}}var u=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,r=this.length;r>n;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new u;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),c=function(t,n){e(t).data("datepicker",this),this._process_options(n),this.dates=new u,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(m.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(e,n){return 0===e||"days"===e||"month"===e?0:1===e||"months"===e||"year"===e?1:2===e||"years"===e||"decade"===e?2:3===e||"decades"===e||"century"===e?3:4===e||"centuries"===e||"millennium"===e?4:n!==t&&n},_check_template:function(n){try{if(n===t||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;var r=e(n);return r.length>0}catch(i){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),o=i.language;v[o]||(o=o.split("-")[0],v[o]||(o=p.language)),i.language=o,i.startView=this._resolveViewName(i.startView,0),i.minViewMode=this._resolveViewName(i.minViewMode,0),i.maxViewMode=this._resolveViewName(i.maxViewMode,4),i.startView=Math.min(i.startView,i.maxViewMode),i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate!==!1&&(i.multidate=Math.max(0,i.multidate))),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var a=m.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=m.parseDate(i.startDate,a,i.language,i.assumeNearbyYear):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=m.parseDate(i.endDate,a,i.language,i.assumeNearbyYear):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)}),i.daysOfWeekHighlighted=i.daysOfWeekHighlighted||[],e.isArray(i.daysOfWeekHighlighted)||(i.daysOfWeekHighlighted=i.daysOfWeekHighlighted.split(/[,\s]*/)),i.daysOfWeekHighlighted=e.map(i.daysOfWeekHighlighted,function(e){return parseInt(e,10)}),i.datesDisabled=i.datesDisabled||[],e.isArray(i.datesDisabled)||(i.datesDisabled=[i.datesDisabled]),i.datesDisabled=e.map(i.datesDisabled,function(e){return m.parseDate(e,a,i.language,i.assumeNearbyYear)});var s=String(i.orientation).toLowerCase().split(/\s+/g),l=i.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else l=e.grep(s,function(e){return/^left|right$/.test(e)}),i.orientation.x=l[0]||"auto",l=e.grep(s,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=l[0]||"auto";if(i.defaultViewDate){var u=i.defaultViewDate.year||(new Date).getFullYear(),c=i.defaultViewDate.month||0,f=i.defaultViewDate.day||1;i.defaultViewDate=n(u,c,f)}else i.defaultViewDate=r()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.on(i,r)},_unapplyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.off(r,i)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};this.o.showOnFocus===!0&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){return this.inputField.prop("disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this)},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var n;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))n=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),t.preventDefault()},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return"undefined"!=typeof e?new Date(e):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,n,r)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),r=10,i=e(this.o.container),o=i.width(),a="body"===this.o.container?e(document).scrollTop():i.scrollTop(),s=i.offset(),l=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&l.push(parseInt(t))});var u=Math.max.apply(Math,l)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),f=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=c.left-s.left,p=c.top-s.top;"body"!==this.o.container&&(p+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=t-d)):c.left<0?(this.picker.addClass("datepicker-orient-left"),h-=c.left-r):h+t>o?(this.picker.addClass("datepicker-orient-right"),h+=d-t):this.picker.addClass("datepicker-orient-left");var g,v=this.o.orientation.y;if("auto"===v&&(g=-a+p-n,v=0>g?"bottom":"top"),this.picker.addClass("datepicker-orient-"+v),"top"===v?p-=n+parseInt(this.picker.css("padding-top")):p+=f,this.o.rtl){var m=o-(h+d);this.picker.css({top:p,right:m,zIndex:u})}else this.picker.css({top:p,left:h,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],r=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=e.grep(n,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1}),n+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)n+='<th class="dow',e.inArray(t,this.o.daysOfWeekDisabled)>-1&&(n+=" disabled"),n+='">'+v[this.o.language].daysMin[t++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",n=0;12>n;){var r=e&&e.getMonth()===n?" focused":"";t+='<span class="month'+r+'">'+v[this.o.language].monthsShort[n++]+"</span>"}this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),this.dateWithinRange(t)||n.push("disabled"),this.dateIsDisabled(t)&&n.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected"),t.valueOf()===this.range[0]&&n.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,r,i,o,a,s,l,u){var c,f,d,h,p,g,v,m,y,x,b;for(c="",f=this.picker.find(n),d=parseInt(a/i,10)*i,p=parseInt(s/o,10)*o,g=parseInt(l/o,10)*o,h=e.map(this.dates,function(e){return parseInt(e.getUTCFullYear()/o,10)*o}),f.find(".datepicker-switch").text(d+"-"+(d+9*o)),v=d-o,m=-1;11>m;m+=1)y=[r],x=null,-1===m?y.push("old"):10===m&&y.push("new"),-1!==e.inArray(v,h)&&y.push("active"),(p>v||v>g)&&y.push("disabled"),v===this.viewDate.getFullYear()&&y.push("focused"),u!==e.noop&&(b=u(new Date(v,0,1)),b===t?b={}:"boolean"==typeof b?b={enabled:b}:"string"==typeof b&&(b={classes:b}),b.enabled===!1&&y.push("disabled"),b.classes&&(y=y.concat(b.classes.split(/\s+/))),b.tooltip&&(x=b.tooltip)),c+='<span class="'+y.join(" ")+'"'+(x?' title="'+x+'"':"")+">"+v+"</span>",v+=o;f.find("td").html(c)},fill:function(){var r,i,o=new Date(this.viewDate),a=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),u=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,f=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=v[this.o.language].today||v.en.today||"",h=v[this.o.language].clear||v.en.clear||"",p=v[this.o.language].titleFormat||v.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(m.formatDate(o,p,this.o.language)),this.picker.find("tfoot .today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(h).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var g=n(a,s-1,28),y=m.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y),g.setUTCDate(y-(g.getUTCDay()-this.o.weekStart+7)%7);var x=new Date(g);g.getUTCFullYear()<100&&x.setUTCFullYear(g.getUTCFullYear()),x.setUTCDate(x.getUTCDate()+42),x=x.valueOf();for(var b,w=[];g.valueOf()<x;){if(g.getUTCDay()===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*864e5),k=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),A=new Date(Number(A=n(k.getUTCFullYear(),0,1))+(11-A.getUTCDay())%7*864e5),S=(k-A)/864e5/7+1;w.push('<td class="cw">'+S+"</td>")}b=this.getClassNames(g),b.push("day"),this.o.beforeShowDay!==e.noop&&(i=this.o.beforeShowDay(this._utc_to_local(g)),i===t?i={}:"boolean"==typeof i?i={enabled:i}:"string"==typeof i&&(i={classes:i}),i.enabled===!1&&b.push("disabled"),i.classes&&(b=b.concat(i.classes.split(/\s+/))),i.tooltip&&(r=i.tooltip)),b=e.isFunction(e.uniqueSort)?e.uniqueSort(b):e.unique(b),w.push('<td class="'+b.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+g.getUTCDate()+"</td>"),r=null,g.getUTCDay()===this.o.weekEnd&&w.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var z=v[this.o.language].monthsTitle||v.en.monthsTitle||"Months",M=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?z:a).end().find("span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===a&&M.eq(t.getUTCMonth()).addClass("active")}),(l>a||a>c)&&M.addClass("disabled"),a===l&&M.slice(0,u).addClass("disabled"),a===c&&M.slice(f+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var C=this;e.each(M,function(n,r){var i=new Date(a,n,1),o=C.o.beforeShowMonth(i);o===t?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),o.enabled!==!1||e(r).hasClass("disabled")||e(r).addClass("disabled"),o.classes&&e(r).addClass(o.classes),o.tooltip&&e(r).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,a,l,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,a,l,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,a,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault(),t.stopPropagation();var i,o,a,s,l,u,c;i=e(t.target),i.hasClass("datepicker-switch")&&this.showMode(1);var f=i.closest(".prev, .next");f.length>0&&(o=m.modes[this.viewMode].navStep*(f.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),i.hasClass("today")&&!i.hasClass("day")&&(this.showMode(-2),this._setDate(r(),"linked"===this.o.todayBtn?null:"view")),i.hasClass("clear")&&this.clearDates(),i.hasClass("disabled")||(i.hasClass("day")&&(a=parseInt(i.text(),10)||1,s=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),i.hasClass("old")&&(0===l?(l=11,s-=1,u=!0,c=!0):(l-=1,u=!0)),i.hasClass("new")&&(11===l?(l=0,s+=1,u=!0,c=!0):(l+=1,u=!0)),this._setDate(n(s,l,a)),c&&this._trigger("changeYear",this.viewDate),u&&this._trigger("changeMonth",this.viewDate)),i.hasClass("month")&&(this.viewDate.setUTCDate(1),a=1,l=i.parent().find("span").index(i),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(s,l,a)),this.showMode()):this.showMode(-1),this.fill()),(i.hasClass("year")||i.hasClass("decade")||i.hasClass("century"))&&(this.viewDate.setUTCDate(1),a=1,l=0,s=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(s),i.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(s,l,a))),i.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(n(s,l,a))),i.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(n(s,l,a))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var n=new Date(e);return n.setUTCDate(e.getUTCDate()+t),n},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!a(e))return this.o.defaultViewDate;if(!t)return e;var n,r,i=new Date(e.valueOf()),o=i.getUTCDate(),s=i.getUTCMonth(),l=Math.abs(t);if(t=t>0?1:-1,1===l)r=-1===t?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==n},n=s+t,i.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var u=0;l>u;u++)i=this.moveMonth(i,t);n=i.getUTCMonth(),i.setUTCDate(o),r=function(){return n!==i.getUTCMonth()}}for(;r();)i.setUTCDate(--o),i.setUTCMonth(n);return i},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,n){do{if(e=this[n](e,t),!this.dateWithinRange(e))return!1;n="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return i(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void((40===e.keyCode||27===e.keyCode)&&(this.show(),e.stopPropagation()));var t,n,r=!1,i=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(n=this.moveAvailableDate(i,t,"moveYear"),n&&this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveAvailableDate(i,t,"moveMonth"),n&&this._trigger("changeMonth",this.viewDate)):37===e.keyCode||39===e.keyCode?n=this.moveAvailableDate(i,t,"moveDay"):this.weekOfDateIsDisabled(i)||(n=this.moveAvailableDate(i,t,"moveWeek")):1===this.viewMode?((38===e.keyCode||40===e.keyCode)&&(t=4*t),n=this.moveAvailableDate(i,t,"moveMonth")):2===this.viewMode&&((38===e.keyCode||40===e.keyCode)&&(t=4*t),n=this.moveAvailableDate(i,t,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;i=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(i),r=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}r&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var f=function(t,n){e(t).data("datepicker",this),this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,h.call(e(this.inputs),n).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};f.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker");if("undefined"!=typeof n){var r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),o=i-1,a=i+1,s=this.inputs.length;if(-1!==i){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[o])for(;o>=0&&r<this.dates[o];)this.pickers[o--].setUTCDate(r);else if(r>this.dates[a])for(;s>a&&r>this.dates[a];)this.pickers[a++].setUTCDate(r);this.updateDates(),delete this.updating}}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var d=e.fn.datepicker,h=function(n){var r=Array.apply(null,arguments);r.shift();var i;if(this.each(function(){var t=e(this),o=t.data("datepicker"),a="object"==typeof n&&n;if(!o){var u=s(this,"date"),d=e.extend({},p,u,a),h=l(d.language),g=e.extend({},p,h,u,a);t.hasClass("input-daterange")||g.inputs?(e.extend(g,{inputs:g.inputs||t.find("input").toArray()}),o=new f(this,g)):o=new c(this,g),t.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(i=o[n].apply(o,r))}),i===t||i instanceof c||i instanceof f)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};e.fn.datepicker=h;var p=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},g=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var v=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",
navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,o,a,s){function l(e,t){return t===!0&&(t=10),100>e&&(e+=2e3,e>(new Date).getFullYear()+t&&(e-=100)),e}function u(){var e=this.slice(0,y[h].length),t=y[h].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!i)return t;if(i instanceof Date)return i;if("string"==typeof o&&(o=m.parseFormat(o)),o.toValue)return o.toValue(i,o,a);var f,d,h,p,g=/([\-+]\d+)([dmwy])/,y=i.match(/([\-+]\d+)([dmwy])/g),x={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},b={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,h=0;h<y.length;h++)f=g.exec(y[h]),d=parseInt(f[1]),p=x[f[2]],i=c.prototype[p](i,d);return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())}if("undefined"!=typeof b[i]&&(i=b[i],y=i.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i))){for(i=new Date,h=0;h<y.length;h++)f=g.exec(y[h]),d=parseInt(f[1]),p=x[f[2]],i=c.prototype[p](i,d);return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())}y=i&&i.match(this.nonpunctuation)||[],i=new Date;var w,_,k={},A=["yyyy","yy","M","MM","m","mm","d","dd"],S={yyyy:function(e,t){return e.setUTCFullYear(s?l(t,s):t)},yy:function(e,t){return e.setUTCFullYear(s?l(t,s):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};S.M=S.MM=S.mm=S.m,S.dd=S.d,i=r();var z=o.parts.slice();if(y.length!==z.length&&(z=e(z).filter(function(t,n){return-1!==e.inArray(n,A)}).toArray()),y.length===z.length){var M;for(h=0,M=z.length;M>h;h++){if(w=parseInt(y[h],10),f=z[h],isNaN(w))switch(f){case"MM":_=e(v[a].months).filter(u),w=e.inArray(_[0],v[a].months)+1;break;case"M":_=e(v[a].monthsShort).filter(u),w=e.inArray(_[0],v[a].monthsShort)+1}k[f]=w}var C,T;for(h=0;h<A.length;h++)T=A[h],T in k&&!isNaN(k[T])&&(C=new Date(i),S[T](C,k[T]),isNaN(C)||(i=C))}return i},formatDate:function(t,n,r){if(!t)return"";if("string"==typeof n&&(n=m.parseFormat(n)),n.toDisplay)return n.toDisplay(t,n,r);var i={d:t.getUTCDate(),D:v[r].daysShort[t.getUTCDay()],DD:v[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:v[r].monthsShort[t.getUTCMonth()],MM:v[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)o.length&&t.push(o.shift()),t.push(i[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=d,this},e.fn.datepicker.version="1.6.4",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),h.call(n,"show"))}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))})}),!function(e){e.fn.datepicker.dates.pt={days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"}}(jQuery),!function(e){e.fn.datepicker.dates["en-GB"]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",monthsTitle:"Months",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"}}(jQuery),!function(){function e(e){return document.createElementNS(u,e)}function t(e){return(10>e?"0":"")+e}function n(e){var t=++m+"";return e?e+t:t}function r(r,s){function u(e,t){var n=d.offset(),r=/^touch/.test(e.type),i=n.left+y,a=n.top+y,u=(r?e.originalEvent.touches[0]:e).pageX-i,f=(r?e.originalEvent.touches[0]:e).pageY-a,h=Math.sqrt(u*u+f*f),v=!1;if(!t||!(x-w>h||h>x+w)){e.preventDefault();var m=setTimeout(function(){o.addClass("clockpicker-moving")},200);c&&d.append(T.canvas),T.setHand(u,f,!t,!0),l.off(p).on(p,function(e){e.preventDefault();var t=/^touch/.test(e.type),n=(t?e.originalEvent.touches[0]:e).pageX-i,r=(t?e.originalEvent.touches[0]:e).pageY-a;(v||n!==u||r!==f)&&(v=!0,T.setHand(n,r,!1,!0))}),l.off(g).on(g,function(e){l.off(g),e.preventDefault();var n=/^touch/.test(e.type),r=(n?e.originalEvent.changedTouches[0]:e).pageX-i,c=(n?e.originalEvent.changedTouches[0]:e).pageY-a;(t||v)&&r===u&&c===f&&T.setHand(r,c),"hours"===T.currentView?T.toggleView("minutes",k/2):s.autoclose&&(T.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){T.done()},k/2)),d.prepend(I),clearTimeout(m),o.removeClass("clockpicker-moving"),l.off(p)})}}var f=a(A),d=f.find(".clockpicker-plate"),v=f.find(".clockpicker-hours"),m=f.find(".clockpicker-minutes"),S=f.find(".clockpicker-am-pm-block"),z="INPUT"===r.prop("tagName"),M=z?r:r.find("input"),C=r.find(".input-group-addon"),T=this;if(this.id=n("cp"),this.element=r,this.options=s,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=z,this.input=M,this.addon=C,this.popover=f,this.plate=d,this.hoursView=v,this.minutesView=m,this.amPmBlock=S,this.spanHours=f.find(".clockpicker-span-hours"),this.spanMinutes=f.find(".clockpicker-span-minutes"),this.spanAmPm=f.find(".clockpicker-span-am-pm"),this.amOrPm="PM",s.twelvehour){var E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");a(E),a('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){T.amOrPm="AM",a(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),a('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){T.amOrPm="PM",a(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}s.autoclose||a('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+s.donetext+"</button>").click(a.proxy(this.done,this)).appendTo(f),"top"!==s.placement&&"bottom"!==s.placement||"top"!==s.align&&"bottom"!==s.align||(s.align="left"),"left"!==s.placement&&"right"!==s.placement||"left"!==s.align&&"right"!==s.align||(s.align="top"),f.addClass(s.placement),f.addClass("clockpicker-align-"+s.align),this.spanHours.click(a.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(a.proxy(this.toggleView,this,"minutes")),M.on("focus.clockpicker click.clockpicker",a.proxy(this.show,this)),C.on("click.clockpicker",a.proxy(this.toggle,this));var j,D,O,N,P=a('<div class="clockpicker-tick"></div>');if(s.twelvehour)for(j=1;13>j;j+=1)D=P.clone(),O=j/6*Math.PI,N=x,D.css("font-size","120%"),D.css({left:y+Math.sin(O)*N-w,top:y-Math.cos(O)*N-w}),D.html(0===j?"00":j),v.append(D),D.on(h,u);else for(j=0;24>j;j+=1){D=P.clone(),O=j/6*Math.PI;var F=j>0&&13>j;N=F?b:x,D.css({left:y+Math.sin(O)*N-w,top:y-Math.cos(O)*N-w}),F&&D.css("font-size","120%"),D.html(0===j?"00":j),v.append(D),D.on(h,u)}for(j=0;60>j;j+=5)D=P.clone(),O=j/30*Math.PI,D.css({left:y+Math.sin(O)*x-w,top:y-Math.cos(O)*x-w}),D.css("font-size","120%"),D.html(t(j)),m.append(D),D.on(h,u);if(d.on(h,function(e){0===a(e.target).closest(".clockpicker-tick").length&&u(e,!0)}),c){var I=f.find(".clockpicker-canvas"),R=e("svg");R.setAttribute("class","clockpicker-svg"),R.setAttribute("width",_),R.setAttribute("height",_);var L=e("g");L.setAttribute("transform","translate("+y+","+y+")");var B=e("circle");B.setAttribute("class","clockpicker-canvas-bearing"),B.setAttribute("cx",0),B.setAttribute("cy",0),B.setAttribute("r",2);var q=e("line");q.setAttribute("x1",0),q.setAttribute("y1",0);var U=e("circle");U.setAttribute("class","clockpicker-canvas-bg"),U.setAttribute("r",w);var V=e("circle");V.setAttribute("class","clockpicker-canvas-fg"),V.setAttribute("r",3.5),L.appendChild(q),L.appendChild(U),L.appendChild(V),L.appendChild(B),R.appendChild(L),I.append(R),this.hand=q,this.bg=U,this.fg=V,this.bearing=B,this.g=L,this.canvas=I}i(this.options.init)}function i(e){e&&"function"==typeof e&&e()}var o,a=window.jQuery,s=a(window),l=a(document),u="http://www.w3.org/2000/svg",c="SVGAngle"in window&&function(){var e,t=document.createElement("div");return t.innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==u,t.innerHTML="",e}(),f=function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}(),d="ontouchstart"in window,h="mousedown"+(d?" touchstart":""),p="mousemove.clockpicker"+(d?" touchmove.clockpicker":""),g="mouseup.clockpicker"+(d?" touchend.clockpicker":""),v=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,m=0,y=100,x=80,b=54,w=13,_=2*y,k=f?350:1,A=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");r.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"",autoclose:!1,twelvehour:!1,vibrate:!0},r.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},r.prototype.locate=function(){var e=this.element,t=this.popover,n=e.offset(),r=e.outerWidth(),i=e.outerHeight(),o=this.options.placement,a=this.options.align,s={};switch(t.show(),o){case"bottom":s.top=n.top+i;break;case"right":s.left=n.left+r;break;case"top":s.top=n.top-t.outerHeight();break;case"left":s.left=n.left-t.outerWidth()}switch(a){case"left":s.left=n.left;break;case"right":s.left=n.left+r-t.outerWidth();break;case"top":s.top=n.top;break;case"bottom":s.top=n.top+i-t.outerHeight()}t.css(s)},r.prototype.show=function(){if(!this.isShown){i(this.options.beforeShow);var e=this;this.isAppended||(o=a(document.body).append(this.popover),s.on("resize.clockpicker"+this.id,function(){e.isShown&&e.locate()}),this.isAppended=!0);var n=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if("now"===n[0]){var r=new Date(+new Date+this.options.fromnow);n=[r.getHours(),r.getMinutes()]}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.html(t(this.hours)),this.spanMinutes.html(t(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,l.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var n=a(t.target);0===n.closest(e.popover).length&&0===n.closest(e.addon).length&&0===n.closest(e.input).length&&e.hide()}),l.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&e.hide()}),i(this.options.afterShow)}},r.prototype.hide=function(){i(this.options.beforeHide),this.isShown=!1,l.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),l.off("keyup.clockpicker."+this.id),this.popover.hide(),i(this.options.afterHide)},r.prototype.toggleView=function(e,t){var n=!1;"minutes"===e&&"visible"===a(this.hoursView).css("visibility")&&(i(this.options.beforeHourSelect),n=!0);var r="hours"===e,o=r?this.hoursView:this.minutesView,s=r?this.minutesView:this.hoursView;this.currentView=e,this.spanHours.toggleClass("text-primary",r),this.spanMinutes.toggleClass("text-primary",!r),s.addClass("clockpicker-dial-out"),o.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(t),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){s.css("visibility","hidden")},k),n&&i(this.options.afterHourSelect)},r.prototype.resetClock=function(e){var t=this.currentView,n=this[t],r="hours"===t,i=Math.PI/(r?6:30),o=n*i,a=r&&n>0&&13>n?b:x,s=Math.sin(o)*a,l=-Math.cos(o)*a,u=this;c&&e?(u.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){u.canvas.removeClass("clockpicker-canvas-out"),u.setHand(s,l)},e)):this.setHand(s,l)},r.prototype.setHand=function(e,n,r,i){var o,s=Math.atan2(e,-n),l="hours"===this.currentView,u=Math.PI/(l||r?6:30),f=Math.sqrt(e*e+n*n),d=this.options,h=l&&(x+b)/2>f,p=h?b:x;if(d.twelvehour&&(p=x),0>s&&(s=2*Math.PI+s),o=Math.round(s/u),s=o*u,d.twelvehour?l?0===o&&(o=12):(r&&(o*=5),60===o&&(o=0)):l?(12===o&&(o=0),o=h?0===o?12:o:0===o?0:o+12):(r&&(o*=5),60===o&&(o=0)),this[this.currentView]!==o&&v&&this.options.vibrate&&(this.vibrateTimer||(navigator[v](10),this.vibrateTimer=setTimeout(a.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=o,this[l?"spanHours":"spanMinutes"].html(t(o)),!c)return void this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var e=a(this);e.toggleClass("active",o===+e.html())});i||!l&&o%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var g=Math.sin(s)*p,m=-Math.cos(s)*p;this.hand.setAttribute("x2",g),this.hand.setAttribute("y2",m),this.bg.setAttribute("cx",g),this.bg.setAttribute("cy",m),this.fg.setAttribute("cx",g),this.fg.setAttribute("cy",m)},r.prototype.done=function(){i(this.options.beforeDone),this.hide();var e=this.input.prop("value"),n=t(this.hours)+":"+t(this.minutes);this.options.twelvehour&&(n+=this.amOrPm),this.input.prop("value",n),n!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),i(this.options.afterDone)},r.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(s.off("resize.clockpicker"+this.id),this.popover.remove())},a.fn.clockpicker=function(e){var t=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=a(this),i=n.data("clockpicker");if(i)"function"==typeof i[e]&&i[e].apply(i,t);else{var o=a.extend({},r.DEFAULTS,n.data(),"object"==typeof e&&e);n.data("clockpicker",new r(n,o))}})}}(),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,r;!function(t){function i(e,t){return b.call(e,t)}function o(e,t){var n,r,i,o,a,s,l,u,c,f,d,h=t&&t.split("/"),p=y.map,g=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&_.test(e[a])&&(e[a]=e[a].replace(_,"")),e=h.slice(0,h.length-1).concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),h)for(f=h.length;f>0;f-=1)if(i=p[h.slice(0,f).join("/")],i&&(i=i[r])){o=i,s=c;break}if(o)break;!l&&g&&g[r]&&(l=g[r],u=c)}!o&&l&&(o=l,s=u),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function a(e,n){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),h.apply(t,r.concat([e,n]))}}function s(e){return function(t){return o(t,e)}}function l(e){return function(t){v[e]=t}}function u(e){if(i(m,e)){var n=m[e];delete m[e],x[e]=!0,d.apply(t,n)}if(!i(v,e)&&!i(x,e))throw new Error("No "+e);return v[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var d,h,p,g,v={},m={},y={},x={},b=Object.prototype.hasOwnProperty,w=[].slice,_=/\.js$/;p=function(e,t){var n,r=c(e),i=r[0];return e=r[1],i&&(i=o(i,t),n=u(i)),i?e=n&&n.normalize?n.normalize(e,s(t)):o(e,t):(e=o(e,t),r=c(e),i=r[0],e=r[1],i&&(n=u(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},g={require:function(e){return a(e)},exports:function(e){var t=v[e];return"undefined"!=typeof t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:f(e)}}},d=function(e,n,r,o){var s,c,f,d,h,y,b=[],w=typeof r;if(o=o||e,"undefined"===w||"function"===w){for(n=!n.length&&r.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(d=p(n[h],o),c=d.f,"require"===c)b[h]=g.require(e);else if("exports"===c)b[h]=g.exports(e),y=!0;else if("module"===c)s=b[h]=g.module(e);else if(i(v,c)||i(m,c)||i(x,c))b[h]=u(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,a(o,!0),l(c),{}),b[h]=v[c]}f=r?r.apply(v[e],b):void 0,e&&(s&&s.exports!==t&&s.exports!==v[e]?v[e]=s.exports:f===t&&y||(v[e]=f))}else e&&(v[e]=r)},e=n=h=function(e,n,r,i,o){if("string"==typeof e)return g[e]?g[e](n):u(p(e,n).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?d(t,e,n,r):setTimeout(function(){d(t,e,n,r)},4),h},h.config=function(e){return h(e)},e._defined=v,r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),i(v,e)||i(m,e)||(m[e]=[e,t,n])},r.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&void 0,t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var r in t){var i=t[r];"function"==typeof i&&"constructor"!==r&&n.push(r)}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var r={}.hasOwnProperty;for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function r(){var t=Array.prototype.unshift,r=n.prototype.constructor.length,i=e.prototype.constructor;r>0&&(t.call(arguments,e.prototype.constructor),i=n.prototype.constructor),i.apply(this,arguments)}function i(){this.constructor=r}var o=t(n),a=t(e);n.displayName=e.displayName,r.prototype=new i;for(var s=0;s<a.length;s++){var l=a[s];r.prototype[l]=e.prototype[l]}for(var u=(function(e){var t=function(){};e in r.prototype&&(t=r.prototype[e]);var i=n.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),i.apply(this,arguments)}}),c=0;c<o.length;c++){var f=o[c];r.prototype[f]=u(f)}return r};var r=function(){this.listeners={}};return r.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},r.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},r.prototype.invoke=function(e,t){for(var n=0,r=e.length;r>n;n++)e[n].apply(this,t)},n.Observable=r,n.generateChars=function(e){for(var t="",n=0;e>n;n++){var r=Math.floor(36*Math.random());t+=r.toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var i=0;i<n.length;i++){var o=n[i];o=o.substring(0,1).toLowerCase()+o.substring(1),o in r||(r[o]={}),i==n.length-1&&(r[o]=e[t]),r=r[o]}delete e[t]}}return e},n.hasScroll=function(t,n){var r=e(n),i=n.style.overflowX,o=n.style.overflowY;return(i!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===i||"scroll"===o||(r.innerHeight()<n.scrollHeight||r.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var r=e();e.map(n,function(e){r=r.add(e)}),n=r}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,r){this.$element=e,this.data=r,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var r=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(t.message);r.append(n(i(t.args))),r[0].className+=" select2-results__message",this.$results.append(r)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],i=this.option(r);t.push(i)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var r=e.map(n,function(e){return e.id.toString()}),i=t.$results.find(".select2-results__option[aria-selected]");i.each(function(){var t=e(this),n=e.data(this,"data"),i=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(i,r)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},r=this.option(n);r.className+=" loading-results",this.$results.prepend(r)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var r={role:"treeitem","aria-selected":"false"};t.disabled&&(delete r["aria-selected"],r["aria-disabled"]="true"),null==t.id&&delete r["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(r.role="group",r["aria-label"]=t.text,delete r["aria-selected"]);for(var i in r){var o=r[i];n.setAttribute(i,o)}if(t.children){var a=e(n),s=document.createElement("strong");s.className="select2-results__group",e(s),this.template(t,s);for(var l=[],u=0;u<t.children.length;u++){var c=t.children[u],f=this.option(c);l.push(f)}var d=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});d.append(l),a.append(s),a.append(d)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var r=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){r.clear(),r.append(e.data),t.isOpen()&&(r.setClasses(),r.highlightFirstItem())}),t.on("results:append",function(e){r.append(e.data),t.isOpen()&&r.setClasses()}),t.on("query",function(e){r.hideMessages(),r.showLoading(e)}),t.on("select",function(){t.isOpen()&&(r.setClasses(),r.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(r.setClasses(),r.highlightFirstItem())}),t.on("open",function(){r.$results.attr("aria-expanded","true"),r.$results.attr("aria-hidden","false"),r.setClasses(),r.ensureHighlightVisible()}),t.on("close",function(){r.$results.attr("aria-expanded","false"),r.$results.attr("aria-hidden","true"),r.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=r.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=r.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?r.trigger("close",{}):r.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var i=n-1;0===e.length&&(i=0);var o=t.eq(i);o.trigger("mouseenter");var a=r.$results.offset().top,s=o.offset().top,l=r.$results.scrollTop()+(s-a);0===i?r.$results.scrollTop(0):0>s-a&&r.$results.scrollTop(l)}}),t.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find("[aria-selected]"),n=t.index(e),i=n+1;if(!(i>=t.length)){var o=t.eq(i);o.trigger("mouseenter");var a=r.$results.offset().top+r.$results.outerHeight(!1),s=o.offset().top+o.outerHeight(!1),l=r.$results.scrollTop()+s-a;0===i?r.$results.scrollTop(0):s>a&&r.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){r.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=r.$results.scrollTop(),n=r.$results.get(0).scrollHeight-t+e.deltaY,i=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&n<=r.$results.height();i?(r.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),i=n.data("data");return"true"===n.attr("aria-selected")?void(r.options.get("multiple")?r.trigger("unselect",{originalEvent:t,data:i}):r.trigger("close",{})):void r.trigger("select",{originalEvent:t,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");r.getHighlightedResults().removeClass("select2-results__option--highlighted"),r.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),r=this.$results.offset().top,i=e.offset().top,o=this.$results.scrollTop()+(i-r),a=i-r;o-=2*e.outerHeight(!1),2>=n?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var r=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),o=r(t,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=i(o):e(n).append(o)},n}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(e,t){var r=this,i=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){r.trigger("focus",e)}),this.$selection.on("blur",function(e){r._handleBlur(e)}),this.$selection.on("keydown",function(e){r.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){r.update(e.data)}),e.on("open",function(){r.$selection.attr("aria-expanded","true"),r.$selection.attr("aria-owns",i),r._attachCloseHandler(e)}),e.on("close",function(){r.$selection.attr("aria-expanded","false"),r.$selection.removeAttr("aria-activedescendant"),r.$selection.removeAttr("aria-owns"),r.$selection.focus(),r._detachCloseHandler(e)}),e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex)}),e.on("disable",function(){r.$selection.attr("tabindex","-1")})},r.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),r=n.closest(".select2"),i=e(".select2.select2-container--open");i.each(function(){var t=e(this);if(this!=r[0]){var n=t.data("element");n.select2("close")}})})},r.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),
e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(e,t){var n=this;i.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),r=this.display(t,n);n.empty().append(r),n.prop("title",t.title||t.text)},i}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function r(e,t){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},r.prototype.bind=function(t,n){var i=this;r.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!i.options.get("disabled")){var n=e(this),r=n.parent(),o=r.data("data");i.trigger("unselect",{originalEvent:t,data:o})}})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(n(e,t))},r.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},r.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],r=0;r<e.length;r++){var i=e[r],o=this.selectionContainer(),a=this.display(i,o);o.append(a),o.prop("title",i.title||i.text),o.data("data",i),t.push(o)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,t)}},r}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id,r=t.length>1;if(r||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&void 0,this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var r=n.data("data"),i=0;i<r.length;i++){var o={data:r[i]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,r){r.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var r=e('<span class="select2-selection__clear">&times;</span>');r.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(r)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function r(e,t,n){e.call(this,t,n)}return r.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var r=t.call(this);return this._transferTabIndex(),r},r.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(e){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&""===i.$search.val()){var r=i.$searchContainer.prev(".select2-selection__choice");if(r.length>0){var o=r.data("data");i.searchRemoveChoice(o),e.preventDefault()}}});var o=document.documentMode,a=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return a?void i.$selection.off("input.search input.searchcheck"):void i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void i.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&i.handleSearch(e)})},r.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},r}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,r){var i=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,n,r),n.on("*",function(t,n){if(-1!==e.inArray(t,o)){n=n||{};var r=e.Event("select2:"+t,{params:n});i.$element.trigger(r),-1!==e.inArray(t,a)&&(n.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var r=t(e);n._cache[e]=r}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){var e={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var r=t.id+"-result-";return r+=e.generateChars(4),r+=null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return t.Extend(r,e),r.prototype.current=function(e){var t=[],r=this;this.$element.find(":selected").each(function(){var e=n(this),i=r.item(e);t.push(i)}),e(t)},r.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(r){var i=[];e=[e],e.push.apply(e,r);for(var o=0;o<e.length;o++){var a=e[o].id;-1===n.inArray(a,i)&&i.push(a)}t.$element.val(i),t.$element.trigger("change")});else{var r=e.id;this.$element.val(r),this.$element.trigger("change")}},r.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(r){for(var i=[],o=0;o<r.length;o++){var a=r[o].id;a!==e.id&&-1===n.inArray(a,i)&&i.push(a)}t.$element.val(i),t.$element.trigger("change")})},r.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},r.prototype.query=function(e,t){var r=[],i=this,o=this.$element.children();o.each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var o=i.item(t),a=i.matches(e,o);null!==a&&r.push(a)}}),t({results:r})},r.prototype.addOptions=function(e){t.appendMany(this.$element,e)},r.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var r=n(t),i=this._normalizeItem(e);return i.element=t,n.data(t,"data",i),r},r.prototype.item=function(e){var t={};if(t=n.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var r=e.children("option"),i=[],o=0;o<r.length;o++){var a=n(r[o]),s=this.item(a);i.push(s)}t.children=i}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},r.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},r.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function r(e,t){var n=t.get("data")||[];r.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(r,e),r.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),r.__super__.select.call(this,e)},r.prototype.convertToOptions=function(e){function r(e){return function(){return n(this).val()==e.id}}for(var i=this,o=this.$element.find("option"),a=o.map(function(){return i.item(n(this)).id}).get(),s=[],l=0;l<e.length;l++){var u=this._normalizeItem(e[l]);if(n.inArray(u.id,a)>=0){var c=o.filter(r(u)),f=this.item(c),d=n.extend(!0,{},u,f),h=this.option(d);c.replaceWith(h)}else{var p=this.option(u);if(u.children){var g=this.convertToOptions(u.children);t.appendMany(p,g)}s.push(p)}}return s},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,r){var i=n.ajax(e);return i.then(t),i.fail(r),i}};return n.extend({},t,e,!0)},r.prototype.processResults=function(e){return e},r.prototype.query=function(e,t){function r(){var r=o.transport(o,function(r){var o=i.processResults(r,e);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||void 0),t(o)},function(){r.status&&"0"===r.status||i.trigger("results:message",{message:"errorLoading"})});i._request=r}var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},r}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,r){var i=r.get("tags"),o=r.get("createTag");void 0!==o&&(this.createTag=o);var a=r.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,n,r),e.isArray(i))for(var s=0;s<i.length;s++){var l=i[s],u=this._normalizeItem(l),c=this.option(u);this.$element.append(c)}}return t.prototype.query=function(e,t,n){function r(e,o){for(var a=e.results,s=0;s<a.length;s++){var l=a[s],u=null!=l.children&&!r({results:l.children},!0),c=l.text===t.term;if(c||u)return!o&&(e.data=a,void n(e))}if(o)return!0;var f=i.createTag(t);if(null!=f){var d=i.option(f);d.attr("data-select2-tag",!0),i.addOptions([d]),i.insertTag(a,f)}e.results=a,n(e)}var i=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,r)},t.prototype.createTag=function(t,n){var r=e.trim(n.term);return""===r?null:{id:r,text:r}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=(this._lastTag,this.$element.find("option[data-select2-tag]"));n.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,r){function i(t){var n=a._normalizeItem(t),r=a.$element.find("option").filter(function(){return e(this).val()===n.id});if(!r.length){var i=a.option(n);i.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([i])}o(n)}function o(e){a.trigger("select",{data:e})}var a=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,i);s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),n.term=s.term),t.call(this,n,r)},t.prototype.tokenizer=function(t,n,r,i){for(var o=r.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<a.length;){var u=a[s];if(-1!==e.inArray(u,o)){var c=a.substr(0,s),f=e.extend({},n,{term:c}),d=l(f);null!=d?(i(d),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var r=this;this.current(function(i){var o=null!=i?i.length:0;return r.maximumSelectionLength>0&&o>=r.maximumSelectionLength?void r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):void e.call(r,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),r=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=r,this.$search=r.find("input"),n.prepend(r),n},n.prototype.bind=function(t,n,r){var i=this;t.call(this,n,r),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),n.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),n.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val("")}),n.on("focus",function(){n.isOpen()&&i.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=i.showSearch(e);t?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;r>=0;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,r){var i=this;t.call(this,n,r),n.on("query",function(e){i.lastParams=e,i.loading=!0}),n.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,i.$loadingMore[0]);if(!i.loading&&t){var n=i.$results.offset().top+i.$results.outerHeight(!1),r=i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1);n+50>=r&&i.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,r){this.$dropdownParent=r.get("dropdownParent")||e(document.body),t.call(this,n,r)}return n.prototype.bind=function(e,t,n){var r=this,i=!1;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),i||(i=!0,t.on("results:all",function(){r._positionDropdown(),r._resizeDropdown()}),t.on("results:append",function(){r._positionDropdown(),r._resizeDropdown()}))}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),r=t.call(this);return n.append(r),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,r){var i=this,o="scroll.select2."+r.id,a="resize.select2."+r.id,s="orientationchange.select2."+r.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(o+" "+a+" "+s,function(e){i._positionDropdown(),i._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,r){var i="scroll.select2."+r.id,o="resize.select2."+r.id,a="orientationchange.select2."+r.id,s=this.$container.parents().filter(t.hasScroll);s.off(i),e(window).off(i+" "+o+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),r=this.$dropdown.hasClass("select2-dropdown--below"),i=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},u=l.top<o.top-s.height,c=l.bottom>o.bottom+s.height,f={left:o.left,top:a.bottom},d=this.$dropdownParent;"static"===d.css("position")&&(d=d.offsetParent());var h=d.offset();f.top-=h.top,f.left-=h.left,n||r||(i="below"),c||!u||n?!u&&c&&n&&(i="below"):i="above",("above"==i||n&&"below"!==i)&&(f.top=a.top-h.top-s.height),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(f)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}function t(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;
if("select"===n._type||"unselect"===n._type)return}var r=this.getHighlightedResults();if(!(r.length<1)){var i=r.data("data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="Please enter "+t+" or more characters";return n},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C){function T(){this.reset()}T.prototype.apply=function(f){if(f=e.extend(!0,{},this.defaults,f),null==f.dataAdapter){if(null!=f.ajax?f.dataAdapter=p:null!=f.data?f.dataAdapter=h:f.dataAdapter=d,f.minimumInputLength>0&&(f.dataAdapter=u.Decorate(f.dataAdapter,m)),f.maximumInputLength>0&&(f.dataAdapter=u.Decorate(f.dataAdapter,y)),f.maximumSelectionLength>0&&(f.dataAdapter=u.Decorate(f.dataAdapter,x)),f.tags&&(f.dataAdapter=u.Decorate(f.dataAdapter,g)),(null!=f.tokenSeparators||null!=f.tokenizer)&&(f.dataAdapter=u.Decorate(f.dataAdapter,v)),null!=f.query){var C=t(f.amdBase+"compat/query");f.dataAdapter=u.Decorate(f.dataAdapter,C)}if(null!=f.initSelection){var T=t(f.amdBase+"compat/initSelection");f.dataAdapter=u.Decorate(f.dataAdapter,T)}}if(null==f.resultsAdapter&&(f.resultsAdapter=n,null!=f.ajax&&(f.resultsAdapter=u.Decorate(f.resultsAdapter,k)),null!=f.placeholder&&(f.resultsAdapter=u.Decorate(f.resultsAdapter,_)),f.selectOnClose&&(f.resultsAdapter=u.Decorate(f.resultsAdapter,z))),null==f.dropdownAdapter){if(f.multiple)f.dropdownAdapter=b;else{var E=u.Decorate(b,w);f.dropdownAdapter=E}if(0!==f.minimumResultsForSearch&&(f.dropdownAdapter=u.Decorate(f.dropdownAdapter,S)),f.closeOnSelect&&(f.dropdownAdapter=u.Decorate(f.dropdownAdapter,M)),null!=f.dropdownCssClass||null!=f.dropdownCss||null!=f.adaptDropdownCssClass){var j=t(f.amdBase+"compat/dropdownCss");f.dropdownAdapter=u.Decorate(f.dropdownAdapter,j)}f.dropdownAdapter=u.Decorate(f.dropdownAdapter,A)}if(null==f.selectionAdapter){if(f.multiple?f.selectionAdapter=i:f.selectionAdapter=r,null!=f.placeholder&&(f.selectionAdapter=u.Decorate(f.selectionAdapter,o)),f.allowClear&&(f.selectionAdapter=u.Decorate(f.selectionAdapter,a)),f.multiple&&(f.selectionAdapter=u.Decorate(f.selectionAdapter,s)),null!=f.containerCssClass||null!=f.containerCss||null!=f.adaptContainerCssClass){var D=t(f.amdBase+"compat/containerCss");f.selectionAdapter=u.Decorate(f.selectionAdapter,D)}f.selectionAdapter=u.Decorate(f.selectionAdapter,l)}if("string"==typeof f.language)if(f.language.indexOf("-")>0){var O=f.language.split("-"),N=O[0];f.language=[f.language,N]}else f.language=[f.language];if(e.isArray(f.language)){var P=new c;f.language.push("en");for(var F=f.language,I=0;I<F.length;I++){var R=F[I],L={};try{L=c.loadPath(R)}catch(B){try{R=this.defaults.amdLanguageBase+R,L=c.loadPath(R)}catch(q){f.debug&&window.console&&console.warn&&void 0;continue}}P.extend(L)}f.translations=P}else{var U=c.loadPath(this.defaults.amdLanguageBase+"en"),V=new c(f.language);V.extend(U),f.translations=V}return f},T.prototype.reset=function(){function t(e){function t(e){return f[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(r,i){if(""===e.trim(r.term))return i;if(i.children&&i.children.length>0){for(var o=e.extend(!0,{},i),a=i.children.length-1;a>=0;a--){var s=i.children[a],l=n(r,s);null==l&&o.children.splice(a,1)}return o.children.length>0?o:n(r,o)}var u=t(i.text).toUpperCase(),c=t(r.term).toUpperCase();return u.indexOf(c)>-1?i:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:u.escapeMarkup,language:C,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},T.prototype.set=function(t,n){var r=e.camelCase(t),i={};i[r]=n;var o=u._convertData(i);e.extend(this.defaults,o)};var E=new T;return E}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,r){function i(t,i){if(this.options=t,null!=i&&this.fromElement(i),this.options=n.apply(this.options),i&&i.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,o)}}return i.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&void 0,e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&void 0,e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i={};i=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},i);o=r._convertData(o);for(var a in o)t.inArray(a,n)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},i.prototype.get=function(e){return this.options[e]},i.prototype.set=function(e,t){this.options[e]=t},i}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,r){var i=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),i.__super__.constructor.call(this);var r=e.attr("tabindex")||0;e.data("old-tabindex",r),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var u=this.options.get("resultsAdapter");this.results=new u(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){c.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(i,n.Observable),i.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},i.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},i.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){var i=e.outerWidth(!1);return 0>=i?"auto":i+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),s=0,l=a.length;l>s;s+=1){var u=a[s].replace(/\s/g,""),c=u.match(n);if(null!==c&&c.length>=1)return c[1]}return null}return t},i.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},i.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=r?(this._observer=new r(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},i.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(r,i){-1===e.inArray(r,n)&&t.trigger(r,i)})},i.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},i.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===r.ESC||n===r.TAB||n===r.UP&&t.altKey?(e.close(),t.preventDefault()):n===r.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===r.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===r.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===r.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===r.ENTER||n===r.SPACE||n===r.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},i.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},i.prototype._syncSubtree=function(e,t){var n=!1,r=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var i=0;i<t.addedNodes.length;i++){var o=t.addedNodes[i];o.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})}},i.prototype.trigger=function(e,t){var n=i.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in r){var o=r[e],a={prevented:!1,name:e,args:t};if(n.call(this,o,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},i.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},i.prototype.open=function(){this.isOpen()||this.trigger("query",{})},i.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},i.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},i.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},i.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},i.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&void 0,(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},i.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&void 0;var e=[];return this.dataAdapter.current(function(t){e=t}),e},i.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&void 0,null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},i.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},i.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},i}),t.define("select2/compat/utils",["jquery"],function(e){function t(t,n,r){var i,o,a=[];i=e.trim(t.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)})),i=e.trim(n.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(o=r(this),null!=o&&a.push(o))})),t.attr("class",a.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(e){return null}function r(){}return r.prototype.render=function(r){var i=r.call(this),o=this.options.get("containerCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(i,this.$element,a),i.css(l),i.addClass(o),i},r}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(e){return null}function r(){}return r.prototype.render=function(r){var i=r.call(this),o=this.options.get("dropdownCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(i,this.$element,a),i.css(l),i.addClass(o),i},r}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var r=this;return this._isInitialized?void t.call(this,n):void this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&void 0,e.call(this,t,n)}return t.prototype.current=function(t,n){function r(t,n){var i=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,i.push(t)):t.selected=!1,t.children&&i.push.apply(i,r(t.children,n)),i}for(var i=[],o=0;o<this._currentData.length;o++){var a=this._currentData[o];i.push.apply(i,r(a,this.$element.val().split(this._valueSeparator)))}n(i)},t.prototype.select=function(t,n){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+n.id,this.$element.val(r),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},t.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var r=[],i=0;i<e.length;i++){var o=e[i];t.id!=o.id&&r.push(o.id)}n.$element.val(r.join(n._valueSeparator)),n.$element.trigger("change")})},t.prototype.query=function(e,t,n){for(var r=[],i=0;i<this._currentData.length;i++){var o=this._currentData[i],a=this.matches(t,o);null!==a&&r.push(a)}n({results:r})},t.prototype.addOptions=function(t,n){var r=e.map(n,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,r)},t}),t.define("select2/compat/matcher",["jquery"],function(e){function t(t){function n(n,r){var i=e.extend(!0,{},r);if(null==n.term||""===e.trim(n.term))return i;if(r.children){for(var o=r.children.length-1;o>=0;o--){var a=r.children[o],s=t(n.term,a.text,a);s||i.children.splice(o,1)}if(i.children.length>0)return i}return t(n.term,r.text,r)?i:null}return n}return t}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n;var r=this.options.get("query");r.call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){var r=n.find(".dropdown-wrapper");r.append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var r=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(r.join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var r=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(r.join(" "),function(e){e.stopPropagation()})},e}),function(n){"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(e)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,f=0,d=0,h=0,p=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(f=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(f=-1*d,d=0),u=0===d?f:d,"deltaY"in a&&(d=-1*a.deltaY,u=d),"deltaX"in a&&(f=a.deltaX,0===d&&(u=-1*f)),0!==d||0!==f){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,d*=v,f*=v}else if(2===a.deltaMode){var m=e.data(this,"mousewheel-page-height");u*=m,d*=m,f*=m}if(h=Math.max(Math.abs(d),Math.abs(f)),(!o||o>h)&&(o=h,r(a,h)&&(o/=40)),r(a,h)&&(u/=40,f/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/o),f=Math[f>=1?"floor":"ceil"](f/o),d=Math[d>=1?"floor":"ceil"](d/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=t.clientX-y.left,g=t.clientY-y.top}return t.deltaX=f,t.deltaY=d,t.deltaFactor=o,t.offsetX=p,t.offsetY=g,t.deltaMode=0,s.unshift(t,u,f,d),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){o=null}function r(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,r){if(null==e.fn.select2){var i=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var r=e.extend(!0,{},t);new n(e(this),r)}),this;if("string"==typeof t){var r,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&void 0,r=n[t].apply(n,o)}),e.inArray(t,i)>-1?this:r}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=r),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),function(e,t,n,r){function i(n,r){this.w=e(t),this.el=e(n),this.options=e.extend({},c,r),this.init()}var o="ontouchstart"in t,a=function(){var e=n.createElement("div"),r=n.documentElement;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",r.appendChild(e);var i=t.getComputedStyle&&"auto"===t.getComputedStyle(e,"").pointerEvents;return r.removeChild(e),!!i}(),s=o?"touchstart":"mousedown",l=o?"touchmove":"mousemove",u=o?"touchend":"mouseup";eCancel=o?"touchcancel":"mouseup";var c={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20,dropCallback:null};i.prototype={init:function(){var n=this;n.reset(),n.el.data("nestable-group",this.options.group),n.placeEl=e('<div class="'+n.options.placeClass+'"/>'),e.each(this.el.find(n.options.itemNodeName),function(t,r){n.setParent(e(r))}),n.el.on("click","button",function(t){if(!n.dragEl&&(o||0===t.button)){var r=e(t.currentTarget),i=r.data("action"),a=r.parent(n.options.itemNodeName);"collapse"===i&&n.collapseItem(a),"expand"===i&&n.expandItem(a)}});var r=function(t){var r=e(t.target);if(!r.hasClass(n.options.handleClass)){if(r.closest("."+n.options.noDragClass).length)return;r=r.closest("."+n.options.handleClass)}!r.length||n.dragEl||!o&&0!==t.button||o&&1!==t.touches.length||(t.preventDefault(),n.dragStart(o?t.touches[0]:t))},i=function(e){n.dragEl&&(e.preventDefault(),n.dragMove(o?e.touches[0]:e))},a=function(e){n.dragEl&&(e.preventDefault(),n.dragStop(o?e.touches[0]:e))};o?(n.el[0].addEventListener(s,r,!1),t.addEventListener(l,i,!1),t.addEventListener(u,a,!1),t.addEventListener(eCancel,a,!1)):(n.el.on(s,r),n.w.on(l,i),n.w.on(u,a))},serialize:function(){var t,n=0,r=this;return step=function(t,n){var i=[],o=t.children(r.options.itemNodeName);return o.each(function(){var t=e(this),o=e.extend({},t.data()),a=t.children(r.options.listNodeName);a.length&&(o.children=step(a,n+1)),i.push(o)}),i},t=step(r.el.find(r.options.listNodeName).first(),n)},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null,this.sourceRoot=null},expandItem:function(e){e.removeClass(this.options.collapsedClass),e.children('[data-action="expand"]').hide(),e.children('[data-action="collapse"]').show(),e.children(this.options.listNodeName).show()},collapseItem:function(e){var t=e.children(this.options.listNodeName);t.length&&(e.addClass(this.options.collapsedClass),e.children('[data-action="collapse"]').hide(),e.children('[data-action="expand"]').show(),e.children(this.options.listNodeName).hide())},expandAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.expandItem(e(this))})},collapseAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.collapseItem(e(this))})},setParent:function(t){t.children(this.options.listNodeName).length&&(t.prepend(e(this.options.expandBtnHTML)),t.prepend(e(this.options.collapseBtnHTML))),t.children('[data-action="expand"]').hide()},unsetParent:function(e){e.removeClass(this.options.collapsedClass),e.children("[data-action]").remove(),e.children(this.options.listNodeName).remove()},dragStart:function(t){var i=this.mouse,o=e(t.target),a=o.closest(this.options.itemNodeName);this.sourceRoot=o.closest("."+this.options.rootClass),this.placeEl.css("height",a.height()),i.offsetX=t.offsetX!==r?t.offsetX:t.pageX-o.offset().left,i.offsetY=t.offsetY!==r?t.offsetY:t.pageY-o.offset().top,i.startX=i.lastX=t.pageX,i.startY=i.lastY=t.pageY,this.dragRootEl=this.el,this.dragEl=e(n.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",a.width()),a.after(this.placeEl),a[0].parentNode.removeChild(a[0]),a.appendTo(this.dragEl),e(n.body).append(this.dragEl),this.dragEl.css({left:t.pageX-i.offsetX,top:t.pageY-i.offsetY});var s,l,u=this.dragEl.find(this.options.itemNodeName);for(s=0;s<u.length;s++)l=e(u[s]).parents(this.options.listNodeName).length,l>this.dragDepth&&(this.dragDepth=l)},dragStop:function(t){var n=this.dragEl.children(this.options.itemNodeName).first();n[0].parentNode.removeChild(n[0]),this.placeEl.replaceWith(n),this.dragEl.remove(),this.el.trigger("change");var r=n.parent().parent(),i=null;if(null===r||r.is("."+this.options.rootClass)||(i=r.data("id")),e.isFunction(this.options.dropCallback)){var o={sourceId:n.data("id"),destId:i,sourceEl:n,destParent:r,destRoot:n.closest("."+this.options.rootClass),sourceRoot:this.sourceRoot};this.options.dropCallback.call(this,o)}this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset()},dragMove:function(r){var i,o,s,l,u,c=this.options,f=this.mouse;this.dragEl.css({left:r.pageX-f.offsetX,top:r.pageY-f.offsetY}),f.lastX=f.nowX,f.lastY=f.nowY,f.nowX=r.pageX,f.nowY=r.pageY,f.distX=f.nowX-f.lastX,f.distY=f.nowY-f.lastY,f.lastDirX=f.dirX,f.lastDirY=f.dirY,f.dirX=0===f.distX?0:f.distX>0?1:-1,f.dirY=0===f.distY?0:f.distY>0?1:-1;var d=Math.abs(f.distX)>Math.abs(f.distY)?1:0;if(!f.moving)return f.dirAx=d,void(f.moving=!0);f.dirAx!==d?(f.distAxX=0,f.distAxY=0):(f.distAxX+=Math.abs(f.distX),0!==f.dirX&&f.dirX!==f.lastDirX&&(f.distAxX=0),f.distAxY+=Math.abs(f.distY),0!==f.dirY&&f.dirY!==f.lastDirY&&(f.distAxY=0)),f.dirAx=d,f.dirAx&&f.distAxX>=c.threshold&&(f.distAxX=0,s=this.placeEl.prev(c.itemNodeName),f.distX>0&&s.length&&!s.hasClass(c.collapsedClass)&&(i=s.find(c.listNodeName).last(),u=this.placeEl.parents(c.listNodeName).length,u+this.dragDepth<=c.maxDepth&&(i.length?(i=s.children(c.listNodeName).last(),i.append(this.placeEl)):(i=e("<"+c.listNodeName+"/>").addClass(c.listClass),i.append(this.placeEl),s.append(i),this.setParent(s)))),f.distX<0&&(l=this.placeEl.next(c.itemNodeName),l.length||(o=this.placeEl.parent(),this.placeEl.closest(c.itemNodeName).after(this.placeEl),o.children().length||this.unsetParent(o.parent()))));var h=!1;if(a||(this.dragEl[0].style.visibility="hidden"),this.pointEl=e(n.elementFromPoint(r.pageX-n.body.scrollLeft,r.pageY-(t.pageYOffset||n.documentElement.scrollTop))),a||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(c.handleClass)&&(this.pointEl=this.pointEl.parent(c.itemNodeName)),this.pointEl.hasClass(c.emptyClass))h=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(c.itemClass))return;var p=this.pointEl.closest("."+c.rootClass),g=this.dragRootEl.data("nestable-id")!==p.data("nestable-id");if(!f.dirAx||g||h){if(g&&c.group!==p.data("nestable-group"))return;if(u=this.dragDepth-1+this.pointEl.parents(c.listNodeName).length,u>c.maxDepth)return;var v=r.pageY<this.pointEl.offset().top+this.pointEl.height()/2;o=this.placeEl.parent(),h?(i=e(n.createElement(c.listNodeName)).addClass(c.listClass),i.append(this.placeEl),this.pointEl.replaceWith(i)):v?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),o.children().length||this.unsetParent(o.parent()),this.dragRootEl.find(c.itemNodeName).length||this.dragRootEl.append('<div class="'+c.emptyClass+'"/>'),g&&(this.dragRootEl=p,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},e.fn.nestable=function(t){var n=this,r=this;return n.each(function(){var n=e(this).data("nestable");n?"string"==typeof t&&"function"==typeof n[t]&&(r=n[t]()):(e(this).data("nestable",new i(this,t)),e(this).data("nestable-id",(new Date).getTime()))}),r||n}}(window.jQuery||window.Zepto,window,document),!function(e){e(["jquery"],function(e){return function(){
function t(e,t,n){return p({type:w.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),m=e("#"+t.containerId),m.length?m:(n&&(m=f(t)),m)}function r(e,t,n){return p({type:w.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function i(e){y=e}function o(e,t,n){return p({type:w.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return p({type:w.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function s(e,t){var r=g();m||n(r),c(e,r,t)||u(r)}function l(t){var r=g();return m||n(r),t&&0===e(":focus",t).length?void v(t):void(m.children().length&&m.remove())}function u(t){for(var n=m.children(),r=n.length-1;r>=0;r--)c(e(n[r]),t)}function c(t,n,r){var i=!(!r||!r.force)&&r.force;return!(!t||!i&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){v(t)}}),!0)}function f(t){return m=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),m.appendTo(e(t.target)),m}function d(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function h(e){y&&y(e)}function p(t){function r(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(){s(),u(),c(),f(),d(),l()}function o(){M.hover(_,w),!A.onclick&&A.tapToDismiss&&M.click(y),A.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),y(!0)}),A.onclick&&M.click(function(e){A.onclick(e),y()})}function a(){M.hide(),M[A.showMethod]({duration:A.showDuration,easing:A.showEasing,complete:A.onShown}),A.timeOut>0&&(z=setTimeout(y,A.timeOut),D.maxHideTime=parseFloat(A.timeOut),D.hideEta=(new Date).getTime()+D.maxHideTime,A.progressBar&&(D.intervalId=setInterval(k,10)))}function s(){t.iconClass&&M.addClass(A.toastClass).addClass(S)}function l(){A.newestOnTop?m.prepend(M):m.append(M)}function u(){t.title&&(C.append(A.escapeHtml?r(t.title):t.title).addClass(A.titleClass),M.append(C))}function c(){t.message&&(T.append(A.escapeHtml?r(t.message):t.message).addClass(A.messageClass),M.append(T))}function f(){A.closeButton&&(j.addClass("toast-close-button").attr("role","button"),M.prepend(j))}function d(){A.progressBar&&(E.addClass("toast-progress"),M.prepend(E))}function p(e,t){if(e.preventDuplicates){if(t.message===x)return!0;x=t.message}return!1}function y(t){var n=t&&A.closeMethod!==!1?A.closeMethod:A.hideMethod,r=t&&A.closeDuration!==!1?A.closeDuration:A.hideDuration,i=t&&A.closeEasing!==!1?A.closeEasing:A.hideEasing;return!e(":focus",M).length||t?(clearTimeout(D.intervalId),M[n]({duration:r,easing:i,complete:function(){v(M),A.onHidden&&"hidden"!==O.state&&A.onHidden(),O.state="hidden",O.endTime=new Date,h(O)}})):void 0}function w(){(A.timeOut>0||A.extendedTimeOut>0)&&(z=setTimeout(y,A.extendedTimeOut),D.maxHideTime=parseFloat(A.extendedTimeOut),D.hideEta=(new Date).getTime()+D.maxHideTime)}function _(){clearTimeout(z),D.hideEta=0,M.stop(!0,!0)[A.showMethod]({duration:A.showDuration,easing:A.showEasing})}function k(){var e=(D.hideEta-(new Date).getTime())/D.maxHideTime*100;E.width(e+"%")}var A=g(),S=t.iconClass||A.iconClass;if("undefined"!=typeof t.optionsOverride&&(A=e.extend(A,t.optionsOverride),S=t.optionsOverride.iconClass||S),!p(A,t)){b++,m=n(A,!0);var z=null,M=e("<div/>"),C=e("<div/>"),T=e("<div/>"),E=e("<div/>"),j=e(A.closeHtml),D={intervalId:null,hideEta:null,maxHideTime:null},O={toastId:b,state:"visible",startTime:new Date,options:A,map:t};return i(),a(),o(),h(O),A.debug&&console&&void 0,M}}function g(){return e.extend({},d(),_.options)}function v(e){m||(m=n()),e.is(":visible")||(e.remove(),e=null,0===m.children().length&&(m.remove(),x=void 0))}var m,y,x,b=0,w={error:"error",info:"info",success:"success",warning:"warning"},_={clear:s,remove:l,error:t,getContainer:n,info:r,options:{},subscribe:i,success:o,version:"2.1.2",warning:a};return _}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),$(document).ready(function(){loadDatePickers(),loadTimePickers(),loadDateRangePickers(),convertTimezone()}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function o(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function a(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===wa||e[0]===_a?_a+e:e}function f(e){return(e+="")[0]===_a?e.slice(1):e}function d(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(f(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function v(){for(var e in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(e){return e}function x(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function b(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=ka.length;r>n;++n){var i=ka[n]+t;if(i in e)return i}}function w(){}function _(){}function k(e){function t(){for(var t,r=n,i=-1,o=r.length;++i<o;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var o,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function A(){la.event.preventDefault()}function S(){for(var e,t=la.event;e=t.sourceEvent;)t=e;return t}function z(e){for(var t=new _,n=0,r=arguments.length;++n<r;)t[arguments[n]]=k(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=la.event;i.target=e,la.event=i,t[i.type].apply(n,r)}finally{la.event=o}}},t}function M(e){return Sa(e,Ta),e}function C(e){return"function"==typeof e?e:function(){return za(e,this)}}function T(e){return"function"==typeof e?e:function(){return Ma(e,this)}}function E(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=la.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?o:i}function j(e){return e.trim().replace(/\s+/g," ")}function D(e){return new RegExp("(?:^|\\s+)"+la.requote(e)+"(?:\\s+|$)","g")}function O(e){return(e+"").trim().split(/^|\s+/)}function N(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=O(e).map(P);var i=e.length;return"function"==typeof t?r:n}function P(e){var t=D(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",j(i+" "+e))):n.setAttribute("class",j(i.replace(t," ")))}}function F(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function o(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?o:i}function I(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function R(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n&&n!==t.documentElement.namespaceURI?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=la.ns.qualify(e)).local?n:t}function L(){var e=this.parentNode;e&&e.removeChild(this)}function B(e){return{__data__:e}}function q(e){return function(){return Ca(this,e)}}function U(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function V(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,o=e[n],a=0,s=o.length;s>a;a++)(i=o[a])&&t(i,a,n);return e}function $(e){return Sa(e,ja),e}function H(e){var t,n;return function(r,i,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<l;);return a}}function Y(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function i(){var i=l(t,ca(arguments));r.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}function o(){var t,n=new RegExp("^__on([^.]+)"+la.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),l=W;s>0&&(e=e.slice(0,s));var u=Da.get(e);return u&&(e=u,l=X),s?t?i:r:t?w:o}function W(e,t){return function(n){var r=la.event;la.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{la.event=r}}}function X(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function J(n){var r=".dragsuppress-"+ ++Na,i="click"+r,o=la.select(t(n)).on("touchmove"+r,A).on("dragstart"+r,A).on("selectstart"+r,A);if(null==Oa&&(Oa=!("onselectstart"in n)&&b(n.style,"userSelect")),Oa){var a=e(n).style,s=a[Oa];a[Oa]="none"}return function(e){if(o.on(r,null),Oa&&(a[Oa]=s),e){var t=function(){o.on(i,null)};o.on(i,function(){A(),t()},!0),setTimeout(t,0)}}}function G(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Pa){var o=t(e);if(o.scrollX||o.scrollY){r=la.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Pa=!(a.f||a.e),r.remove()}}return Pa?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function Q(){return la.event.changedTouches[0].identifier}function Z(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Ra:Math.acos(e)}function te(e){return e>1?qa:-1>e?-qa:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function oe(e){return(e=Math.sin(e/2))*e}function ae(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,_e,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(a-o)*e/60:180>e?a:240>e?o+(a-o)*(240-e)/60:o}function i(e){return Math.round(255*r(e))}var o,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,o=2*n-a,new me(i(e+120),i(e),i(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof fe?he(e.l,e.a,e.b):he((e=ke((e=la.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new fe(n,Math.cos(e*=Ua)*t,Math.sin(e)*t)}function fe(e,t,n){return this instanceof fe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof fe?new fe(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):ke((e=me(e)).r,e.g,e.b):new fe(e,t,n)}function de(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return i=pe(i)*Ka,r=pe(r)*es,o=pe(o)*ts,new me(ve(3.2404542*i-1.5371385*r-.4985314*o),ve(-.969266*i+1.8760108*r+.041556*o),ve(.0556434*i-.2040259*r+1.0572252*o))}function he(e,t,n){return e>0?new ue(Math.atan2(n,t)*Va,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ve(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function me(e,t,n){return this instanceof me?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof me?new me(e.r,e.g,e.b):we(""+e,me,le):new me(e,t,n)}function ye(e){return new me(e>>16,e>>8&255,255&e)}function xe(e){return ye(e)+""}function be(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Se(i[0]),Se(i[1]),Se(i[2]))}return(o=is.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function _e(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new se(r,i,l)}function ke(e,t,n){e=Ae(e),t=Ae(t),n=Ae(n);var r=ge((.4124564*e+.3575761*t+.1804375*n)/Ka),i=ge((.2126729*e+.7151522*t+.072175*n)/es),o=ge((.0193339*e+.119192*t+.9503041*n)/ts);return fe(116*i-16,500*(r-i),200*(i-o))}function Ae(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ze(e){return"function"==typeof e?e:function(){return e}}function Me(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ce(t,n,e,r)}}function Ce(e,t,n,r){function i(){var e,t=l.status;if(!t&&Ee(l)||t>=200&&300>t||304===t){try{e=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=la.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=la.event;la.event=e;try{a.progress.call(o,l)}finally{la.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(u=e,o):u},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(ca(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},la.rebind(o,a,"on"),null==r?o:o.get(Te(r))}function Te(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ee(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function je(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,o={c:e,t:i,n:null};return as?as.n=o:os=o,as=o,ss||(ls=clearTimeout(ls),ss=1,us(De)),o}function De(){var e=Oe(),t=Ne()-e;t>24?(isFinite(t)&&(clearTimeout(ls),ls=setTimeout(De,t)),ss=0):(ss=1,us(De))}function Oe(){for(var e=Date.now(),t=os;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Ne(){for(var e,t=os,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:os=t.n;return as=e,n}function Pe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Fe(e,t){var n=Math.pow(10,3*ba(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ie(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(e){var n=fs.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",v="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),h){case"n":f=!0,h="g";break;case"%":p=100,v="%",h="f";break;case"p":p=100,v="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=ds.get(h)||Re;var x=u&&f;return function(e){var n=v;if(m&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>p){var l=la.formatPrefix(e,d);e=l.scale(e),n=l.symbol+v}else e*=p;e=h(e,d);var b,w,_=e.lastIndexOf(".");if(0>_){var k=y?e.lastIndexOf("e"):-1;0>k?(b=e,w=""):(b=e.substring(0,k),w=e.substring(k))}else b=e.substring(0,_),w=t+e.substring(_+1);!u&&f&&(b=o(b,1/0));var A=g.length+b.length+w.length+(x?0:i.length),S=c>A?new Array(A=c-A+1).join(r):"";return x&&(b=o(S+b,S.length?c-w.length:1/0)),i+=g,e=b+w,("<"===a?i+e+S:">"===a?S+i+e:"^"===a?S.substring(0,A>>=1)+i+e+S.substring(A):i+(x?e:S+e))+n}}}function Re(e){return e+""}function Le(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Be(e,t,n){function r(t){var n=e(t),r=o(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ps(n-1)),1),n}function o(e,n){return t(e=new ps((+e)),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date((+a))),t(a,1);else for(;r>a;)s.push(new Date((+a))),t(a,1);return s}function s(e,t,n){try{ps=Le;var r=new Le;return r._=e,a(r,t,n)}finally{ps=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var l=e.utc=qe(e);return l.floor=l,l.round=qe(r),l.ceil=qe(i),l.offset=qe(o),l.range=s,e}function qe(e){return function(t,n){try{ps=Le;var r=new Le;return r._=t,e(r,n)._}finally{ps=Date}}}function Ue(e){function t(e){function t(t){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=vs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=C[n])&&(n=o(t,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(e.slice(l,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&ps!==Le,a=new(o?Le:ps);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,o,a,s=0,l=t.length,u=n.length;l>s;){if(r>=u)return-1;if(i=t.charCodeAt(s++),37===i){if(a=t.charAt(s++),o=T[a in vs?t.charAt(s++):a],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){z.lastIndex=0;var r=z.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){A.lastIndex=0;var r=A.exec(t.slice(n));return r?(e.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,C.c.toString(),t,r)}function l(e,t,r){return n(e,C.x.toString(),t,r)}function u(e,t,r){return n(e,C.X.toString(),t,r)}function c(e,t,n){var r=x.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,h=e.time,p=e.periods,g=e.days,v=e.shortDays,m=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ps=Le;var t=new ps;return t._=e,r(t)}finally{ps=Date}}var r=t(e);return n.parse=function(e){try{ps=Le;var t=r.parse(e);return t&&t._}finally{ps=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=lt;var x=la.map(),b=$e(g),w=He(g),_=$e(v),k=He(v),A=$e(m),S=He(m),z=$e(y),M=He(y);p.forEach(function(e,t){x.set(e.toLowerCase(),t)});var C={a:function(e){return v[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return m[e.getMonth()]},c:t(f),d:function(e,t){return Ve(e.getDate(),t,2)},e:function(e,t){return Ve(e.getDate(),t,2)},H:function(e,t){return Ve(e.getHours(),t,2)},I:function(e,t){return Ve(e.getHours()%12||12,t,2)},j:function(e,t){return Ve(1+hs.dayOfYear(e),t,3)},L:function(e,t){return Ve(e.getMilliseconds(),t,3)},m:function(e,t){return Ve(e.getMonth()+1,t,2)},M:function(e,t){return Ve(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return Ve(e.getSeconds(),t,2)},U:function(e,t){return Ve(hs.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ve(hs.mondayOfYear(e),t,2)},x:t(d),X:t(h),y:function(e,t){return Ve(e.getFullYear()%100,t,2)},Y:function(e,t){return Ve(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},T={a:r,A:i,b:o,B:a,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:ot,m:Ke,M:rt,p:c,S:it,U:We,w:Ye,W:Xe,x:l,X:u,y:Ge,Y:Je,Z:Qe,"%":st};return t}function Ve(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(t)+i:i)}function $e(e){return new RegExp("^(?:"+e.map(la.requote).join("|")+")","i")}function He(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ye(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function We(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Xe(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Je(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ge(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.y=Ze(+r[0]),n+r[0].length):-1}function Qe(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ze(e){return e+(e>68?1900:2e3)}function Ke(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ot(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=ba(t)/60|0,i=ba(t)%60;return n+Ve(r,"0",2)+Ve(i,"0",2)}function st(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function ft(e,t){e&&_s.hasOwnProperty(e.type)&&_s[e.type](e,t)}function dt(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function ht(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)dt(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Ua,t=t*Ua/2+Ra/4;var n=e-r,a=n>=0?1:-1,s=a*n,l=Math.cos(t),u=Math.sin(t),c=o*u,f=i*l+c*Math.cos(s),d=c*a*Math.sin(s);As.add(Math.atan2(d,f)),r=e,i=l,o=u}var t,n,r,i,o;Ss.point=function(a,s){Ss.point=e,r=(t=a)*Ua,i=Math.cos(s=(n=s)*Ua/2+Ra/4),o=Math.sin(s)},Ss.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function vt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function xt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function _t(e,t){return ba(e[0]-t[0])<Fa&&ba(e[1]-t[1])<Fa}function kt(e,t){e*=Ua;var n=Math.cos(t*=Ua);At(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function At(e,t,n){++zs,Cs+=(e-Cs)/zs,Ts+=(t-Ts)/zs,Es+=(n-Es)/zs}function St(){function e(e,i){e*=Ua;var o=Math.cos(i*=Ua),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-t*l)*u+(u=t*s-n*a)*u),t*a+n*s+r*l);Ms+=u,js+=u*(t+(t=a)),Ds+=u*(n+(n=s)),Os+=u*(r+(r=l)),At(t,n,r)}var t,n,r;Is.point=function(i,o){i*=Ua;var a=Math.cos(o*=Ua);t=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Is.point=e,At(t,n,r)}}function zt(){Is.point=kt}function Mt(){function e(e,t){e*=Ua;var n=Math.cos(t*=Ua),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,d=Math.sqrt(u*u+c*c+f*f),h=r*a+i*s+o*l,p=d&&-ee(h)/d,g=Math.atan2(d,h);Ns+=p*u,Ps+=p*c,Fs+=p*f,Ms+=g,js+=g*(r+(r=a)),Ds+=g*(i+(i=s)),Os+=g*(o+(o=l)),At(r,i,o)}var t,n,r,i,o;Is.point=function(a,s){t=a,n=s,Is.point=e,a*=Ua;var l=Math.cos(s*=Ua);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),At(r,i,o)},Is.lineEnd=function(){e(t,n),Is.lineEnd=zt,Is.point=kt}}function Ct(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Tt(){return!0}function Et(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(_t(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var l=new Dt(n,e,null,(!0)),u=new Dt(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new Dt(r,e,null,(!1)),u=new Dt(r,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(t),jt(o),jt(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;u>s;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function jt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Dt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ot(e,t,n,r){return function(i,o){function a(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&t){e=n[0];var i,r=e.length-1,a=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Nt))}var h,p,g,v=t(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,h=la.merge(h);var e=Bt(m,p);h.length?(w||(o.polygonStart(),w=!0),Et(h,Ft,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Pt(),b=t(x),w=!1;return y}}function Nt(e){return e.length>1}function Pt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ft(e,t){return((e=e.x)[0]<0?e[1]-qa-Fa:qa-e[1])-((t=t.x)[0]<0?t[1]-qa-Fa:qa-t[1])}function It(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Ra:-Ra,l=ba(o-n);ba(l-Ra)<Fa?(e.point(n,r=(r+a)/2>0?qa:-qa),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=Ra&&(ba(n-i)<Fa&&(n-=i*Fa),ba(o-s)<Fa&&(o-=s*Fa),r=Rt(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Rt(e,t,n,r){var i,o,a=Math.sin(e-n);return ba(a)>Fa?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}function Lt(e,t,n,r){var i;if(null==e)i=n*qa,r.point(-Ra,i),r.point(0,i),r.point(Ra,i),r.point(Ra,0),r.point(Ra,-i),r.point(0,-i),r.point(-Ra,-i),r.point(-Ra,0),r.point(-Ra,i);else if(ba(e[0]-t[0])>Fa){var o=e[0]<t[0]?Ra:-Ra;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Bt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;As.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+Ra/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0),e=u[v];var m=e[0],y=e[1]/2+Ra/4,x=Math.sin(y),b=Math.cos(y),w=m-d,_=w>=0?1:-1,k=_*w,A=k>Ra,S=p*x;if(As.add(Math.atan2(S*_*Math.sin(k),g*b+S*Math.cos(k))),o+=A?w+_*La:w,A^d>=n^m>=n){var z=mt(gt(f),gt(e));bt(z);var M=mt(i,z);bt(M);var C=(A^w>=0?-1:1)*te(M[2]);(r>C||r===C&&(z[0]||z[1]))&&(a+=A^w>=0?1:-1)}if(!v++)break;d=m,p=x,g=b,f=e}}return(-Fa>o||Fa>o&&0>As)^1&a}function qt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],g=t(f,d),v=a?g?0:i(f,d):g?i(f+(0>f?Ra:-Ra),d):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(h=r(n,p),(_t(n,h)||_t(p,h))&&(p[0]+=Fa,p[1]+=Fa,g=t(p[0],p[1]))),g!==l)c=0,g?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&a^g){var m;v&o||!(m=r(p,n,!0))||(c=0,a?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||n&&_t(n,p)||e.point(p[0],p[1]),n=p,l=g,o=v},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=gt(e),i=gt(t),a=[1,0,0],s=mt(r,i),l=vt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var f=o*l/c,d=-o*u/c,h=mt(a,s),p=xt(a,f),g=xt(s,d);yt(p,g);var v=h,m=vt(p,v),y=vt(v,v),x=m*m-y*(vt(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=xt(v,(-m-b)/y);
if(yt(w,p),w=wt(w),!n)return w;var _,k=e[0],A=t[0],S=e[1],z=t[1];k>A&&(_=k,k=A,A=_);var M=A-k,C=ba(M-Ra)<Fa,T=C||Fa>M;if(!C&&S>z&&(_=S,S=z,z=_),T?C?S+z>0^w[1]<(ba(w[0]-k)<Fa?S:z):S<=w[1]&&w[1]<=z:M>Ra^(k<=w[0]&&w[0]<=A)){var E=xt(v,(-m+b)/y);return yt(E,p),[w,wt(E)]}}}function i(t,n){var r=a?e:Ra-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(e),a=o>0,s=ba(o)>Fa,l=gn(e,6*Ua);return Ot(t,n,l,a?[0,-e]:[-Ra,e-Ra])}function Ut(e,t,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=s.x,f=s.y,d=0,h=1,p=c-l,g=f-u;if(o=e-l,p||!(o>0)){if(o/=p,0>p){if(d>o)return;h>o&&(h=o)}else if(p>0){if(o>h)return;o>d&&(d=o)}if(o=n-l,p||!(0>o)){if(o/=p,0>p){if(o>h)return;o>d&&(d=o)}else if(p>0){if(d>o)return;h>o&&(h=o)}if(o=t-u,g||!(o>0)){if(o/=g,0>g){if(d>o)return;h>o&&(h=o)}else if(g>0){if(o>h)return;o>d&&(d=o)}if(o=r-u,g||!(0>o)){if(o/=g,0>g){if(o>h)return;o>d&&(d=o)}else if(g>0){if(d>o)return;h>o&&(h=o)}return d>0&&(i.a={x:l+d*p,y:u+d*g}),1>h&&(i.b={x:l+h*p,y:u+h*g}),i}}}}}}function Vt(e,t,n,r){function i(r,i){return ba(r[0]-e)<Fa?i>0?0:3:ba(r[0]-n)<Fa?i>0?2:1:ba(r[1]-t)<Fa?i>0?1:0:i>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=v.length,r=e[1],i=0;n>i;++i)for(var o,a=1,s=v[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&K(u,o,e)>0&&++t:o[1]<=r&&K(u,o,e)<0&&--t,u=o;return 0!==t}function u(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(i,o){return i>=e&&n>=i&&o>=t&&r>=o}function f(e,t){c(e,t)&&s.point(e,t)}function d(){T.point=p,v&&v.push(m=[]),A=!0,k=!1,w=_=NaN}function h(){g&&(p(y,x),b&&k&&M.rejoin(),g.push(M.buffer())),T.point=f,k&&s.lineEnd()}function p(e,t){e=Math.max(-Ls,Math.min(Ls,e)),t=Math.max(-Ls,Math.min(Ls,t));var n=c(e,t);if(v&&m.push([e,t]),A)y=e,x=t,b=n,A=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&k)s.point(e,t);else{var r={a:{x:w,y:_},b:{x:e,y:t}};C(r)?(k||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(e,t),S=!1)}w=e,_=t,k=n}var g,v,m,y,x,b,w,_,k,A,S,z=s,M=Pt(),C=Ut(e,t,n,r),T={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=M,g=[],v=[],S=!0},polygonEnd:function(){s=z,g=la.merge(g);var t=l([e,r]),n=S&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Et(g,o,t,u,s),s.polygonEnd()),g=v=m=null}};return T}}function $t(e){var t=0,n=Ra/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ra/180,n=e[1]*Ra/180):[t/Ra*180,n/Ra*180]},i}function Ht(e,t){function n(e,t){var n=Math.sqrt(o-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,te((o-(e*e+n*n)*i*i)/(2*i))]},n}function Yt(){function e(e,t){qs+=i*e-r*t,r=e,i=t}var t,n,r,i;Ys.point=function(o,a){Ys.point=e,t=r=o,n=i=a},Ys.lineEnd=function(){e(t,n)}}function Wt(e,t){Us>e&&(Us=e),e>$s&&($s=e),Vs>t&&(Vs=t),t>Hs&&(Hs=t)}function Xt(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function i(){a.push("Z")}var o=Jt(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return o=Jt(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function Jt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Gt(e,t){Cs+=e,Ts+=t,++Es}function Qt(){function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);js+=a*(t+e)/2,Ds+=a*(n+r)/2,Os+=a,Gt(t=e,n=r)}var t,n;Xs.point=function(r,i){Xs.point=e,Gt(t=r,n=i)}}function Zt(){Xs.point=Gt}function Kt(){function e(e,t){var n=e-r,o=t-i,a=Math.sqrt(n*n+o*o);js+=a*(r+e)/2,Ds+=a*(i+t)/2,Os+=a,a=i*e-r*t,Ns+=a*(r+e),Ps+=a*(i+t),Fs+=3*a,Gt(r=e,i=t)}var t,n,r,i;Xs.point=function(o,a){Xs.point=e,Gt(t=r=o,n=i=a)},Xs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,La)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return a=e,s},result:w};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return on(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){x=NaN,A.point=o,t.lineStart()}function o(n,r){var o=gt([n,r]),a=e(n,r);i(x,b,y,w,_,k,x=a[0],b=a[1],y=n,w=o[0],_=o[1],k=o[2],s,t),t.point(x,b)}function a(){A.point=n,t.lineEnd()}function l(){r(),A.point=u,A.lineEnd=c}function u(e,t){o(f=e,d=t),h=x,p=b,g=w,v=_,m=k,A.point=o}function c(){i(x,b,y,w,_,k,h,p,f,g,v,m,s,t),A.lineEnd=a,a()}var f,d,h,p,g,v,m,y,x,b,w,_,k,A={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),A.lineStart=l},polygonEnd:function(){t.polygonEnd(),A.lineStart=r}};return A}function i(t,n,r,s,l,u,c,f,d,h,p,g,v,m){var y=c-t,x=f-n,b=y*y+x*x;if(b>4*o&&v--){var w=s+h,_=l+p,k=u+g,A=Math.sqrt(w*w+_*_+k*k),S=Math.asin(k/=A),z=ba(ba(k)-1)<Fa||ba(r-d)<Fa?(r+d)/2:Math.atan2(_,w),M=e(z,S),C=M[0],T=M[1],E=C-t,j=T-n,D=x*E-y*j;(D*D/b>o||ba((y*E+x*j)/b-.5)>.3||a>s*h+l*p+u*g)&&(i(t,n,r,s,l,u,C,T,z,w/=A,_/=A,k,v,m),m.point(C,T),i(C,T,z,w,_,k,c,f,d,h,p,g,v,m))}}var o=.5,a=Math.cos(30*Ua),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function nn(e){var t=tn(function(t,n){return e([t*Va,n*Va])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function on(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function an(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Ua,e[1]*Ua),[e[0]*d+l,u-e[1]*d]}function n(e){return e=s.invert((e[0]-l)/d,(u-e[1])/d),e&&[e[0]*Va,e[1]*Va]}function r(){s=Ct(a=fn(m,x,b),o);var e=o(g,v);return l=h-e[0]*d,u=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,s,l,u,c,f=tn(function(e,t){return e=o(e,t),[e[0]*d+l,u-e[1]*d]}),d=150,h=480,p=250,g=0,v=0,m=0,x=0,b=0,w=Rs,_=y,k=null,A=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(w(a,f(_(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Rs):qt((k=+e)*Ua),i()):k},t.clipExtent=function(e){return arguments.length?(A=e,_=e?Vt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):A},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Ua,v=e[1]%360*Ua,r()):[g*Va,v*Va]},t.rotate=function(e){return arguments.length?(m=e[0]%360*Ua,x=e[1]%360*Ua,b=e.length>2?e[2]%360*Ua:0,r()):[m*Va,x*Va,b*Va]},la.rebind(t,f,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function ln(e){return on(e,function(t,n){e.point(t*Ua,n*Ua)})}function un(e,t){return[e,t]}function cn(e,t){return[e>Ra?e-La:-Ra>e?e+La:e,t]}function fn(e,t,n){return e?t||n?Ct(hn(e),pn(t,n)):hn(e):t||n?pn(t,n):cn}function dn(e){return function(t,n){return t+=e,[t>Ra?t-La:-Ra>t?t+La:t,n]}}function hn(e){var t=dn(e);return t.invert=dn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),te(c*o+l*a)]}var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),te(c*r-s*i)]},n}function gn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var l=a*t;null!=i?(i=vn(n,i),o=vn(n,o),(a>0?o>i:i>o)&&(i+=a*La)):(i=e+a*La,o=e-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=wt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function vn(e,t){var n=gt(t);n[0]-=e,bt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Fa)%(2*Math.PI)}function mn(e,t,n){var r=la.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function yn(e,t,n){var r=la.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function xn(e){return e.source}function bn(e){return e.target}function wn(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(oe(r-t)+i*a*oe(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*l+t*c,i=n*u+t*f,a=n*o+t*s;return[Math.atan2(i,r)*Va,Math.atan2(a,Math.sqrt(r*r+i*i))*Va]}:function(){return[e*Va,t*Va]};return p.distance=d,p}function _n(){function e(e,i){var o=Math.sin(i*=Ua),a=Math.cos(i),s=ba((e*=Ua)-t),l=Math.cos(s);Js+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),t=e,n=o,r=a}var t,n,r;Gs.point=function(i,o){t=i*Ua,n=Math.sin(o*=Ua),r=Math.cos(o),Gs.point=e},Gs.lineEnd=function(){Gs.point=Gs.lineEnd=w}}function kn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}function An(e,t){function n(e,t){a>0?-qa+Fa>t&&(t=-qa+Fa):t>qa-Fa&&(t=qa-Fa);var n=a/Math.pow(i(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Ra/4+e/2)},o=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),a=r*Math.pow(i(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,r=Z(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/r,1/o))-qa]},n):zn}function Sn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),o=r/i+e;return ba(i)<Fa?un:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,o-Z(i)*Math.sqrt(e*e+n*n)]},n)}function zn(e,t){return[e,Math.log(Math.tan(Ra/4+t/2))]}function Mn(e){var t,n=an(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Ra*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function Cn(e,t){return[Math.log(Math.tan(Ra/4+t/2)),-e]}function Tn(e){return e[0]}function En(e){return e[1]}function jn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&K(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Dn(e,t){return e[0]-t[0]||e[1]-t[1]}function On(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Nn(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+d*a,l+d*c]}function Pn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Fn(){rr(this),this.edge=this.site=this.circle=null}function In(e){var t=ll.pop()||new Fn;return t.site=e,t}function Rn(e){Xn(e),ol.remove(e),ll.push(e),rr(e)}function Ln(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Rn(e);for(var l=o;l.circle&&ba(n-l.circle.x)<Fa&&ba(r-l.circle.cy)<Fa;)o=l.P,s.unshift(l),Rn(l),l=o;s.unshift(l),Xn(l);for(var u=a;u.circle&&ba(n-u.circle.x)<Fa&&ba(r-u.circle.cy)<Fa;)a=u.N,s.push(u),Rn(u),u=a;s.push(u),Xn(u);var c,f=s.length;for(c=1;f>c;++c)u=s[c],l=s[c-1],er(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Zn(l.site,u.site,null,i),Wn(l),Wn(u)}function Bn(e){for(var t,n,r,i,o=e.x,a=e.y,s=ol._;s;)if(r=qn(s,a)-o,r>Fa)s=s.L;else{if(i=o-Un(s,a),!(i>Fa)){r>-Fa?(t=s.P,n=s):i>-Fa?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=In(e);if(ol.insert(t,l),t||n){if(t===n)return Xn(t),n=In(t.site),ol.insert(l,n),l.edge=n.edge=Zn(t.site,l.site),Wn(t),void Wn(n);if(!n)return void(l.edge=Zn(t.site,l.site));Xn(t),Xn(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,h=e.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,x=g*g+v*v,b={x:(v*y-h*x)/m+c,y:(d*x-g*y)/m+f};er(n.edge,u,p,b),l.edge=Zn(u,e,null,b),n.edge=Zn(e,p,null,b),Wn(t),Wn(n)}}function qn(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,f=1/o-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function Un(e,t){var n=e.N;if(n)return qn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Vn(e){this.site=e,this.edges=[]}function $n(e){for(var t,n,r,i,o,a,s,l,u,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],g=il,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)c=s[a].end(),r=c.x,i=c.y,u=s[++a%l].start(),t=u.x,n=u.y,(ba(r-t)>Fa||ba(i-n)>Fa)&&(s.splice(a,0,new tr(Kn(o.site,c,ba(r-f)<Fa&&p-i>Fa?{x:f,y:ba(t-f)<Fa?n:p}:ba(i-p)<Fa&&d-r>Fa?{x:ba(n-p)<Fa?t:d,y:p}:ba(r-d)<Fa&&i-h>Fa?{x:d,y:ba(t-d)<Fa?n:h}:ba(i-h)<Fa&&r-f>Fa?{x:ba(n-h)<Fa?t:f,y:h}:null),o.site,null)),++l)}function Hn(e,t){return t.angle-e.angle}function Yn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=o.y-s,d=2*(l*f-u*c);if(!(d>=-Ia)){var h=l*l+u*u,p=c*c+f*f,g=(f*h-u*p)/d,v=(l*p-c*h)/d,f=v+s,m=ul.pop()||new Yn;m.arc=e,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,e.circle=m;for(var y=null,x=sl._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}sl.insert(y,m),y||(al=m)}}}}function Xn(e){var t=e.circle;t&&(t.P||(al=t.N),sl.remove(t),ul.push(t),rr(t),e.circle=null)}function Jn(e){for(var t,n=rl,r=Ut(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Gn(t,e)||!r(t)||ba(t.a.x-t.b.x)<Fa&&ba(t.a.y-t.b.y)<Fa)&&(t.a=t.b=null,n.splice(i,1))}function Gn(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2,m=(h+g)/2;if(g===h){if(a>v||v>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(r=(d-p)/(g-h),i=m-r*v,-1>r||r>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>h){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Qn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Zn(e,t,n,r){var i=new Qn(e,t);return rl.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),il[e.i].edges.push(new tr(i,e,t)),il[t.i].edges.push(new tr(i,t,e)),i}function Kn(e,t,n){var r=new Qn(e,null);return r.a=t,r.b=n,rl.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,o=e.sort(lr).pop();for(rl=[],il=new Array(e.length),ol=new nr,sl=new nr;;)if(i=al,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(il[o.i]=new Vn(o),Bn(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;Ln(i.arc)}t&&(Jn(t),$n(t));var a={cells:il,edges:rl};return ol=sl=rl=il=null,a}function lr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function fr(e){return e.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=t.nodes;l[0]&&hr(e,l[0],n,r,a,s),l[1]&&hr(e,l[1],a,r,i,s),l[2]&&hr(e,l[2],n,s,a,o),l[3]&&hr(e,l[3],a,s,i,o)}}function pr(e,t,n,r,i,o,a){var s,l=1/0;return function u(e,c,f,d,h){if(!(c>o||f>a||r>d||i>h)){if(p=e.point){var p,g=t-e.x,v=n-e.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=t-y,i=n-y,o=t+y,a=n+y,s=p}}for(var x=e.nodes,b=.5*(c+d),w=.5*(f+h),_=t>=b,k=n>=w,A=k<<1|_,S=A+4;S>A;++A)if(e=x[3&A])switch(3&A){case 0:u(e,c,f,b,w);break;case 1:u(e,b,f,d,w);break;case 2:u(e,c,w,b,h);break;case 3:u(e,b,w,d,h)}}}(e,r,i,o,a),s}function gr(e,t){e=la.rgb(e),t=la.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+be(Math.round(n+o*e))+be(Math.round(r+a*e))+be(Math.round(i+s*e))}}function vr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=xr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function mr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yr(e,t){var n,r,i,o=fl.lastIndex=dl.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=fl.exec(e))&&(r=dl.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:mr(n,r)})),o=dl.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;t>r;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function xr(e,t){for(var n,r=la.interpolators.length;--r>=0&&!(n=la.interpolators[r](e,t)););return n}function br(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(xr(e[n],t[n]));for(;o>n;++n)i[n]=e[n];for(;a>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function wr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function _r(e){return function(t){return 1-e(1-t)}}function kr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Ar(e){return e*e}function Sr(e){return e*e*e}function zr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Mr(e){return function(t){return Math.pow(t,e)}}function Cr(e){return 1-Math.cos(e*qa)}function Tr(e){return Math.pow(2,10*(e-1))}function Er(e){return 1-Math.sqrt(1-e*e)}function jr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/La*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*La/t)}}function Dr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Or(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Nr(e,t){e=la.hcl(e),t=la.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ce(n+o*e,r+a*e,i+s*e)+""}}function Pr(e,t){e=la.hsl(e),t=la.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return le(n+o*e,r+a*e,i+s*e)+""}}function Fr(e,t){e=la.lab(e),t=la.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return de(n+o*e,r+a*e,i+s*e)+""}}function Ir(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Rr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Br(t),i=Lr(t,n),o=Br(qr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Va,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Va:0}function Lr(e,t){return e[0]*t[0]+e[1]*t[1]}function Br(e){var t=Math.sqrt(Lr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function qr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Ur(e){return e.length?e.pop()+",":""}function Vr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:mr(e[0],t[0])},{i:i-2,x:mr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function $r(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Ur(n)+"rotate(",null,")")-2,x:mr(e,t)})):t&&n.push(Ur(n)+"rotate("+t+")")}function Hr(e,t,n,r){e!==t?r.push({i:n.push(Ur(n)+"skewX(",null,")")-2,x:mr(e,t)}):t&&n.push(Ur(n)+"skewX("+t+")")}function Yr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Ur(n)+"scale(",null,",",null,")");r.push({i:i-4,x:mr(e[0],t[0])},{i:i-2,x:mr(e[1],t[1])})}else(1!==t[0]||1!==t[1])&&n.push(Ur(n)+"scale("+t+")")}function Wr(e,t){var n=[],r=[];return e=la.transform(e),t=la.transform(t),Vr(e.translate,t.translate,n,r),$r(e.rotate,t.rotate,n,r),Hr(e.skew,t.skew,n,r),Yr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Xr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Jr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Gr(e){for(var t=e.source,n=e.target,r=Zr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Qr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Zr(e,t){if(e===t)return e;for(var n=Qr(e),r=Qr(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Kr(e){e.fixed|=2}function ei(e){e.fixed&=-7}function ti(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ni(e){e.fixed&=-5}function ri(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(ri(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ii(e,t){return la.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ci,e}function oi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ai(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function li(e){return e.value}function ui(e,t){return t.value-e.value}function ci(e){return la.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function fi(e){return e.x}function di(e){return e.y}function hi(e,t,n){e.y0=t,e.y=n}function pi(e){return la.range(e.length)}function gi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function vi(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function mi(e){return e.reduce(yi,0)}function yi(e,t){return e+t[1]}function xi(e,t){return bi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function bi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function wi(e){return[la.min(e),la.max(e)]}function _i(e,t){return e.value-t.value}function ki(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ai(e,t){e._pack_next=t,t._pack_prev=e}function Si(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function zi(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(n.forEach(Mi),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(o=n[2],Ei(r,i,o),t(o),ki(r,o),r._pack_prev=o,ki(o,i),i=r._pack_next,a=3;u>a;a++){Ei(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Si(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!Si(l,o);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Ai(r,i=s):Ai(r=l,i),a--):(ki(r,o),i=o,t(o))}var m=(c+f)/2,y=(d+h)/2,x=0;for(a=0;u>a;a++)o=n[a],o.x-=m,o.y-=y,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=x,n.forEach(Ci)}}function Mi(e){e._pack_next=e._pack_prev=e}function Ci(e){delete e._pack_next,delete e._pack_prev}function Ti(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],t,n,r)}function Ei(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*i+u*o,n.y=e.y+l*o-u*i}else n.x=e.x+r,n.y=e.y}function ji(e,t){return e.parent==t.parent?1:2}function Di(e){var t=e.children;return t.length?t[0]:e.t}function Oi(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ni(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Pi(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Fi(e,t,n){return e.a.parent===t.parent?e.a:n}function Ii(e){return 1+la.max(e,function(e){return e.y})}function Ri(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Li(e){var t=e.children;return t&&t.length?Li(t[0]):e}function Bi(e){var t,n=e.children;return n&&(t=n.length)?Bi(n[t-1]):e}function qi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ui(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Vi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function $i(e){return e.rangeExtent?e.rangeExtent():Vi(e.range())}function Hi(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Yi(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Wi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:kl}function Xi(e,t,n,r){var i=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=la.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function Ji(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Xi:Hi,l=r?Jr:Xr;return a=i(e,t,l,n),s=i(t,e,l,xr),o}function o(e){return a(e)}var a,s;return o.invert=function(e){return s(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Ir)},o.clamp=function(e){return arguments.length?(r=e,i()):r},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return Ki(e,t)},o.tickFormat=function(t,n){return eo(e,t,n)},o.nice=function(t){return Qi(e,t),i()},o.copy=function(){return Ji(e,t,n,r)},i()}function Gi(e,t){return la.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Qi(e,t){return Yi(e,Wi(Zi(e,t)[2])),Yi(e,Wi(Zi(e,t)[2])),e}function Zi(e,t){null==t&&(t=10);var n=Vi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ki(e,t){return la.range.apply(la,Zi(e,t))}function eo(e,t,n){var r=Zi(e,t);if(n){var i=fs.exec(n);if(i.shift(),"s"===i[8]){var o=la.formatPrefix(Math.max(ba(r[0]),ba(r[1])));return i[7]||(i[7]="."+to(o.scale(r[2]))),i[8]="f",n=la.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+no(i[8],r)),n=i.join("")}else n=",."+to(r[2])+"f";return la.format(n)}function to(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function no(e,t){var n=to(t[2]);return e in Al?Math.abs(n-to(Math.max(ba(t[0]),ba(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ro(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Yi(r.map(i),n?Math:zl);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=Vi(r),a=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),f=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var d=1;f>d;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=f-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(e,n){if(!arguments.length)return Sl;arguments.length<2?n=Sl:"function"!=typeof n&&(n=la.format(n));var r=Math.max(1,t*e/a.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return t-.5>a*t&&(a*=t),r>=a?n(e):""}},a.copy=function(){return ro(e.copy(),t,n,r)},Gi(a,e)}function io(e,t,n){function r(t){return e(i(t))}var i=oo(t),o=oo(1/t);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Ki(n,e)},r.tickFormat=function(e,t){return eo(n,e,t)},r.nice=function(e){return r.domain(Qi(n,e))},r.exponent=function(a){return arguments.length?(i=oo(t=a),o=oo(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return io(e.copy(),t,n)},Gi(r,e)}function oo(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ao(e,t){function n(n){return o[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%o.length]}function r(t,n){return la.range(e.length).map(function(e){return t+n*e})}var i,o,a;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,a=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return o=r(l+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return o=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=(f-c)/(e.length-s+2*l);return o=r(c+d*l,d),u&&o.reverse(),a=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=Math.floor((f-c)/(e.length-s+2*l));return o=r(c+Math.round((f-c-(e.length-s)*d)/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Vi(t.a[0])},n.copy=function(){return ao(e,t)},n.domain(e)}function so(e,t){function o(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=la.quantile(e,n/r);return a}function a(e){return isNaN(e=+e)?void 0:t[la.bisect(s,e)]}var s;return a.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),o()):e},a.range=function(e){return arguments.length?(t=e,o()):t},a.quantiles=function(){return s},a.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},a.copy=function(){return so(e,t)},o()}function lo(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/o+e,[t,t+1/o]},r.copy=function(){return lo(e,t,n)},i()}function uo(e,t){function n(n){return n>=n?t[la.bisect(e,n)]:void 0}return n.domain=function(t){
return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return uo(e,t)},n}function co(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ki(e,t)},t.tickFormat=function(t,n){return eo(e,t,n)},t.copy=function(){return co(e)},t}function fo(){return 0}function ho(e){return e.innerRadius}function po(e){return e.outerRadius}function go(e){return e.startAngle}function vo(e){return e.endAngle}function mo(e){return e&&e.padAngle}function yo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function xo(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=e[0]+l,f=e[1]+u,d=t[0]+l,h=t[1]+u,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,x=n-r,b=c*h-d*f,w=(0>m?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),_=(b*m-v*w)/y,k=(-b*v-m*w)/y,A=(b*m+v*w)/y,S=(-b*v+m*w)/y,z=_-p,M=k-g,C=A-p,T=S-g;return z*z+M*M>C*C+T*T&&(_=A,k=S),[[_-l,k-u],[_*n/x,k*n/x]]}function bo(e){function t(t){function a(){u.push("M",o(e(c),s))}for(var l,u=[],c=[],f=-1,d=t.length,h=ze(n),p=ze(r);++f<d;)i.call(this,l=t[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Tn,r=En,i=Tt,o=wo,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=Dl.get(e)||wo).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function wo(e){return e.length>1?e.join("L"):e+"Z"}function _o(e){return e.join("L")+"Z"}function ko(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function So(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function zo(e,t){return e.length<4?wo(e):e[1]+To(e.slice(1,-1),Eo(e,t))}function Mo(e,t){return e.length<3?_o(e):e[0]+To((e.push(e[0]),e),Eo([e[e.length-2]].concat(e,[e[1]]),t))}function Co(e,t){return e.length<3?wo(e):e[0]+To(e,Eo(e,t))}function To(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return wo(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++)o=e[l],s=t[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Eo(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function jo(e){if(e.length<3)return wo(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Po(Pl,a),",",Po(Pl,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Fo(l,a,s);return e.pop(),l.push("L",r),l.join("")}function Do(e){if(e.length<4)return wo(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(Po(Pl,o)+","+Po(Pl,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Fo(n,o,a);return n.join("")}function Oo(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[Po(Pl,a),",",Po(Pl,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Fo(t,a,s);return t.join("")}function No(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return jo(e)}function Po(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Fo(e,t,n){e.push("C",Po(Ol,t),",",Po(Ol,n),",",Po(Nl,t),",",Po(Nl,n),",",Po(Pl,t),",",Po(Pl,n))}function Io(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ro(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Io(i,o);++t<n;)r[t]=(a+(a=Io(i=o,o=e[t+1])))/2;return r[t]=a,r}function Lo(e){for(var t,n,r,i,o=[],a=Ro(e),s=-1,l=e.length-1;++s<l;)t=Io(e[s],e[s+1]),ba(t)<Fa?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Bo(e){return e.length<3?wo(e):e[0]+To(e,Lo(e))}function qo(e){for(var t,n,r,i=-1,o=e.length;++i<o;)t=e[i],n=t[0],r=t[1]-qa,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Uo(e){function t(t){function l(){g.push("M",s(e(m),f),c,u(e(v.reverse()),f),"Z")}for(var d,h,p,g=[],v=[],m=[],y=-1,x=t.length,b=ze(n),w=ze(i),_=n===r?function(){return h}:ze(r),k=i===o?function(){return p}:ze(o);++y<x;)a.call(this,d=t[y],y)?(v.push([h=+b.call(this,d,y),p=+w.call(this,d,y)]),m.push([+_.call(this,d,y),+k.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=Tn,r=Tn,i=0,o=En,a=Tt,s=wo,l=s.key,u=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=o=e,t):o},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Dl.get(e)||wo).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Vo(e){return e.radius}function $o(e){return[e.x,e.y]}function Ho(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-qa;return[n*Math.cos(r),n*Math.sin(r)]}}function Yo(){return 64}function Wo(){return"circle"}function Xo(e){var t=Math.sqrt(e/Ra);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Jo(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Go(e,t,n){return Sa(e,Ul),e.namespace=t,e.id=n,e}function Qo(e,t,n,r){var i=e.id,o=e.namespace;return V(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function Zo(e){return null==e&&(e=""),function(){this.textContent=e}}function Ko(e){return null==e?"__transition__":"__transition_"+e+"__"}function ea(e,t,n,r,i){function o(e){var t=g.delay;return c.t=t+l,e>=t?a(e-t):void(c.c=a)}function a(n){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(e,e.__data__,o.index));for(var a in p)if(r>+a){var u=p[a];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[a]}c.c=s,je(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=r,g.event&&g.event.start.call(e,e.__data__,t),h=[],g.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),d=g.ease,f=g.duration}function s(i){for(var o=i/f,a=d(o),s=h.length;s>0;)h[--s].call(e,a);return o>=1?(g.event&&g.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1):void 0}var l,c,f,d,h,p=e[n]||(e[n]={active:0,count:0}),g=p[r];g||(l=i.time,c=je(o,0,l),g=p[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function ta(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function na(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function ra(e){return e.toISOString()}function ia(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,o=la.bisect(Ql,i);return o==Ql.length?[t.year,Zi(e.map(function(e){return e/31536e6}),n)[2]]:o?t[i/Ql[o-1]<Ql[o]/i?o-1:o]:[eu,Zi(e,n)[2]]}return r.invert=function(t){return oa(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(oa)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,oa(+n+1),t).length}var o=r.domain(),a=Vi(o),s=null==e?i(a,10):"number"==typeof e&&i(a,e);return s&&(e=s[0],t=s[1]),r.domain(Yi(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=oa(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=oa(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Vi(r.domain()),o=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],oa(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ia(e.copy(),t,n)},Gi(r,e)}function oa(e){return new Date(e)}function aa(e){return JSON.parse(e.responseText)}function sa(e){var t=fa.createRange();return t.selectNode(fa.body),t.createContextualFragment(e.responseText)}var la={version:"3.5.15"},ua=[].slice,ca=function(e){return ua.call(e)},fa=this.document;if(fa)try{ca(fa.documentElement.childNodes)[0].nodeType}catch(da){ca=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),fa)try{fa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ha){var pa=this.Element.prototype,ga=pa.setAttribute,va=pa.setAttributeNS,ma=this.CSSStyleDeclaration.prototype,ya=ma.setProperty;pa.setAttribute=function(e,t){ga.call(this,e,t+"")},pa.setAttributeNS=function(e,t,n){va.call(this,e,t,n+"")},ma.setProperty=function(e,t,n){ya.call(this,e,t+"",n)}}la.ascending=n,la.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},la.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},la.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},la.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},la.sum=function(e,t){var n,r=0,o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+e[a])&&(r+=n);else for(;++a<o;)i(n=+t.call(e,e[a],a))&&(r+=n);return r},la.mean=function(e,t){var n,o=0,a=e.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(e[s]))?o+=n:--l;else for(;++s<a;)i(n=r(t.call(e,e[s],s)))?o+=n:--l;return l?o/l:void 0},la.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},la.median=function(e,t){var o,a=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(e[l]))&&a.push(o);else for(;++l<s;)i(o=r(t.call(e,e[l],l)))&&a.push(o);return a.length?la.quantile(a.sort(n),.5):void 0},la.variance=function(e,t){var n,o,a=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(e[u]))&&(o=n-s,s+=o/++c,l+=o*(n-s));else for(;++u<a;)i(n=r(t.call(e,e[u],u)))&&(o=n-s,s+=o/++c,l+=o*(n-s));return c>1?l/(c-1):void 0},la.deviation=function(){var e=la.variance.apply(this,arguments);return e?Math.sqrt(e):e};var xa=o(n);la.bisectLeft=xa.left,la.bisect=la.bisectRight=xa.right,la.bisector=function(e){return o(1===e.length?function(t,r){return n(e(t),r)}:e)},la.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,2>o&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},la.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},la.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],o=new Array(0>r?0:r);r>n;)o[n]=[t=i,i=e[++n]];return o},la.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=la.min(e,a),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},la.zip=function(){return la.transpose(arguments)},la.keys=function(e){var t=[];for(var n in e)t.push(n);return t},la.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},la.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},la.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--a]=r[t];return n};var ba=Math.abs;la.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],o=s(ba(n)),a=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},la.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var wa="__proto__",_a="\0";l(u,{has:d,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:f(t),value:this._[t]});return e},size:g,empty:v,forEach:function(e){for(var t in this._)e.call(this,f(t),this._[t])}}),la.nest=function(){function e(t,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,c,f,d,h=-1,p=a.length,g=o[s++],v=new u;++h<p;)(d=v.get(l=g(c=a[h])))?d.push(c):v.set(l,[c]);return t?(c=t(),f=function(n,r){c.set(n,e(t,r,s))}):(c={},f=function(n,r){c[n]=e(t,r,s)}),v.forEach(f),c}function t(e,n){if(n>=o.length)return e;var r=[],i=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(la.map,n,0),0)},i.key=function(e){return o.push(e),i},i.sortKeys=function(e){return a[o.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},la.set=function(e){var t=new m;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},l(m,{has:d,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:g,empty:v,forEach:function(e){for(var t in this._)e.call(this,f(t))}}),la.behavior={},la.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=x(e,t,t[n]);return e};var ka=["webkit","ms","moz","Moz","o","O"];la.dispatch=function(){for(var e=new _,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},_.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},la.event=null,la.requote=function(e){return e.replace(Aa,"\\$&")};var Aa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},za=function(e,t){return t.querySelector(e)},Ma=function(e,t){return t.querySelectorAll(e)},Ca=function(e,t){var n=e.matches||e[b(e,"matchesSelector")];return(Ca=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(za=function(e,t){return Sizzle(e,t)[0]||null},Ma=Sizzle,Ca=Sizzle.matchesSelector),la.selection=function(){return la.select(fa.documentElement)};var Ta=la.selection.prototype=[];Ta.select=function(e){var t,n,r,i,o=[];e=C(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return M(o)},Ta.selectAll=function(e){var t,n,r=[];e=T(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(t=ca(e.call(n,n.__data__,s,i))),t.parentNode=n);return M(r)};var Ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};la.ns={prefix:Ea,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ea.hasOwnProperty(n)?{space:Ea[n],local:e}:e}},Ta.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=la.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(E(t,e[t]));return this}return this.each(E(e,t))},Ta.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=O(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!D(e[i]).test(t))return!1;return!0}for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},Ta.style=function(e,n,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(n="");for(r in e)this.each(F(r,e[r],n));return this}if(2>i){var o=this.node();return t(o).getComputedStyle(o,null).getPropertyValue(e)}r=""}return this.each(F(e,n,r))},Ta.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},Ta.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Ta.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Ta.append=function(e){return e=R(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Ta.insert=function(e,t){return e=R(e),t=C(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Ta.remove=function(){return this.each(L)},Ta.data=function(e,t){function n(e,n){var r,i,o,a=e.length,f=n.length,d=Math.min(a,f),h=new Array(f),p=new Array(f),g=new Array(a);if(t){var v,m=new u,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(m.has(v=t.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=t.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):p[r]=B(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=B(o);for(;f>r;++r)p[r]=B(n[r]);for(;a>r;++r)g[r]=e[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=e.parentNode,s.push(p),l.push(h),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(e[o]=i.__data__);return e}var s=$([]),l=M([]),c=M([]);if("function"==typeof e)for(;++o<a;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],e);return l.enter=function(){return s},l.exit=function(){return c},l},Ta.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Ta.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=q(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return M(i)},Ta.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ta.sort=function(e){e=U.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Ta.each=function(e){return V(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Ta.call=function(e){var t=ca(arguments);return e.apply(t[0]=this,t),this},Ta.empty=function(){return!this.node()},Ta.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Ta.size=function(){var e=0;return V(this,function(){++e}),e};var ja=[];la.selection.enter=$,la.selection.enter.prototype=ja,ja.append=Ta.append,ja.empty=Ta.empty,ja.node=Ta.node,ja.call=Ta.call,ja.size=Ta.size,ja.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(t.push(r[u]=n=e.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):t.push(null)}return M(a)},ja.insert=function(e,t){return arguments.length<2&&(t=H(this)),Ta.insert.call(this,e,t)},la.select=function(t){var n;return"string"==typeof t?(n=[za(t,fa)],n.parentNode=fa.documentElement):(n=[t],n.parentNode=e(t)),M([n])},la.selectAll=function(e){var t;return"string"==typeof e?(t=ca(Ma(e,fa)),t.parentNode=fa.documentElement):(t=ca(e),t.parentNode=null),M([t])},Ta.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(Y(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(Y(e,t,n))};var Da=la.map({mouseenter:"mouseover",mouseleave:"mouseout"});fa&&Da.forEach(function(e){"on"+e in fa&&Da.remove(e)});var Oa,Na=0;la.mouse=function(e){return G(e,S())};var Pa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;la.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=S().changedTouches),t)for(var r,i=0,o=t.length;o>i;++i)if((r=t[i]).identifier===n)return G(e,r)},la.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(e,t,n,o,a){return function(){function s(){var e,n,r=t(d,g);r&&(e=r[0]-x[0],n=r[1]-x[1],p|=e|n,x=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(d,g)&&(m.on(o+v,null).on(a+v,null),y(p),h({type:"dragend"}))}var u,c=this,f=la.event.target.correspondingElement||la.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=e(),v=".drag"+(null==g?"":"-"+g),m=la.select(n(f)).on(o+v,s).on(a+v,l),y=J(f),x=t(d,g);i?(u=i.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],h({type:"dragstart"})}}var r=z(e,"drag","dragstart","dragend"),i=null,o=n(w,la.mouse,t,"mousemove","mouseup"),a=n(Q,la.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},la.rebind(e,r,"on")},la.touches=function(e,t){return arguments.length<2&&(t=S().touches),t?ca(t).map(function(t){var n=G(e,t);return n.identifier=t.identifier,n}):[]};var Fa=1e-6,Ia=Fa*Fa,Ra=Math.PI,La=2*Ra,Ba=La-Fa,qa=Ra/2,Ua=Ra/180,Va=180/Ra,$a=Math.SQRT2,Ha=2,Ya=4;la.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2],c=s-i,f=l-o,d=c*c+f*f;if(Ia>d)r=Math.log(u/a)/$a,n=function(e){return[i+e*c,o+e*f,a*Math.exp($a*e*r)]};else{var h=Math.sqrt(d),p=(u*u-a*a+Ya*d)/(2*a*Ha*h),g=(u*u-a*a-Ya*d)/(2*u*Ha*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/$a,n=function(e){var t=e*r,n=re(v),s=a/(Ha*h)*(n*ie($a*t+v)-ne(v));return[i+s*c,o+s*f,a*n/re($a*t+v)]}}return n.duration=1e3*r,n},la.behavior.zoom=function(){function e(e){e.on(j,f).on(Xa+".zoom",h).on("dblclick.zoom",p).on(N,d)}function n(e){return[(e[0]-S.x)/S.k,(e[1]-S.y)/S.k]}function r(e){return[e[0]*S.k+S.x,e[1]*S.k+S.y]}function i(e){S.k=Math.max(C[0],Math.min(C[1],e))}function o(e,t){t=r(t),S.x+=e[0]-t[0],S.y+=e[1]-t[1]}function a(t,n,r,a){t.__chart__={x:S.x,y:S.y,k:S.k},i(Math.pow(2,a)),o(v=n,r),t=la.select(t),T>0&&(t=t.transition().duration(T)),t.call(e.event)}function s(){w&&w.domain(b.range().map(function(e){return(e-S.x)/S.k}).map(b.invert)),k&&k.domain(_.range().map(function(e){return(e-S.y)/S.k}).map(_.invert))}function l(e){E++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(e){--E||(e({type:"zoomend"}),v=null)}function f(){function e(){s=1,o(la.mouse(i),d),u(a)}function r(){f.on(D,null).on(O,null),h(s),c(a)}var i=this,a=P.of(i,arguments),s=0,f=la.select(t(i)).on(D,e).on(O,r),d=n(la.mouse(i)),h=J(i);ql.call(i),l(a)}function d(){function e(){var e=la.touches(p);return h=S.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=n(e))}),e}function t(){var t=la.event.target;la.select(t).on(b,r).on(w,s),_.push(t);for(var n=la.event.changedTouches,i=0,o=n.length;o>i;++i)v[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-x){var c=l[0];a(p,c,v[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),A()}x=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],h=c[1]-f[1];m=d*d+h*h}}function r(){var e,t,n,r,a=la.touches(p);ql.call(p);for(var s=0,l=a.length;l>s;++s,r=null)if(n=a[s],r=v[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=m&&Math.sqrt(c/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(f*h)}x=null,o(e,t),u(g)}function s(){if(la.event.touches.length){for(var t=la.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}la.selectAll(_).on(y,null),k.on(j,f).on(N,d),z(),c(g)}var h,p=this,g=P.of(p,arguments),v={},m=0,y=".zoom-"+la.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],k=la.select(p),z=J(p);t(),l(g),k.on(j,null).on(N,t)}function h(){var e=P.of(this,arguments);y?clearTimeout(y):(ql.call(this),g=n(v=m||la.mouse(this)),l(e)),y=setTimeout(function(){y=null,c(e)},50),A(),i(Math.pow(2,.002*Wa())*S.k),o(v,g),u(e)}function p(){var e=la.mouse(this),t=Math.log(S.k)/Math.LN2;a(this,e,n(e),la.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,v,m,y,x,b,w,_,k,S={x:0,y:0,k:1},M=[960,500],C=Ja,T=250,E=0,j="mousedown.zoom",D="mousemove.zoom",O="mouseup.zoom",N="touchstart.zoom",P=z(e,"zoomstart","zoom","zoomend");return Xa||(Xa="onwheel"in fa?(Wa=function(){return-la.event.deltaY*(la.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fa?(Wa=function(){return la.event.wheelDelta},"mousewheel"):(Wa=function(){return-la.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=S;Ll?la.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=la.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:o-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=S,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},s(),e):[S.x,S.y]},e.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:null},i(+t),s(),e):S.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Ja:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(M=t&&[+t[0],+t[1]],e):M},e.duration=function(t){return arguments.length?(T=+t,e):T},e.x=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(k=t,_=t.copy(),S={x:0,y:0,k:1},e):k},la.rebind(e,P,"on")};var Wa,Xa,Ja=[0,1/0];la.color=ae,ae.prototype.toString=function(){return this.rgb()+""},la.hsl=se;var Ga=se.prototype=new ae;Ga.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Ga.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Ga.rgb=function(){return le(this.h,this.s,this.l)},la.hcl=ue;var Qa=ue.prototype=new ae;Qa.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+Za*(arguments.length?e:1)))},Qa.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-Za*(arguments.length?e:1)))},Qa.rgb=function(){return ce(this.h,this.c,this.l).rgb()},la.lab=fe;var Za=18,Ka=.95047,es=1,ts=1.08883,ns=fe.prototype=new ae;ns.brighter=function(e){return new fe(Math.min(100,this.l+Za*(arguments.length?e:1)),this.a,this.b)},ns.darker=function(e){return new fe(Math.max(0,this.l-Za*(arguments.length?e:1)),this.a,this.b)},ns.rgb=function(){return de(this.l,this.a,this.b)},la.rgb=me;var rs=me.prototype=new ae;rs.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new me(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new me(i,i,i)},rs.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new me(e*this.r,e*this.g,e*this.b)},rs.hsl=function(){return _e(this.r,this.g,this.b)},rs.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var is=la.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});is.forEach(function(e,t){is.set(e,ye(t))}),la.functor=ze,la.xhr=Me(y),la.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Ce(e,t,null==n?r:i(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:i(e)):n},a}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){
return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,o={},a={},s=[],u=e.length,c=0,f=0;(r=n())!==a;){for(var d=[];r!==o&&r!==a;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new m,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},la.csv=la.dsv(",","text/csv"),la.tsv=la.dsv("\t","text/tab-separated-values");var os,as,ss,ls,us=this[b(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};la.timer=function(){je.apply(this,arguments)},la.timer.flush=function(){Oe(),Ne()},la.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var cs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Fe);la.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=la.round(e,Pe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),cs[8+n/3]};var fs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=la.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=la.round(e,Pe(e,t))).toFixed(Math.max(0,Math.min(20,Pe(e*(1+1e-15),t))))}}),hs=la.time={},ps=Date;Le.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gs.setUTCDate.apply(this._,arguments)},setDay:function(){gs.setUTCDay.apply(this._,arguments)},setFullYear:function(){gs.setUTCFullYear.apply(this._,arguments)},setHours:function(){gs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gs.setUTCSeconds.apply(this._,arguments)},setTime:function(){gs.setTime.apply(this._,arguments)}};var gs=Date.prototype;hs.year=Be(function(e){return e=hs.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),hs.years=hs.year.range,hs.years.utc=hs.year.utc.range,hs.day=Be(function(e){var t=new ps(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),hs.days=hs.day.range,hs.days.utc=hs.day.utc.range,hs.dayOfYear=function(e){var t=hs.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=hs[e]=Be(function(e){return(e=hs.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=hs.year(e).getDay();return Math.floor((hs.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});hs[e+"s"]=n.range,hs[e+"s"].utc=n.utc.range,hs[e+"OfYear"]=function(e){var n=hs.year(e).getDay();return Math.floor((hs.dayOfYear(e)+(n+t)%7)/7)}}),hs.week=hs.sunday,hs.weeks=hs.sunday.range,hs.weeks.utc=hs.sunday.utc.range,hs.weekOfYear=hs.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,ys=/^%/;la.locale=function(e){return{numberFormat:Ie(e),timeFormat:Ue(e)}};var xs=la.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});la.format=xs.numberFormat,la.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,bs),ct(bs.s,this.s,this),this.s?this.t+=bs.t:this.s=bs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bs=new ut;la.geo.stream=function(e,t){e&&ws.hasOwnProperty(e.type)?ws[e.type](e,t):ft(e,t)};var ws={Feature:function(e,t){ft(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ft(n[r].geometry,t)}},_s={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){dt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dt(n[r],t,0)},Polygon:function(e,t){ht(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ht(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ft(n[r],t)}};la.geo.area=function(e){return ks=0,la.geo.stream(e,Ss),ks};var ks,As=new ut,Ss={sphere:function(){ks+=4*Ra},point:w,lineStart:w,lineEnd:w,polygonStart:function(){As.reset(),Ss.lineStart=pt},polygonEnd:function(){var e=2*As;ks+=0>e?4*Ra+e:e,Ss.lineStart=Ss.lineEnd=Ss.point=w}};la.geo.bounds=function(){function e(e,t){x.push(b=[c=e,d=e]),f>t&&(f=t),t>h&&(h=t)}function t(t,n){var r=gt([t*Ua,n*Ua]);if(m){var i=mt(m,r),o=[i[1],-i[0],0],a=mt(o,i);bt(a),a=wt(a);var l=t-p,u=l>0?1:-1,g=a[0]*Va*u,v=ba(l)>180;if(v^(g>u*p&&u*t>g)){var y=a[1]*Va;y>h&&(h=y)}else if(g=(g+360)%360-180,v^(g>u*p&&u*t>g)){var y=-a[1]*Va;f>y&&(f=y)}else f>n&&(f=n),n>h&&(h=n);v?p>t?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);m=r,p=t}function n(){w.point=t}function r(){b[0]=c,b[1]=d,w.point=e,m=null}function i(e,n){if(m){var r=e-p;y+=ba(r)>180?r+(r>0?360:-360):r}else g=e,v=n;Ss.point(e,n),t(e,n)}function o(){Ss.lineStart()}function a(){i(g,v),Ss.lineEnd(),ba(y)>Fa&&(c=-(d=180)),b[0]=c,b[1]=d,m=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,g,v,m,y,x,b,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,Ss.polygonStart()},polygonEnd:function(){Ss.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>As?(c=-(d=180),f=-(h=90)):y>Fa?h=90:-Fa>y&&(f=-90),b[0]=c,b[1]=d}};return function(e){h=d=-(c=f=1/0),x=[],la.geo.stream(e,w);var t=x.length;if(t){x.sort(l);for(var n,r=1,i=x[0],o=[i];t>r;++r)n=x[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,p=-(1/0),t=o.length-1,r=0,i=o[t];t>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>p&&(p=a,c=n[0],d=i[1])}return x=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),la.geo.centroid=function(e){zs=Ms=Cs=Ts=Es=js=Ds=Os=Ns=Ps=Fs=0,la.geo.stream(e,Is);var t=Ns,n=Ps,r=Fs,i=t*t+n*n+r*r;return Ia>i&&(t=js,n=Ds,r=Os,Fa>Ms&&(t=Cs,n=Ts,r=Es),i=t*t+n*n+r*r,Ia>i)?[NaN,NaN]:[Math.atan2(n,t)*Va,te(r/Math.sqrt(i))*Va]};var zs,Ms,Cs,Ts,Es,js,Ds,Os,Ns,Ps,Fs,Is={sphere:w,point:kt,lineStart:St,lineEnd:zt,polygonStart:function(){Is.lineStart=Mt},polygonEnd:function(){Is.lineStart=St}},Rs=Ot(Tt,It,Lt,[-Ra,-Ra/2]),Ls=1e9;la.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),i=o(e),i.valid=!0,i},extent:function(s){return arguments.length?(o=Vt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(la.geo.conicEqualArea=function(){return $t(Ht)}).raw=Ht,la.geo.albers=function(){return la.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},la.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}var t,n,r,i,o=la.geo.albers(),a=la.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=la.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var u=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Fa,f+.12*u+Fa],[c-.214*u-Fa,f+.234*u-Fa]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Fa,f+.166*u+Fa],[c-.115*u-Fa,f+.234*u-Fa]]).stream(l).point,e},e.scale(1070)};var Bs,qs,Us,Vs,$s,Hs,Ys={point:w,lineStart:w,lineEnd:w,polygonStart:function(){qs=0,Ys.lineStart=Yt},polygonEnd:function(){Ys.lineStart=Ys.lineEnd=Ys.point=w,Bs+=ba(qs/2)}},Ws={point:Wt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Xs={point:Gt,lineStart:Qt,lineEnd:Zt,polygonStart:function(){Xs.lineStart=Kt},polygonEnd:function(){Xs.point=Gt,Xs.lineStart=Qt,Xs.lineEnd=Zt}};la.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),la.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,r,i,o,a,s=4.5;return e.area=function(e){return Bs=0,la.geo.stream(e,i(Ys)),Bs},e.centroid=function(e){return Cs=Ts=Es=js=Ds=Os=Ns=Ps=Fs=0,la.geo.stream(e,i(Xs)),Fs?[Ns/Fs,Ps/Fs]:Os?[js/Os,Ds/Os]:Es?[Cs/Es,Ts/Es]:[NaN,NaN]},e.bounds=function(e){return $s=Hs=-(Us=Vs=1/0),la.geo.stream(e,i(Ws)),[[Us,Vs],[$s,Hs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):y,t()):n},e.context=function(e){return arguments.length?(o=null==(r=e)?new Xt:new en(e),"function"!=typeof s&&o.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(la.geo.albersUsa()).context(null)},la.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},la.geo.projection=an,la.geo.projectionMutator=sn,(la.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,la.geo.rotation=function(e){function t(t){return t=e(t[0]*Ua,t[1]*Ua),t[0]*=Va,t[1]*=Va,t}return e=fn(e[0]%360*Ua,e[1]*Ua,e.length>2?e[2]*Ua:0),t.invert=function(t){return t=e.invert(t[0]*Ua,t[1]*Ua),t[0]*=Va,t[1]*=Va,t},t},cn.invert=un,la.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=fn(-e[0]*Ua,-e[1]*Ua,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Va,e[1]*=Va}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gn((t=+r)*Ua,i*Ua),e):t},e.precision=function(r){return arguments.length?(n=gn(t*Ua,(i=+r)*Ua),e):i},e.angle(90)},la.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ua,i=e[1]*Ua,o=t[1]*Ua,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},la.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return la.range(Math.ceil(o/v)*v,i,v).map(d).concat(la.range(Math.ceil(u/m)*m,l,m).map(h)).concat(la.range(Math.ceil(r/p)*p,n,p).filter(function(e){return ba(e%v)>Fa}).map(c)).concat(la.range(Math.ceil(s/g)*g,a,g).filter(function(e){return ba(e%m)>Fa}).map(f))}var n,r,i,o,a,s,l,u,c,f,d,h,p=10,g=p,v=90,m=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],o>i&&(t=o,o=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[o,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(v=+t[0],m=+t[1],e):[v,m]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=mn(s,a,90),f=yn(r,n,y),d=mn(u,l,90),h=yn(o,i,y),e):y},e.majorExtent([[-180,-90+Fa],[180,90-Fa]]).minorExtent([[-180,-80-Fa],[180,80+Fa]])},la.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=xn,i=bn;return e.distance=function(){return la.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},la.geo.interpolate=function(e,t){return wn(e[0]*Ua,e[1]*Ua,t[0]*Ua,t[1]*Ua)},la.geo.length=function(e){return Js=0,la.geo.stream(e,Gs),Js};var Js,Gs={sphere:w,point:w,lineStart:_n,lineEnd:w,polygonStart:w,polygonEnd:w},Qs=kn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(la.geo.azimuthalEqualArea=function(){return an(Qs)}).raw=Qs;var Zs=kn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(la.geo.azimuthalEquidistant=function(){return an(Zs)}).raw=Zs,(la.geo.conicConformal=function(){return $t(An)}).raw=An,(la.geo.conicEquidistant=function(){return $t(Sn)}).raw=Sn;var Ks=kn(function(e){return 1/e},Math.atan);(la.geo.gnomonic=function(){return an(Ks)}).raw=Ks,zn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-qa]},(la.geo.mercator=function(){return Mn(zn)}).raw=zn;var el=kn(function(){return 1},Math.asin);(la.geo.orthographic=function(){return an(el)}).raw=el;var tl=kn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(la.geo.stereographic=function(){return an(tl)}).raw=tl,Cn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-qa]},(la.geo.transverseMercator=function(){var e=Mn(Cn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Cn,la.geom={},la.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=ze(n),o=ze(r),a=e.length,s=[],l=[];for(t=0;a>t;t++)s.push([+i.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(Dn),t=0;a>t;t++)l.push([s[t][0],-s[t][1]]);var u=jn(s),c=jn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[s[u[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[s[c[t]][2]]);return h}var n=Tn,r=En;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},la.geom.polygon=function(e){return Sa(e,nl),e};var nl=la.geom.polygon.prototype=[];nl.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},nl.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},nl.clip=function(e){for(var t,n,r,i,o,a,s=Pn(e),l=-1,u=this.length-Pn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)a=t[n],On(a,c,i)?(On(o,c,i)||e.push(Nn(o,a,c,i)),e.push(a)):On(o,c,i)&&e.push(Nn(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var rl,il,ol,al,sl,ll=[],ul=[];Vn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Hn),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ar(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(or(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?ar(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,or(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,or(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,or(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},la.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Fa)*Fa,y:Math.round(a(e,t)/Fa)*Fa,i:t}})}var r=Tn,i=En,o=r,a=i,s=cl;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Hn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)i=c,o=f,c=s[l].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&ur(a,o,f)<0&&t.push([e[r],e[o.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(o=ze(r=e),t):r},t.y=function(e){return arguments.length?(a=ze(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?cl:e,t):s===cl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===cl?null:s&&s[1]},t)};var cl=[[-1e6,-1e6],[1e6,1e6]];la.geom.delaunay=function(e){return la.geom.voronoi().triangles(e)},la.geom.quadtree=function(e,t,n,r,i){function o(e){function o(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(ba(l-n)+ba(c-r)<.01)u(e,t,n,r,i,o,a,s);else{var f=e.point;e.x=e.y=e.point=null,u(e,f,l,c,i,o,a,s),u(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,o,a,s)}function u(e,t,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,d=r>=c,h=d<<1|f;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=dr()),f?i=u:s=u,d?a=c:l=c,o(e,t,n,r,i,a,s,l)}var c,f,d,h,p,g,v,m,y,x=ze(s),b=ze(l);if(null!=t)g=t,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],d=[],p=e.length,a)for(h=0;p>h;++h)c=e[h],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;p>h;++h){var w=+x(c=e[h],h),_=+b(c,h);g>w&&(g=w),v>_&&(v=_),w>m&&(m=w),_>y&&(y=_),f.push(w),d.push(_)}var k=m-g,A=y-v;k>A?y=v+k:m=g+A;var S=dr();if(S.add=function(e){o(S,e,+x(e,++h),+b(e,h),g,v,m,y)},S.visit=function(e){hr(e,S,g,v,m,y)},S.find=function(e){return pr(S,e[0],e[1],g,v,m,y)},h=-1,null==t){for(;++h<p;)o(S,e[h],f[h],d[h],g,v,m,y);--h}else e.forEach(S.add);return f=d=e=c=null,S}var a,s=Tn,l=En;return(a=arguments.length)?(s=cr,l=fr,3===a&&(i=n,r=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(l=e,o):l},o.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),o):null==t?null:[[t,n],[r,i]]},o.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),o):null==t?null:[r-t,i-n]},o)},la.interpolateRgb=gr,la.interpolateObject=vr,la.interpolateNumber=mr,la.interpolateString=yr;var fl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(fl.source,"g");la.interpolate=xr,la.interpolators=[function(e,t){var n=typeof t;return("string"===n?is.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gr:yr:t instanceof ae?gr:Array.isArray(t)?br:"object"===n&&isNaN(t)?vr:mr)(e,t)}],la.interpolateArray=br;var hl=function(){return y},pl=la.map({linear:hl,poly:Mr,quad:function(){return Ar},cubic:function(){return Sr},sin:function(){return Cr},exp:function(){return Tr},circle:function(){return Er},elastic:jr,back:Dr,bounce:function(){return Or}}),gl=la.map({"in":y,out:_r,"in-out":kr,"out-in":function(e){return kr(_r(e))}});la.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=pl.get(n)||hl,r=gl.get(r)||y,wr(r(n.apply(null,ua.call(arguments,1))))},la.interpolateHcl=Nr,la.interpolateHsl=Pr,la.interpolateLab=Fr,la.interpolateRound=Ir,la.transform=function(e){var t=fa.createElementNS(la.ns.prefix.svg,"g");return(la.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Rr(n?n.matrix:vl)})(e)},Rr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vl={a:1,b:0,c:0,d:1,e:0,f:0};la.interpolateTransform=Wr,la.layout={},la.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Gr(e[n]));return t}},la.layout.chord=function(){function e(){var e,u,f,d,h,p={},g=[],v=la.range(o),m=[];for(n=[],r=[],e=0,d=-1;++d<o;){for(u=0,h=-1;++h<o;)u+=i[d][h];g.push(u),m.push(la.range(o)),e+=u}for(a&&v.sort(function(e,t){return a(g[e],g[t])}),s&&m.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(La-c*o)/e,u=0,d=-1;++d<o;){for(f=u,h=-1;++h<o;){var y=v[d],x=m[y][h],b=i[y][x],w=u,_=u+=b*e;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<o;)for(h=d-1;++h<o;){var k=p[d+"-"+h],A=p[h+"-"+d];(k.value||A.value)&&n.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(o=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(a=e,n=r=null,u):a},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},la.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,l=o*o+a*a;if(l>s*s/m){if(g>l){var u=t.charge/l;e.px-=o*u,e.py-=a*u}return!0}if(t.point&&l&&g>l){var u=t.pointCharge/l;e.px-=o*u,e.py-=a*u}}return!t.charge}}function t(e){e.px=la.event.x,e.py=la.event.y,l.resume()}var n,r,i,o,a,s,l={},u=la.dispatch("start","tick","end"),c=[1,1],f=.9,d=ml,h=yl,p=-30,g=xl,v=.1,m=.64,x=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,d,h,g,m,y,w,_=x.length,k=b.length;for(r=0;k>r;++r)l=b[r],d=l.source,h=l.target,y=h.x-d.x,w=h.y-d.y,(g=y*y+w*w)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,y*=g,w*=g,h.x-=y*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*m,d.x+=y*(m=1-m),d.y+=w*m);if((m=i*v)&&(y=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<_;)l=x[r],l.x+=(y-l.x)*m,l.y+=(w-l.y)*m;if(p)for(ri(t=la.geom.quadtree(x),i,s),r=-1;++r<_;)(l=x[r]).fixed||t.visit(e(l));for(r=-1;++r<_;)l=x[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(x=e,l):x},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,l):d},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.friction=function(e){return arguments.length?(f=+e,l):f},l.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(v=+e,l):v},l.theta=function(e){return arguments.length?(m=e*e,l):Math.sqrt(m)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=je(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;i>l;++l)n[l]=[];for(l=0;u>l;++l){var o=b[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][e]))return a;return Math.random()*r}var t,n,r,i=x.length,u=b.length,f=c[0],g=c[1];for(t=0;i>t;++t)(r=x[t]).index=t,r.weight=0;for(t=0;u>t;++t)r=b[t],"number"==typeof r.source&&(r.source=x[r.source]),"number"==typeof r.target&&(r.target=x[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=x[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof d)for(t=0;u>t;++t)o[t]=+d.call(this,b[t],t);else for(t=0;u>t;++t)o[t]=d;if(a=[],"function"==typeof h)for(t=0;u>t;++t)a[t]=+h.call(this,b[t],t);else for(t=0;u>t;++t)a[t]=h;if(s=[],"function"==typeof p)for(t=0;i>t;++t)s[t]=+p.call(this,x[t],t);else for(t=0;i>t;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=la.behavior.drag().origin(y).on("dragstart.force",Kr).on("drag.force",t).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ni).call(r):r},la.rebind(l,u,"on")};var ml=20,yl=1,xl=1/0;la.layout.hierarchy=function(){function e(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(e,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(e,o,o.depth)||0),delete o.children;return ai(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ui,n=si,r=li;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(oi(t,function(e){e.children&&(e.value=0)}),ai(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},la.layout.partition=function(){function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;++u<a;)e(s=o[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return e(a[0],0,i[0],i[1]/t(a[0])),a}var r=la.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ii(n,r)},la.layout.pie=function(){function e(a){var s,l=a.length,u=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),h=d*(0>f?-1:1),p=la.sum(u),g=p?(f-l*h)/p:0,v=la.range(l),m=[];return null!=n&&v.sort(n===bl?function(e,t){return u[t]-u[e]}:function(e,t){return n(a[e],a[t])}),v.forEach(function(e){m[e]={data:a[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+h,padAngle:d}}),m}var t=Number,n=bl,r=0,i=La,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var bl={};la.layout.stack=function(){function e(s,l){if(!(d=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),f=n.call(e,c,l);u=la.permute(u,f),c=la.permute(c,f);var d,h,p,g,v=r.call(e,c,l),m=u[0].length;for(p=0;m>p;++p)for(i.call(e,u[0][p],g=v[p],c[0][p][1]),h=1;d>h;++h)i.call(e,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var t=y,n=pi,r=gi,i=hi,o=fi,a=di;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:wl.get(t)||pi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:_l.get(t)||gi,e):r},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(i=t,e):i},e};var wl=la.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(vi),o=e.map(mi),a=la.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=a[t],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return la.range(e.length).reverse()},"default":pi}),_l=la.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];
r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,i,o,a,s,l,u,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;d>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,o=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}h[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;d>n;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:gi});la.layout.histogram=function(){function e(e,o){for(var a,s,l=[],u=e.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),o=-1,d=u.length,h=f.length-1,p=t?1:1/d;++o<h;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(h>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[la.bisect(f,s,1,h)-1],a.y+=p,a.push(e[o]));return l}var t=!0,n=Number,r=wi,i=xi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=ze(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return bi(e,t)}:ze(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},la.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,ai(s,function(e){e.r=+c(e.value)}),ai(s,zi),r){var f=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;ai(s,function(e){e.r+=f}),ai(s,zi),ai(s,function(e){e.r-=f})}return Ti(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var t,n=la.layout.hierarchy().sort(_i),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ii(e,n)},la.layout.tree=function(){function e(e,i){var c=a.call(this,e,i),f=c[0],d=t(f);if(ai(d,n),d.parent.m=-d.z,oi(d,r),u)oi(f,o);else{var h=f,p=f,g=f;oi(f,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var v=s(h,p)/2-h.x,m=l[0]/(p.x+s(p,h)/2+v),y=l[1]/(g.depth||1);oi(f,function(e){e.x=(e.x+v)*m,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Pi(e);var o=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,o=e,a=t,l=i.parent.children[0],u=i.m,c=o.m,f=a.m,d=l.m;a=Oi(a),i=Di(i),a&&i;)l=Di(l),o=Oi(o),o.a=e,r=a.z+f-i.z-u+s(a._,i._),r>0&&(Ni(Fi(a,e,n),e,r),u+=r,c+=r),f+=a.m,u+=i.m,d+=l.m,c+=o.m;a&&!Oi(o)&&(o.t=a,o.m+=f-c),i&&!Di(l)&&(l.t=i,l.m+=u-d,n=e)}return n}function o(e){e.x*=l[0],e.y=e.depth*l[1]}var a=la.layout.hierarchy().sort(null).value(null),s=ji,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?o:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:o,e):u?l:null},ii(e,a)},la.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),l=s[0],u=0;ai(l,function(e){var t=e.children;t&&t.length?(e.x=Ri(t),e.y=Ii(t)):(e.x=a?u+=n(e,a):0,e.y=0,a=e)});var c=Li(l),f=Bi(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return ai(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=la.layout.hierarchy().sort(null).value(null),n=ji,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ii(e,t)},la.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],d=o.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var o,a=f(t),s=r.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*o*p)):1/0}function i(e,t,n,r){var i,o=-1,a=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=e[o],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=e[o],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),d&&(a=i),i}var a,s=la.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=qi,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(u=e,o):u},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?qi(t):Ui(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ui(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?qi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(l=e?Math.round:Number,o):l!=Number},o.sticky=function(e){return arguments.length?(d=e,a=null,o):d},o.ratio=function(e){return arguments.length?(p=e,o):p},o.mode=function(e){return arguments.length?(h=e+"",o):h},ii(o,s)},la.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=la.random.normal.apply(la,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=la.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},la.scale={};var kl={floor:y,ceil:y};la.scale.linear=function(){return Ji([0,1],[0,1],xr,!1)};var Al={s:1,g:1,p:1,r:1,e:1};la.scale.log=function(){return ro(la.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl=la.format(".0e"),zl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};la.scale.pow=function(){return io(la.scale.linear(),1,[0,1])},la.scale.sqrt=function(){return la.scale.pow().exponent(.5)},la.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},la.scale.category10=function(){return la.scale.ordinal().range(Ml)},la.scale.category20=function(){return la.scale.ordinal().range(Cl)},la.scale.category20b=function(){return la.scale.ordinal().range(Tl)},la.scale.category20c=function(){return la.scale.ordinal().range(El)};var Ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),Tl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),El=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);la.scale.quantile=function(){return so([],[])},la.scale.quantize=function(){return lo(0,1,[0,1])},la.scale.threshold=function(){return uo([.5],[0,1])},la.scale.identity=function(){return co([0,1])},la.svg={},la.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-qa,f=s.apply(this,arguments)-qa,d=Math.abs(f-c),h=c>f?0:1;if(e>u&&(p=u,u=e,e=p),d>=Ba)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,g,v,m,y,x,b,w,_,k,A,S,z=0,M=0,C=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===jl?Math.sqrt(e*e+u*u):+o.apply(this,arguments),h||(M*=-1),u&&(M=te(v/u*Math.sin(m))),e&&(z=te(v/e*Math.sin(m)))),u){y=u*Math.cos(c+M),x=u*Math.sin(c+M),b=u*Math.cos(f-M),w=u*Math.sin(f-M);var T=Math.abs(f-c-2*M)<=Ra?0:1;if(M&&yo(y,x,b,w)===h^T){var E=(c+f)/2;y=u*Math.cos(E),x=u*Math.sin(E),b=w=null}}else y=x=0;if(e){_=e*Math.cos(f-z),k=e*Math.sin(f-z),A=e*Math.cos(c+z),S=e*Math.sin(c+z);var j=Math.abs(c-f+2*z)<=Ra?0:1;if(z&&yo(_,k,A,S)===1-h^j){var D=(c+f)/2;_=e*Math.cos(D),k=e*Math.sin(D),A=S=null}}else _=k=0;if(d>Fa&&(p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){g=u>e^h?0:1;var O=p,N=p;if(Ra>d){var P=null==A?[_,k]:null==b?[y,x]:Nn([y,x],[A,S],[b,w],[_,k]),F=y-P[0],I=x-P[1],R=b-P[0],L=w-P[1],B=1/Math.sin(Math.acos((F*R+I*L)/(Math.sqrt(F*F+I*I)*Math.sqrt(R*R+L*L)))/2),q=Math.sqrt(P[0]*P[0]+P[1]*P[1]);N=Math.min(p,(e-q)/(B-1)),O=Math.min(p,(u-q)/(B+1))}if(null!=b){var U=xo(null==A?[_,k]:[A,S],[y,x],u,O,h),V=xo([b,w],[_,k],u,O,h);p===O?C.push("M",U[0],"A",O,",",O," 0 0,",g," ",U[1],"A",u,",",u," 0 ",1-h^yo(U[1][0],U[1][1],V[1][0],V[1][1]),",",h," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):C.push("M",U[0],"A",O,",",O," 0 1,",g," ",V[0])}else C.push("M",y,",",x);if(null!=A){var $=xo([y,x],[A,S],e,-N,h),H=xo([_,k],null==b?[y,x]:[b,w],e,-N,h);p===N?C.push("L",H[0],"A",N,",",N," 0 0,",g," ",H[1],"A",e,",",e," 0 ",h^yo(H[1][0],H[1][1],$[1][0],$[1][1]),",",1-h," ",$[1],"A",N,",",N," 0 0,",g," ",$[0]):C.push("L",H[0],"A",N,",",N," 0 0,",g," ",$[0])}else C.push("L",_,",",k)}else C.push("M",y,",",x),null!=b&&C.push("A",u,",",u," 0 ",T,",",h," ",b,",",w),C.push("L",_,",",k),null!=A&&C.push("A",e,",",e," 0 ",j,",",1-h," ",A,",",S);return C.push("Z"),C.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=ho,r=po,i=fo,o=jl,a=go,s=vo,l=mo;return e.innerRadius=function(t){return arguments.length?(n=ze(t),e):n},e.outerRadius=function(t){return arguments.length?(r=ze(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=ze(t),e):i},e.padRadius=function(t){return arguments.length?(o=t==jl?jl:ze(t),e):o},e.startAngle=function(t){return arguments.length?(a=ze(t),e):a},e.endAngle=function(t){return arguments.length?(s=ze(t),e):s},e.padAngle=function(t){return arguments.length?(l=ze(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-qa;return[Math.cos(t)*e,Math.sin(t)*e]},e};var jl="auto";la.svg.line=function(){return bo(y)};var Dl=la.map({linear:wo,"linear-closed":_o,step:ko,"step-before":Ao,"step-after":So,basis:jo,"basis-open":Do,"basis-closed":Oo,bundle:No,cardinal:Co,"cardinal-open":zo,"cardinal-closed":Mo,monotone:Bo});Dl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ol=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];la.svg.line.radial=function(){var e=bo(qo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ao.reverse=So,So.reverse=Ao,la.svg.area=function(){return Uo(y)},la.svg.area.radial=function(){var e=Uo(qo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},la.svg.chord=function(){function e(e,s){var l=t(this,o,e,s),u=t(this,a,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),o=s.call(e,i,r),a=l.call(e,i,r)-qa,c=u.call(e,i,r)-qa;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ra)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var o=xn,a=bn,s=Vo,l=go,u=vo;return e.radius=function(t){return arguments.length?(s=ze(t),e):s},e.source=function(t){return arguments.length?(o=ze(t),e):o},e.target=function(t){return arguments.length?(a=ze(t),e):a},e.startAngle=function(t){return arguments.length?(l=ze(t),e):l},e.endAngle=function(t){return arguments.length?(u=ze(t),e):u},e},la.svg.diagonal=function(){function e(e,i){var o=t.call(this,e,i),a=n.call(this,e,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=xn,n=bn,r=$o;return e.source=function(n){return arguments.length?(t=ze(n),e):t},e.target=function(t){return arguments.length?(n=ze(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},la.svg.diagonal.radial=function(){var e=la.svg.diagonal(),t=$o,n=e.projection;return e.projection=function(e){return arguments.length?n(Ho(t=e)):t},e},la.svg.symbol=function(){function e(e,r){return(Fl.get(t.call(this,e,r))||Xo)(n.call(this,e,r))}var t=Wo,n=Yo;return e.type=function(n){return arguments.length?(t=ze(n),e):t},e.size=function(t){return arguments.length?(n=ze(t),e):n},e};var Fl=la.map({circle:Xo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Rl)),n=t*Rl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Il),n=t*Il/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Il),n=t*Il/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});la.svg.symbolTypes=Fl.keys();var Il=Math.sqrt(3),Rl=Math.tan(30*Ua);Ta.transition=function(e){for(var t,n,r=Ll||++Vl,i=Ko(e),o=[],a=Bl||{time:Date.now(),ease:zr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&ea(n,c,i,r,a),t.push(n)}return Go(o,i,r)},Ta.interrupt=function(e){return this.each(null==e?ql:Jo(Ko(e)))};var Ll,Bl,ql=Jo(Ko()),Ul=[],Vl=0;Ul.call=Ta.call,Ul.empty=Ta.empty,Ul.node=Ta.node,Ul.size=Ta.size,la.transition=function(e,t){return e&&e.transition?Ll?e.transition(t):e:la.selection().transition(e)},la.transition.prototype=Ul,Ul.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=C(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),ea(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return Go(a,o,i)},Ul.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=T(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&ea(i,p,s,a,o),t.push(i)}return Go(l,s,a)},Ul.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=q(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]);for(var n=this[o],s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return Go(i,this.namespace,this.id)},Ul.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):V(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Ul.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function o(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Wr:xr,s=la.ns.qualify(e);return Qo(this,"attr."+e,t,s.local?o:i)},Ul.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=la.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Ul.style=function(e,n,r){function i(){this.style.removeProperty(e)}function o(n){return null==n?i:(n+="",function(){var i,o=t(this).getComputedStyle(this,null).getPropertyValue(e);return o!==n&&(i=xr(o,n),function(t){this.style.setProperty(e,i(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Qo(this,"style."+e,n,o)},Ul.styleTween=function(e,n,r){function i(i,o){var a=n.call(this,i,o,t(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Ul.text=function(e){return Qo(this,"text",e,Zo)},Ul.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ul.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=la.ease.apply(la,arguments)),V(this,function(r){r[n][t].ease=e}))},Ul.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:V(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},Ul.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:V(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Ul.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Bl,o=Ll;try{Ll=n,V(this,function(t,i,o){Bl=t[r][n],e.call(t,t.__data__,i,o)})}finally{Bl=i,Ll=o}}else V(this,function(i){var o=i[r][n];(o.event||(o.event=la.dispatch("start","end","interrupt"))).on(e,t)});return this},Ul.transition=function(){for(var e,t,n,r,i=this.id,o=++Vl,a=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[a][i],ea(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Go(s,a,o)},la.svg.axis=function(){function e(e){e.each(function(){var e,u=la.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==t?f.tickFormat?f.tickFormat.apply(f,s):y:t,p=u.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Fa),v=la.transition(p.exit()).style("opacity",Fa).remove(),m=la.transition(p.order()).style("opacity",1),x=Math.max(i,0)+a,b=$i(f),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),la.transition(w));g.append("line"),g.append("text");var k,A,S,z,M=g.select("line"),C=m.select("line"),T=p.select("text").text(h),E=g.select("text"),j=m.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=ta,k="x",S="y",A="x2",z="y2",T.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+D*o+"V0H"+b[1]+"V"+D*o)):(e=na,k="y",S="x",A="y2",z="x2",T.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),_.attr("d","M"+D*o+","+b[0]+"H0V"+b[1]+"H"+D*o)),M.attr(z,D*i),E.attr(S,D*x),C.attr(A,0).attr(z,D*i),j.attr(k,0).attr(S,D*x),f.rangeBand){var O=f,N=O.rangeBand()/2;c=f=function(e){return O(e)+N}}else c.rangeBand?c=f:v.call(e,f,c);g.call(e,c,f),m.call(e,f,f)})}var t,n=la.scale.linear(),r=$l,i=6,o=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Hl?t+"":$l,e):r},e.ticks=function(){return arguments.length?(s=ca(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,o=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var $l="bottom",Hl={top:1,right:1,bottom:1,left:1};la.svg.brush=function(){function e(t){t.each(function(){var t=la.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Yl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,f=la.transition(t),d=la.transition(a);u&&(l=$i(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=$i(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==la.event.keyCode&&(T||(x=null,j[0]-=f[1],j[1]-=d[1],T=2),A())}function g(){32==la.event.keyCode&&2==T&&(j[0]+=f[1],j[1]+=d[1],T=0,A())}function v(){var e=la.mouse(w),t=!1;b&&(e[0]+=b[0],e[1]+=b[1]),T||(la.event.altKey?(x||(x=[(f[0]+f[1])/2,(d[0]+d[1])/2]),j[0]=f[+(e[0]<x[0])],j[1]=d[+(e[1]<x[1])]):x=null),M&&m(e,u,0)&&(r(S),t=!0),C&&m(e,c,1)&&(i(S),t=!0),t&&(n(S),k({type:"brush",mode:T?"move":"resize"}))}function m(e,t,n){var r,i,o=$i(t),l=o[0],u=o[1],c=j[n],g=n?d:f,v=g[1]-g[0];return T&&(l-=c,u-=v+c),r=(n?p:h)?Math.max(l,Math.min(u,e[n])):e[n],T?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(u,2*x[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:a=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),la.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var x,b,w=this,_=la.select(la.event.target),k=l.of(w,arguments),S=la.select(w),z=_.datum(),M=!/^(n|s)$/.test(z)&&u,C=!/^(e|w)$/.test(z)&&c,T=_.classed("extent"),E=J(w),j=la.mouse(w),D=la.select(t(w)).on("keydown.brush",o).on("keyup.brush",g);if(la.event.changedTouches?D.on("touchmove.brush",v).on("touchend.brush",y):D.on("mousemove.brush",v).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),T)j[0]=f[0]-j[0],j[1]=d[0]-j[1];else if(z){var O=+/w$/.test(z),N=+/^n/.test(z);b=[f[1-O]-j[0],d[1-N]-j[1]],j[0]=f[O],j[1]=d[N]}else la.event.altKey&&(x=j.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),la.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),v()}var a,s,l=z(e,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=Wl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:f,y:d,i:a,j:s},n=this.__chart__||t;this.__chart__=t,Ll?la.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=br(f,t.x),r=br(d,t.y);return a=s=null,function(i){f=t.x=n(i),d=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Wl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Wl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(h=!!t[0],p=!!t[1]):u?h=!!t:c&&(p=!!t),e):u&&c?[h,p]:u?h:c?p:null},e.extent=function(t){var n,r,i,o,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=t[0],o=t[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(l=i,i=o,o=l),(i!=d[0]||o!=d[1])&&(d=[i,o])),e):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=d[0],o=d[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},e.clear=function(){return e.empty()||(f=[0,0],d=[0,0],a=s=null),e},e.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},la.rebind(e,l,"on")};var Yl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xl=hs.format=xs.timeFormat,Jl=Xl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Xl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ra:Gl,ra.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ra.toString=Gl.toString,hs.second=Be(function(e){return new ps(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),hs.seconds=hs.second.range,hs.seconds.utc=hs.second.utc.range,hs.minute=Be(function(e){return new ps(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),hs.minutes=hs.minute.range,hs.minutes.utc=hs.minute.utc.range,hs.hour=Be(function(e){var t=e.getTimezoneOffset()/60;return new ps(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),hs.hours=hs.hour.range,hs.hours.utc=hs.hour.utc.range,hs.month=Be(function(e){return e=hs.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),hs.months=hs.month.range,hs.months.utc=hs.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zl=[[hs.second,1],[hs.second,5],[hs.second,15],[hs.second,30],[hs.minute,1],[hs.minute,5],[hs.minute,15],[hs.minute,30],[hs.hour,1],[hs.hour,3],[hs.hour,6],[hs.hour,12],[hs.day,1],[hs.day,2],[hs.week,1],[hs.month,1],[hs.month,3],[hs.year,1]],Kl=Xl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Tt]]),eu={range:function(e,t,n){return la.range(Math.ceil(e/n)*n,+t,n).map(oa)},floor:y,ceil:y};Zl.year=hs.year,hs.scale=function(){return ia(la.scale.linear(),Zl,Kl)};var tu=Zl.map(function(e){return[e[0].utc,e[1]]}),nu=Jl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Tt]]);tu.year=hs.year.utc,hs.scale.utc=function(){return ia(la.scale.linear(),tu,nu)},la.text=Me(function(e){return e.responseText}),la.json=function(e,t){return Ce(e,"application/json",aa,t)},la.html=function(e,t){return Ce(e,"text/html",sa,t)},la.xml=Me(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=la,define(la)):"object"==typeof module&&module.exports?module.exports=la:this.d3=la}(),!function n(e,t,r){function i(a,s){if(!t[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,n,e,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?a(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function a(e,t){if(e=g(e,0>t?0:0|v(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(t,n);return e=g(e,r),e.write(t,n),e}function l(e,t){if(o.isBuffer(t))return u(e,t);if(G(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return f(e,t);if(t instanceof ArrayBuffer)return d(e,t)}return t.length?h(e,t):p(e,t)}function u(e,t){var n=0|v(t.length);return e=g(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){return t.byteLength,o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e=f(e,new Uint8Array(t)),e}function h(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&G(t.data)&&(n=t.data,r=0|v(n.length)),e=g(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function g(e,t){o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e.length=t;var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=Q),e}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var n=new o(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return T(this,t,n);case"binary":return E(this,t,n);case"base64":return z(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){
n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function w(e,t,n,r){return W(V(t,e.length-n),e,n,r)}function _(e,t,n,r){return W($(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function A(e,t,n,r){return W(Y(t),e,n,r)}function S(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function z(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var l,u,c,f;switch(s){case 1:128>o&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(f=(31&o)<<6|63&l,f>127&&(a=f));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(f=(15&o)<<12|(63&l)<<6|63&u,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return C(r)}function C(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=U(e[o]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function P(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function I(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(e,t,n,r,i){return i||I(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||I(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function B(e){if(e=q(e).replace(K,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return X.toByteArray(B(e))}function W(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var X=e("base64-js"),J=e("ieee754"),G=e("isarray");n.Buffer=o,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Q={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),o._augment=function(e){return e.__proto__=o.prototype,e},o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);a>i&&e[i]===t[i];)++i;return i!==a&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!G(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new o(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):x.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"binary":return k(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,(void 0));for(var a=0;i>a;a++)r[a]=this[a+e]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&t>n&&r>t)for(i=a-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=V(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===d?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[f++]=e}var r,i,a,s,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new o(3*e.length/4-l),a=l>0?e.length-4:e.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===l?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===l&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,o,a,s=e.length%3,l="";for(r=0,a=e.length-s;a>r;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=n(o);switch(s){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],3:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*g}},{}],4:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],5:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":6}],6:[function(e,t,n){(function(){var e,r,i,o,a,s,l,u,c,f,d,h,p,g,v;i=Math.floor,f=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,o,a){var s;if(null==n&&(n=0),null==a&&(a=r),0>n)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);o>n;)s=i((n+o)/2),a(t,e[s])<0?o=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)},a=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,v(e,0,t)):i=n,i},u=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,v(e,0,n),i},l=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],v(e,0,n)),t},o=function(e,t){var n,o,a,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],o=0,a=s.length;a>o;o++)n=s[o],l.push(v(e,n,t));return l},p=function(e,t,n){var i;return null==n&&(n=r),i=e.indexOf(t),-1!==i?(g(e,0,i,n),v(e,i,n)):void 0},d=function(e,t,n){var i,a,s,u,c;if(null==n&&(n=r),a=e.slice(0,t),!a.length)return a;for(o(a,n),c=e.slice(t),s=0,u=c.length;u>s;s++)i=c[s],l(a,i,n);return a.sort(n).reverse()},h=function(e,t,n){var i,s,l,u,d,h,p,g,v,m;if(null==n&&(n=r),10*t<=e.length){if(u=e.slice(0,t).sort(n),!u.length)return u;for(l=u[u.length-1],g=e.slice(t),d=0,p=g.length;p>d;d++)i=g[d],n(i,l)<0&&(c(u,i,0,null,n),u.pop(),l=u[u.length-1]);return u}for(o(e,n),m=[],s=h=0,v=f(t,e.length);v>=0?v>h:h>v;s=v>=0?++h:--h)m.push(a(e,n));return m},g=function(e,t,n,i){var o,a,s;for(null==i&&(i=r),o=e[n];n>t&&(s=n-1>>1,a=e[s],i(o,a)<0);)e[n]=a,n=s;return e[n]=o},v=function(e,t,n){var i,o,a,s,l;for(null==n&&(n=r),o=e.length,l=t,a=e[t],i=2*t+1;o>i;)s=i+1,o>s&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=a,g(e,l,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=a,e.replace=u,e.pushpop=l,e.heapify=o,e.updateItem=p,e.nlargest=d,e.nsmallest=h,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return o(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],7:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i,o;for("undefined"==typeof t&&(t=15),i=.5,n=new Date;;){for(i*=2,o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;if(r=new Date,r-n>t)break}for(o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;return r=new Date,1e3*(3*i-1)/(r-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;n>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,r=1,i=r.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}function n(e){var i;if("undefined"==typeof e)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return r.push('"'+e+'"'),!1;if("boolean"==typeof e)return r.push(e.toString()),!1;if("number"==typeof e){var o=t(e),a=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),l=[o,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(i=1;i<l.length;i++)l[i].length<o.length&&(o=l[i]);return r.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===e)return r.push("null"),!1;if("function"==typeof e){r.push(e.toString());var u=!1;for(i in e)e.hasOwnProperty(i)&&(u?r.push(",\n"):r.push("\n{"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return u&&r.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return r.push("...Large Array..."),!0;var u=!1;for(r.push("["),i=0;i<e.length;i++)i>0&&(r.push(","),u&&r.push("\n ")),u=n(e[i]);return r.push("]"),!0}r.push("{");var u=!1;for(i in e)e.hasOwnProperty(i)&&(u&&r.push(",\n"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return r.push("}"),!0}var r=[];return n(e),r.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseCSV=function(e){var t,n,r=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=function(e){return e.substr(0,e.length-1)},l=0;for(n=0;n<r.length;n++){var u,c=(r[n]+",").match(o);if(c.length>0){for(i[l]=[],t=0;t<c.length;t++)u=s(c[t]),a.test(u)?i[l][t]=parseFloat(u):i[l][t]=u;l++}}return i},numeric.toCSV=function(e){var t,n,r,i,o,a,s=numeric.dim(e);for(r=s[0],i=s[1],a=[],t=0;r>t;t++){for(o=[],n=0;r>n;n++)o[n]=e[t][n].toString();a[t]=o.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,r,i,o,a,s,l,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";for(t=0;u>t;t+=3)n=e[t],r=e[t+1],i=e[t+2],o=n>>2,a=((3&n)<<4)+(r>>4),s=((15&r)<<2)+(i>>6),l=63&i,t+1>=u?s=l=64:t+2>=u&&(l=64),f+=c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return f}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1,a=0;for(e.length,r=t;n>r;r++)a=255&(o^e[r]),o=o>>>8^i[a];return-1^o}var r,i,o,a,s,l,u,c,f,d,h=e[0].length,p=e[0][0].length,g=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(g,12,29),g[29]=d>>24&255,g[30]=d>>16&255,g[31]=d>>8&255,g[32]=255&d,r=1,i=0,u=0;h>u;u++){for(h-1>u?g.push(0):g.push(1),s=3*p+1+(0===u)&255,l=3*p+1+(0===u)>>8&255,g.push(s),g.push(l),g.push(255&~s),g.push(255&~l),0===u&&g.push(0),c=0;p>c;c++)for(o=0;3>o;o++)s=e[o][u][c],s=s>255?255:0>s?0:Math.round(s),r=(r+s)%65521,i=(i+r)%65521,g.push(s);g.push(0)}return f=(i<<16)+r,g.push(f>>24&255),g.push(f>>16&255),g.push(f>>8&255),g.push(255&f),a=g.length-41,g[33]=a>>24&255,g[34]=a>>16&255,g[35]=a>>8&255,g[36]=255&a,d=n(g,37),g.push(d>>24&255),g.push(d>>16&255),g.push(d>>8&255),g.push(255&d),g.push(0),g.push(0),g.push(0),g.push(0),g.push(73),g.push(69),g.push(78),g.push(68),g.push(174),g.push(66),g.push(96),g.push(130),"data:image/png;base64,"+t(g)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if(i=t.length,i!==n.length)return!1;for(r=0;i>r;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var r,i=e[n],o=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=t,o[r]=t;return-1===r&&(o[0]=t),o}for(r=i-1;r>=0;r--)o[r]=numeric.rep(e,t,n+1);return o},numeric.dotMMsmall=function(e,t){var n,r,i,o,a,s,l,u,c,f,d;for(o=e.length,a=t.length,s=t[0].length,l=Array(o),n=o-1;n>=0;n--){for(u=Array(s),c=e[n],i=s-1;i>=0;i--){for(f=c[a-1]*t[a-1][i],r=a-2;r>=1;r-=2)d=r-1,f+=c[r]*t[r][i]+c[d]*t[d][i];0===r&&(f+=c[0]*t[0][i]),u[i]=f}l[n]=u}return l},numeric._getCol=function(e,t,n){var r,i=e.length;for(r=i-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,o,a=numeric._getCol,s=t.length,l=Array(s),u=e.length,c=t[0].length,f=new Array(u),d=numeric.dotVV;for(--s,--u,r=u;-1!==r;--r)f[r]=Array(c);for(--c,r=c;-1!==r;--r)for(a(t,r,l),i=u;-1!==i;--i)o=0,n=e[i],f[i][r]=d(n,l);return f},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),o=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=o(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,o,a,s,l;for(i=e.length,o=t[0].length,a=Array(o),r=o-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),a[r]=s}return a},numeric.dotVV=function(e,t){var n,r,i=e.length,o=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,o+=e[n]*t[n]+e[r]*t[r];return 0===n&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,o=e.length,a=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),n=t+2,r=o-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),a[t]=i}return a},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),o.push(i);return o[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function t(e,n,r,i,o){if(i===r.length-1)return void o(e,n);var a,s=r[i];for(a=s-1;a>=0;a--)t("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,r,i+1,o)},numeric._biforeach2=function n(e,t,r,i,o){if(i===r.length-1)return o(e,t);var a,s=r[i],l=Array(s);for(a=s-1;a>=0;--a)l[a]=n("object"==typeof e?e[a]:e,"object"==typeof t?t[a]:t,r,i+1,o);return l},numeric._foreach=function r(e,t,n,i){if(n===t.length-1)return void i(e);
var o,a=t[n];for(o=a-1;o>=0;o--)r(e[o],t,n+1,i)},numeric._foreach2=function i(e,t,n,r){if(n===t.length-1)return r(e);var o,a=t[n],s=Array(a);for(o=a-1;o>=0;o--)s[o]=i(e[o],t,n+1,r);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,o,a,s,e,l=numeric.dim(e),u=Math.abs,c=l[0],f=l[1],d=numeric.clone(e),h=numeric.identity(c);for(a=0;f>a;++a){var p=-1,g=-1;for(o=a;o!==c;++o)s=u(d[o][a]),s>g&&(p=o,g=s);for(n=d[p],d[p]=d[a],d[a]=n,i=h[p],h[p]=h[a],h[a]=i,e=n[a],s=a;s!==f;++s)n[s]/=e;for(s=f-1;-1!==s;--s)i[s]/=e;for(o=c-1;-1!==o;--o)if(o!==a){for(t=d[o],r=h[o],e=t[a],s=a+1;s!==f;++s)t[s]-=n[s]*e;for(s=f-1;s>0;--s)r[s]-=i[s]*e,--s,r[s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,o,a,s,l,u,c=t[0],f=1,d=numeric.clone(e);for(r=0;c-1>r;r++){for(i=r,n=r+1;c>n;n++)Math.abs(d[n][r])>Math.abs(d[i][r])&&(i=n);for(i!==r&&(l=d[i],d[i]=d[r],d[r]=l,f*=-1),o=d[r],n=r+1;c>n;n++){for(a=d[n],s=a[r]/o[r],i=r+1;c-1>i;i+=2)u=i+1,a[i]-=o[i]*s,a[u]-=o[u]*s;i!==c&&(a[i]-=o[i]*s)}if(0===o[r])return 0;f*=o[r]}return f*d[r][r]},numeric.transpose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=l[n],o[t]=i[n],o[t-1]=r[n],--n,o=l[n],o[t]=i[n],o[t-1]=r[n];0===n&&(o=l[0],o[t]=i[0],o[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=r[n],--n,l[n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=l[n],o[t]=-i[n],o[t-1]=-r[n],--n,o=l[n],o[t]=-i[n],o[t-1]=-r[n];0===n&&(o=l[0],o[t]=-i[0],o[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=-r[n],--n,l[n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function o(e,t){var n,r,i=e[t],a=Array(i);if(t===e.length-1){for(r=Math.random,n=i-1;n>=1;n-=2)a[n]=r(),a[n-1]=r();return 0===n&&(a[0]=r()),a}for(n=i-1;n>=0;n--)a[n]=o(e,t+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),2>n)return 1===n?[e]:[];var r,i=Array(n);for(n--,r=n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){function r(e,o){var a,s=t[o],l=n[o]-s,u=Array(l);if(o===i.length-1){for(a=l;a>=0;a--)u[a]=e[a+s];return u}for(a=l;a>=0;a--)u[a]=r(e[a+s],o+1);return u}var i=numeric.dim(e);return r(e,0)},numeric.setBlock=function(e,t,n,r){function i(e,r,a){var s,l=t[a],u=n[a]-l;if(a===o.length-1)for(s=u;s>=0;s--)e[s+l]=r[s];for(s=u;s>=0;s--)i(e[s+l],r[s],a+1)}var o=numeric.dim(e);return i(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,o,a,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),o=u[r],a=e[t[r]],i=l-1;-1!==i;--i)o[i]=a[n[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,o,a,s=t[0],l=t[1];for(n=0,r=0,i=0;s>i;++i)n+=e[i][0].length;for(o=0;l>o;++o)r+=e[0][o][0].length;var u=Array(n);for(i=0;n>i;++i)u[i]=Array(r);var c,f,d,h,p,g=0;for(i=0;s>i;++i){for(c=r,o=l-1;-1!==o;--o)for(a=e[i][o],c-=a[0].length,d=a.length-1;-1!==d;--d)for(p=a[d],f=u[g+d],h=p.length-1;-1!==h;--h)f[c+h]=p[h];g+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,s,l=n[0],u=r[0],c=Array(l);for(o=l-1;o>=0;o--){for(i=Array(u),s=e[o],a=u-1;a>=3;--a)i[a]=s*t[a],--a,i[a]=s*t[a],--a,i[a]=s*t[a],--a,i[a]=s*t[a];for(;a>=0;)i[a]=s*t[a],--a;c[o]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){if(numeric.indexOf,"string"!=typeof i){var o;i="";for(o in numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function a(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var a=numeric.div;return this.y?new numeric.T(a(this.x,e.x),a(this.y,e.x)):new numeric.T(a(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,o,a,s,l,u,c,f,t,n,r,d,h,p,g,v,m,y,x=e.x.length,b=numeric.identity(x),w=numeric.rep([x,x],0),_=numeric.clone(e.x),k=numeric.clone(e.y);for(t=0;x>t;t++){for(p=_[t][t],g=k[t][t],d=p*p+g*g,r=t,n=t+1;x>n;n++)p=_[n][t],g=k[n][t],h=p*p+g*g,h>d&&(r=n,d=h);for(r!==t&&(y=_[t],_[t]=_[r],_[r]=y,y=k[t],k[t]=k[r],k[r]=y,y=b[t],b[t]=b[r],b[r]=y,y=w[t],w[t]=w[r],w[r]=y),i=_[t],o=k[t],l=b[t],u=w[t],p=i[t],g=o[t],n=t+1;x>n;n++)v=i[n],m=o[n],i[n]=(v*p+m*g)/d,o[n]=(m*p-v*g)/d;for(n=0;x>n;n++)v=l[n],m=u[n],l[n]=(v*p+m*g)/d,u[n]=(m*p-v*g)/d;for(n=t+1;x>n;n++){for(a=_[n],s=k[n],c=b[n],f=w[n],p=a[t],g=s[t],r=t+1;x>r;r++)v=i[r],m=o[r],a[r]-=v*p-m*g,s[r]-=m*p+v*g;for(r=0;x>r;r++)v=l[r],m=u[r],c[r]-=v*p-m*g,f[r]-=m*p+v*g}}for(t=x-1;t>0;t--)for(l=b[t],u=w[t],n=t-1;n>=0;n--)for(c=b[n],f=w[n],p=_[n][t],g=k[n][t],r=x-1;r>=0;r--)v=l[r],m=u[r],c[r]-=p*v-g*m,f[r]-=p*m+g*v;return new numeric.T(b,w)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,o=e.length;if(r){for(;o>i;)t=e[i],n=n[t],r=r[t],i++;return new numeric.T(n,r)}for(;o>i;)t=e[i],n=n[t],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,o=0,a=e.length,s=t.x,l=t.y;if(0===a)return l?this.y=l:i&&(this.y=void 0),this.x=r,this;if(l){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);a-1>o;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=s,i[n]=l,this}if(i){for(;a-1>o;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=s,s instanceof Array?i[n]=numeric.rep(numeric.dim(s),0):i[n]=0,this}for(;a-1>o;)n=e[o],r=r[n],o++;return n=e[o],r[n]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,o=Array(i),a=this.x,s=this.y;for(n=e;t>=n;n++)o[n-e]=a[n];if(s){for(r=Array(i),n=e;t>=n;n++)r[n-e]=s[n];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,o=this.y,a=n.x,s=n.y;for(r=e;t>=r;r++)i[r]=a[r-e];if(s)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),r=e;t>=r;r++)o[r]=s[r-e];else if(o)for(r=e;t>=r;r++)o[r]=numeric.rep([a[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,o=t.y;return n[e]=i,o?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=o):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,o=numeric.setBlock,a=n.x,s=n.y;return s?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(r,e,t,a),o(i,e,t,s),this):(o(r,e,t,a),void(i&&o(i,e,t,numeric.rep(numeric.dim(a),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,o=numeric.rep;return i?new n(o(e,r),o(e,i)):new n(o(e,r))},numeric.T.diag=function s(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,s=numeric.diag;return n?new numeric.T(s(t),s(n)):new numeric.T(s(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,r=n*numeric.norm2(e);t[0]+=r;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,o,a,s,l,u,c,f,d=t[0],h=numeric.clone(e),p=numeric.identity(d);for(r=0;d-2>r;r++){for(o=Array(d-r-1),n=r+1;d>n;n++)o[n-r-1]=h[n][r];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(h,[r+1,r],[d-1,d-1]),l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(u=h[n],c=l[n-r-1],i=r;d>i;i++)u[i]-=2*c[i-r];for(s=numeric.getBlock(h,[0,r+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,a),a),n=0;d>n;n++)for(u=h[n],c=l[n],i=r+1;d>i;i++)u[i]-=2*c[i-r-1];for(s=Array(d-r-1),n=r+1;d>n;n++)s[n-r-1]=p[n];for(l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(f=p[n],c=l[n-r-1],i=0;d>i;i++)f[i]-=2*c[i]}}return{H:h,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b=(numeric.clone(e),numeric.dim(e)),w=b[0],_=numeric.identity(w);if(3>w)return{Q:_,B:[[0,w-1]]};var k=numeric.epsilon;for(x=0;t>x;x++){for(m=0;w-1>m;m++)if(Math.abs(e[m+1][m])<k*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),S=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[w-1,w-1]),t);for(h=Array(m+1),v=0;m>=v;v++)h[v]=_[v];for(p=numeric.dot(A.Q,h),v=0;m>=v;v++)_[v]=p[v];for(h=Array(w-m-1),v=m+1;w>v;v++)h[v-m-1]=_[v];for(p=numeric.dot(S.Q,h),v=m+1;w>v;v++)_[v]=p[v-m-1];return{Q:_,B:A.B.concat(numeric.add(S.B,m+1))}}if(i=e[w-2][w-2],o=e[w-2][w-1],a=e[w-1][w-2],s=e[w-1][w-1],u=i+s,l=i*s-o*a,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l){var z,M;z=.5*(u+Math.sqrt(u*u-4*l)),M=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+M)),numeric.diag(numeric.rep([3],z*M)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),h=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;3>v;v++)for(d=e[v],g=p[v],y=0;w>y;y++)d[y]-=2*g[y];for(h=numeric.getBlock(e,[0,0],[w-1,2]),p=numeric.tensor(numeric.dot(h,r),r),v=0;w>v;v++)for(d=e[v],g=p[v],y=0;3>y;y++)d[y]-=2*g[y];for(h=[_[0],_[1],_[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;3>v;v++)for(f=_[v],g=p[v],y=0;w>y;y++)f[y]-=2*g[y];var C;for(m=0;w-2>m;m++){for(y=m;m+1>=y;y++)if(Math.abs(e[y+1][y])<k*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),S=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[w-1,w-1]),t);for(h=Array(y+1),v=0;y>=v;v++)h[v]=_[v];for(p=numeric.dot(A.Q,h),v=0;y>=v;v++)_[v]=p[v];for(h=Array(w-y-1),v=y+1;w>v;v++)h[v-y-1]=_[v];for(p=numeric.dot(S.Q,h),v=y+1;w>v;v++)_[v]=p[v-y-1];return{Q:_,B:A.B.concat(numeric.add(S.B,y+1))}}for(C=Math.min(w-1,m+3),n=Array(C-m),v=m+1;C>=v;v++)n[v-m-1]=e[v][m];for(r=numeric.house(n),h=numeric.getBlock(e,[m+1,m],[C,w-1]),p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;C>=v;v++)for(d=e[v],g=p[v-m-1],y=m;w>y;y++)d[y]-=2*g[y-m];for(h=numeric.getBlock(e,[0,m+1],[w-1,C]),p=numeric.tensor(numeric.dot(h,r),r),v=0;w>v;v++)for(d=e[v],g=p[v],y=m+1;C>=y;y++)d[y]-=2*g[y-m-1];for(h=Array(C-m),v=m+1;C>=v;v++)h[v-m-1]=_[v];for(p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;C>=v;v++)for(f=_[v],g=p[v-m-1],y=0;w>y;y++)f[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(x.H,t),w=numeric.T,_=e.length,k=b.B,A=numeric.dot(b.Q,numeric.dot(x.H,numeric.transpose(b.Q))),S=new w(numeric.dot(b.Q,x.Q)),z=k.length,M=Math.sqrt;for(r=0;z>r;r++)if(n=k[r][0],n===k[r][1]);else{if(o=n+1,a=A[n][n],s=A[n][o],l=A[o][n],u=A[o][o],0===s&&0===l)continue;c=-a-u,f=a*u-s*l,d=c*c-4*f,d>=0?(h=0>c?-.5*(c-M(d)):-.5*(c+M(d)),m=(a-h)*(a-h)+s*s,y=l*l+(u-h)*(u-h),m>y?(m=M(m),g=(a-h)/m,v=s/m):(y=M(y),g=l/y,v=(u-h)/y),i=new w([[v,-g],[g,v]]),S.setRows(n,o,i.dot(S.getRows(n,o)))):(h=-.5*c,p=.5*M(-d),m=(a-h)*(a-h)+s*s,y=l*l+(u-h)*(u-h),m>y?(m=M(m+p*p),g=(a-h)/m,v=s/m,h=0,p/=m):(y=M(y+p*p),g=l/y,v=(u-h)/y,h=p/y,p=0),i=new w([[v,-g],[g,v]],[[h,p],[p,-h]]),S.setRows(n,o,i.dot(S.getRows(n,o))))}var C=S.dot(e).dot(S.transjugate()),_=e.length,T=numeric.T.identity(_);for(o=0;_>o;o++)if(o>0)for(r=o-1;r>=0;r--){var E=C.get([r,r]),j=C.get([o,o]);numeric.neq(E.x,j.x)||numeric.neq(E.y,j.y)?(h=C.getRow(r).getBlock([r],[o-1]),p=T.getRow(o).getBlock([r],[o-1]),T.set([o,r],C.get([r,o]).neg().sub(h.dot(p)).div(E.sub(j)))):T.setRow(o,T.getRow(r))}for(o=0;_>o;o++)h=T.getRow(o),T.setRow(o,h.div(h.norm2()));return T=T.transpose(),T=S.transjugate().dot(T),{lambda:C.getDiag(),E:T}},numeric.ccsSparse=function(e){var t,n,r,i,o=e.length,a=[];for(r=o-1;-1!==r;--r){n=e[r];for(i in n){for(i=parseInt(i);i>=a.length;)a[a.length]=0;0!==n[i]&&a[i]++}}var t=a.length,s=Array(t+1);for(s[0]=0,r=0;t>r;++r)s[r+1]=s[r]+a[r];var l=Array(s[t]),u=Array(s[t]);for(r=o-1;-1!==r;--r){n=e[r];for(i in n)0!==n[i]&&(a[i]--,l[s[i]+a[i]]=r,u[s[i]+a[i]]=n[i])}return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,i,o=e[0],a=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],f=numeric.rep([u,c],0);for(t=0;c>t;t++)for(r=o[t],i=o[t+1],n=r;i>n;++n)f[a[n]][t]=s[n];return f},numeric.ccsTSolve=function(e,t,n,r,i){function o(e){var t;if(0===n[e]){for(n[e]=1,t=a[e];t<a[e+1];++t)o(s[t]);i[f]=e,++f}}var a=e[0],s=e[1],l=e[2],u=a.length-1,c=Math.max,f=0;"undefined"==typeof r&&(n=numeric.rep([u],0)),"undefined"==typeof r&&(r=numeric.linspace(0,n.length-1)),"undefined"==typeof i&&(i=[]);var d,h,p,g,v,m,y;for(d=r.length-1;-1!==d;--d)o(r[d]);for(i.length=f,d=i.length-1;-1!==d;--d)n[i[d]]=0;for(d=r.length-1;-1!==d;--d)h=r[d],n[h]=t[h];for(d=i.length-1;-1!==d;--d){for(h=i[d],p=a[h],g=c(a[h+1],p),v=p;v!==g;++v)if(s[v]===h){n[h]/=l[v];break}for(y=n[h],v=p;v!==g;++v)m=s[v],m!==h&&(n[m]-=y*l[v])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,o){var a,s,l,u=0,c=i.length,f=this.k,d=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,f[0]=s=t[e],d[0]=l=t[e+1];;)if(s>=l){if(i[c]=h[u],0===u)return;++c,--u,s=f[u],l=d[u]}else a=o[n[s]],0===r[a]?(r[a]=1,f[u]=s,++u,h[u]=a,s=t[a],d[u]=l=t[a+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,o,a){var s,l,u,c,f,d,h,p,g,v=e[0],m=e[1],y=e[2],x=(v.length-1,t[0]),b=t[1],w=t[2];for(l=x[i],u=x[i+1],r.length=0,s=l;u>s;++s)a.dfs(o[b[s]],v,m,n,r,o);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)c=o[b[s]],n[c]=w[s];for(s=r.length-1;-1!==s;--s){for(c=r[s],f=v[c],d=v[c+1],h=f;d>h;++h)if(o[m[h]]===c){n[c]/=y[h];break}for(g=n[c],h=f;d>h;++h)p=o[m[h]],p!==c&&(n[p]-=g*y[h])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,A),o=-1,a=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[i]),s>o&&(a=i,o=s));for(w(y[n])<t*o&&(r=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=r,k[r]=a,o=y[n],y[n]=y[a],y[a]=o),o=d[n],a=g[n],l=y[n],h[o]=_[n],p[o]=1,++o,r=x.length-1;-1!==r;--r)i=x[r],s=y[i],x[r]=0,y[i]=0,n>=i?(v[a]=i,m[a]=s,++a):(h[o]=_[i],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(r=h.length-1;-1!==r;--r)h[r]=k[h[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,o,a){var s,l,u,c=0,f=i.length,d=this.k,h=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,d[0]=l=t[o[e]],h[0]=u=t[o[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(i[f]=o[p[c]],0===c)return;++f,--c,l=d[c],u=h[c]}else s=n[l],0===r[s]?(r[s]=1,d[c]=l,++c,p[c]=s,s=o[s],l=t[s],h[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,i,o,a,s){var l,u,c,f,d,h,p,g,v,m=e[0],y=e[1],x=e[2],b=(m.length-1,t[0]),w=t[1],_=t[2];for(u=b[i],c=b[i+1],r.length=0,l=u;c>l;++l)s.dfs(w[l],m,y,n,r,o,a);for(l=r.length-1;-1!==l;--l)f=r[l],n[a[f]]=0;for(l=u;l!==c;++l)f=w[l],n[f]=_[l];for(l=r.length-1;-1!==l;--l){for(f=r[l],g=a[f],d=m[f],h=m[f+1],p=d;h>p;++p)if(y[p]===g){n[g]/=x[p];break}for(v=n[g],p=d;h>p;++p)n[y[p]]-=v*x[p];n[g]=v}},numeric.ccsLUP0=function(e,t){var n,r,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,_,A),o=-1,a=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[_[i]]),s>o&&(a=i,o=s));for(w(y[_[n]])<t*o&&(r=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=r,k[r]=a),o=d[n],a=g[n],l=y[_[n]],h[o]=_[n],p[o]=1,++o,r=x.length-1;-1!==r;--r)i=x[r],s=y[_[i]],x[r]=0,y[_[i]]=0,n>=i?(v[a]=i,m[a]=s,++a):(h[o]=_[i],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(r=h.length-1;-1!==r;--r)h[r]=k[h[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],o=r[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var a,s,l,u,c,f=t.length,d=n.length,h=numeric.rep([o],0),p=[],g=[],v=[h,p,g],m=e[0],y=e[1],x=e[2],b=numeric.rep([i],0),w=0,_=numeric.rep([i],0);for(s=0;d>s;++s){u=n[s];var k=m[u],A=m[u+1];for(a=k;A>a;++a)l=y[a],_[l]=1,b[l]=x[a];for(a=0;f>a;++a)c=t[a],_[c]&&(p[w]=a,g[w]=b[t[a]],++w);for(a=k;A>a;++a)l=y[a],_[l]=0;h[s+1]=w}return v},numeric.ccsDot=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h=e[0],p=e[1],g=e[2],v=t[0],m=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),w=x[0],_=(x[1],b[1]),k=numeric.rep([w],0),A=numeric.rep([w],0),S=Array(w),z=numeric.rep([_],0),M=[],C=[],T=[z,M,C];for(i=0;i!==_;++i){for(o=v[i],a=v[i+1],c=0,r=o;a>r;++r)for(f=m[r],d=y[r],s=h[f],l=h[f+1],n=s;l>n;++n)u=p[n],0===A[u]&&(S[c]=u,A[u]=1,c+=1),k[u]=k[u]+g[n]*d;for(o=z[i],a=o+c,z[i+1]=a,r=c-1;-1!==r;--r)d=o+r,n=S[r],M[d]=n,C[d]=k[n],A[n]=0,k[n]=0;z[i+1]=z[i]+c}return T},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),o=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],o=!0);var a,s,l,u,c,f,d=t[1],h=t[2],p=n[0].length-1,g=i.length-1,v=numeric.rep([p],0),m=Array(p),y=numeric.rep([p],0),x=Array(p),b=numeric.rep([g+1],0),w=[],_=[],k=numeric.ccsTSolve,A=0;for(a=0;g>a;++a){for(c=0,l=i[a],u=i[a+1],s=l;u>s;++s)f=e.Pinv[d[s]],x[c]=f,y[f]=h[s],++c;for(x.length=c,k(n,y,v,x,m),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(k(r,v,y,m,x),o)return y;for(s=m.length-1;-1!==s;--s)v[m[s]]=0;for(s=x.length-1;-1!==s;--s)f=x[s],w[A]=f,_[A]=y[f],y[f]=0,++A;b[a+1]=A}return[b,w,_]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],o=numeric.sup(r)+1,a=n.length,s=numeric.rep([o],0),l=Array(a),u=Array(a),c=numeric.rep([o],0);for(t=0;a>t;++t)c[r[t]]++;for(t=0;o>t;++t)s[t+1]=s[t]+c[t];var f,d,h=s.slice(0);for(t=0;a>t;++t)d=r[t],f=h[d],l[f]=n[t],u[f]=i[t],h[d]=h[d]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,i,o,a=e[0],s=e[1],l=e[2],u=a.length-1,c=s.length,f=Array(c),d=Array(c),h=Array(c);for(o=0,t=0;u>t;++t)for(r=a[t],i=a[t+1],n=r;n!==i;++n)d[o]=t,f[o]=s[n],h[o]=l[n],++o;return[f,d,h]},numeric.sdim=function l(e,t,n){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof n&&(n=0),n in t||(t[n]=0),e.length>t[n]&&(t[n]=e.length);var r;for(r in e)e.hasOwnProperty(r)&&l(e[r],t,n+1);return t},numeric.sclone=function u(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=numeric.sdim(e).length);var r,i=Array(e.length);if(t===n-1){for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}for(r in e)e.hasOwnProperty(r)&&(i[r]=u(e[r],t+1,n));return i},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){r=e[t];for(n in r)r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,o,a,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),f=c.length,d=Array(u);for(i=u-1;i>=0;i--){for(l=[],n=e[i],a=f-1;a>=0;a--){s=0,r=c[a];for(o in n)n.hasOwnProperty(o)&&o in r&&(s+=n[o]*r[o]);s&&(l[a]=s)}d[i]=l}return d},numeric.sdotMV=function(e,t){var n,r,i,o,a=e.length,s=Array(a);for(r=a-1;r>=0;r--){n=e[r],o=0;for(i in n)n.hasOwnProperty(i)&&t[i]&&(o+=n[i]*t[i]);o&&(s[r]=o)}return s},numeric.sdotVM=function(e,t){var n,r,i,o,a=[];for(n in e)if(e.hasOwnProperty(n)){i=t[n],o=e[n];for(r in i)i.hasOwnProperty(r)&&(a[r]||(a[r]=0),a[r]+=o*i[r])}return a},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length,i=1e3*n+r;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,o=e[0].length,a=e.length,s=[];for(n=o-1;n>=0;--n)if(e[a-1][n]){for(i=s,r=0;a-2>r;r++)t=e[r][n],i[t]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function c(e,t,n){"undefined"==typeof t&&(t=[]),"undefined"==typeof n&&(n=[]);var r,i,o;r=n.length;for(i in e)if(e.hasOwnProperty(i))if(n[r]=parseInt(i),o=e[i],"number"==typeof o){if(o){if(0===t.length)for(i=r+1;i>=0;--i)t[i]=[];for(i=r;i>=0;--i)t[i].push(n[i]);t[r+1].push(o)}}else c(o,t,n);return n.length>r&&n.pop(),t},numeric.cLU=function(e){var t,n,r,i,o,a,s=e[0],l=e[1],u=e[2],c=s.length,f=0;for(t=0;c>t;t++)s[t]>f&&(f=s[t]);f++;var d,h,p,g=Array(f),v=Array(f),m=numeric.rep([f],1/0),y=numeric.rep([f],-(1/0));for(r=0;c>r;r++)t=s[r],n=l[r],n<m[t]&&(m[t]=n),n>y[t]&&(y[t]=n);for(t=0;f-1>t;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=f-1;t>=1;t--)m[t]<m[t-1]&&(m[t-1]=m[t]);var x=0,b=0;for(t=0;f>t;t++)v[t]=numeric.rep([y[t]-m[t]+1],0),g[t]=numeric.rep([t-m[t]],0),x+=t-m[t]+1,b+=y[t]-t+1;for(r=0;c>r;r++)t=s[r],v[t][l[r]-m[t]]=u[r];for(t=0;f-1>t;t++)for(i=t-m[t],d=v[t],n=t+1;m[n]<=t&&f>n;n++)if(o=t-m[n],a=y[t]-t,h=v[n],p=h[o]/d[i]){for(r=1;a>=r;r++)h[r+o]-=p*d[r+i];
g[n][t-m[n]]=p}var c,w,_,d=[],h=[],k=[],A=[],S=[],z=[];for(c=0,w=0,t=0;f>t;t++){for(i=m[t],o=y[t],_=v[t],n=t;o>=n;n++)_[n-i]&&(d[c]=t,h[c]=n,k[c]=_[n-i],c++);for(_=g[t],n=i;t>n;n++)_[n-i]&&(A[w]=t,S[w]=n,z[w]=_[n-i],w++);A[w]=t,S[w]=t,z[w]=1,w++}return{U:[d,h,k],L:[A,S,z]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,o=e.U,a=numeric.clone(t),s=i[0],l=i[1],u=i[2],c=o[0],f=o[1],d=o[2],h=c.length,p=(s.length,a.length);for(r=0,n=0;p>n;n++){for(;l[r]<n;)a[n]-=u[r]*a[l[r]],r++;r++}for(r=h-1,n=p-1;n>=0;n--){for(;f[r]>n;)a[n]-=d[r]*a[f[r]],r--;a[n]/=d[r],r--}return a},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,o=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(o[n][r]=i,i++);return o},numeric.cdelsq=function(e){var t,n,r,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],f=[],d=[];for(t=1;l-1>t;t++)for(n=1;u-1>n;n++)if(!(e[t][n]<0)){for(r=0;4>r;r++)i=t+a[r][0],o=n+a[r][1],e[i][o]<0||(c.push(e[t][n]),f.push(e[i][o]),d.push(-1));c.push(e[t][n]),f.push(e[t][n]),d.push(4)}return[c,f,d]},numeric.cdotMV=function(e,t){var n,r,i,o=e[0],a=e[1],s=e[2],l=o.length;for(i=0,r=0;l>r;r++)o[r]>i&&(i=o[r]);for(i++,n=numeric.rep([i],0),r=0;l>r;r++)n[o[r]]+=s[r]*t[a[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,n,r,i,o=this.x,a=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,f=numeric.sub,d=numeric.mul;n=f(d(l[t],o[t+1]-o[t]),f(s[t+1],a[t])),r=c(d(u[t+1],o[t]-o[t+1]),f(s[t+1],a[t])),i=(e-o[t])/(o[t+1]-o[t]);var h=i*(1-i);return c(c(c(d(1-i,a[t]),d(i,s[t+1])),d(n,h*(1-i))),d(r,h*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,o=i.length,a=Math.floor;for(t=0,n=o-1;n-t>1;)r=a((t+n)/2),i[r]<=e?t=r:n=r;return this._at(e,t)}var s,o=e.length,l=Array(o);for(s=o-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,o=this.yr,a=this.kl,s=this.kr,l=i.length,u=a,c=s,f=Array(l),d=Array(l),h=numeric.add,p=numeric.mul,g=numeric.div,v=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=v(o[e+1],i[e]),f[e]=g(h(p(n,6),p(a[e],-4*t),p(s[e+1],-2*t)),t*t),d[e+1]=g(h(p(n,-6),p(a[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,f,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],o=[o],a=[a]);var s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j=r.length,D=n.length-1,t=Array(j),O=Math.sqrt;for(s=0;s!==j;++s){for(c=r[s],f=i[s],d=o[s],h=a[s],p=[],l=0;l!==D;l++){for(l>0&&f[l]*c[l]<0&&p.push(n[l]),_=n[l+1]-n[l],k=n[l],m=c[l],y=f[l+1],g=d[l]/_,v=h[l+1]/_,w=e(g-v+3*(m-y))+12*v*m,x=v+3*m+2*g-3*y,b=3*(v+g+2*(m-y)),0>=w?(S=x/b,A=S>n[l]&&S<n[l+1]?[n[l],S,n[l+1]]:[n[l],n[l+1]]):(S=(x-O(w))/b,z=(x+O(w))/b,A=[n[l]],S>n[l]&&S<n[l+1]&&A.push(S),z>n[l]&&z<n[l+1]&&A.push(z),A.push(n[l+1])),C=A[0],S=this._at(C,l),u=0;u<A.length-1;u++)if(T=A[u+1],z=this._at(T,l),0!==S)if(0===z||S*z>0)C=T,S=z;else{for(var N=0;E=(S*T-z*C)/(S-z),!(C>=E||E>=T);)if(M=this._at(E,l),M*z>0)T=E,z=M,-1===N&&(S*=.5),N=-1;else{if(!(M*S>0))break;C=E,S=M,1===N&&(z*=.5),N=1}p.push(E),C=A[u+1],S=this._at(C,l)}else p.push(C),C=T,S=z;0===z&&p.push(T)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,o=e.length,a=[],s=[],l=[],u=numeric.sub,c=numeric.mul,f=numeric.add;for(i=o-2;i>=0;i--)s[i]=e[i+1]-e[i],l[i]=u(t[i+1],t[i]);("string"==typeof n||"string"==typeof r)&&(n=r="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":a[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":a[0]=f(c(3/(s[o-2]*s[o-2]),l[o-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(o-2,0,1),d[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(i=1;o-1>i;i++)a[i]=f(c(3/(s[i-1]*s[i-1]),l[i-1]),c(3/(s[i]*s[i]),l[i])),d[0].push(i,i,i),d[1].push(i-1,i,i+1),d[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":a[o-1]=c(3/(s[o-2]*s[o-2]),l[o-2]),d[0].push(o-1,o-1),d[1].push(o-2,o-1),d[2].push(1/s[o-2],2/s[o-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[o-1]=r,d[0].push(o-1),d[1].push(o-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var h=Array(a.length);if("string"==typeof n)for(i=h.length-1;-1!==i;--i)h[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[i]),h[i][o-1]=h[i][0];else for(i=h.length-1;-1!==i;--i)h[i]=numeric.cLUsolve(numeric.cLU(d),a[i]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function f(e,t){var n=e.length;if(1!==n){var r,i,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];f(s,l),f(u,c),i=n/2;var d,h,p,g=-6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),d=g*r,h=o(d),p=a(d),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric._ifftpow2=function d(e,t){var n=e.length;if(1!==n){var r,i,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];d(s,l),d(u,c),i=n/2;var f,h,p,g=6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),f=g*r,h=o(f),p=a(f),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){numeric.fftpow2(e,t),numeric.fftpow2(n,r);var i,o,a,s,l,u=e.length;for(i=u-1;-1!==i;--i)o=e[i],s=t[i],a=n[i],l=r[i],e[i]=o*a-s*l,t[i]=o*l+s*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=-3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=i,v.y.length=i,v},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=i,v.y.length=i,v.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,o,a,s,l,u,c,f,d,h,p=Math.max,g=numeric.clone(t),v=Array(n),p=(numeric.div,numeric.sub,Math.max),m=.001,y=Math.abs,x=Math.min,b=0;for(i=0;n>i;i++)for(var w=p(1e-6*r,1e-8);;){if(++b,b>20)throw new Error("Numerical gradient fails");if(g[i]=t[i]+w,o=e(g),g[i]=t[i]-w,a=e(g),g[i]=t[i],isNaN(o)||isNaN(a))w/=16;else{if(v[i]=(o-a)/(2*w),l=t[i]-w,u=t[i],c=t[i]+w,f=(o-r)/w,d=(r-a)/w,h=p(y(v[i]),y(r),y(o),y(a),y(l),y(u),y(c),1e-8),s=x(p(y(f-v[i]),y(d-v[i]),y(f-d))/h,w/h),!(s>m))break;w/=16}}return v},numeric.uncmin=function(e,t,n,r,i,o,a){var s=numeric.gradient;"undefined"==typeof a&&(a={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof r&&(r=function(t){return s(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var l,u,c=t.length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,h=numeric.norm2;n=d(n,numeric.epsilon);var p,g,v,m,y,x,b,w,_,k,A=a.Hinv||numeric.identity(c),S=numeric.dot,z=(numeric.inv,numeric.sub),M=numeric.add,C=numeric.tensor,T=numeric.div,E=numeric.mul,j=numeric.all,D=numeric.isFinite,O=numeric.neg,N=0,P="";for(g=r(t);i>N;){if("function"==typeof o&&o(N,t,f,g,A)){P="Callback returned true";break}if(!j(D(g))){P="Gradient has Infinity or NaN";break}if(p=O(S(A,g)),!j(D(p))){P="Search direction has Infinity or NaN";break}if(k=h(p),n>k){P="Newton step smaller than tol";break}for(_=1,u=S(g,p),y=t;i>N&&!(n>_*k)&&(m=E(p,_),y=M(t,m),l=e(y),l-f>=.1*_*u||isNaN(l));)_*=.5,++N;if(n>_*k){P="Line search step size smaller than tol";break}if(N===i){P="maxit reached during line search";break}v=r(y),x=z(v,g),w=S(x,m),b=S(A,x),A=z(M(A,E((w+S(x,b))/(w*w),C(m,m))),T(M(C(b,m),C(m,b)),w)),t=y,f=l,g=v,++N}return{solution:t,f:f,gradient:g,invHessian:A,iterations:N,message:P}},numeric.Dopri=function(e,t,n,r,i,o,a){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,o,a,s,l,e,u,c,f,d,h=this,p=h.x,g=h.y,v=h.f,m=h.ymid,y=(p.length,Math.floor,.5),x=numeric.add,b=numeric.mul,w=numeric.sub;return r=p[t],i=p[t+1],a=g[t],s=g[t+1],u=i-r,o=r+y*u,l=m[t],c=w(v[t],b(a,1/(r-o)+2/(r-i))),f=w(v[t+1],b(s,1/(i-o)+2/(i-r))),d=[n(e-i)*(e-o)/n(r-i)/(r-o),n(e-r)*n(e-i)/n(r-o)/n(i-o),n(e-r)*(e-o)/n(i-r)/(i-o),(e-r)*n(e-i)*(e-o)/n(r-i)/(r-o),(e-i)*n(e-r)*(e-o)/n(r-i)/(i-o)],x(x(x(x(b(a,d[0]),b(l,d[1])),b(s,d[2])),b(c,d[3])),b(f,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var o=e.length,a=Array(o);for(t=o-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var s=this.x;for(t=0,n=s.length-1;n-t>1;)r=i(.5*(t+n)),s[r]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,o,a){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof o&&(o=1e3);var s,l,u,c,f,d,h,p,g,v,m,y,x,b=[e],w=[n],_=[r(e,n)],k=[],A=.2,S=[.075,.225],z=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],C=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],T=[35/384,0,500/1113,125/192,-2187/6784,11/84],E=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],j=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],O=0,N=(t-e)/10,P=0,F=numeric.add,I=numeric.mul,R=(Math.max,Math.min),L=Math.abs,B=numeric.norminf,q=Math.pow,U=numeric.any,V=numeric.lt,$=numeric.and,H=(numeric.sub,new numeric.Dopri(b,w,_,k,(-1),""));for("function"==typeof a&&(m=a(e,n));t>e&&o>P;)if(++P,e+N>t&&(N=t-e),s=r(e+j[0]*N,F(n,I(A*N,_[O]))),l=r(e+j[1]*N,F(F(n,I(S[0]*N,_[O])),I(S[1]*N,s))),u=r(e+j[2]*N,F(F(F(n,I(z[0]*N,_[O])),I(z[1]*N,s)),I(z[2]*N,l))),c=r(e+j[3]*N,F(F(F(F(n,I(M[0]*N,_[O])),I(M[1]*N,s)),I(M[2]*N,l)),I(M[3]*N,u))),f=r(e+j[4]*N,F(F(F(F(F(n,I(C[0]*N,_[O])),I(C[1]*N,s)),I(C[2]*N,l)),I(C[3]*N,u)),I(C[4]*N,c))),g=F(F(F(F(F(n,I(_[O],N*T[0])),I(l,N*T[2])),I(u,N*T[3])),I(c,N*T[4])),I(f,N*T[5])),d=r(e+N,g),h=F(F(F(F(F(I(_[O],N*D[0]),I(l,N*D[2])),I(u,N*D[3])),I(c,N*D[4])),I(f,N*D[5])),I(d,N*D[6])),v="number"==typeof h?L(h):B(h),v>i){if(N=.2*N*q(i/v,.25),e+N===e){H.msg="Step size became too small";break}}else{if(k[O]=F(F(F(F(F(F(n,I(_[O],N*E[0])),I(l,N*E[2])),I(u,N*E[3])),I(c,N*E[4])),I(f,N*E[5])),I(d,N*E[6])),++O,b[O]=e+N,w[O]=g,_[O]=d,"function"==typeof a){var Y,W,X=e,J=e+.5*N;if(y=a(J,k[O-1]),x=$(V(m,0),V(0,y)),U(x)||(X=J,J=e+N,m=y,y=a(J,g),x=$(V(m,0),V(0,y))),U(x)){for(var G,Q,Z=0,K=1,ee=1;;){if("number"==typeof m)W=(ee*y*X-K*m*J)/(ee*y-K*m);else for(W=J,p=m.length-1;-1!==p;--p)m[p]<0&&y[p]>0&&(W=R(W,(ee*y[p]*X-K*m[p]*J)/(ee*y[p]-K*m[p])));if(X>=W||W>=J)break;Y=H._at(W,O-1),Q=a(W,Y),G=$(V(m,0),V(0,Q)),U(G)?(J=W,y=Q,x=G,ee=1,-1===Z?K*=.5:K=1,Z=-1):(X=W,m=Q,K=1,1===Z?ee*=.5:ee=1,Z=1)}return g=H._at(.5*(e+W),O-1),H.f[O]=r(W,Y),H.x[O]=W,H.y[O]=Y,H.ymid[O-1]=g,H.events=x,H.iterations=P,H}}e+=N,n=g,m=y,N=R(.8*N*q(i/v,.25),4*N)}return H.iterations=P,H},numeric.LU=function(e,t){t=t||!1;var n,r,i,o,a,s,l,u,c,f=Math.abs,d=e.length,h=d-1,p=new Array(d);for(t||(e=numeric.clone(e)),i=0;d>i;++i){for(l=i,s=e[i],c=f(s[i]),r=i+1;d>r;++r)o=f(e[r][i]),o>c&&(c=o,l=r);for(p[i]=l,l!=i&&(e[i]=e[l],e[l]=s,s=e[i]),a=s[i],n=i+1;d>n;++n)e[n][i]/=a;for(n=i+1;d>n;++n){for(u=e[n],r=i+1;h>r;++r)u[r]-=u[i]*s[r],++r,u[r]-=u[i]*s[r];r===h&&(u[r]-=u[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,o,a,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;l>n;++n)for(i=c[n],c[n]!==n&&(a=u[n],u[n]=u[i],u[i]=a),o=s[n],r=0;n>r;++r)u[n]-=u[r]*o[r];for(n=l-1;n>=0;--n){for(o=s[n],r=n+1;l>r;++r)u[n]-=u[r]*o[r];u[n]/=o[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,o,a,s,l,u=numeric.dim(e),c=u[0],f=u[1],d=numeric.identity(c),h=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;c>t;++t){for(r=0,o=e[t],a=d[t],n=1;f>n;++n)p(o[r])<p(o[n])&&(r=n);for(h[t]=r,g(a,o[r]),g(o,o[r]),n=0;c>n;++n)if(n!==t){for(s=e[n],l=s[r],i=f-1;-1!==i;--i)s[i]-=o[i]*l;for(s=d[n],i=c-1;-1!==i;--i)s[i]-=a[i]*l}}return{I:d,A:e,P:h}},numeric.__solveLP=function(e,t,n,r,i,o,a){var s,l,u,c,f=numeric.sum,d=(numeric.log,numeric.mul),h=numeric.sub,p=numeric.dot,g=numeric.div,v=numeric.add,m=e.length,y=n.length,x=!1,b=0,w=1,_=(numeric.transpose(t),numeric.svd,numeric.transpose),k=(numeric.leq,Math.sqrt),A=Math.abs,S=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,M=numeric.gt,C=Array(m),T=Array(y),E=(numeric.rep([y],1),numeric.solve),j=h(n,p(t,o)),D=p(e,e);for(u=b;i>u;++u){var O,N;for(O=y-1;-1!==O;--O)T[O]=g(t[O],j[O]);var P=_(T);for(O=m-1;-1!==O;--O)C[O]=f(P[O]);w=.25*A(D/p(e,C));var F=100*k(D/p(C,C));for((!isFinite(w)||w>F)&&(w=F),c=v(e,d(w,C)),l=p(P,T),O=m-1;-1!==O;--O)l[O][O]+=1;N=E(l,g(c,w),!0);var I=g(j,p(t,N)),R=1;for(O=y-1;-1!==O;--O)I[O]<0&&(R=S(R,-.999*I[O]));if(s=h(o,d(N,R)),j=h(n,p(t,s)),!z(M(j,0)))return{solution:o,message:"",iterations:u};if(o=s,r>w)return{solution:s,message:"",iterations:u};if(a){var L=p(e,c),B=p(t,c);for(x=!0,O=y-1;-1!==O;--O)if(L*B[O]<0){x=!1;break}}else x=!(o[m-1]>=0);if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,i){var o,a=e.length,s=n.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),f=numeric.rep([s,1],-1),d=numeric.blockMatrix([[t,f]]),h=n,o=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(c,d,h,r,i,o,!1),g=numeric.clone(p.solution);g.length=a;var v=numeric.inf(l(n,u(t,g)));if(0>v)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var m=numeric.__solveLP(e,t,n,r,i-p.iterations,g,!0);return m.iterations+=p.iterations,m},numeric.solveLP=function(e,t,n,r,i,o,a){if("undefined"==typeof a&&(a=1e3),"undefined"==typeof o&&(o=numeric.epsilon),"undefined"==typeof r)return numeric._solveLP(e,t,n,o,a);var s,l=r.length,u=r[0].length,c=t.length,f=numeric.echelonize(r),d=numeric.rep([u],0),h=f.P,p=[];for(s=h.length-1;-1!==s;--s)d[h[s]]=1;for(s=u-1;-1!==s;--s)0===d[s]&&p.push(s);var g=numeric.getRange,v=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=g(r,v,p),x=g(t,m,h),b=g(t,m,p),w=numeric.dot,_=numeric.sub,k=w(x,f.I),A=_(b,w(k,y)),S=_(n,w(k,i)),z=Array(h.length),M=Array(p.length);for(s=h.length-1;-1!==s;--s)z[s]=e[h[s]];for(s=p.length-1;-1!==s;--s)M[s]=e[p[s]];var C=_(M,w(z,w(f.I,y))),T=numeric._solveLP(C,A,S,o,a),E=T.solution;if(E!==E)return T;var j=w(f.I,_(i,w(y,E))),D=Array(e.length);for(s=h.length-1;-1!==s;--s)D[h[s]]=j[s];for(s=p.length-1;-1!==s;--s)D[p[s]]=E[s];return{solution:D,message:T.message,iterations:T.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+s[a]+"\n")}e instanceof String&&e.split("\n");var n,r,i,o,a=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=e.length,u=0,c={},f=[],d=0,h={},p=0,g=[],v=[],m=[];for(n=0;l>n;++n){i=e[n];var y=i.match(/\S*/g),x=[];for(r=0;r<y.length;++r)""!==y[r]&&x.push(y[r]);if(0!==x.length){for(r=0;r<s.length&&i.substr(0,s[r].length)!==s[r];++r);if(r<s.length){if(a=r,1===r&&(o=x[1]),6===r)return{name:o,c:g,A:numeric.transpose(v),b:m,rows:c,vars:h}}else switch(a){case 0:case 1:t("Unexpected line");case 2:switch(x[0]){case"N":0===u?u=x[1]:t("Two or more N rows");break;case"L":c[x[1]]=d,f[d]=1,m[d]=0,++d;break;case"G":c[x[1]]=d,f[d]=-1,m[d]=0,++d;break;case"E":c[x[1]]=d,f[d]=0,m[d]=0,++d;break;default:t("Parse error "+numeric.prettyPrint(x))}break;case 3:h.hasOwnProperty(x[0])||(h[x[0]]=p,g[p]=0,v[p]=numeric.rep([d],0),++p);var b=h[x[0]];for(r=1;r<x.length;r+=2)if(x[r]!==u){var w=c[x[r]];v[b][w]=(f[w]<0?-1:1)*parseFloat(x[r+1])}else g[b]=parseFloat(x[r+1]);break;case 4:for(r=1;r<x.length;r+=2)m[c[x[r]]]=(f[c[x[r]]]<0?-1:1)*parseFloat(x[r+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,o,a){function s(e){var t,r,i=this,o=e.length,a=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);n>a;)i.S[a]=a++;for(a=0;n>a;a++)t=i.S[a],s=c(s+t+e[a%o]),r=i.S[s],i.S[a]=r,i.S[s]=t;i.g=function(e){var t=i.S,r=c(i.i+1),o=t[r],a=c(i.j+o),s=t[a];t[r]=s,t[a]=o;for(var l=t[c(o+s)];--e;)r=c(r+1),o=t[r],a=c(a+o),s=t[a],t[r]=s,t[a]=o,l=l*n+t[c(o+s)];return i.i=r,i.j=a,l},i.g(n)}function l(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(l(e[r],t-1))}catch(o){}return n.length?n:e+("string"!=i?"\0":"")}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[c(r)]=c((n^=19*t[c(r)])+e.charCodeAt(r));e="";for(r in t)e+=String.fromCharCode(t[r]);return e}function c(e){return e&n-1}t.seedrandom=function(c,f){var d,h=[];return c=u(l(f?[c,e]:arguments.length?c:[(new Date).getTime(),e,window],3),h),d=new s(h),u(d.S,e),t.random=function(){for(var e=d.g(r),t=a,s=0;i>e;)e=(e+s)*n,t*=n,s=d.g(1);for(;e>=o;)e/=2,t/=2,s>>>=1;return(e+s)/t},c},a=t.pow(n,r),i=t.pow(2,i),o=2*i,u(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;i>n;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;i>t;t++)r[t-1]=n(e[t]);return r}function r(e,t,n){var r,i,o,a,s;for(o=1;n>=o;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],r=1;o>r;r+=1)e[r][o]=s*e[r][o];if(a=o+1,a>n)break;for(i=a;n>=i;i+=1)for(s=e[o][i],e[o][i]=0,r=1;o>=r;r+=1)e[r][i]=e[r][i]+s*e[r][o]}}function i(e,t,n,r){var i,o,a,s;for(o=1;n>=o;o+=1){for(s=0,i=1;o>i;i+=1)s+=e[i][o]*r[i];r[o]=(r[o]-s)/e[o][o]}for(a=1;n>=a;a+=1)for(o=n+1-a,r[o]=r[o]/e[o][o],s=-r[o],i=1;o>i;i+=1)r[i]=r[i]+s*e[i][o]}function o(e,t,n,r){var i,o,a,s,l,u;for(o=1;n>=o;o+=1){if(r[1]=o,u=0,a=o-1,1>a){if(u=e[o][o]-u,0>=u)break;e[o][o]=Math.sqrt(u)}else{for(s=1;a>=s;s+=1){for(l=e[s][o],i=1;s>i;i+=1)l-=e[i][o]*e[i][s];l/=e[s][s],e[s][o]=l,u+=l*l}if(u=e[o][o]-u,0>=u)break;e[o][o]=Math.sqrt(u)}r[1]=0}}function a(e,t,n,a,s,l,u,c,f,d,h,p,g,v,m,y){function x(){for(v[1]=v[1]+1,z=O,A=1;d>=A;A+=1){for(z+=1,L=-c[A],S=1;a>=S;S+=1)L+=u[S][A]*s[S];if(Math.abs(L)<W&&(L=0),A>h)m[z]=L;else if(m[z]=-Math.abs(L),L>0){for(S=1;a>=S;S+=1)u[S][A]=-u[S][A];c[A]=-c[A]}}for(A=1;g>=A;A+=1)m[O+p[A]]=0;for(P=0,R=0,A=1;d>=A;A+=1)m[O+A]<R*m[I+A]&&(P=A,R=m[O+A]/m[I+A]);return 0===P?999:0}function b(){for(A=1;a>=A;A+=1){for(L=0,S=1;a>=S;S+=1)L+=e[S][A]*u[S][P];m[A]=L}for(M=E,A=1;a>=A;A+=1)m[M+A]=0;for(S=g+1;a>=S;S+=1)for(A=1;a>=A;A+=1)m[M+A]=m[M+A]+e[A][S]*m[S];for(H=!0,A=g;A>=1;A-=1){for(L=m[A],z=D+A*(A+3)/2,M=z-A,S=A+1;g>=S;S+=1)L-=m[z]*m[j+S],z+=S;if(L/=m[M],m[j+A]=L,p[A]<h)break;if(0>L)break;H=!1,T=A}if(!H)for(B=m[N+T]/m[j+T],A=1;g>=A&&!(p[A]<h)&&!(m[j+A]<0);A+=1)R=m[N+A]/m[j+A],B>R&&(B=R,T=A);for(L=0,A=E+1;E+a>=A;A+=1)L+=m[A]*m[A];if(Math.abs(L)<=W){if(H)return y[1]=1,999;for(A=1;g>=A;A+=1)m[N+A]=m[N+A]-B*m[j+A];return m[N+g+1]=m[N+g+1]+B,700}for(L=0,A=1;a>=A;A+=1)L+=m[E+A]*u[A][P];for(q=-m[O+P]/L,Y=!0,H||q>B&&(q=B,Y=!1),A=1;a>=A;A+=1)s[A]=s[A]+q*m[E+A],Math.abs(s[A])<W&&(s[A]=0);for(l[1]=l[1]+q*L*(q/2+m[N+g+1]),A=1;g>=A;A+=1)m[N+A]=m[N+A]-q*m[j+A];if(m[N+g+1]=m[N+g+1]+q,!Y){for(L=-c[P],S=1;a>=S;S+=1)L+=s[S]*u[S][P];if(P>h)m[O+P]=L;else if(m[O+P]=-Math.abs(L),L>0){for(S=1;a>=S;S+=1)u[S][P]=-u[S][P];c[P]=-c[P]}return 700}for(g+=1,p[g]=P,z=D+(g-1)*g/2+1,A=1;g-1>=A;A+=1)m[z]=m[A],z+=1;if(g===a)m[z]=m[a];else{for(A=a;A>=g+1&&0!==m[A]&&(U=Math.max(Math.abs(m[A-1]),Math.abs(m[A])),V=Math.min(Math.abs(m[A-1]),Math.abs(m[A])),R=m[A-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[A-1]/R,V=m[A]/R,1!==U);A-=1)if(0===U)for(m[A-1]=V*R,S=1;a>=S;S+=1)R=e[S][A-1],e[S][A-1]=e[S][A],e[S][A]=R;else for(m[A-1]=R,$=V/(1+U),S=1;a>=S;S+=1)R=U*e[S][A-1]+V*e[S][A],e[S][A]=$*(e[S][A-1]+R)-e[S][A],e[S][A-1]=R;m[z]=m[g]}return 0}function w(){if(z=D+T*(T+1)/2+1,M=z+T,0===m[M])return 798;if(U=Math.max(Math.abs(m[M-1]),Math.abs(m[M])),V=Math.min(Math.abs(m[M-1]),Math.abs(m[M])),R=m[M-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[M-1]/R,V=m[M]/R,1===U)return 798;if(0===U){for(A=T+1;g>=A;A+=1)R=m[M-1],m[M-1]=m[M],m[M]=R,M+=A;for(A=1;a>=A;A+=1)R=e[A][T],e[A][T]=e[A][T+1],e[A][T+1]=R}else{for($=V/(1+U),A=T+1;g>=A;A+=1)R=U*m[M-1]+V*m[M],m[M]=$*(m[M-1]+R)-m[M],m[M-1]=R,M+=A;for(A=1;a>=A;A+=1)R=U*e[A][T]+V*e[A][T+1],e[A][T+1]=$*(e[A][T]+R)-e[A][T+1],e[A][T]=R}return 0}function _(){for(M=z-T,A=1;T>=A;A+=1)m[M]=m[z],z+=1,M+=1;return m[N+T]=m[N+T+1],p[T]=p[T+1],T+=1,g>T?797:0}function k(){return m[N+g]=m[N+g+1],m[N+g+1]=0,p[g]=0,g-=1,v[2]=v[2]+1,0}var A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G;F=Math.min(a,d),z=2*a+F*(F+5)/2+2*d+1,W=1e-60;do W+=W,X=1+.1*W,J=1+.2*W;while(1>=X||1>=J);for(A=1;a>=A;A+=1)m[A]=t[A];for(A=a+1;z>=A;A+=1)m[A]=0;for(A=1;d>=A;A+=1)p[A]=0;if(C=[],0===y[1]){if(o(e,n,a,C),0!==C[1])return void(y[1]=2);i(e,n,a,t),r(e,n,a)}else{for(S=1;a>=S;S+=1)for(s[S]=0,A=1;S>=A;A+=1)s[S]=s[S]+e[A][S]*t[A];for(S=1;a>=S;S+=1)for(t[S]=0,A=S;a>=A;A+=1)t[S]=t[S]+e[S][A]*s[A]}for(l[1]=0,S=1;a>=S;S+=1)for(s[S]=t[S],l[1]=l[1]+m[S]*s[S],m[S]=0,A=S+1;a>=A;A+=1)e[A][S]=0;for(l[1]=-l[1]/2,y[1]=0,E=a,j=E+a,N=j+F,D=N+F+1,O=D+F*(F+1)/2,I=O+d,A=1;d>=A;A+=1){for(L=0,S=1;a>=S;S+=1)L+=u[S][A]*u[S][A];m[I+A]=Math.sqrt(L)}for(g=0,v[1]=0,v[2]=0,G=0;;){if(G=x(),999===G)return;for(;G=b(),0!==G;){if(999===G)return;if(700===G)if(T===g)k();else{for(;w(),G=_(),797===G;);k()}}}}function s(e,r,i,o,s,l){e=t(e),r=t(r),i=t(i);var u,c,f,d,h,p,g=[],v=[],m=[],y=[],x=[];if(s=s||0,l=l?t(l):[void 0,0],o=o?t(o):[],c=e.length-1,f=i[1].length-1,!o)for(u=1;f>=u;u+=1)o[u]=0;for(u=1;f>=u;u+=1)v[u]=0;for(d=0,h=Math.min(c,f),u=1;c>=u;u+=1)m[u]=0;for(g[1]=0,u=1;2*c+h*(h+5)/2+2*f+1>=u;u+=1)y[u]=0;for(u=1;2>=u;u+=1)x[u]=0;return a(e,r,c,c,m,g,i,o,c,f,s,v,d,x,y,l),p="",1===l[1]&&(p="constraints are inconsistent, no solution!"),2===l[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:n(m),value:n(g),unconstrained_solution:n(r),iterations:n(x),iact:n(v),message:p}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,r=numeric.epsilon,i=1e-64/r,o=50,a=0,s=0,l=0,u=0,c=0,f=numeric.clone(e),d=f.length,h=f[0].length;if(h>d)throw"Need more rows than columns";var p=new Array(h),g=new Array(h);for(s=0;h>s;s++)p[s]=g[s]=0;var v=numeric.rep([h,h],0),m=0,y=0,x=0,b=0,w=0,_=0,k=0;for(s=0;h>s;s++){for(p[s]=y,k=0,c=s+1,l=s;d>l;l++)k+=f[l][s]*f[l][s];if(i>=k)y=0;else for(m=f[s][s],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s]=m-y,l=c;h>l;l++){for(k=0,u=s;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(g[s]=y,k=0,l=c;h>l;l++)k+=f[s][l]*f[s][l];if(i>=k)y=0;else{for(m=f[s][s+1],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s+1]=m-y,l=c;h>l;l++)p[l]=f[s][l]/x;for(l=c;d>l;l++){for(k=0,u=c;h>u;u++)k+=f[l][u]*f[s][u];for(u=c;h>u;u++)f[l][u]+=k*p[u]}}w=Math.abs(g[s])+Math.abs(p[s]),w>b&&(b=w)}for(s=h-1;-1!=s;s+=-1){if(0!=y){for(x=y*f[s][s+1],l=c;h>l;l++)v[l][s]=f[s][l]/x;for(l=c;h>l;l++){for(k=0,u=c;h>u;u++)k+=f[s][u]*v[u][l];for(u=c;h>u;u++)v[u][l]+=k*v[u][s]}}for(l=c;h>l;l++)v[s][l]=0,v[l][s]=0;v[s][s]=1,y=p[s],c=s}for(s=h-1;-1!=s;s+=-1){for(c=s+1,y=g[s],l=c;h>l;l++)f[s][l]=0;if(0!=y){for(x=f[s][s]*y,l=c;h>l;l++){for(k=0,u=c;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(l=s;d>l;l++)f[l][s]=f[l][s]/y}else for(l=s;d>l;l++)f[l][s]=0;f[s][s]+=1}for(r*=b,u=h-1;-1!=u;u+=-1)for(var A=0;o>A;A++){var S=!1;for(c=u;-1!=c;c+=-1){if(Math.abs(p[c])<=r){S=!0;break}if(Math.abs(g[c-1])<=r)break}if(!S){a=0,k=1;var z=c-1;for(s=c;u+1>s&&(m=k*p[s],p[s]=a*p[s],!(Math.abs(m)<=r));s++)for(y=g[s],x=t(m,y),g[s]=x,a=y/x,k=-m/x,l=0;d>l;l++)w=f[l][z],_=f[l][s],f[l][z]=w*a+_*k,f[l][s]=-w*k+_*a}if(_=g[u],c==u){if(0>_)for(g[u]=-_,l=0;h>l;l++)v[l][u]=-v[l][u];break}if(A>=o-1)throw"Error: no convergence.";for(b=g[c],w=g[u-1],y=p[u-1],x=p[u],m=((w-_)*(w+_)+(y-x)*(y+x))/(2*x*w),y=t(m,1),m=0>m?((b-_)*(b+_)+x*(w/(m-y)-x))/b:((b-_)*(b+_)+x*(w/(m+y)-x))/b,a=1,k=1,s=c+1;u+1>s;s++){for(y=p[s],w=g[s],x=k*y,y=a*y,_=t(m,x),p[s-1]=_,a=m/_,k=x/_,m=b*a+y*k,y=-b*k+y*a,x=w*k,w*=a,l=0;h>l;l++)b=v[l][s-1],_=v[l][s],v[l][s-1]=b*a+_*k,v[l][s]=-b*k+_*a;for(_=t(m,x),g[s-1]=_,a=m/_,k=x/_,m=a*y+k*w,b=-k*y+a*w,l=0;d>l;l++)w=f[l][s-1],_=f[l][s],f[l][s-1]=w*a+_*k,f[l][s]=-w*k+_*a}p[c]=0,p[u]=m,g[u]=b}for(s=0;s<g.length;s++)g[s]<r&&(g[s]=0);for(s=0;h>s;s++)for(l=s-1;l>=0;l--)if(g[l]<g[s]){for(a=g[l],g[l]=g[s],g[s]=a,u=0;u<f.length;u++)n=f[u][s],f[u][s]=f[u][l],f[u][l]=n;for(u=0;u<v.length;u++)n=v[u][s],v[u][s]=v[u][l],v[u][l]=n;s=l}return{U:f,S:g,V:v}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){!function(){"use strict";function e(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function n(e,t,n){var r=t.x,i=t.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((e.x-r)*o+(e.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=e.x-r,a=e.y-i,o*o+a*a}function r(t,n){for(var r,i=t[0],o=[i],a=1,s=t.length;s>a;a++)r=t[a],e(r,i)>n&&(o.push(r),i=r);return i!==r&&o.push(r),o}function i(e,t){var r,i,o,a,s=e.length,l="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new l(s),c=0,f=s-1,d=[],h=[];for(u[c]=u[f]=1;f;){for(i=0,r=c+1;f>r;r++)o=n(e[r],e[c],e[f]),o>i&&(a=r,i=o);i>t&&(u[a]=1,d.push(c,a,a,f)),f=d.pop(),c=d.pop()}for(r=0;s>r;r++)u[r]&&h.push(e[r]);return h}function o(e,t,n){var o=void 0!==t?t*t:1;return e=n?e:r(e,o),e=i(e,o)}"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof t?t.exports=o:"undefined"!=typeof self?self.simplify=o:window.simplify=o}()},{}],9:[function(e,t,n){"use strict";function r(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}function i(e){var t,n,i;if(Array.isArray(e)){if(t=e.length,0===t)return new r(null,null,0,0);n=e[0].length,i=a(f.mallocDouble(t*(n+1)),[t,n+1]),l(e,i.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var o=e.dtype;o="int8"===o||"int16"===o||"int32"===o?"int32":"uint8"===o||"uint8_clamped"===o||"buffer"===o||"uint16"===o||"uint32"===o?"uint32":"float32"===o?"float32":"float64",i=a(f.malloc(t*(n+1)),[t,n+1]),u.assign(i.hi(t,n),e)}for(var p=0;t>p;++p)i.set(p,n,p);for(var g=c.malloc([t,n],e.dtype),v=f.mallocInt32(t),m=0,y=g.data,x=i.data,b=(h.log2(h.nextPow2(t)),s.compile(i.order,!0,i.dtype)),w=[i];t>m;){var _=w.shift(),k=_,A=0|k.shape[0];if(A>1){var S,z=h.log2(m+1)%n,M=d.root(A);S=b(k,M,function(e,t){return e.get(z)-t.get(z)});for(var C=g.index(m,0),T=S.offset,p=0;n>p;++p)y[C++]=x[T++];v[m]=x[T],m+=1,w.push(k.hi(M)),A>2&&w.push(k.lo(M+1))}else{for(var T=k.offset,C=g.index(m,0),p=0;n>p;++p)y[C+p]=x[T++];v[m]=x[T],m+=1}}return f.free(i.data),new r(g,v,t,n)}function o(e){var t=e.p,n=e.i;if(t){for(var i=t.length,o=f.mallocFloat64(i),s=0;i>s;++s)o[s]=t[s];for(var l=n.length,u=f.mallocInt32(l),s=0;l>s;++s)u[s]=n[s];var c=i/l|0;return new r(a(o,[l,c]),u,l,c)}return new r(null,null,0,e.d)}t.exports=i,t.exports.deserialize=o;var a=e("ndarray"),s=e("ndarray-select"),l=e("ndarray-pack"),u=e("ndarray-ops"),c=e("ndarray-scratch"),f=e("typedarray-pool"),d=e("inorder-tree-layout"),h=e("bit-twiddle"),p=e("./lib/heap.js"),g=r.prototype;g.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},g.range=function(e,t,n){var r=this.length;if(!(1>r)){for(var i=this.dimension,o=0;i>o;++o)if(t[o]<e[o])return;var a,s=this.points,u=this.ids,d=c.malloc([r,2,i]),p=f.mallocInt32(r),g=d.data,v=s.data,m=1,y=0;for(p[0]=0,l(e,d.pick(0,0)),l(t,d.pick(0,1));m>y;){for(var x=p[y],b=h.log2(x+1)%i,w=d.index(y,0,0),_=d.index(y,1,0),k=s.index(x,0),A=!0,o=0;i>o;++o){var S=v[k+o];if(S<g[w+o]||g[_+o]<S){A=!1;break}}if(A&&(a=n(u[x]),void 0!==a))break;var z=v[k+b],M=g[_+b],C=g[w+b];if(z>=C){var T=2*x+1;if(r>T){p[m]=T;for(var E=d.index(m,0,0),o=0;i>o;++o)g[E+o]=g[w+o];for(var j=d.index(m,1,0),o=0;i>o;++o)g[j+o]=g[_+o];g[j+b]=Math.min(M,z),m+=1}}if(M>=z){var D=2*(x+1);if(r>D){p[m]=D;for(var E=d.index(m,0,0),o=0;i>o;++o)g[E+o]=g[w+o];for(var j=d.index(m,1,0),o=0;i>o;++o)g[j+o]=g[_+o];g[E+b]=Math.max(C,z),m+=1}}y+=1}return c.free(d),f.free(p),a}},g.rnn=function(e,t,n){if(!(0>t)){var r=this.length;if(!(1>r)){var i,o=this.dimension,a=this.points,s=this.ids,l=c.malloc([r,o]),u=f.mallocInt32(r),d=l.data,p=a.data,g=1,v=0,m=t*t;u[0]=0;for(var y=0;o>y;++y)l.set(0,y,0);for(;g>v;){for(var x=u[v],b=a.index(x,0),w=0,y=0;o>y;++y)w+=Math.pow(e[y]-p[b+y],2);if(m>=w&&(i=n(s[x]),void 0!==i))break;for(var _=h.log2(x+1)%o,k=0,A=l.index(v,0),y=0;o>y;++y)y!==_&&(k+=d[A+y]);var S=e[_],z=p[b+_],M=d[A+_],C=M,T=M;z>S?T=Math.max(M,Math.pow(z-S,2)):C=Math.max(M,Math.pow(z-S,2));var E=C+k,j=T+k;if(m>=E){var D=2*x+1;if(r>D){u[g]=D;for(var O=l.index(g,0),y=0;o>y;++y)d[O+y]=d[A+y];d[O+_]=C,g+=1}}if(m>=j){var N=2*(x+1);if(r>N){u[g]=N;for(var O=l.index(g,0),y=0;o>y;++y)d[O+y]=d[A+y];d[O+_]=T,g+=1}}v+=1}return c.free(l),f.free(u),i}}},g.nn=function(e,t){var n=this.length;if(1>n)return-1;if("number"==typeof t){if(0>t)return-1}else t=1/0;var r=this.dimension,i=this.points,o=i.data,a=f.mallocFloat64(r),s=new p(n,r+1),l=s.index,u=s.data;l[0]=0;for(var c=0;r>=c;++c)u[c]=0;s.count+=1;for(var d=-1,g=t;s.count>0&&!(u[0]>=g);){for(var v=l[0],m=i.index(v,0),y=0,c=0;r>c;++c)y+=Math.pow(e[c]-o[m+c],2);g>y&&(g=y,d=v);for(var x=h.log2(v+1)%r,b=0,c=0;r>c;++c){var w=u[c+1];c!==x&&(b+=w),a[c]=w}var _=e[x],k=o[m+x],A=a[x],S=A,z=A;k>_?z=Math.max(A,Math.pow(k-_,2)):S=Math.max(A,Math.pow(k-_,2));var M=S+b,C=z+b;if(s.pop(),g>M){var T=2*v+1;if(n>T){var E=s.count;l[E]=T;var j=E*(r+1);u[j]=M;for(var c=1;r>=c;++c)u[j+c]=a[c-1];u[j+x+1]=S,s.push()}}if(g>C){var D=2*(v+1);if(n>D){var E=s.count;l[E]=D;var j=E*(r+1);u[j]=C;for(var c=1;r>=c;++c)u[j+c]=a[c-1];u[j+x+1]=z,s.push()}}}return f.freeFloat64(a),s.dispose(),0>d?-1:this.ids[d]},g.knn=function(e,t,n){if("number"==typeof n){if(0>n)return[]}else n=1/0;var r=this.length;if(1>r)return[];if("number"==typeof t){if(0>=t)return[];t=0|Math.min(t,r)}else t=r;var i=this.ids,o=this.dimension,a=this.points,s=a.data,l=f.mallocFloat64(o),u=new p(t,1),c=u.index,d=u.data,g=new p(r,o+1),v=g.index,m=g.data;v[0]=0;for(var y=0;o>=y;++y)m[y]=0;g.count+=1;for(var x=n;g.count>0&&!(m[0]>=x);){for(var b=v[0],w=a.index(b,0),_=0,y=0;o>y;++y)_+=Math.pow(e[y]-s[w+y],2);if(x>_){u.count>=t&&u.pop();var k=u.count;c[k]=b,d[k]=-_,u.push(),u.count>=t&&(x=-d[0])}for(var A=h.log2(b+1)%o,S=0,y=0;o>y;++y){var z=m[y+1];y!==A&&(S+=z),l[y]=z}var M=e[A],C=s[w+A],T=l[A],E=T,j=T;C>M?j=Math.max(T,Math.pow(C-M,2)):E=Math.max(T,Math.pow(C-M,2));var D=E+S,O=j+S;if(g.pop(),x>D){var N=2*b+1;if(r>N){var P=g.count;v[P]=N;var F=P*(o+1);m[F]=D;for(var y=1;o>=y;++y)m[F+y]=l[y-1];m[F+A+1]=E,g.push()}}if(x>O){var I=2*(b+1);if(r>I){var P=g.count;v[P]=I;var F=P*(o+1);m[F]=O;for(var y=1;o>=y;++y)m[F+y]=l[y-1];
m[F+A+1]=j,g.push()}}}f.freeFloat64(l),g.dispose();for(var R=new Array(u.count),i=this.ids,y=u.count-1;y>=0;--y)R[y]=i[c[0]],u.pop();return u.dispose(),R},g.dispose=function(){f.free(this.points.data),f.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":10,"bit-twiddle":11,"inorder-tree-layout":12,ndarray:27,"ndarray-ops":14,"ndarray-pack":19,"ndarray-scratch":25,"ndarray-select":26,"typedarray-pool":31}],10:[function(e,t,n){"use strict";function r(e){return 1&e?e-1>>1:(e>>1)-1}function i(e,t){this.count=0,this.dataSize=t,this.index=o.mallocInt32(e),this.data=o.mallocFloat64(e*t)}t.exports=i;var o=e("typedarray-pool"),a=i.prototype;a.heapSwap=function(e,t){var n=this.data,r=this.index,i=this.dataSize,o=r[e];r[e]=r[t],r[t]=o;for(var a=i*e,s=i*t,l=0;i>l;++l){var u=n[a];n[a]=n[s],n[s]=u,a+=1,s+=1}},a.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),i=n[t*e];e>0;){var o=r(e);if(o>=0){var a=n[t*o];if(a>i){this.heapSwap(e,o),e=o;continue}}break}},a.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,i=n[t*e];;){var o=i,a=2*e+1,s=2*(e+1),l=e;if(r>a){var u=n[t*a];o>u&&(l=a,o=u)}if(r>s){var c=n[t*s];o>c&&(l=s)}if(l===e)break;this.heapSwap(e,l),e=l}},a.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},a.push=function(){this.heapUp(this.count),this.count+=1},a.dispose=function(){o.freeInt32(this.index),o.freeFloat64(this.data)}},{"typedarray-pool":31}],11:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(0>e)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(t>e)},n.max=function(e,t){return e^(e^t)&-(t>e)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var o=new Array(256);!function(e){for(var t=0;256>t;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(o),n.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],12:[function(e,t,n){"use strict";function r(e){var t=(g.nextPow2(e+1)>>>1)-1,n=e-t;return g.nextPow2(n)-1>=t?t:(t>>>1)+n}function i(e){return 0}function o(e){return e-1}function a(e,t){if(0>=e)return 0;var n=r(e);return t>n?a(e-n-1,t-n-1):t===n?g.log2(e):a(n,t)}function s(e,t){return Math.max(t-1,0)}function l(e,t){return Math.min(t+1,e-1)}function u(e,t){if(0>=e)return-1;var n=r(e);if(t>n){var i=u(e-n-1,t-n-1);return 0>i?n:i+n+1}if(t===n)return-1;var i=u(n,t);return 0>i?n:i}function c(e,t){if(0>=e)return 0;var n=r(e);return t>n?c(e-n-1,t-n-1)+n+1:t===n?r(t):c(n,t)}function f(e,t){if(0>=e)return 0;var n=r(e);return t>n?f(e-n-1,t-n-1)+n+1:t===n?r(e-n-1)+n+1:f(n,t)}function d(e,t){return 0===a(e,t)}function h(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i)break;e=i}}return n}function p(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i){n+=e-1;break}e=i}}return n}var g=e("bit-twiddle");n.root=r,n.begin=i,n.end=o,n.height=a,n.prev=s,n.next=l,n.parent=u,n.left=c,n.right=f,n.leaf=d,n.lo=h,n.hi=p},{"bit-twiddle":13}],13:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],14:[function(e,t,n){"use strict";function r(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return a({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(i(e))}var a=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in l){var t=l[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];n[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];n[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":15}],15:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var a=n[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===a){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}var o=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":17}],16:[function(e,t,n){"use strict";function r(e,t,n){var r,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;o>r;++r)u.push(["i",r,"=0"].join(""));for(i=0;a>i;++i)for(r=0;o>r;++r)f=c,c=e[r],0===r?u.push(["d",i,"s",r,"=t",i,"p",c].join("")):u.push(["d",i,"s",r,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.push("var "+u.join(",")),r=o-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;o>r;++r){for(f=c,c=e[r],i=0;a>i;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function i(e,t,n,i){for(var o=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;a>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;o>c;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;a>c;++c){for(var f=["offset"+c],d=e;o>d;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}u.push(r(t,n,i));for(var c=e;o>c;++c)u.push("}");return u.join("\n")}function o(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function a(e,t,n){for(var r=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),d=t.offsetArgs[f];c=d.array,u="+q"+f;case"array":u="p"+c+u;var h="l"+a,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),o.push([p,".set(",u,",",h,")"].join(""))):r=r.replace(l,[p,".get(",u,")"].join("")):r=r.replace(l,[p,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),s.lvalue&&o.push([p,".set(",u,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",u,"]"].join("")),r=r.replace(l,h),s.lvalue&&o.push([p,"[",u,"]=",h].join("")));else{for(var g=[s.name],v=[u],m=0;m<Math.abs(t.arrayBlockIndices[c]);m++)g.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(m+1)+"*t"+c+"b"+m);if(l=new RegExp(g.join(""),"g"),u=v.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[p,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+o:t[r]=i.charAt(0)+o,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function l(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)c[f]=t[2*f],l[f]=t[2*f+1];for(var d=[],h=[],p=[],g=[],v=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(p.push(0),g.push(n),d.push(n),h.push(n+e.arrayBlockIndices[f])):(p.push(e.arrayBlockIndices[f]),g.push(e.arrayBlockIndices[f]+n),d.push(0),h.push(e.arrayBlockIndices[f]));for(var m=[],y=0;y<l[f].length;y++)p[f]<=l[f][y]&&l[f][y]<g[f]&&m.push(l[f][y]-p[f]);v.push(m)}for(var x=["SS"],b=["'use strict'"],w=[],y=0;n>y;++y)w.push(["s",y,"=SS[",y,"]"].join(""));for(var f=0;f<e.arrayArgs.length;++f){x.push("a"+f),x.push("t"+f),x.push("p"+f);for(var y=0;n>y;++y)w.push(["t",f,"p",y,"=t",f,"[",p[f]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[f]);++y)w.push(["t",f,"b",y,"=t",f,"[",d[f]+y,"]"].join(""))}for(var f=0;f<e.scalarArgs.length;++f)x.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var _=new Array(n),f=0;n>f;++f)_[f]="0";w.push(["index=[",_.join(","),"]"].join(""))}for(var f=0;f<e.offsetArgs.length;++f){for(var k=e.offsetArgs[f],A=[],y=0;y<k.offset.length;++y)0!==k.offset[y]&&(1===k.offset[y]?A.push(["t",k.array,"p",y].join("")):A.push([k.offset[y],"*t",k.array,"p",y].join("")));0===A.length?w.push("q"+f+"=0"):w.push(["q",f,"=",A.join("+")].join(""))}var S=u([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(S),b.push("var "+w.join(","));for(var f=0;f<e.arrayArgs.length;++f)b.push("p"+f+"|=0");e.pre.body.length>3&&b.push(a(e.pre,e,c));var z=a(e.body,e,c),M=o(v);n>M?b.push(i(M,v[0],e,z)):b.push(r(v[0],e,z)),e.post.body.length>3&&b.push(a(e.post,e,c)),e.debug&&void 0;var C=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",M,s(c)].join(""),T=new Function(["function ",C,"(",x.join(","),"){",b.join("\n"),"} return ",C].join(""));return T()}var u=e("uniq");t.exports=l},{uniq:18}],17:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&void 0;var d=new Function("compile",t.join("\n"));return d(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":16}],18:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;r>a;++a)if(o=i,i=e[a],t(i,o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;n>o;++o,i=r)if(i=r,r=e[o],r!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}function o(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=o},{}],19:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],o=e,a=1;o instanceof Array;)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?r():(t||(t=r(new Float64Array(a),n)),i(t,e),t)}},{"./doConvert.js":20,ndarray:27}],20:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":21}],21:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{"./lib/thunk.js":23,dup:15}],22:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,uniq:24}],23:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./compile.js":22,dup:17}],24:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],25:[function(e,t,n){"use strict";function r(e){var t=e.dtype;("generic"===t||"array"===t)&&(t="double");var n=f.malloc(e.size,t),r=u(n,e.shape);return c.assign(r,e),r}function i(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];return u(f.malloc(n,t),e,r,0)}function o(e){"generic"!==e.dtype&&"array"!==e.dtype&&f.free(e.data)}function a(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var o=f.malloc(n,t),i=0;n>i;++i)o[i]=0;return u(o,e,r,0)}function s(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var o=f.malloc(n,t),i=0;n>i;++i)o[i]=1;return u(o,e,r,0)}function l(e,t){var n,r;t||(t="double");var i=1,o=new Array(e.length);for(n=e.length-1;n>=0;--n)o[n]=i,i*=e[n];var a=f.malloc(i,t);for(n=0;i>n;++n)a[n]=0;var s=1/0,l=0;for(n=e.length-1;n>=0;n--)l+=o[n],s=Math.min(s,e[n]);for(n=0,r=0;s>n;n++,r+=l)a[r]=1;return u(a,e,o,0)}var u=e("ndarray"),c=e("ndarray-ops"),f=e("typedarray-pool");n.clone=r,n.malloc=i,n.free=o,n.zeros=a,n.ones=s,n.eye=l},{ndarray:27,"ndarray-ops":14,"typedarray-pool":31}],26:[function(e,t,n){"use strict";function r(e){return"s"+e}function i(e){return"t"+e}function o(e){return"u"+e}function a(e){return"v"+e}function s(e){return"i"+e}function l(e){return"p"+e}function u(e){return"x"+e}function c(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}function f(e,t,n){function f(n,o,c){if(t)z.push(l(0),".offset=",y,"+",i(e[0]),"*(",o,");",l(1),".offset=",y,"+",i(e[0]),"*(",c,");",n,"=",v,"(",l(0),",",l(1),");");else{z.push(u(0),"=",y,"+",i(0),"*(",o,");",u(1),"=",y,"+",i(0),"*(",c,");"),h>1&&z.push("_cmp:");for(var f=h-1;f>0;--f)z.push("for(",s(f),"=0;",s(f),"<",r(f),";",s(f),"++){");A?z.push(n,"=",m,".get(",u(0),")-",m,".get(",u(1),");"):z.push(n,"=",m,"[",u(0),"]-",m,"[",u(1),"];"),h>1&&z.push("if(",n,")break _cmp;");for(var f=1;h>f;++f)z.push(u(0),"+=",a(f),";",u(1),"+=",a(f),"}")}}function d(t,n){z.push(u(0),"=",y,"+",i(e[0]),"*(",t,");",u(1),"=",y,"+",i(e[0]),"*(",n,");");for(var a=h-1;a>0;--a)z.push("for(",s(e[a]),"=0;",s(e[a]),"<",r(e[a]),";",s(e[a]),"++){");A?z.push(b,"=",m,".get(",u(0),");",m,".set(",u(0),",",m,".get(",u(1),"));",m,".set(",u(1),",",b,");"):z.push(b,"=",m,"[",u(0),"];",m,"[",u(0),"]=",m,"[",u(1),"];",m,"[",u(1),"]=",b,";");for(var a=1;h>a;++a)z.push(u(0),"+=",o(e[a]),";",u(1),"+=",o(e[a]),"}")}e=c(e);var h=e.length,A="generic"===n,S="ndSelect"+n+e.join("_")+"_"+(t?"cmp":"lex"),z=[],M=[p,g];t&&M.push(v);for(var C=[m+"="+p+".data",y+"="+p+".offset|0",x+"=Math.random",b],T=0;2>T;++T)C.push(u(T)+"=0");for(var T=0;h>T;++T)C.push(r(T)+"="+p+".shape["+T+"]|0",i(T)+"="+p+".stride["+T+"]|0",s(T)+"=0");for(var T=1;h>T;++T)T>1?C.push(a(T)+"=("+i(T)+"-"+r(T-1)+"*"+i(T-1)+")|0",o(e[T])+"=("+i(e[T])+"-"+r(e[T-1])+"*"+i(e[T-1])+")|0"):C.push(a(T)+"="+i(T),o(e[T])+"="+i(e[T]));if(t)for(var T=0;2>T;++T)C.push(l(T)+"="+p+".pick(0)");C.push(k+"=0",w+"=0",_+"="+r(e[0])+"-1"),z.push("while(",w,"<",_,"){",k,"=(",x,"()*(",_,"-",w,"+1)+",w,")|0;"),d(k,_),z.push(k,"=",w,";","for(",s(0),"=",w,";",s(0),"<",_,";",s(0),"++){"),f(b,s(0),_),z.push("if(",b,"<0){"),d(k,s(0)),z.push(k,"++;"),z.push("}}"),d(k,_),z.push("if(",k,"===",g,"){",w,"=",k,";","break;","}else if(",g,"<",k,"){",_,"=",k,"-1;","}else{",w,"=",k,"+1;","}","}"),t?z.push(l(0),".offset=",y,"+",w,"*",i(0),";","return ",l(0),";"):z.push("return ",p,".pick(",w,");");var E=["'use strict';function ",S,"(",M,"){","var ",C.join(),";",z.join(""),"};return ",S].join(""),j=new Function(E);return j()}function d(e,t,n){var r=e.join()+t+n,i=A[r];return i?i:A[r]=f(e,t,n)}function h(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||0>t)return null;var r=!!n,i=d(e.order,r,e.dtype);return r?i(e,t,n):i(e,t)}t.exports=h,t.exports.compile=d;var p="a",g="K",v="C",m="d",y="o",x="R",b="T",w="L",_="H",k="X",A={}},{}],27:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function o(e,t){var n=["View",t,"d",e].join("");0>t&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(o);return a()}if(0===t){var o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",o);return a(f[e][0])}var o=["'use strict'"],s=l(t),u=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),d=s.map(function(e){return"b"+e}).join(","),h=s.map(function(e){return"c"+e}).join(",");o.push("function "+n+"(a,"+d+","+h+",d){this.data=a","this.shape=["+d+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>t?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),r?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),r?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");
var p=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");o.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");o.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var m=new Array(t),y=new Array(t),v=0;t>v;++v)m[v]="a[i"+v+"]",y[v]="b[i"+v+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[e],i)}function a(e){if(u(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,n,r){if(void 0===e){var i=f.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var l=s-1,u=1;l>=0;--l)n[l]=u,u*=t[l]}if(void 0===r){r=0;for(var l=0;s>l;++l)n[l]<0&&(r-=(t[l]-1)*n[l])}for(var c=a(e),d=f[c];d.length<=s+1;)d.push(o(c,d.length-1));var i=d[s+1];return i(e,t,n,r)}var l=e("iota-array"),u=e("is-buffer"),c="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":28,"is-buffer":29}],28:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=n;return t}t.exports=r},{}],29:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],30:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(0>=i)return[];var o,a=new Array(i);if(n===e.length-1)for(o=0;i>o;++o)a[o]=t;else for(o=0;i>o;++o)a[o]=r(e,t,n+1);return a}function i(e,t){var n,r;for(n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function o(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=o},{}],31:[function(e,t,n){(function(t,r){"use strict";function i(e){if(e){var t=e.length||e.byteLength,n=y.log2(t);_[n].push(e)}}function o(e){i(e.buffer)}function a(e){var e=y.nextPow2(e),t=y.log2(e),n=_[t];return n.length>0?n.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(a(e),0,e)}function l(e){return new Uint16Array(a(2*e),0,e)}function u(e){return new Uint32Array(a(4*e),0,e)}function c(e){return new Int8Array(a(e),0,e)}function f(e){return new Int16Array(a(2*e),0,e)}function d(e){return new Int32Array(a(4*e),0,e)}function h(e){return new Float32Array(a(4*e),0,e)}function p(e){return new Float64Array(a(8*e),0,e)}function g(e){return b?new Uint8ClampedArray(a(e),0,e):s(e)}function v(e){return new DataView(a(e),0,e)}function m(e){e=y.nextPow2(e);var t=y.log2(e),n=k[t];return n.length>0?n.pop():new r(e)}var y=e("bit-twiddle"),x=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=x([32,0])),w.BUFFER||(w.BUFFER=x([32,0]));var _=w.DATA,k=w.BUFFER;n.free=function(e){if(r.isBuffer(e))k[y.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|y.log2(t);_[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=i,n.freeBuffer=function(e){k[y.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return s(e);case"uint16":return l(e);case"uint32":return u(e);case"int8":return c(e);case"int16":return f(e);case"int32":return d(e);case"float":case"float32":return h(e);case"double":case"float64":return p(e);case"uint8_clamped":return g(e);case"buffer":return m(e);case"data":case"dataview":return v(e);default:return null}return null},n.mallocArrayBuffer=a,n.mallocUint8=s,n.mallocUint16=l,n.mallocUint32=u,n.mallocInt8=c,n.mallocInt16=f,n.mallocInt32=d,n.mallocFloat32=n.mallocFloat=h,n.mallocFloat64=n.mallocDouble=p,n.mallocUint8Clamped=g,n.mallocDataView=v,n.mallocBuffer=m,n.clearCache=function(){for(var e=0;32>e;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,_[e].length=0,k[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":11,buffer:1,dup:30}],32:[function(e,t,n){var r;r=e("../color/sort.coffee"),t.exports=function(e,t,n,i,o,a,s){var l,u,c;for(i||(i="asc"),o instanceof Array||(o=[o]),n instanceof Array||(n=[n]),a&&void 0!==s&&"number"!=typeof s&&(s=a.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],e=a&&e.d3plus&&e.d3plus.sortKeys?e.d3plus.sortKeys[u]:e[u],t=a&&t.d3plus&&t.d3plus.sortKeys?t.d3plus.sortKeys[u]:t[u],c=a&&o.indexOf(u)>=0?r(e,t):t>e?-1:1,0===c&&l!==n.length-1);)l++;return"asc"===i?c:-c}},{"../color/sort.coffee":49}],33:[function(e,t,n){t.exports=function(e,t){var n;return e instanceof Array&&(n=void 0===t||null===t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(n)>=0)}},{}],34:[function(e,t,n){var r,i;r=e("./comparator.coffee"),i=e("../core/fetch/sort.coffee"),t.exports=function(e,t,n,o,a,s){var l,u,c,f;if(!e||e.length<=1)return e||[];if(a)for(t||(t=a.order.value||a.size.value||a.id.value),n||(n=a.order.sort.value),o||(o=a.color.value||[]),c=0,f=e.length;f>c;c++)l=e[c],l.d3plus||(l.d3plus={}),u="d3plus"in l&&"d3plus"in l.d3plus?l.d3plus:l,l.d3plus.sortKeys=i(a,u,t,o,s);return e.sort(function(e,i){return r(e,i,t,n,o,a,s)})}},{"../core/fetch/sort.coffee":65,"./comparator.coffee":32}],35:[function(e,t,n){t.exports=function(e,t){return void 0===t?e:t===!1?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}},{}],36:[function(e,t,n){var r;r=function(e){var t,n,i,o;if(o=r.tested,e in o)return o[e];for(n=0,i=!1;n<document.styleSheets.length;){if(t=document.styleSheets[n],t.href&&t.href.indexOf(e)>=0){i=!0;break}n++}return i},r.tested={},t.exports=r},{}],37:[function(e,t,n){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],38:[function(e,t,n){var r,i;r=e("./ie.js"),i=e("./touch.coffee"),i?t.exports={click:"click",down:"touchstart",up:"touchend",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}:t.exports={click:"click",down:"mousedown",up:"mouseup",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":37,"./touch.coffee":43}],39:[function(e,t,n){var r;r=function(){var e;return e="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",r=function(){return e},e},t.exports=r},{}],40:[function(e,t,n){t.exports="rtl"===d3.select("html").attr("dir")},{}],41:[function(e,t,n){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],42:[function(e,t,n){var r;r=function(){var e,t,n,i,o;return e=document.createElement("p"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="scroll",o=e.offsetWidth,i===o&&(o=t.clientWidth),document.body.removeChild(t),n=i-o,r=function(){return n},n},t.exports=r},{}],43:[function(e,t,n){t.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},{}],44:[function(e,t,n){t.exports=function(e){var t;return t=d3.hsl(e),t.l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.toString()}},{}],45:[function(e,t,n){t.exports=function(e,t){var n;return void 0===t&&(t=.5),n=d3.hsl(e),t=(1-n.l)*t,n.l+=t,n.s-=t,n.toString()}},{}],46:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a;return n||(n=1),r||(r=1),e=d3.rgb(e),t=d3.rgb(t),a=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),o=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),i=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(a,o,i).toString()}},{}],47:[function(e,t,n){var r;r=e("./scale.coffee"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}},{"./scale.coffee":48}],48:[function(e,t,n){t.exports=d3.scale.ordinal().range(["#b22200","#282F6B","#EACE3F","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])},{}],49:[function(e,t,n){t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),e=0===n.s?361:n.h,t=0===r.s?361:r.h,e===t?n.l-r.l:e-t}},{}],50:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;return i=d3.rgb(e),r=i.r,n=i.g,t=i.b,o=(299*r+587*n+114*t)/1e3,o>=128?"#444444":"#f7f7f7"}},{}],51:[function(e,t,n){t.exports=function(e){var t,n,r;return e+="",e=e.replace(RegExp(" ","g"),""),0===e.indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),n=d3.rgb(e).toString(),t=["black","#000","#000000","0%","0,0,0"],r=t.indexOf(e)>=0,"#000000"!==n||r}},{}],52:[function(e,t,n){var r,i,o;r=e("../../client/ie.js"),o=e("./wiki.coffee"),i=function(e,t,n){n=n||"",r||"undefined"!=typeof InstallTrigger?void 0:(0===e.indexOf("group"),void 0)},i.comment=function(e){this("log",e,"color:#aaa;")},i.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},i.group=function(e){this("group",e,"color:#888;")},i.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},i.groupEnd=function(){},i.log=function(e){this("log",e,"color:#444444;")},i.stack=function(){var e,t,n,i,o,a,s;r||(e=new Error,e.stack&&(a=e.stack.split("\n"),a=a.filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3plus.js:")<0&&e.indexOf("d3plus.min.js:")<0}),a.length&&a[0].length&&(o=window.chrome?"at ":"@",s=a[0],s.indexOf(o)>=0&&(s=s.split(o)[1]),a=s.split(":"),3===a.length&&a.pop(),t=a.pop(),i=a.join(":").split("/"),i=i[i.length-1],n="line "+t+" of "+i+": "+s,this("log",n,"color:#D74B03;"))))},i.time=function(e){},i.timeEnd=function(e){},i.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},i.wiki=function(e){e&&(e in o&&(e=d3plus.repo+"wiki/"+o[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=i},{"../../client/ie.js":37,"./wiki.coffee":53}],53:[function(e,t,n){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],54:[function(e,t,n){var r=e("../../util/buckets.coffee"),i=e("../fetch/value.coffee"),o=e("../console/print.coffee");t.exports=function(e){e.dev.value&&o.time("getting color data range");var t=[];if(e.data.pool.forEach(function(n){var r=parseFloat(i(e,n,e.color.value));"number"==typeof r&&!isNaN(r)&&t.indexOf(r)<0&&t.push(r)}),e.dev.value&&o.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&o.time("calculating color scale"),t=d3.extent(t),t[0]<0&&t[1]>0){var n=e.color.range;3==n.length&&(t.push(t[1]),t[1]=0)}else if(t[1]>0&&t[0]>=0){var n=e.color.heatmap;t=r(t,n.length)}else{var n=e.color.range.slice(0);t[0]<0?n.pop():n.shift()}e.color.valueScale=d3.scale.sqrt().domain(t).range(n).interpolate(d3.interpolateRgb),e.dev.value&&o.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.coffee":203,"../console/print.coffee":52,"../fetch/value.coffee":67}],55:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../console/print.coffee"),o=e("../../object/validate.coffee");t.exports=function(e,t){e.dev.value&&i.time("filtering data");var n=d3.keys(e.data.keys||{});"attrs"in e&&(n=n.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){var n=r(e,t,e.id.value);return null!==n});var a=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(i){n.indexOf(e[i].value)>=0&&a.indexOf(i)>=0&&(t=t.filter(function(t){var n=r(e,t,e[i].value);return"y"===i&&e.y2.value&&null===n?n=r(e,t,e.y2.value):"x"===i&&e.x2.value&&null===n&&(n=r(e,t,e.x2.value)),"size"===i?"number"==typeof n:null!==n}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].length?e.data[s].forEach(function(n){function a(t){var r=e[n][s].value,i=!1;return r.forEach(function(e){"function"==typeof e?i=e(t):e===t&&(i=!0)}),"solo"===s?i:!i}function l(t,i){if(!i&&e[n].nesting){var s=e[n].nesting;o(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=t.filter(function(t){return a(r(e,t,s[l]))});u.length&&(t=u)}}else t=t.filter(function(t){return a(r(e,t,e[n].value))});return t}t=l(t),"id"===n&&("nodes"in e&&e.nodes.value&&(e.dev.value&&i.time("filtering nodes"),e.nodes.restricted=l(e.nodes.value),e.dev.value&&i.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&i.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){var n=l([t[e.edges.source],t[e.edges.target]]);return 2===n.length}),e.dev.value&&i.timeEnd("filtering edges")))}):"nodes"in e&&(e.nodes.restricted=void 0,e.edges.restricted=void 0),e.dev.value&&i.timeEnd("filtering data"),t}},{"../../object/validate.coffee":171,"../console/print.coffee":52,"../fetch/value.coffee":67}],56:[function(e,t,n){var r=e("./nest.js"),i=e("../fetch/value.coffee"),o=e("../console/print.coffee"),a=e("../../util/uniques.coffee");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",o.time(t)),e.data.time.values=a(e.data.value,e.time.value,i,e),e.data.time.values.sort(function(e,t){return e-t});var n=[];e.data.time.values.forEach(function(t,r){if(0!==r){var i=e.data.time.values[r-1];n.push(t-i),r===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),n=d3.min(n),e.data.time.step=n;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];e.data.time.periods=s;var u=function(t,n,r){return e.data.time.stepDivider||(arr=l.slice(0,r),arr.length?e.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):e.data.time.stepDivider=1),Math.round(Math.floor(n-t)/e.data.time.stepDivider)},c=e.data.time.total;s.forEach(function(t,r){var i="Date"===t?28:l[r];if(!e.data.time.stepType&&(r===s.length-1||Math.round(n)<i)){e.data.time.stepType=t;var o=e.data.time.values[0],a=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=u(o,a,r)}!e.data.time.totalType&&(r===s.length-1||Math.round(c)<i)&&(e.data.time.totalType=t),n/=i,c/=i}),e.data.time.values.forEach(function(t,n){if(0!==n){var r=e.data.time.values[0];e.data.time.dataSteps.push(u(r,t,s.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var f=e.time.format.value,d=e.format.locale.value,h=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=h;var p=function(e,t,n){if(e===t)return n&&d.timeFormat[e+"Small"]?d.timeFormat[e+"Small"]:d.timeFormat[e];if(s.indexOf(e)>=4||s.indexOf(t)<=3)return d.timeFormat[t+"-"+e];var r;return r="Date"===t?d.timeFormat[t]:d.timeFormat[t+"-Date"],"Hours"===e?r+" "+d.timeFormat[e]:r+" "+d.timeFormat["Hours-"+e]};if(e.data.time.getFormat=p,f)"string"==typeof f?e.data.time.format=d3.locale(d.format).timeFormat(f):"function"==typeof f?e.data.time.format=f:f instanceof Array&&(e.data.time.format=d3.locale(d.format).timeFormat.multi(f)),e.data.time.multiFormat=e.data.time.format;else{for(var g=e.data.time.stepType,v=e.data.time.totalType,m=[],y=s.indexOf(g);y<=s.indexOf(v);y++){var x=y-1<s.indexOf(g)?s[y]:s[y-1],b=s[y]===x&&g!==v,w=p(x,s[y],b);m.push([w,h[y]])}e.data.time.format=d3.locale(d.format).timeFormat(p(g,v)),m.length>1?(m[m.length-1][1]=function(e){return!0},e.data.time.multiFormat=d3.locale(d.format).timeFormat.multi(m)):e.data.time.multiFormat=e.data.time.format}e.data.time.ticks=[];for(var _=d3.min(e.data.time.values),k=d3.max(e.data.time.values),A=0;A<=e.data.time.stepIntervals;A++){var S=new Date(_);S["set"+e.data.time.stepType](S["get"+e.data.time.stepType]()+A),k>=S&&e.data.time.ticks.push(S)}e.dev.value&&o.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",o.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,n){var i=e.id.nesting.slice(0,n+1);e.data.nested.all[t]=r(e,e.data.value,i)});else{var z=e.data.value.reduce(function(t,n){var r=i(e,n,e.time.value).getTime();return r in t||(t[r]=[]),t[r].push(n),t},{});e.data.time.values.forEach(function(t){var n=t.getTime();e.data.nested[n]={},e.id.nesting.forEach(function(t,i){var o=e.id.nesting.slice(0,i+1);e.data.nested[n][t]=r(e,z[n],o)})})}e.dev.value&&o.timeEnd(t)}},{"../../util/uniques.coffee":209,"../console/print.coffee":52,"../fetch/value.coffee":67,"./nest.js":60}],57:[function(e,t,n){var r;r=e("../fetch/value.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c,f,d,h;if(o=d3.nest(),e.id.grouping.value)for(void 0===n&&(n=e.id.nesting),a=s=0,u=n.length;u>s;a=++s)f=n[a],a<e.depth.value&&!function(t){return o.key(function(n){return r(e,n.d3plus,t)})}(f);for(d=[],l=0,c=t.length;c>l;l++)i=t[l],h=e.size.value?r(e,i,e.size.value):1,h&&"number"==typeof h&&h>0&&(delete i.d3plus.r,delete i.d3plus.x,delete i.d3plus.y,d.push({d3plus:i,id:i[e.id.value],value:h}));return o.entries(d)}},{"../fetch/value.coffee":67}],58:[function(e,t,n){var r,i,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t){var n,a,s,l,u,c,f,d,h;if(f=t+" key analysis",e.dev.value&&r.time(f),e[t].keys={},n=function(r){var a,s,l,u,c,f,d;if(r instanceof Array){for(c=[],s=0,u=r.length;u>s;s++)a=r[s],c.push(n(a));return c}if(i(r)){f=[];for(l in r)d=r[l],0===l.indexOf("d3plus")||o.call(e[t].keys,l)>=0||null===d?f.push(void 0):f.push(e[t].keys[l]=typeof d);return f}},i(e[t].value)){l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value;for(a in u)if(d=u[a],l&&e.id.nesting.indexOf(a)>=0&&i(d))for(s in d)h=d[s],n(h);else n(d)}else{c=e[t].value;for(a in c)d=c[a],n(d)}return e.dev.value?r.time(f):void 0}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],59:[function(e,t,n){var r,i;r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t,n){var o,a,s,l;return o=e.dev.value,o&&r.time("loading "+t),l=e[t].url,e[t].filetype.value?a=e[t].filetype.value:(a=l.slice(l.length-5).split("."),a=a.length>1&&a[1],a?("txt"===a&&(a="text"),e[t].filetype.accepted.indexOf(a)<0&&(a="json")):a="json"),(s="dsv"===a?d3.dsv(e[t].delimiter.value,"text/plain"):d3[a])(l,function(s,u){var c,f;if(!s&&u){if("function"==typeof e[t].callback){if(f=e[t].callback(u))if(i(f)&&t in f)for(c in f)c in e&&(e[c].value=f[c]);else e[t].value=f}else e[t].value=u;["json"].indexOf(a)<0&&e[t].value.forEach(function(e){var t;t=[];for(c in e)isNaN(e[c])?"false"===e[c].toLowerCase()?t.push(e[c]=!1):"true"===e[c].toLowerCase()?t.push(e[c]=!0):"null"===e[c].toLowerCase()?t.push(e[c]=null):"undefined"===e[c].toLowerCase()?t.push(e[c]=void 0):t.push(void 0):t.push(e[c]=parseFloat(e[c]));return t}),e[t].changed=!0,e[t].loaded=!0}else e.error.internal='Could not load data from: "'+l+'"';return o&&r.timeEnd("loading "+t),n()})}},{"../../object/validate.coffee":171,"../console/print.coffee":52}],60:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../../object/validate.coffee"),o=e("../../util/uniques.coffee"),a=function(e,t,n,i){void 0===i&&(i=!0);var a=d3.nest(),c=[],f="temp"in e?["active","temp","total"]:[];n.length?n.forEach(function(t,n){a.key(function(n){return r(e,n,t)})}):a.key(function(e){return!0}),i&&e.axes&&e.axes.discrete&&(!e.time||e[e.axes.discrete].value!==e.time.value)&&a.key(function(t){return r(e,t,e[e.axes.discrete].value)});var d=n.length&&e.id.nesting.indexOf(n[n.length-1])>=0,h=n.length&&d?n.length-1:0;d?e.id.nesting[h]:e.depth.value,a.rollup(function(t){if(1===t.length&&"d3plus"in t[0])return c.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var i={d3plus:{data:{},depth:h}},a=d3.sum(t,function(e){return"d3plus"in e&&e.d3plus.merged?1:0});if(a===t.length)for(var u=0;u<t.length;u++){var d=t[u];i.d3plus.merged||(i.d3plus.merged=[]),i.d3plus.merged=i.d3plus.merged.concat(d.d3plus.merged),d.d3plus.text&&(i.d3plus.text=d.d3plus.text)}for(var p=0;p<f.length;p++){var g=f[p],v=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum";"d3plus"in t[0]&&g in t[0].d3plus?i.d3plus[g]=d3.sum(t,function(e){return e.d3plus[g]}):"function"==typeof v?i.d3plus[g]=v(t):i.d3plus[g]=d3[v](t,function(t){var n="total"===g?1:0;return e[g].value&&(n=r(e,t,e[g].value),"number"!=typeof n&&(n=n?1:0)),n})}for(var m in e.data.keys){if(m in i.d3plus.data)i[m]=i.d3plus[m];else{var y=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum",x=typeof y,b=e.data.keys[m],w=e.id.nesting.indexOf(m)>=0,_="time"in e&&m===e.time.value;if(m in i.d3plus.data)i[m]=i.d3plus[m];else if("function"===x)i[m]=e.aggs.value[m](t);else if(_)i[m]=l(o(t,m));else if(e.axes&&e.axes.discrete&&e[e.axes.discrete].value===m)i[m]=o(t,m);else if("number"!==b||"string"!==x||w){var k=s(t,m),A=1===k.length?k[0][m]:o(k,m);if(1===k.length)i[m]=A;else if(A&&A.length)A instanceof Array||(A=[A]),w&&e.id.nesting.indexOf(m)>h?i[m]=k:i[m]=A;else if(w){var S=e.id.nesting.indexOf(m)-1;S>=h&&(!("endPoint"in i.d3plus)||i.d3plus.endPoint>h)&&(i.d3plus.endPoint=h)}}else{var z=t.map(function(e){return e[m]});z=z.filter(function(e){return typeof e===b}),z.length&&(i[m]=d3[y](z))}}m in i&&i[m]instanceof Array&&1===i[m].length&&(i[m]=i[m][0])}for(var M=0;M<n.length;M++){var C=n[M];C in i||(i[C]=r(e,t[0],C))}return c.push(i),i});var p=function(t,r,i){if(t.children){"number"==e.data.keys[n[r]]&&(t.key=parseFloat(t.key)),i[n[r]]=t.key,delete t.key;for(var o in i)t[o]=i[o];r++,t.children.forEach(function(e){p(e,r,i)})}};return a=a.entries(t).map(u).map(function(e){return p(e,0,{}),e}),c},s=function(e,t){function n(e){e instanceof Array?e.forEach(n):i(e)&&t in e&&(e[t]instanceof Array?e[t].forEach(n):r.push(e))}var r=[];return n(e),r},l=function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];i&&(i.constructor===Array?t(i):n.push(i))}}var n=[];return t(e),o(n)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=a},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"../fetch/value.coffee":67}],61:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("./nest.js"),o=e("../fetch/value.coffee"),a=(e("../fetch/color.coffee"),e("../fetch/text.js"));t.exports=function(e,t,n){var s;if(s=e.size.threshold.value===!1?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02,"number"==typeof s&&s>0){var l=[],u=0===e.depth.value?0:{},c=[],f=[],d=[],h={},p=d3.nest();n&&p.key(function(t){return o(e,t,n)}),p.rollup(function(t){var r=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?r=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(r=d3[e.aggs.value[e.size.value]](t,function(t){return o(e,t,e.size.value)})):r=d3.sum(t,function(t){return o(e,t,e.size.value)});var i=n?o(e,t[0],n):"all";return h[i]=r,r}).entries(t),t.forEach(function(t){var r=o(e,t,e.id.value),i=o(e,t,e.size.value),a=n?o(e,t,n):"all",u=i/h[a]>=s;if(u&&l.indexOf(r)<0&&(l.push(r),e.depth.value)){var c=o(e,t,e.id.nesting[e.depth.value-1]);f.indexOf(c)<0&&f.push(c)}});var g=t.filter(function(t){var n=o(e,t,e.id.value),r=l.indexOf(n)>=0,i=e.depth.value?o(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==i&&f.indexOf(i)<0&&d.indexOf(i)<0&&d.push(i),!r){var a=o(e,t,e.size.value);a>0&&(0===e.depth.value?a>u&&(u=a):(i in u||(u[i]=0),a>u[i]&&(u[i]=a)),c.push(t))}return r});if(c.length>1){c=r(c,e.size.value,"desc",[],e);var v=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&v.push(e[e.axes.discrete].value);var m=i(e,c,v);m.forEach(function(t){var n=e.id.nesting[e.depth.value-1],r=o(e,t,n);if(children=n?c.filter(function(t){return o(e,t,n)===r}):c,children.length>1){e.id.nesting.forEach(function(n,r){if(e.depth.value==r){var i=t[n];"string"==typeof i?t[n]="d3plus_other_"+i:t[n]="d3plus_other"}else r>e.depth.value&&delete t[n]}),e.color.value&&"string"===e.color.type&&(0===e.depth.value?t[e.color.value]=e.color.missing:t[e.color.value]=o(e,r,e.color.value,n)),e.icon.value&&(t[e.icon.value]=o(e,r,e.icon.value,n)),r&&(t.d3plus.depth=e.depth.value);var i;0===e.depth.value?(i=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),i+=" < "+e.format.value(u,{key:e.size.value,vars:e})):(i=a(e,t,e.depth.value-1),i=i.length?i[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),d.indexOf(r)<0&&(i+=" < "+e.format.value(u[r],{key:e.size.value,vars:e}))),d.indexOf(r)<0&&(i+=" ("+e.format.value(100*s,{key:"share",vars:e})+")"),t.d3plus.threshold=u,t.d3plus.merged=children,e.text.value&&(t[e.text.value]=i),t.d3plus.text=i}})}else m=c;return g.concat(m)}return t}},{"../../array/sort.coffee":34,"../fetch/color.coffee":63,"../fetch/text.js":66,"../fetch/value.coffee":67,"./nest.js":60}],62:[function(e,t,n){var r;r=e("../../font/sizes.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b;if(b=t.values||e.data.time.ticks,v=t.style||{},s=t.limit||e.width.value,m={},c=e.data.time.periods,g=e.data.time.stepType,y=e.data.time.totalType,o=e.data.time.functions,a=e.data.time.getFormat,l=e.format.locale.value.format,e.time.format.value)m.format=e.data.time.format,m.values=b,m.sizes=r(b.map(function(e){return m.format(e)}),v);else for(u=c.indexOf(g);u<=c.indexOf(y);){if(x=b.filter(function(e){var t,n;if(u===c.indexOf(g))return!0;if(t=!0,n=u-1,0>u)return!0;for(;n>=c.indexOf(g)&&t;)t=!o[n](e),n--;return t}),c[u]===y)i=d3.locale(l).timeFormat(a(c[u],y));else{for(f=u,i=[];f<=c.indexOf(y);)d=f-1<c.indexOf(g)?f:f-1,d=c[d],p=c[f]===d&&g!==y,n=a(d,c[f],p),i.push([n,o[f]]),f++;i[i.length-1][1]=function(){return!0},i=d3.locale(l).timeFormat.multi(i)}if(h=r(x.map(function(e){return i(e)}),v),d3.sum(h,function(e){return e.width})<s||u===c.indexOf(y)){m.format=i,m.values=x,m.sizes=h;break}u++}return m}},{"../../font/sizes.coffee":101}],63:[function(e,t,n){var r,i,o,a,s,l,u;r=e("./value.coffee"),a=e("../../color/random.coffee"),l=e("../../color/validate.coffee"),u=e("../../object/validate.coffee"),s=e("../../util/uniques.coffee"),t.exports=function(e,t,n){var a,l,c,f,d,h;if(d=u(t),d&&"d3plus"in t&&"color"in t.d3plus)return t.d3plus.color;if(void 0===n&&(n=e.id.value),"number"==typeof n&&(n=e.id.nesting[n]),e.color.value){for(c=[],f=e.id.nesting.indexOf(n);f>=0;){if(l=e.id.nesting[f],h=s(t,e.color.value,r,e,l),1===h.length&&(h=h[0]),!(h instanceof Array)&&void 0!==h&&null!==h){a=i(e,t,h,n),c.indexOf(a)<0&&c.push(a);break}f--}return 1===c.length?c[0]:e.color.missing}return o(e,t,n)},i=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):l(n)?n:o(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):o(e,t,r)},o=function(e,t,n){return u(t)&&(t=r(e,t,n)),t instanceof Array&&(t=t[0]),a(t,e.color.scale.value)}},{"../../color/random.coffee":47,"../../color/validate.coffee":51,"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],64:[function(e,t,n){var r=e("../data/filter.js"),i=e("../data/nest.js"),o=e("../console/print.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e,t,n){if(!e.data.value)return[];void 0===n&&(n=e.depth.value);var l=e.id.nesting[n];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;
if(c.length){t=[];for(var f=0;f<c.length;f++){var d=c[f];if("function"==typeof d)for(var h=0;h<e.data.time.values.length;h++){var p=e.data.time.values[h].getTime();d(p)&&t.push(p)}else if(d.constructor===Date)t.push(new Date(d).getTime());else{d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01");var g=new Date(d);"Invalid Date"!==g&&t.push(g.getTime())}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var v=0;v<t.length;v++)t[v]=t[v].getTime()}var m=[e.type.value,l,n].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",x=d3.keys(e.data.cache),b=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var w=0;w<e.data[y].length;w++){var _=e.data[y][w],k=e[_][y].value.slice(0);k.unshift(_),k.unshift(y),m=m.concat(k)}e.axes&&e.axes.discrete&&m.push(e.axes.discrete),m=m.join("_"),e.data.cacheID=m;for(var A=0;A<x.length;A++){var S=x[A].split("_").slice(1).join("_");if(S===m){m=(new Date).getTime()+"_"+m,e.data.cache[m]=e.data.cache[x[A]],delete e.data.cache[x[A]];break}}var z;if(e.data.cache[m])return e.dev.value&&o.comment("data already cached"),z=e.data.cache[m].data,"nodes"in e&&(e.nodes.restricted=e.data.cache[m].nodes,e.edges.restricted=e.data.cache[m].edges),"function"==typeof b&&(z=b(e,z)),z;var M=[];if(z=[],e.data.value&&e.data.value.length)for(var C=0;C<t.length;C++){var T=t[C];e.data.nested[T]?z=z.concat(e.data.nested[T][l]):M.push(T)}if(0===z.length&&M.length&&!e.error.internal){M.length>1&&(M=d3.extent(M)),M=M.map(function(t){return e.data.time.format(new Date(t))}),M=M.join(" - ");var E=e.format.locale.value.error.dataYear,j=e.format.locale.value.ui.and;M=s(M,j),e.error.internal=a(E,M),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var D=!1;if(["x","y","x2","y2"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(D=!0)}),!D){var O=e.id.nesting.slice(0,n+1);z=i(e,z,O)}}z=z?r(e,z):[],20===x.length&&(x.sort(),delete e.data.cache[x[0]]),m=(new Date).getTime()+"_"+m,e.data.cache[m]={data:z},"nodes"in e&&(e.data.cache[m].nodes=e.nodes.restricted,e.data.cache[m].edges=e.edges.restricted),"function"==typeof b&&(z=b(e,z)),e.dev.value&&o.comment("storing data in cache")}return z}},{"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52,"../data/filter.js":55,"../data/nest.js":60}],65:[function(e,t,n){var r,i,o;o=e("./value.coffee"),r=e("./color.coffee"),i=e("./text.js"),t.exports=function(e,t,n,a,s){var l,u,c,f,d,h;for(n instanceof Array||(n=[n]),a instanceof Array||(a=[a]),e&&(void 0===s?s=e.id.value:"number"!=typeof s&&(s=e.id.nesting.indexOf(s))),d={},u=0,f=n.length;f>u;u++)c=n[u],h=e?a.indexOf(c)>=0?r(e,t,s):c===e.text.value?i(e,t,s):3===d3.keys(t).length&&t.d3plus&&t.key&&t.values?o(e,t.values.map(function(e){return e.d3plus}),c,s):o(e,t,c,s):t[c],[e.data.keys[c],e.attrs.keys[c]].indexOf("number")>=0?(l=e.order.agg.value||e.aggs.value[c]||"sum",h instanceof Array||(h=[h]),h=d3[l](h)):(h instanceof Array&&(h=h[0]),h="string"==typeof h?h.toLowerCase():h),d[c]=h;return d}},{"./color.coffee":63,"./text.js":66,"./value.coffee":67}],66:[function(e,t,n){var r=e("./value.coffee"),i=e("../../object/validate.coffee"),o=e("../../util/uniques.coffee");t.exports=function(e,t,n){"number"!=typeof n&&(n=e.depth.value);var a,s=e.id.nesting[n];e.text.nesting&&i(e.text.nesting)?a=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(a=[],e.text.value&&n===e.depth.value&&a.push(e.text.value),a.push(s)),a instanceof Array||(a=[a]);var l=[];if(i(t)&&"d3plus"in t&&t.d3plus.text)l.push(t.d3plus.text.toString()),l.push(e.format.value(t.d3plus.text.toString(),{vars:e,data:t}));else{var u=i(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),a.forEach(function(n){var i=o(t,n,r,e,s);i.length&&(i.length>1&&(i=i.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),i=i.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e}),t.map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:n})})):t?e.format.value(t.toString(),{vars:e,data:u,key:n}):void 0}),1===i.length&&(i=i[0]),l.push(i))})}return l}},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209,"./value.coffee":67}],67:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d;f=e("../../object/validate.coffee"),c=e("../../util/uniques.coffee"),u=function(e,t,n,a){var s,l,u,d;if(l=f(t),"function"==typeof n&&l)return n(t,e);if(l){if(n in t)return t[n];if(s=e.data.cacheID+"_"+a,r(t,s,e),n in t.d3plus.data[s])return t.d3plus.data[s][n];if(a in t)t=t[a];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],a!==n&&(u=o(e,t,a,e.id.value)),(null===u||void 0===u)&&(u=i(e,t,a,e.id.value)),null===u||void 0===u)return null;if(a===n)return u;t=u}}return t instanceof Array&&!f(t[0])&&(t=c(t)),t instanceof Array&&f(t[0])&&(d=c(t,n),d.length)?d:(d=o(e,t,n,a))?d:d=i(e,t,n,a)},o=function(e,t,n,r){var i;return e.data.viz instanceof Array&&n in e.data.keys&&(i=c(l(e.data.viz,t,r),n)),i&&i.length?i:null},i=function(e,t,n,r){var i,o,a,s;if("attrs"in e&&e.attrs.value&&n in e.attrs.keys)if(i=f(e.attrs.value)&&r in e.attrs.value?e.attrs.value[r]:e.attrs.value,i instanceof Array){if(a=c(l(i,t,r),n),a.length)return a}else if(t instanceof Array){if(i=[function(){var e,n,r;if(o in i){for(r=[],e=0,n=t.length;n>e;e++)o=t[e],r.push(i[o]);return r}}()],i.length&&(s=c(i,n),s.length))return s}else if(t in i)return i[t][n];return null},l=function(e,t,n){return t instanceof Array?e.filter(function(e){return t.indexOf(e[n])>=0}):e.filter(function(e){return e[n]===t})},r=function(e,t,n){return"d3plus"in e||(e.d3plus={}),"data"in e.d3plus||(e.d3plus.data={}),(n.data.changed||n.attrs&&n.attrs.changed||!(t in e.d3plus.data))&&(e.d3plus.data[t]={}),e},d=function(e,t,n,r,i){var o,a,s,l,u,c,d;if(null===i)return i;c="time"in e&&e.time.value===r,i instanceof Array||(i=[i]);for(s=l=0,u=i.length;u>l;s=++l)d=i[s],c&&null!==d&&d.constructor!==Date&&(d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01"),a=new Date(d),"Invalid Date"!==a&&(i[s]=a));return 1===i.length&&(i=i[0]),null===i||!f(t)||"string"!=typeof r||r in t||(o=e.data.cacheID+"_"+n,t.d3plus.data[o][r]=i),i},s=function(e,t,n,r){var i,o,a,s,l;for(l=[],o=0,a=t.length;a>o;o++)i=t[o],f(i)?(s=u(e,i,n,r),l.push(d(e,i,r,n,s))):l.push(i);return"number"!=typeof l[0]&&(l=c(l)),1===l.length?l[0]:l},a=function(e,t,n,r){var i,o;return n?"number"==typeof n?n:(i=f(t),r||(r=e.id.value),i&&t.values instanceof Array?o=s(e,t.values,n,r):i&&t[n]instanceof Array?o=s(e,t[n],n,r):t instanceof Array?o=s(e,t,n,r):(o=u(e,t,n,r),o=d(e,t,r,n,o)),o):null},t.exports=a},{"../../object/validate.coffee":171,"../../util/uniques.coffee":209}],68:[function(e,t,n){t.exports=function(e){var t,n,r;return["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},r=d3.select("body").selectAll(e+".d3plus_tester").data([0]),r.enter().append(e).attr("class","d3plus_tester").style(n).attr(t),r}},{}],69:[function(e,t,n){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],70:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el mtodo {0} ha sido eliminado, por favor, actualiza tu cdigo para utilizar {1}.",noChange:"{0} no se actualiza porque no cambi.",noContainer:"no se puede encontrar un contenedor en la pgina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vnculos no se pueden enlazar con si mismos. eliminando automticamente el vnculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",method:"{0} visualizaciones requieren establecer el mtodo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes mtodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"cono",id:"id",height:"alto",labels:"rtulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",mute:"ocultar",order:"orden",search:"bsqueda",shape:"forma",size:"tamao",solo:"aislar",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"lnea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"#ERROR!",mode:"modo"},time:["fecha","da","mes","hora","ao"],visualization:{bubbles:"Burbujas",chart:"Tabla",geo_map:"Mapa Geo",line:"Lnea Solar",network:"Red",rings:"Anillos",scatter:"Grfico De Dispersin",stacked:"rea Apilada",tree_map:"Mapa de rbol",bar:"Grfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Grfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrs",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} ms",moreInfo:"clic para ms informacin",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],71:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a t limin de la version courante, mettez  jour votre code source avec {1}.",noChange:"{0} n'a pas t mis  jour car inchang.",noContainer:"impossible de trouver un contenant correspondant  {0}.",of:"de",oldStyle:"les proprits de {0} ont t imbriques dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui mme. L'auto-rfrence est automatiquement limine {0}.",set:"{0} a t mis  jour.",setLong:"{0} a t mis  jour  {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donnes disponibles",dataYear:"Pas de donnes disponibles pour {0}.",lib:"La visualisation de {0} ncessite le chargement de la librairie {1}.",libs:"La visualisation de {0} ncessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la dfinition de {1}.",methods:"La visualisation du {0} exige les dfinitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","prs","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"cone",id:"id",height:"hauteur",labels:"labels",legend:"lgende",margin:"marge",messages:"messages",mute:"cacher",order:"ordre",search:"recherche",shape:"format",size:"taille",solo:"isoler",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode"},time:["anne","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"Rseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empiles",tree_map:"Arbre",bar:"Diagramme en barres",box:"Botes  Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour rduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de rsultat correspondant  {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou"},message:{data:"analyse des donnes",draw:"trac en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"rinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],72:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},dev:{accepted:"{0} {1},         : {2}.",deprecated:"{0}   ,    {1}.",noChange:"{0}     .",noContainer:"  {0}    .",of:"",oldStyle:"{0}       .{1}().",sameEdge:"     .     {0}   .",set:"{0}  .",setLong:"{0} {1}  .",setContainer:".container()    "},error:{accepted:"{0}   {1} {2}       : {3}.",connections:"{0}   .",data:" ",dataYear:"{0}   .",lib:"{0}  {1}   .",libs:"{0}       : {1}.",method:"{0}   {1}   .",methods:"{0}      : {1}."},lowercase:[],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:" ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:" ",total:" ",type:"",width:"",x:"X ",y:"Y ",zoom:"",mode:"",mute:"",solo:""},time:["","","","",""],visualization:{bubbles:" ",chart:"",geo_map:"",line:" ",network:" ",rings:"",scatter:"",stacked:" ",tree_map:" ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:" ",error:"",expand:" ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"   {0}.",primary:" ",share:"",total:"",values:"",including:"... ",or:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:" ",ui:"UI  "},uppercase:["CEO"," ","   (CFO)","CFO","CNC","COO","","CPU","CPU","  (GDP)","HVAC","ID","IT","R & D","TV","UI"]}},{}],73:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}   a   {1},    a   : {2}.",deprecated:"{0}   ,           {1}.",noChange:"{0}   ,   .",noContainer:" e           {0}.",of:"",oldStyle:"    {0}     . {1} ().",sameEdge:"        .       - {0}.",set:"{0}  .",setLong:"{0}    {1}.",setContainer:"    div  .container()"},error:{accepted:"{0}     {1} {2} ,      : {3}.",connections:"     {0}.",data:" ",dataYear:"    {0}.",lib:"{0}      {1} .",libs:"{0}     : {1}.",method:"{0}     {1} .",methods:"{0}      : {1}."},lowercase:["a","","","","","","","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"id",height:"",labels:"",legend:"",margin:"",messages:"  ",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:"x ",y:" y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:" ",tree_map:"    ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:"    ",error:"",expand:"    ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"     {0}.",primary:" ",share:"",total:"",values:"",including:"",or:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:"  ",ui:"   "},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],74:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} no  um valor vlido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} mtodo foi removido, por favor atualize seu cdigo para utilizar {1}.",noChange:"{0} no foi atualizado porque ele no mudou.",noContainer:"No foi possvel encontrar um local na pgina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j foi incorporado diretamente no. {1} ().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definido.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} no  um {1} reconhecido para visualizaes {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"No h conexes disponveis para {0}.",data:"No h dados disponveis",dataYear:"No h dados disponveis para {0}.",lib:"A visualizao {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualizao {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",mute:"ocultar",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",solo:"isolar",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"linha do tempo",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Grfico",geo_map:"Mapa",line:"Grfico de Linha",network:"Rede",rings:"Anis",scatter:"Disperso",stacked:"Evoluo",tree_map:"Tree Map",bar:"Grfico de Barras",box:"Box Plot",paths:"Caminhos",pie:"Pie Chart",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"conexes primrias",share:"participao",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"analisando dados",draw:"desenhando visualizao",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],75:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} no  um valor vlido para {1}, por favor escolha uma das seguintes opes: {2}.",deprecated:"o mtodo {0} foi removido, por favor atualize o seu cdigo para usar {1}.",noChange:"{0} no foi atualizado porque no houve modificaes.",noContainer:"No foi possvel encontrar um elemento na pgina correspondente a {0}.",of:"de",oldStyle:"as propriedades de {0} j foram includas em .{1}().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definido.",setLong:"{0} foi alterado para {1}.",setContainer:"por favor indique um elemento div atravs do mtodo .container()"},error:{accepted:"{0} no  uma {1} vlida para a visualizao {2}, por favor escolha uma das seguintes: {3}.",connections:"no existem ligaes disponveis para {0}.",data:"no existem dados disponveis",dataYear:"no existem dados disponveis para {0}.",lib:"a visualizao {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualizao {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos seguintes mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"#ERROR!",mute:"ocultar",solo:"isolar"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geo_map:"Mapa",line:"Grfico de Linha",network:"Grafo",rings:"Anis",scatter:"Grfico de Disperso",stacked:"Grfico de rea",tree_map:"Tree Map",bar:"Grfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"Caminhos",pie:"Grfico de Setores",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"ligaes principais",share:"proporo",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"a analisar os dados",draw:"a desenhar a visualizao",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informao",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],76:[function(e,t,n){t.exports={format:{decimal:",",thousands:"",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}    {1}, ,    : {2}.",deprecated:" {0}  , ,   ,   {1}.",noChange:"{0}  ,    .",noContainer:"       {0}.",of:"",oldStyle:"   {0}        . {1} ().",sameEdge:"    .     {0}.",set:"{0}  .",setLong:"{0}   {1}.",setContainer:",   DIV   .container ()"},error:{accepted:"{0}   {1}  {2} , ,    : {3}.",connections:" ,   {0}.",data:" ",dataYear:"  {0}.",lib:"{0}    {1} .",libs:"{0}     : {1}.",method:"{0}    {1} .",methods:"{0}     : {1}."},lowercase:["","","","","",""," ","","","","","","","","","",""," ","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"ID",height:"",labels:"",legend:"",margin:"",messages:"  ",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:" ",y:" Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:"  ",tree_map:" ",
bar:"",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:",  ",error:"",expand:",  ",loading:" ...",more:"{0} ",moreInfo:"     ",noResults:" ,  {0}.",primary:" ",share:"",total:"",values:"",including:"",or:""},message:{data:" ",draw:" ",initializing:" {0}",loading:" ",tooltipReset:" ",ui:"  "},uppercase:["ID"]}},{}],77:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}{1}, :{2}",deprecated:"{0}, {1}",noChange:"{0}, ",noContainer:"{0}",of:"",oldStyle:"{0}{1}",sameEdge:"{0}",set:"{0}",setLong:"{0}{1}",setContainer:"()div"},error:{accepted:"{0}{2}{1}, {3}.",connections:"{0}",data:"",dataYear:"{0}",lib:"{0}{1}",libs:"{0}{1}",method:"{0}{1}",methods:"{0}{1}"},lowercase:["","","","","...","","","","","..."],method:{active:"",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:"",text:"",time:"",timeline:"",total:"",type:"",width:"",x:"X",y:"Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:"",line:"",network:"",rings:"",scatter:"",stacked:"",tree_map:"",bar:"",box:"",paths:"",pie:"",table:""},ui:{and:"",back:"",collapse:"",error:"",expand:"",loading:"...",more:"{0}",moreInfo:"",noResults:"{0}",primary:"",share:"",total:"",values:"",including:"",or:""},message:{data:"",draw:"",initializing:"{0}",loading:"",tooltipReset:"",ui:"UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","","",""]}},{}],78:[function(e,t,n){t.exports={en_US:e("./languages/en_US.coffee"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/zh_CN.js")}},{"./languages/en_US.coffee":69,"./languages/es_ES.js":70,"./languages/fr_FR.js":71,"./languages/ko_KR.js":72,"./languages/mk_MK.js":73,"./languages/pt_BR.js":74,"./languages/pt_PT.js":75,"./languages/ru_RU.js":76,"./languages/zh_CN.js":77}],79:[function(e,t,n){var r,i,o,a,s,l,u,c,f;i=e("../../util/copy.coffee"),s=e("../console/print.coffee"),l=e("./process/detect.coffee"),u=e("./set.coffee"),c=e("../../string/format.js"),f=e("../../object/validate.coffee"),t.exports=function(e,t){var n,r,s;s=[];for(n in t)r=t[n],e[n]=i(r),e[n].initialized=a(e,e[n],n),s.push(e.self[n]=o(e,n));return s},a=function(e,t,n,r){var i,o,u,d,h;t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=l(e,t,t.value));for(h in t)if("deprecates"===h)for(o=t[h]instanceof Array?t[h]:[t[h]],u=0,d=o.length;d>u;u++)i=o[u],e.self[i]=function(t,n){return function(i){var o,a,l;return l=e.format.locale.value.dev.deprecated,t="."+t+"()",a=r?'"'+n+'" in .'+r+"()":"."+n+"()",o=r||n,s.error(c(l,t,a),o),e.self}}(i,n);else"global"===h?n in e||(e[n]=[]):"value"!==h&&f(t[h])&&a(e,t[h],h,n);return!0},o=function(e,t){return function(n,i){var o,a,l,u,d,h,p,g;if(o="accepted"in e[t]?e[t].accepted:null,"function"==typeof o&&(o=o(e)),o instanceof Array||(o=[o]),n===Object)return e[t];if(!arguments.length&&o.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof n){g=e.format.locale.value.dev.oldStyle;for(h in n)s.warning(c(g,'"'+h+'"',h),h),e.self[h](n[h])}if("font"===t){"string"==typeof n&&(n={family:n}),p=!0,l=function(e,t,n,r){f(e[n])&&t in e[n]&&(f(e[n][t])?e[n][t].process?e[n][t].value=e[n][t].process(r):e[n][t].value=r:e[n][t]=r)},a=function(e,t,n){var r;if(f(e)){if(p)for(r in e)l(e,t,r,n);else"font"in e&&l(e,t,"font",n);p=!1;for(r in e)a(e[r],t,n)}};for(u in n)d=n[u],"secondary"!==u&&(f(d)&&(d=d.value),d&&a(e,u,d))}return r(e,t,e,t,n),"function"==typeof i&&(e[t].callback=i),e[t].chainable===!1?e[t].value:e.self}},r=function(e,t,n,i,o){var a,s,l,c;if(["accepted","changed","initialized","previous","process"].indexOf(i)<0)if(c=f(o),l=f(n[i])&&"objectAccess"in n[i]&&n[i].objectAccess===!1,a=c&&(l||!("value"in o)&&(!f(n[i])||!(d3.keys(o)[0]in n[i]))),null===o||!c||a)u(e,t,n,i,o);else if(c)for(s in o)r(e,t,n[i],s,o[s])}},{"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../console/print.coffee":52,"./process/detect.coffee":87,"./set.coffee":93}],80:[function(e,t,n){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}},{}],81:[function(e,t,n){var r;r=e("../../../client/rtl.coffee"),t.exports=function(e){var t;return t=["left","center","right"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return r?"left"===e?"right":"right"===e?"left":e:e},value:e}}},{"../../../client/rtl.coffee":40}],82:[function(e,t,n){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],83:[function(e,t,n){var r,i;i=e("../../../font/validate.coffee"),r=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],t.exports=function(e){return void 0===e&&(e=r),{process:i,value:e}}},{"../../../font/validate.coffee":102}],84:[function(e,t,n){t.exports=function(e){var t;return t=["top","middle","bottom"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}},{}],85:[function(e,t,n){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],86:[function(e,t,n){t.exports=function(e,t,n){var r;return t.history&&t.history.reset(),e.constructor===String?e.indexOf("/")>=0?(n.url=e,[]):(r=d3.selectAll(e),r.size()?r:(e.indexOf(".")>=0&&(n.url=e),[])):e}},{}],87:[function(e,t,n){var r,i;r=e("../../../util/copy.coffee"),i=e("../../../array/update.coffee"),t.exports=function(e,t,n){return t.process===Array?i(r(t.value),n):"object"==typeof t.process&&"string"==typeof n?t.process[n]:"function"==typeof t.process?t.process(n,e,t):n}},{"../../../array/update.coffee":35,"../../../util/copy.coffee":206}],88:[function(e,t,n){var r;r=e("../../../client/css.coffee"),t.exports=function(e,t,n){return e===!1||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}},{"../../../client/css.coffee":36}],89:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p;if("string"==typeof e){for(e=e.split(" "),n=r=0,a=e.length;a>r;n=++r)p=e[n],e[n]=parseFloat(p,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(h=["top","right","bottom","left"],"number"==typeof e)for(i=0,s=h.length;s>i;i++)d=h[i],t[d]=e;else for(o=0,l=h.length;l>o;o++)d=h[o],t[d]=e[d];for(t.css="",f=[],n=c=0,u=h.length;u>c;n=++c)d=h[n],n&&(t.css+=" "),f.push(t.css+=t[d]+"px");return f}},{}],90:[function(e,t,n){var r,i,o,a;r=e("../../array/contains.coffee"),i=e("../../string/format.js"),o=e("../../string/list.coffee"),a=e("../console/print.coffee"),t.exports=function(e,t,n,s,l){var u,c,f,d,h,p,g,v;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),c=r(t,n),c===!1&&void 0!==n){for(p=[],v=JSON.stringify(n),"string"!=typeof n&&(v='"'+v+'"'),d=0,h=t.length;h>d;d++)u=t[d],"string"==typeof u?p.push('"'+u+'"'):"function"==typeof u?p.push(u.toString().split("()")[0].substring(9)):void 0===u?p.push("undefined"):p.push(JSON.stringify(u));p=o(p,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(g=e.format.locale.value.error.accepted,f=e.format.locale.value.visualization[e.type.value]||e.type.value,a.warning(i(g,v,s,f,p),s)):(g=e.format.locale.value.dev.accepted,a.warning(i(g,v,l,p),s))}return!c}},{"../../array/contains.coffee":33,"../../string/format.js":172,"../../string/list.coffee":173,"../console/print.coffee":52}],91:[function(e,t,n){t.exports=function(e){var t;return t=["auto","optimizeSpeed","crispEdges","geometricPrecision"],t.indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}},{}],92:[function(e,t,n){var r,i;i=e("../../object/validate.coffee"),r=function(e,t){var n;e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1);for(n in e)n.indexOf("d3plus")<0&&i(e[n])&&r(e[n],n)},t.exports=r},{"../../object/validate.coffee":171}],93:[function(e,t,n){var r,i,o,a,s,l,u,c,f;r=e("../../util/copy.coffee"),i=e("../../util/d3selection.coffee"),f=e("../../object/validate.coffee"),o=e("../../object/merge.coffee"),a=e("../console/print.coffee"),s=e("./process/detect.coffee"),l=e("./rejected.coffee"),u=e("../../string/format.js"),c=e("../../array/update.coffee"),t.exports=function(e,t,n,d,h){var p,g,v,m,y,x,b,w,_,k,A,S,z,M;if(S="value"!==d&&d&&d!==t?'"'+d+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",p="value"===d&&"accepted"in n?n.accepted:f(n[d])&&"accepted"in n[d]?n[d].accepted:[h],!l(e,p,h,t,S)){if(f(n[d])&&"value"in n[d]&&(k=d,n=n[d],d="value"),"value"===d&&"process"in n&&(h=s(e,n,h)),n[d]instanceof Array||n[d]!==h||void 0===h){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in e&&"draw"!==t&&(g=r(n),g.method=t,e.history.chain.push(g)),n.previous=n[d],"id"in e&&"value"===d&&"nesting"in n)if("id"!==t){if("object"!=typeof n.nesting&&(n.nesting={}),f(h)){for(x in h)"string"==typeof h[x]&&(h[x]=[h[x]]);n.nesting=o(n.nesting,h),e.id.value in n.nesting||(n.nesting[e.id.value]=h[d3.keys(h)[0]])}else h instanceof Array?n.nesting[e.id.value]=h:n.nesting[e.id.value]=[h];n[d]=n.nesting[e.id.value][0]}else h instanceof Array?(n.nesting=h,"depth"in e&&e.depth.value<h.length?n[d]=h[e.depth.value]:(n[d]=h[0],"depth"in e&&(e.depth.value=0))):(n[d]=h,n.nesting=[h],"depth"in e&&(e.depth.value=0));else"depth"===t?(h>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:0>h?e.depth.value=0:e.depth.value=h,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(_=e.text.nesting[e.id.value],_&&(e.text.nesting[e.id.value]="string"==typeof _?[_]:_,e.text.value=_ instanceof Array?_[0]:_))):f(n[d])&&f(h)?n[d]=o(n[d],h):n[d]=h;"value"===d&&n.global&&(y=n[d].length>0,b=k||d,b in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=c(e.data[b],t))),"value"===d&&n.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&n.changed&&void 0!==n[d]&&(w=n[d]instanceof Array&&n[d].length>10,m=i(n[d]),z="function"==typeof n[d],M=w||m||z?null:"string"==typeof n[d]?n[d]:JSON.stringify(n[d]),null!==M&&M.length<260?(A=e.format.locale.value.dev.setLong,a.log(u(A,S,'"'+M+'"'))):(A=e.format.locale.value.dev.set,a.log(u(A,S))))}else A=e.format.locale.value.dev.noChange,e.dev.value&&a.comment(u(A,S));"value"===d&&n.callback&&!n.url&&(v="function"==typeof n.callback?n.callback:n.callback.value,v&&v(h,e.self))}}},{"../../array/update.coffee":35,"../../object/merge.coffee":170,"../../object/validate.coffee":171,"../../string/format.js":172,"../../util/copy.coffee":206,"../../util/d3selection.coffee":207,"../console/print.coffee":52,"./process/detect.coffee":87,"./rejected.coffee":90}],94:[function(e,t,n){var r=e("../console/print.coffee"),i=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";r.time(t)}var n=e.types[e.type.value].requirements;n instanceof Array||(n=[n]);var o=n.indexOf("nodes")>=0&&!e.nodes.value;if(o){e.nodes.value=[];var a=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(n){var r=typeof t[e.edges[n]];if("object"!==r)if("number"!==r||o||"number"===e.data.keys[e.id.value])if(o&&a.indexOf(t[e.edges[n]])>=0)t[e.edges[n]]=e.nodes.value.filter(function(r){return r[e.id.value]===t[e.edges[n]]})[0];else{var i={};i[e.id.value]=t[e.edges[n]],t[e.edges[n]]=i}else t[e.edges[n]]=e.nodes.value[t[e.edges[n]]];var s=t[e.edges[n]];o&&a.indexOf(s[e.id.value])<0&&(a.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var n=t[e.edges.source][e.id.value],o=t[e.edges.target][e.id.value];if(n===o){var a=e.format.locale.value.dev.sameEdge;return r.warning(i(a,'"'+n+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&r.timeEnd(t)}},{"../../string/format.js":172,"../console/print.coffee":52}],95:[function(e,t,n){var r=e("./hideElement.js");t.exports=function(e){function t(e,t){[].forEach.call(t.attributes,function(t){if(/^data-/.test(t.name)){var n=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[n]=t.value}}),n.forEach(function(n){null!==t.getAttribute(n)&&(e[n]=t.getAttribute(n))})}var n=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];e.text.value||e.self.text("text"),n=n.concat(e.id.nesting),e.self.data({element:e.data.value});var i=e.data.element.value.node().tagName.toLowerCase(),o=e.data.element.value.attr("type"),a=[];if("select"===i){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(n,r){var i={};if(i.text=d3.select(this).text(),t(i,this),a.push(i),this.selected)for(var r=e.id.nesting.length-1;r>=0;r--){var o=e.id.nesting[r];if(o in i){e.self.focus(i[o]);break}}})}else if("input"===i&&"radio"===o){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(n,i){var o={};t(o,this);var s=o[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(o.text=l.html(),l.call(r))}a.push(o),this.checked&&e.self.focus(o[e.id.value])})}!e.focus.value.length&&a.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(a[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(r));var c=!!e.container.value&&e.container.value.node().tagName.toLowerCase();return(e.container.value===!1||"body"===c)&&(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(r),a}},{"./hideElement.js":96}],96:[function(e,t,n){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],97:[function(e,t,n){var r=e("../console/print.coffee");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";r.time(t)}var n=e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length;if(n===e.nodes.value.length)e.nodes.positions=!0;else{var i=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),o=e.edges.strength.value;o&&("string"==typeof o?i.linkStrength(function(e){return e[o]}):i.linkStrength(o));var a=50,s=.01;i.start();for(var l=a;l>0&&(i.tick(),!(i.alpha()<s));--l);i.stop(),e.nodes.positions=!0}e.dev.value&&r.timeEnd(t)}}},{"../console/print.coffee":52}],98:[function(e,t,n){var r;r=e("numeric"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),n=e.length,x=Number.MAX_VALUE,s=null,o=function(){var n,r,i;for(i=[],c=n=1,r=t.maxDegree+1;r>=1?r>n:n>r;c=r>=1?++n:--n)i.push(function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)y=e[n],r.push(Math.pow(y[0],c));return r}());return i}(),z=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)y=e[t],r.push(y[1]);return r}(),d=g=0,w=1<<t.maxDegree;w>=0?w>g:g>w;d=w>=0?++g:--g){for(a=[function(){var e,t,r;for(r=[],b=e=0,t=n;t>=0?t>e:e>t;b=t>=0?++e:--e)r.push(1);return r}()],f=[0],h=m=0,_=t.maxDegree;_>=0?_>m:m>_;h=_>=0?++m:--m)(d&1<<h)>0&&(a.push(o[h]),f.push(h+1));i=r.transpose(a),p=f.length,l=r.dot(r.dot(r.inv(r.dot(a,i)),a),z),M=r.dot(i,l),k=r.sub(z,M),S=r.dot(k,k),A=S/(n-p),v=-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(A)-S/(2*A),u=-2*v+p*(Math.log(n)-Math.log(2*Math.PI)),x>u&&(x=u,s=[f,l,M])}return s}},{numeric:7}],99:[function(e,t,n){var r;r=e("static-kdtree"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p;return null==t&&(t=10),p=r(e),u=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)c=e[n],i.push(p.knn(c,t+1).slice(1));return i}(),h=function(t,n){var r,i,o,a,s,l;for(r=e[t],i=e[n],a=0,t=s=0,l=r.length;l>=0?l>s:s>l;t=l>=0?++s:--s)o=r[t]-i[t],a+=o*o;return a},a=function(){var n,r,o;for(o=[],i=n=0,r=e.length;r>=0?r>n:n>r;i=r>=0?++n:--n)o.push(h(i,u[i][t-1]));return o}(),f=function(e,t){return Math.max(h(e,t),a[t])},s=function(e){var n,r,i,o,a;for(o=0,a=u[e],r=0,i=a.length;i>r;r++)n=a[r],o+=f(e,n);return t/o},l=function(){var t,n,r;for(r=[],i=t=0,n=e.length;n>=0?n>t:t>n;i=n>=0?++t:--t)r.push(s(i));return r}(),d=function(){var r,a,s,c,f,d;for(d=[],i=r=0,c=e.length;c>=0?c>r:r>c;i=c>=0?++r:--r){for(n=0,f=u[i],a=0,s=f.length;s>a;a++)o=f[a],n+=l[o];n/=t,d.push([i,n/l[i]])}return d}(),d.sort(function(e,t){return t[1]-e[1]})}},{"static-kdtree":9}],100:[function(e,t,n){t.exports=function(e){var t,n,r;return n=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-n)})),r=e.map(function(e,r){return[r,Math.abs(e-n)/t]}),r.sort(function(e,t){return t[1]-e[1]})}},{}],101:[function(e,t,n){var r;r=e("../core/font/tester.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c;return n||(n={}),t=t||{},u=n.parent||r("svg").append("text"),s=[],e instanceof Array||(e=[e]),c=u.selectAll("tspan").data(e),i={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in t&&(l=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),a=function(e){var t;return t=0,l&&(t=(d3.select(e).text().length-1)*l),e.getComputedTextLength()+t},o=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height},c.enter().append("tspan").text(String).style(t).attr(i).each(function(e){return"function"==typeof n.mod?n.mod(this):void 0}).each(function(e){var t,n,r;return t=d3.select(this).selectAll("tspan"),t.size()?(r=[],t.each(function(){return r.push(a(this))}),r=d3.max(r)):r=a(this),n=o(this),s.push({height:n,text:e,width:r})}),c.remove(),n.parent||u.remove(),s}},{"../core/font/tester.coffee":68}],102:[function(e,t,n){var r,i;r=e("../core/font/tester.coffee"),i=function(e){var t,n,o,a,s,l,u,c,f,d,h,p,g,v;for(e instanceof Array||(e=e.split(",")),s=0,u=e.length;u>s;s++)o=e[s],o.trim();if(a=e.join(", "),t=i.complete,a in t)return t[a];for(h=function(e){return g.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},p=function(e,t){var n,r,i;return n=h(e),r=n.node().offsetWidth,i=t.node().offsetWidth,n.remove(),r!==i},g=r("div"),f=h("monospace"),d=h("sans-serif"),l=0,c=e.length;c>l;l++)if(n=e[l],v=p(n+",monospace",f),v||(v=p(n+",sans-serif",d)),v){v=n;break}return v||(v="sans-serif"),f.remove(),d.remove(),t[a]=v,v},i.complete={},t.exports=i},{"../core/font/tester.coffee":68}],103:[function(e,t,n){var r=e("../array/sort.coffee"),i=e("../core/methods/attach.coffee"),o=e("../core/data/format.js"),a=e("../core/data/keys.coffee"),s=e("../core/data/load.coffee"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.coffee"),f=e("../core/console/print.coffee");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.coffee"),drop:e("./types/drop/drop.coffee"),toggle:e("./types/toggle.js")}};return t.self=function(e){var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&f.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},a(t,"data"),o(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&r(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),t.focus.value===!1&&["auto","button"].indexOf(t.type.value)<0){var i=t.data.element.value;if(i&&"select"===i.node().tagName.toLowerCase()){var d=i.property("selectedIndex");d=0>d?0:d;var h=i.selectAll("option")[0][d],p=h.getAttribute("data-"+t.id.value)||h.getAttribute(t.id.value);p&&(t.focus.value=p)}t.focus.value===!1&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&t.focus.value!==!1&&f.log('"value" set to "'+t.focus.value+'"')}var g=function(e,n){n="number"!=typeof n?1===t.id.nesting.length?0:t.id.nesting.length-1:n;var r=t.id.nesting[n];return n>0&&(!(r in e)||e[r]instanceof Array)?g(e,n-1):r};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&f.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&f.log("Search disabled.")):t.search.enabled=t.search.value;var v=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===v){var m=[];for(var y in t.data.nested.all)m=m.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(m,function(e){var t=!!e&&g(e);return!!(e&&t in e)&&e[t]}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var n=g(e),r=n===t.id.value?t.text.value||t.id.value:t.text.nesting!==!0&&n in t.text.nesting?t.text.nesting[n]:n;for(var i in e)"object"!=typeof e[i]&&(i===r&&d3.select(this).html(e[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,e[i]):d3.select(this).attr("data-"+i,e[i]));e[n]===t.focus.value?this.selected=!0:this.selected=!1})}}else if(t.focus.changed&&t.data.element.value){var x=t.data.element.value.node().tagName.toLowerCase();if("select"===x)t.data.element.value.selectAll("option").each(function(e){e[g(e)]===t.focus.value?this.selected=!0:this.selected=!1});else{var x=t.data.element.value.attr("type").toLowerCase();"radio"===x&&t.data.element.value.each(function(e){this.value===t.focus.value?this.checked=!0:this.checked=!1})}}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3plus_"+t.type.value+"_"+t.container.id).data(["container"]);var b=t.data.element.value?t.data.element.value[0][0]:null;if(b)if(b.id)b="#"+b.id;else{var w=b.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;b=b.getAttribute(w)?"["+w+"="+b.getAttribute(w)+"]":null}t.container.ui.enter().insert("div",b).attr("id","d3plus_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var _=t.container.ui.selectAll("div.d3plus_title").data(t.title.value?[t.title.value]:[]);_.enter().insert("div","#d3plus_"+t.type.value+"_"+t.container.id).attr("class","d3plus_title").style("display","inline-block"),_.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var k=t.format.locale.value.visualization[t.type.value];t.dev.value&&f.time("drawing "+k),t.types[t.type.value](t),t.dev.value&&f.timeEnd("drawing "+k)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&f.timeEnd("total draw time"),c(t)}},i(t,{active:e("./methods/active.coffee"),alt:e("./methods/alt.coffee"),color:e("./methods/color.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),data:e("./methods/data.js"),depth:e("./methods/depth.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),hover:e("./methods/hover.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),keywords:e("./methods/keywords.coffee"),margin:e("./methods/margin.coffee"),open:e("./methods/open.coffee"),order:e("./methods/order.coffee"),remove:e("./methods/remove.coffee"),search:e("./methods/search.coffee"),select:e("./methods/select.coffee"),selectAll:e("./methods/selectAll.coffee"),text:e("./methods/text.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee")}),t.self}},{"../array/sort.coffee":34,"../client/ie.js":37,"../core/console/print.coffee":52,"../core/data/format.js":56,"../core/data/keys.coffee":58,"../core/data/load.coffee":59,"../core/fetch/data.js":64,"../core/methods/attach.coffee":79,"../core/methods/reset.coffee":92,"./methods/active.coffee":104,"./methods/alt.coffee":105,"./methods/color.coffee":106,"./methods/config.coffee":107,"./methods/container.coffee":108,"./methods/data.js":109,"./methods/depth.coffee":110,"./methods/dev.coffee":111,"./methods/draw.js":112,"./methods/focus.coffee":113,"./methods/font.coffee":114,"./methods/format.coffee":115,"./methods/height.coffee":116,"./methods/history.coffee":117,"./methods/hover.coffee":118,"./methods/icon.coffee":119,"./methods/id.coffee":120,"./methods/keywords.coffee":121,"./methods/margin.coffee":122,"./methods/open.coffee":123,"./methods/order.coffee":124,"./methods/remove.coffee":125,"./methods/search.coffee":126,"./methods/select.coffee":127,"./methods/selectAll.coffee":128,"./methods/text.coffee":129,"./methods/timing.coffee":130,"./methods/title.coffee":131,"./methods/type.coffee":132,"./methods/ui.coffee":133,"./methods/width.coffee":134,"./types/auto.js":135,"./types/button/button.coffee":136,"./types/drop/drop.coffee":141,"./types/toggle.js":158}],104:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":80}],105:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"alt"}},{"../../core/methods/filter.coffee":80}],106:[function(e,t,n){t.exports={accepted:[String],value:"color"}},{}],107:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],108:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?d3.select("body"):r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e)},value:d3.select("body")}},{"../../util/d3selection.coffee":207}],109:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),i(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":86,"../../util/d3selection.coffee":207}],110:[function(e,t,n){t.exports={accepted:[Number],value:0}},{}],111:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],112:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/parse/hideElement.js"),o=e("../../core/parse/element.js"),a=e("../../core/console/print.coffee"),s=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!r(t.data.value)?t.data.element.value&&t.data.element.value.call(i):t.data.value=o(t),void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;a.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;a.warning(s(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&a.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var l={};changes.forEach(function(e){var t=e.method;delete e.method,l[t]=e}),e(l),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../core/parse/element.js":95,"../../core/parse/hideElement.js":96,"../../string/format.js":172,"../../util/d3selection.coffee":207}],113:[function(e,t,n){t.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(e,t){var n,r,i,o,a,s,l,u,c,f;if(r=t.data.element.value,r&&["string","number"].indexOf(typeof e)>=0)if(i=r.node().tagName.toLowerCase(),o=r.attr("type"),"select"===i)for(f=r.selectAll("option"),a=s=0,u=f.length;u>s;a=++s)n=f[a],n&&n[t.id.value]===e&&(r.node().selectedIndex=a);else if("input"===i&&"radio"===o)for(l=0,c=r.length;c>l;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}},{}],114:[function(e,t,n){var r,i,o,a;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:o(),secondary:{align:r(),color:"#444444",decoration:i(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],115:[function(e,t,n){var r,i,o,a;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),o=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=o(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,o;return t||(t={}),o=t.vars||{},
o.time&&o.time.value&&t.key===o.time.value?(i=e.constructor===Date?e:new Date(e),o.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],116:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],117:[function(e,t,n){t.exports={back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}},{}],118:[function(e,t,n){t.exports={accepted:[Boolean,Number,String],value:!1}},{}],119:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:r,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:r,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":88}],120:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,mute:r(!0),nesting:["value"],solo:r(!0),value:"value"}},{"../../core/methods/filter.coffee":80}],121:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"keywords"}},{"../../core/methods/filter.coffee":80}],122:[function(e,t,n){var r;r=e("../../core/methods/process/margin.coffee"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}},{"../../core/methods/process/margin.coffee":89}],123:[function(e,t,n){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],124:[function(e,t,n){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],125:[function(e,t,n){t.exports={accepted:void 0,process:function(e,t){this.initialized&&t.container.value.remove()},value:void 0}},{}],126:[function(e,t,n){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}},{}],127:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.select(e):e},value:void 0}},{}],128:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.selectAll(e):e},value:void 0}},{}],129:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,String],nesting:!0,mute:r(!0),solo:r(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],130:[function(e,t,n){t.exports={mouseevents:60,ui:200}},{}],131:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),o=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:a(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=o(e).toLowerCase(),t.self.container({id:n})),e},value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],132:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}},{}],133:[function(e,t,n){var r,i,o,a,s;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/process/margin.coffee"),s=e("../../core/methods/font/transform.coffee"),t.exports={align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:r("center"),color:"#444",decoration:i(),family:o(),size:11,transform:s(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5}}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../core/methods/process/margin.coffee":89}],134:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],135:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():5>t?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],136:[function(e,t,n){t.exports=function(t){var n,r,i,o,a,s,l,u;return s=e("../../../core/console/print.coffee"),i=e("./functions/color.coffee"),o=e("./functions/icons.js"),a=e("./functions/mouseevents.coffee"),l=e("./functions/style.js"),n=t.container.ui.selectAll("div.d3plus_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(i,t).call(l,t).call(o,t).call(a,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),n.order(),t.dev.value&&s.timeEnd("ordering"),u=n):(r=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=n.filter(function(e){return r.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),u.classed("d3plus_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?u.transition().duration(t.draw.timing).call(i,t).call(l,t):u.call(i,t).call(l,t),u.call(o,t).call(a,t),t.dev.value&&s.timeEnd("update"),n.exit().remove()}},{"../../../core/console/print.coffee":52,"./functions/color.coffee":137,"./functions/icons.js":138,"./functions/mouseevents.coffee":139,"./functions/style.js":140}],137:[function(e,t,n){t.exports=function(t,n){var r,i,o;return r=e("../../../../color/legible.coffee"),i=e("../../../../color/lighter.coffee"),o=e("../../../../color/text.coffee"),t.style("background-color",function(e){var t;return t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),t}).style("color",function(e){var t,i,a,s;return s=n.focus.value===e[n.id.value]?.75:1,a=e[n.icon.value]&&n.data.viz.length<n.data.large,!a&&e[n.color.value]?i=r(e[n.color.value]):(t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),i=o(t)),i=d3.rgb(i),"rgba("+i.r+","+i.g+","+i.b+","+s+")"}).style("border-color",n.ui.color.secondary.value)}},{"../../../../color/legible.coffee":44,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50}],138:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../client/rtl.coffee");t.exports=function(e,t){var n="right"===t.font.align.value&&!i||i&&"right"===t.font.align.value;e.each(function(e,o){var a=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&a.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,a.push("selected")):s&&e.d3plus.icon!==!1&&a.push("selected");var l=0,u=d3.select(this).selectAll("div.d3plus_button_element").data(a,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3plus_button_element d3plus_button_"+e+t}).html(function(n){if("label"===n){var r=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[r])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border,l+"px")}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)var n=t.font.size;else var n=l;return-n/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!n||"selected"===e&&n?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&n||"selected"===e&&!n?t.ui.padding.right+"px":"auto"}).style(r()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(r()+"transform",function(e){var n="selected"===e?t.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3plus_button_label");if(l>0){var f=t.ui.padding;f=3===a.length?f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+(2*f.left+l)+"px":a.indexOf("icon")>=0&&!i||a.indexOf("selected")>=0&&i?f.top+"px "+f.right+"px "+f.bottom+"px "+(2*f.left+l)+"px":f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+f.left+"px",c.style("padding",f)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var d=t.width.value;d-=parseFloat(c.style("padding-left"),10),d-=parseFloat(c.style("padding-right"),10),d-=2*t.ui.border,d+="px"}else var d="auto";c.style("width",d)})}},{"../../../../client/prefix.coffee":39,"../../../../client/rtl.coffee":40}],139:[function(e,t,n){t.exports=function(t,n,r){var i,o;return r=e("./color.coffee"),i=e("../../../../client/pointer.coffee"),o=e("../../../../client/ie.js"),t.on(i.over,function(e,t){return n.self.hover(e[n.id.value]),o||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.out,function(e){return n.self.hover(!1),o||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.click,function(e){return n.focus.value!==!1?n.self.focus(e[n.id.value]).draw():n.focus.callback?n.focus.callback(e,n.self):void 0})}},{"../../../../client/ie.js":37,"../../../../client/pointer.coffee":38,"./color.coffee":137}],140:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],141:[function(e,t,n){t.exports=function(t){var n,r,i,o,a,s,l,u,c,f,d;return i=e("./functions/element.coffee"),o=e("./functions/keyboard.coffee"),d=e("./functions/window.js"),f=e("./functions/width.js"),n=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),a=e("./functions/list.js"),r=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,i(t),o(t),d(t),f(t),n(t),l(t),u(t),s(t),a(t),r(t),c(t)}},{"./functions/button.js":144,"./functions/data.js":145,"./functions/element.coffee":146,"./functions/keyboard.coffee":149,"./functions/list.js":150,"./functions/search.js":152,"./functions/selector.js":153,"./functions/title.js":154,"./functions/update.js":155,"./functions/width.js":156,"./functions/window.js":157}],142:[function(e,t,n){t.exports=function(e,t,n){var r=[],n=n||e.active.value;if(n instanceof Array)for(var i=0;i<n.length;i++)r.push(this(e,t,n[i]));else{var o=typeof n;"number"===o?r.push(e.depth.value===n):"function"===o?r.push(n(t)):r.push(t===n)}return r.indexOf(!0)>=0}},{}],143:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else var n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":52}],144:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../client/pointer.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee");t.exports=function(e){if("button"in e.container||(e.dev.value&&a.time("creating main button"),e.container.button=o().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&a.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,n=r(e.data.value.filter(function(n){for(var r=!1,i=0;i<e.id.nesting.length;i++){var o=e.id.nesting[i];if(r=o in n&&n[o]===e.focus.value){t=i;break}}return r})[0]);n||(n=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([n]).id(e.id.nesting).depth(t)}var s=e.hover.value===!0&&e.focus.value;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).format(e.format).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({border:e.ui.border,color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(i.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.coffee":38,"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103}],145:[function(e,t,n){var r=e("../../../../string/format.js"),i=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var n=i(e.search.term).split("_"),o=[e.id.value,e.text.value,e.alt.value,e.keywords.value];o=o.filter(function(e){return e}),n=n.filter(function(e){return""!==e});var a=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var r=!1;o.forEach(function(o){if(!r&&o in t&&"string"==typeof t[o]){var u=t[o].toLowerCase();if([e.text.value,e.id.value].indexOf(o)>=0&&0===u.indexOf(e.search.term))a.push(t),r=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),r=!0;else{var c=i(u).split("_");for(var f in c){if(r)break;for(var d in n)if(0===c[f].indexOf(n[d])){l.push(t),r=!0;break}}}}})}),e.data.filtered=d3.merge([a,s,l]),e.data.filtered.forEach(function(e,t){e.d3plus_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},f=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=r(f,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":172,"../../../../string/strip.js":174}],146:[function(e,t,n){t.exports=function(e){return e.data.element.value?(e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){var t;return t=!e.search.enabled||d3.event.relatedTarget!==e.container.value.select("input").node(),t?e.self.open(!1).hover(!1).draw():void 0}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){return 9!==d3.event.keyCode?d3.event.preventDefault():void 0})):void 0}},{}],147:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],148:[function(e,t,n){var r,i,o,a;r=e("./active.js"),i=e("../../../../util/copy.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,s;e.open.value&&(e.dev.value&&a.time("updating list items"),"items"in e.container||(e.container.items=o().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),n=e.draw.timing?e.data.large:1,s=i(e.order),s.value=e.search.term.length?"d3plus_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||e.container.items.focus()===!1)&&e.container.items.focus(e.focus.value,function(t){var n,i,o,a;i=e.data.filtered.filter(function(n){return n[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in i?(o=e.depth.value,a=e.id.solo.value,e.history.states.push(function(){return e.self.depth(o).id({solo:a}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),n=t!==e.focus.value,n&&e.active.value&&(n=r(e,t)),n&&e.self.focus(t).draw())}),e.container.items.active(e.active.value).data({large:n,sort:e.data.sort.value,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).format(e.format).hover(e.hover.value).id(e.id.value).icon({button:!t&&e.icon.next,select:!!t&&e.icon.select,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&a.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":52,"../../../../util/copy.coffee":206,"../../../form.js":103,"./active.js":142}],149:[function(e,t,n){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,n,r,i,o,a,s,l,u,c,f,d,h;if(u=d3.event.keyCode,e.open.value||e.hover.value===!0){for(f=e.hover.value===!0?"focus":"hover",s=!1,d=e.data.filtered,a=l=0,c=d.length;c>l;a=++l)if(t=d[a],t[e.id.value]===e[f].value){s=a;break}if(9===u&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(u)>=0)return s===!1?s=0:38===u?e.open.value&&(0>=s?s=e.data.filtered.length-1:s-=1):40===u&&e.open.value&&(s>=e.data.filtered.length-1?s=0:s+=1),o="boolean"!=typeof e.hover.value?e.data.filtered[s][e.id.value]:e.focus.value,e.self.hover(o).open(!0).draw();if(13===u)return"boolean"!=typeof e.hover.value?(n=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],r=e.depth.value,r<e.id.nesting.length-1&&e.id.nesting[r+1]in n?(h=e.id.solo.value,i=function(){return e.self.depth(r).id({solo:h}).draw()},e.history.states.push(i),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===u){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(e.hover.value===!0)return e.self.hover(!1).draw()}}})}},{}],150:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.coffee":52}],151:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){if(e.open.value){e.dev.value&&r.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))var t=!0;t&&e.container.selector.style("display","block");var n=e.container.selector.style("height"),i=e.container.selector.property("scrollTop"),o=e.container.list.style("max-height"),a=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",o).property("scrollTop",a),e.container.selector.style("height",n).property("scrollTop",i);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&r.timeEnd("calculating height"),s){e.dev.value&&r.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3plus_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,n){t[e.id.value]===c&&(u=this)});var t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var f=u.offsetTop,d=u.offsetHeight||u.getBoundingClientRect().height,h=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=f:(e.container.listScroll=h,h>f?e.container.listScroll=f:f+d>h+e.height.secondary-e.search.height&&(e.container.listScroll=f-(e.height.secondary-d-e.search.height))),e.dev.value&&r.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.coffee":52}],152:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../core/console/print.coffee");t.exports=function(t){function n(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).toString())}function o(e){var n=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(r()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.dev.value&&i.time("creating search");var a=e("./data.js"),s=e("./items.coffee"),l=e("./update.js");t.container.search=t.container.selector.selectAll("div.d3plus_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(n),t.container.search.select("input").transition().duration(t.draw.timing).call(o)):(t.container.search.call(n),t.container.search.select("input").call(o)),t.container.search.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+t.container.id).call(n).append("input").attr("id","d3plus_drop_input_"+t.container.id).style("-webkit-appearance","none").call(o),t.container.search.select("input").on("keyup."+t.container.id,function(e){var n=this.value;t.search.term!==n&&(t.search.term=n,a(t),s(t),l(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&i.timeEnd("creating search")}},{"../../../../client/prefix.coffee":39,"../../../../core/console/print.coffee":52,"./data.js":145,"./items.coffee":148,"./update.js":155}],153:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],154:[function(e,t,n){var r=e("../../../../client/pointer.coffee"),i=e("../../../../color/lighter.coffee"),o=e("../../../../core/console/print.coffee"),a=e("../../../../color/text.coffee");t.exports=function(e){function t(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",a(e.ui.color.secondary.value))}function n(t){if(!t.empty()){var n=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";n="d3plus_drop_back"+n;var r=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",n).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(r)}}function s(t){var n=u?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(n)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}if(e.open.value){e.dev.value&&o.time("creating title and back button");var l=1===e.id.solo.value.length&&e.depth.value>0,u=l,c=e.container.button.data(Object).viz[0];u=!0;for(var f=0;f<e.id.nesting.length;f++){var d=e.id.nesting[f];if(d in c&&c[d]===e.focus.value){u=!1;break}}e.container.title=e.container.selector.selectAll("div.d3plus_drop_title").data(l?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(t),e.container.title.select("div.d3plus_drop_title_text").transition().duration(e.draw.timing).call(s)):(e.container.title.call(t),e.container.title.select("div.d3plus_drop_title_text").call(s)),e.container.title.select("span.d3plus_drop_back").call(n);var h=e.container.title.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+e.container.id).call(t);h.append("span").attr("id","d3plus_drop_back_"+e.container.id).attr("class","d3plus_drop_back").call(n),h.append("div").attr("id","d3plus_drop_title_text_"+e.container.id).attr("class","d3plus_drop_title_text").call(s),e.container.title.on(r.over,function(t,n){var r=i(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",a(r))}).on(r.out,function(t){var n=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",a(n))}).on(r.click,function(t){e.history.back()}),e.container.title.exit().remove(),l&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&o.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":38,"../../../../color/lighter.coffee":45,"../../../../color/text.coffee":50,"../../../../core/console/print.coffee":52}],155:[function(e,t,n){var r=e("./items.coffee"),i=e("./height.js"),o=e("../../../../core/console/print.coffee"),a=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var n=e.open.flipped.value;t.style("top",function(){return n?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return n?e.margin.top+e.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(n){n.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3plus_drop_search input").node().focus()}function u(e){return function(){var t=d3.interpolateNumber(this.scrollTop,e);return function(e){this.scrollTop=t(e)}}}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),r(e),i(e),a(e),s(e),e.dev.value&&o.time("drawing list");var c=e.open.value?e.height.secondary-e.margin.title:0;e.draw.timing?(e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",u(e.container.listScroll))):(e.container.selector.call(n).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll)),e.dev.value&&o.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":52,"./arrow.js":143,"./height.js":147,"./items.coffee":148,"./scroll.js":151}],156:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../core/font/tester.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),s=e("../../../../object/validate.coffee");t.exports=function(e){function t(t){var r="primary"===t?"value":t,s="value"===r?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===r?e.text.value:e.text.secondary.value||e.text.value,u="value"===r?e.font:e.font.secondary;e.dev.value&&a.time("calculating "+t+" width");var c=o().container(i()).data({large:9999,value:n}).draw({update:!1}).font(u).format(e.format).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===t?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),f=[];c.selectAll("div.d3plus_node").each(function(e){f.push(this.offsetWidth+1)}).remove();var d={};d[r]=d3.max(f),e.self.width(d),e.dev.value&&a.timeEnd("calculating "+t+" width")}var n=[];for(var l in e.data.nested.all){var u=e.data.nested.all[l],c=s(e.text.nesting)&&l in e.text.nesting?e.text.nesting[l][0]:l;
[e.id.value,e.text.value].indexOf(c)<0&&(u=r(u),u.forEach(function(t){t[e.text.value||e.id.value]=t[c]})),n=n.concat(u)}"number"!=typeof e.width.value&&t("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?t("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.coffee":52,"../../../../core/font/tester.coffee":68,"../../../../object/validate.coffee":171,"../../../../util/copy.coffee":206,"../../../form.js":103}],157:[function(e,t,n){var r=e("../../../../util/child.coffee"),i=function(e,t){if(void 0===t)var t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,n=t.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(t=n.parentNode),t&&n&&!r(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(o){var n=!1}n&&t.self!==window.top&&i(e,t.parent)};t.exports=i},{"../../../../util/child.coffee":204}],158:[function(e,t,n){var r=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=r().container(e.container.ui).type("button"));var t=e.data.viz.length,n=!!e.width.value&&e.width.value/t,i=e.container.ui.selectAll("div.d3plus_toggle").data(e.data.viz,function(t){return t[e.id.value]});i.exit().remove(),i.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),i.order().each(function(t){"form"in t.d3plus||(t.d3plus.form=r().container(d3.select(this)));var i=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[i]instanceof Array?t.d3plus.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[i]).id(e.id.nesting.slice(1)).type("drop"):t.d3plus.form.data([t]).id(e.id.value).type("button"),t.d3plus.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(n).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":103}],159:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h;d=e("simplify-js"),t.exports=function(e,t){var n,i,a,l,u,f,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,fe,de,he,pe,ge,ve,me,ye,xe,be;if(e.length<3)return null;if(w=[],g=.5,u=5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?f=t.angle:"number"==typeof t.angle?f=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(f=[Number(t.angle)])),null==f&&(f=d3.range(-90,90+u,u)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?v=t.aspectRatio:"number"==typeof t.aspectRatio?v=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(v=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(J=t.origin[0]instanceof Array?t.origin:[t.origin]),p=Math.abs(d3.geom.polygon(e).area()),0===p)return null;if(ne=d3.extent(e,function(e){return e[0]}),$=ne[0],L=ne[1],re=d3.extent(e,function(e){return e[1]}),H=re[0],B=re[1],ve=Math.min(L-$,B-H)*t.tolerance,ge=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)G=e[t],r.push({x:G[0],y:G[1]});return r}(),ve>0&&(ge=d(ge,ve),e=function(){var e,t,n;for(n=[],e=0,t=ge.length;t>e;e++)G=ge[e],n.push([G.x,G.y]);return n}()),t.vdebug&&w.push({type:"simplify",poly:e}),ie=d3.extent(e,function(e){return e[0]}),$=ie[0],L=ie[1],oe=d3.extent(e,function(e){return e[1]}),H=oe[0],B=oe[1],m=[[$,H],[L,H],[L,B],[$,B]],ae=[L-$,B-H],x=ae[0],y=ae[1],ye=Math.min(x,y)/50,null==J)for(J=[],b=d3.geom.polygon(e).centroid(),o(b,e)&&J.push(b);J.length<t.nTries;)he=Math.random()*x+$,pe=Math.random()*y+H,de=[he,pe],o(de,e)&&J.push(de);for(t.vdebug&&w.push({type:"origins",points:J}),N=0,I=null,S=0,T=f.length;T>S;S++)for(a=f[S],l=-a*Math.PI/180,t.vdebug&&w.push({type:"angle",angle:a}),k=z=0,E=J.length;E>z;k=++z)for(W=J[k],se=r(e,W,l),Z=se[0],ee=se[1],le=r(e,W,l+Math.PI/2),Q=le[0],K=le[1],Y=[],null!=Z&&null!=ee&&Y.push([(Z[0]+ee[0])/2,(Z[1]+ee[1])/2]),null!=Q&&null!=K&&Y.push([(Q[0]+K[0])/2,(Q[1]+K[1])/2]),t.vdebug&&w.push({type:"modifOrigin",idx:k,p1W:Z,p2W:ee,p1H:Q,p2H:K,modifOrigins:Y}),M=0,j=Y.length;j>M;M++)if(X=Y[M],t.vdebug&&w.push({type:"origin",cx:X[0],cy:X[1]}),ue=r(e,X,l),Z=ue[0],ee=ue[1],null!==Z&&null!==ee&&(V=Math.min(h(X,Z),h(X,ee)),R=2*Math.sqrt(V),ce=r(e,X,l+Math.PI/2),Q=ce[0],K=ce[1],null!==Q&&null!==K&&(U=Math.min(h(X,Q),h(X,K)),F=2*Math.sqrt(U),!(N>R*F))))for(null!=v?i=v:(q=Math.max(1,t.minWidth/F,N/(F*F)),P=Math.min(t.maxAspectRatio,R/t.minHeight,R*R/N),i=d3.range(q,P+g,g)),O=0,D=i.length;D>O;O++)if(n=i[O],C=Math.max(t.minWidth,Math.sqrt(N*n)),fe=Math.min(R,F*n),!(N>fe*F))for(fe-C>=ye&&t.vdebug&&w.push({type:"aRatio",aRatio:n});fe-C>=ye;)me=(C+fe)/2,_=me/n,xe=X[0],be=X[1],te=[[xe-me/2,be-_/2],[xe+me/2,be-_/2],[xe+me/2,be+_/2],[xe-me/2,be+_/2]],te=c(te,l,X),s(te,e)?(A=!0,N=me*_,I={cx:xe,cy:be,width:me,height:_,angle:a},C=me):(A=!1,fe=me),t.vdebug&&w.push({type:"rectangle",cx:xe,cy:be,width:me,height:_,areaFraction:me*_/p,angle:a,insidePoly:A});return[I,N,w]},h=function(e,t){var n,r;return n=t[0]-e[0],r=t[1]-e[1],n*n+r*r},l=function(e,t,n){var r,i,o,a,s;return s=t[1]<n[1]?[t,n]:[n,t],r=s[0],i=s[1],(e[1]===i[1]||e[1]===r[1])&&(e[1]+=Number.MIN_VALUE),!(e[1]>i[1]||e[1]<r[1])&&(!(e[0]>r[0]&&e[0]>i[0])&&(e[0]<r[0]&&e[0]<i[0]||(o=(i[1]-r[1])/(i[0]-r[0]),a=(e[1]-r[1])/(e[0]-r[0]),a>o)))},o=function(e,t){var n,r,i,o,a;for(o=-1,a=t.length,r=t[a-1],i=0;++o<a;)n=r,r=t[o],l(e,n,r)&&i++;return i%2!==0},a=function(e,t,n){var r,i,o;return r=1e-9,i=e[0],o=e[1],!(i<Math.min(t[0],n[0])-r||i>Math.max(t[0],n[0])+r||o<Math.min(t[1],n[1])-r||o>Math.max(t[1],n[1])+r)},i=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h;return f=1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],c=n[1]-r[1],a=s*c-u*l,Math.abs(a)<f?null:(i=e[0]*t[1]-e[1]*t[0],o=n[0]*r[1]-n[1]*r[0],d=(i*l-o*s)/a,h=(i*c-o*u)/a,[d,h])},f=function(e,t,n,r){var o;return o=i(e,t,n,r),null!=o&&(a(o,e,t)&&a(o,n,r))},s=function(e,t){var n,r,i,a,s,l,u,c;for(s=-1,u=e.length,c=t.length,i=e[u-1];++s<u;)for(n=i,i=e[s],l=-1,a=t[c-1];++l<c;)if(r=a,a=t[l],f(n,i,r,a))return!1;return o(e[0],t)},u=function(e,t,n){var r,i,o,a;return null==n&&(n=[0,0]),o=e[0]-n[0],a=e[1]-n[1],r=Math.cos(t),i=Math.sin(t),[r*o-i*a+n[0],i*o+r*a+n[1]]},c=function(e,t,n){var r,i,o,a;for(a=[],r=0,i=e.length;i>r;r++)o=e[r],a.push(u(o,t,n));return a},r=function(e,t,n){var r,o,s,l,u,c,f,d,p,g,v,m,y,x,b;for(u=1e-9,t=[t[0]+u*Math.cos(n),t[1]+u*Math.sin(n)],x=t[0],b=t[1],m=[x+Math.cos(n),b+Math.sin(n)],f=0,Math.abs(m[0]-x)<u&&(f=1),c=-1,g=e.length,o=e[g-1],d=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++c<g;)r=o,o=e[c],v=i(t,m,r,o),null!=v&&a(v,r,o)&&(y=h(t,v),v[f]<t[f]?d>y&&(d=y,s=v):v[f]>t[f]&&p>y&&(p=y,l=v));return[s,l]}},{"simplify-js":8}],160:[function(e,t,n){t.exports=function(e,t,n){var r,i,o,a;return i={x:0,y:0},0>e&&(e=2*Math.PI+e),"square"===n?(o=45*(Math.PI/180),e<=Math.PI?e<Math.PI/2?o>e?(i.x+=t,a=Math.tan(e)*t,i.y+=a):(i.y+=t,r=t/Math.tan(e),i.x+=r):e<Math.PI-o?(i.y+=t,r=t/Math.tan(Math.PI-e),i.x-=r):(i.x-=t,a=Math.tan(Math.PI-e)*t,i.y+=a):e<3*Math.PI/2?e<o+Math.PI?(i.x-=t,a=Math.tan(e-Math.PI)*t,i.y-=a):(i.y-=t,r=t/Math.tan(e-Math.PI),i.x-=r):e<2*Math.PI-o?(i.y-=t,r=t/Math.tan(2*Math.PI-e),i.x+=r):(i.x+=t,a=Math.tan(2*Math.PI-e)*t,i.y-=a)):(i.x+=t*Math.cos(e),i.y+=t*Math.sin(e)),i}},{}],161:[function(e,t,n){var r;r=e("../geom/offset.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f,d,h,p,g,v,m;if(!e)return[];for(e=e.slice(1).slice(0,-1).split(/L|A/),f=[],i=0,a=e.length;a>i;i++)if(c=e[i],c=c.split(" "),1===c.length)f.push(c[0].split(",").map(function(e){return parseFloat(e)}));else{for(d=f[f.length-1],o=c.pop().split(",").map(function(e){return parseFloat(e)}),h=parseFloat(c.shift().split(",")[0]),m=Math.sqrt(Math.pow(o[0]-d[0],2)+Math.pow(o[1]-d[1],2)),t=Math.acos((h*h+h*h-m*m)/(2*h*h)),u="1"===c[1].split(",")[0],u&&(t=2*Math.PI-t),s=t/(2*Math.PI)*(h*Math.PI*2),p=s/5,g=Math.atan2(-d[1],-d[0])-Math.PI,v=t/p,n=v;t>n;)l=r(g+n,h),f.push([l.x,l.y]),n+=v;f.push(o)}return f}},{"../geom/offset.coffee":160}],162:[function(e,t,n){var r,i,o;r={},r.version="1.9.3 - Cornflower",r.repo="https://github.com/alexandersimoes/d3plus/",r.array={comparator:e("./array/comparator.coffee"),contains:e("./array/contains.coffee"),sort:e("./array/sort.coffee"),update:e("./array/update.coffee")},r.client={css:e("./client/css.coffee"),ie:e("./client/ie.js"),pointer:e("./client/pointer.coffee"),prefix:e("./client/prefix.coffee"),rtl:e("./client/rtl.coffee"),scroll:e("./client/scroll.js"),scrollbar:e("./client/scrollbar.coffee"),touch:e("./client/touch.coffee")},r.color={legible:e("./color/legible.coffee"),lighter:e("./color/lighter.coffee"),mix:e("./color/mix.coffee"),random:e("./color/random.coffee"),scale:e("./color/scale.coffee"),sort:e("./color/sort.coffee"),text:e("./color/text.coffee"),validate:e("./color/validate.coffee")},r.data={bestRegress:e("./data/bestRegress.coffee"),lof:e("./data/lof.coffee"),mad:e("./data/mad.coffee")},r.font={sizes:e("./font/sizes.coffee"),validate:e("./font/validate.coffee")},r.form=e("./form/form.js"),r.geom={largestRect:e("./geom/largestRect.coffee"),offset:e("./geom/offset.coffee"),path2poly:e("./geom/path2poly.coffee")},r.network={cluster:e("./network/cluster.coffee"),distance:e("./network/distance.coffee"),normalize:e("./network/normalize.coffee"),shortestPath:e("./network/shortestPath.coffee"),smallestGap:e("./network/smallestGap.coffee"),subgraph:e("./network/subgraph.coffee")},r.number={format:e("./number/format.coffee")},r.object={merge:e("./object/merge.coffee"),validate:e("./object/validate.coffee")},r.string={format:e("./string/format.js"),list:e("./string/list.coffee"),strip:e("./string/strip.js"),title:e("./string/title.coffee")},r.textwrap=e("./textwrap/textwrap.coffee"),r.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.coffee"),remove:e("./tooltip/remove.coffee")},r.util={buckets:e("./util/buckets.coffee"),child:e("./util/child.coffee"),closest:e("./util/closest.coffee"),copy:e("./util/copy.coffee"),d3selection:e("./util/d3selection.coffee"),dataurl:e("./util/dataURL.coffee"),uniques:e("./util/uniques.coffee")},r.viz=e("./viz/viz.coffee"),o=e("./client/css.coffee"),i=e("./core/console/print.coffee"),o("d3plus.css")&&i.warning("d3plus.css has been deprecated, you do not need to load this file.",r.repo+"releases/tag/v1.4.0"),"undefined"!=typeof window&&(window.d3plus=r),t.exports=r},{"./array/comparator.coffee":32,"./array/contains.coffee":33,"./array/sort.coffee":34,"./array/update.coffee":35,"./client/css.coffee":36,"./client/ie.js":37,"./client/pointer.coffee":38,"./client/prefix.coffee":39,"./client/rtl.coffee":40,"./client/scroll.js":41,"./client/scrollbar.coffee":42,"./client/touch.coffee":43,"./color/legible.coffee":44,"./color/lighter.coffee":45,"./color/mix.coffee":46,"./color/random.coffee":47,"./color/scale.coffee":48,"./color/sort.coffee":49,"./color/text.coffee":50,"./color/validate.coffee":51,"./core/console/print.coffee":52,"./data/bestRegress.coffee":98,"./data/lof.coffee":99,"./data/mad.coffee":100,"./font/sizes.coffee":101,"./font/validate.coffee":102,"./form/form.js":103,"./geom/largestRect.coffee":159,"./geom/offset.coffee":160,"./geom/path2poly.coffee":161,"./network/cluster.coffee":163,"./network/distance.coffee":164,"./network/normalize.coffee":165,"./network/shortestPath.coffee":166,"./network/smallestGap.coffee":167,"./network/subgraph.coffee":168,"./number/format.coffee":169,"./object/merge.coffee":170,"./object/validate.coffee":171,"./string/format.js":172,"./string/list.coffee":173,"./string/strip.js":174,"./string/title.coffee":175,"./textwrap/textwrap.coffee":199,"./tooltip/create.js":200,"./tooltip/move.coffee":201,"./tooltip/remove.coffee":202,"./util/buckets.coffee":203,"./util/child.coffee":204,"./util/closest.coffee":205,"./util/copy.coffee":206,"./util/d3selection.coffee":207,"./util/dataURL.coffee":208,"./util/uniques.coffee":209,"./viz/viz.coffee":332}],163:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N;if(g=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(j=r(e,t),e=j[0],t=j[1],null===t))return null;d=t.distance,C=t.nodeid,N=t.startpoint,p=t.endpoint,T=t.nodes,E={};for(m in T)E[m]={node:T[m].node,degree:0};for(A=0,k={},v=0,w=e.length;w>v;v++)h=e[v],i=C(N(h)),o=C(p(h)),i in k||(k[i]={}),o in k||(k[o]={}),o in k[i]||(k[i][o]=0,k[o][i]=0,A++,E[i].degree+=1,E[o].degree+=1);u={},n=0;for(m in E)M=E[m],u[m]={score:M.degree/(2*A),nodes:[m]};for(i in k)for(o in k[i])k[i][o]=1/(2*A)-E[i].degree*E[o].degree/(4*A*A);for(y=0;1e3>y;){f=-1,S=void 0,z=void 0;for(i in k)for(o in k[i])k[i][o]>f&&(f=k[i][o],S=i,z=o);if(0>f)break;for(b in k[S])b!==z&&(b in k[z]?k[z][b]+=k[S][b]:k[z][b]=k[S][b]-2*u[z].score*u[b].score,k[b][z]=k[z][b]),delete k[b][S];for(b in k[z])b in k[S]||b===z||(k[z][b]-=2*u[S].score*u[b].score,k[b][z]=k[z][b]);for(D=u[S].nodes,x=0,_=D.length;_>x;x++)M=D[x],u[z].nodes.push(M);u[z].score+=u[S].score,t.vdebug&&g.push({type:"merge",father:z,child:S,nodes:u[z].nodes}),delete u[S],delete k[S],n+=f,y++}return l=function(){var e;e=[];for(a in u)c=u[a],e.push([a,c.nodes.length]);return e}(),l.sort(function(e,t){return t[1]-e[1]}),O=function(){var e,t,n;for(n=[],e=0,t=l.length;t>e;e++)s=l[e],n.push(u[s[0]].nodes);return n}(),[O,g]}},{"./normalize.coffee":165}],164:[function(e,t,n){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}},{}],165:[function(e,t,n){var r;r=e("../core/console/print.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O;if(E=t.source,D=t.target,a=t.directed,s=t.distance,z=t.nodeid,j=t.startpoint,c=t.endpoint,n=t.K,O=t.vdebug,a||(a=!1),null==n&&(n=1),null==z?z=function(e){return e}:"string"==typeof z&&(z=function(e){return function(t){return t[e]}}(z)),null!=E&&"object"==typeof E&&(E=z(E)),null!=D&&"object"==typeof D&&(D=z(D)),null==j?j=function(e){return e.source}:"string"==typeof j&&(j=function(e){return function(t){return t[e]}}(j)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},d=m=0,b=e.length;b>m;d=++m)l=e[d],i=z(j(l)),o=z(c(l)),u[i+"_"+o]=s[d];s=function(e){return i=z(j(e)),o=z(c(e)),u[i+"_"+o]}}for(M={},y=0,w=e.length;w>y;y++){for(l=e[y],A=j(l),S=c(l),g=z(A),v=z(S),C=[A,S],x=0,_=C.length;_>x;x++)k=C[x],h=z(k),h in M||(M[h]={node:k,outedges:[]});M[g].outedges.push(l),a||M[v].outedges.push(l)}return f=null,0===e.length?f="The length of edges is 0":0>n?f="K can not have negative value":null==s(e[0])?f="Check the distance function/attribute":null==j(e[0])?f="Check the startpoint function/attribute":null==c(e[0])?f="Check the endpoint function/attribute":(p=z(j(e[0])),null==p||"string"!=(T=typeof p)&&"number"!==T?f="Check the nodeid function/attribute":null==E||E in M?null==D||D in M||(f="The target is not in the graph"):f="The source is not in the graph"),null!=f?(r.error(f),null):[e,{source:E,target:D,directed:a,distance:s,nodeid:z,startpoint:j,endpoint:c,K:n,nodes:M,vdebug:O}]}},{"../core/console/print.coffee":52}],166:[function(e,t,n){var r,i;r=e("heap"),i=e("./normalize.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O;if(null==n&&(n={}),n.source=t,(null==n.nodes||"object"!=typeof n.nodes)&&(S=i(e,n),e=S[0],n=S[1],null===n))return null;t=n.source,j=n.target,u=n.directed,c=n.distance,_=n.nodeid,E=n.startpoint,d=n.endpoint,o=n.K,k=n.nodes;for(v in k)w=k[v],w.count=0;for(p=new r(function(e,t){return e.distance-t.distance}),O={},null==j&&(O[t]=!0),p.push({edge:null,target:t,distance:0}),b=0,T=[];!p.empty()&&(b=Math.max(b,p.size()),A=p.pop(),D=A.target,k[D].count++,null==j?T.push(A):D===j&&T.push(A),T.length!==o);)if(k[D].count<=o)for(z=k[D].outedges,g=0,y=z.length;y>g;g++){if(f=z[g],a=_(E(f)),l=_(d(f)),u||l!==D||(M=[l,a],a=M[0],l=M[1]),null==j){if(O[l])continue;O[l]=!0}s=A.distance+c(f),p.push({edge:f,previous:A,target:l,distance:s})}for(h=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},m=0,x=T.length;x>m;m++)C=T[m],null!=j&&(delete C.target,C.edges=h(C)),delete C.edge,delete C.previous;return T}},{"./normalize.coffee":165,heap:5}],167:[function(e,t,n){var r;r=e("./distance.coffee"),t.exports=function(e,t){var n,i;return t||(t={}),n=[],i=d3.geom.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}),i(e).visit(function(e){var i,o,a,s,l,u,c,f;if(!e.leaf)for(c=e.nodes,i=0,a=c.length;a>i;i++)if(l=c[i],l&&l.point)if(t.origin)n.push(r(l,t));else for(f=e.nodes,o=0,s=f.length;s>o;o++)u=f[o],u&&u.point&&u.point!==l.point&&n.push(r(l,u));return!1}),t.all?n.sort(function(e,t){return e-t}):d3.min(n)}},{"./distance.coffee":164}],168:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c,f,d,h,p,g;return null==n&&(n={}),n.source=t,null!=n.nodes&&"object"==typeof n.nodes||(h=r(e,n),e=h[0],n=h[1],null!==n)?(t=n.source,a=n.directed,s=n.distance,f=n.nodeid,p=n.startpoint,u=n.endpoint,i=n.K,d=n.nodes,g={},g[t]=!0,o=function(e,t){var n,r,l,c,h,v,m,y,x;for(m=d[e].outedges,x=[],c=0,h=m.length;h>c;c++)l=m[c],n=f(p(l)),r=f(u(l)),a||r!==e||(y=[r,n],n=y[0],r=y[1]),r in g?x.push(void 0):(v=t+s(l),i>=v?(g[r]=!0,x.push(o(r,v))):x.push(void 0));return x},o(t,0),{nodes:function(){var e;e=[];for(c in g)e.push(d[c].node);return e}(),edges:function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)l=e[t],f(p(l))in g&&f(u(l))in g&&r.push(l);return r}()}):null}},{"./normalize.coffee":165}],169:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p;return void 0===e||null===e||e===!1?"":(t||(t={}),l="locale"in t?t.locale:r,d=l.time.slice(),i=d3.locale(l.format),t||(t={}),h=t.vars||{},o=t.key,a=!("labels"in t)||t.labels,s=e.toString().split(".")[0].length,h.time&&h.time.value&&d.push(h.time.value),"string"==typeof o&&d.indexOf(o.toLowerCase())>=0?u=e:"share"===o?(u=0===e?0:e>=100?i.numberFormat(",f")(e):e>99?i.numberFormat(".3g")(e):i.numberFormat(".2g")(e),u+="%"):10>e&&e>-10?(s=e.toString().split("."),c=1,s.length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),e>-1&&1>e||(p=s[1].length-parseFloat(s[1]).toString().length,c+=1+p)),u=i.numberFormat("."+c+"g")(e)):s>3?(f=d3.formatPrefix(e).symbol,f=f.replace("G","B"),e=d3.formatPrefix(e).scale(e),e=i.numberFormat(".3g")(e),e=e.replace(l.format.decimal,"."),e=parseFloat(e)+"",e=e.replace(".",l.format.decimal),u=e+f):u=3===s?i.numberFormat(",f")(e):0===e?0:e===parseInt(e,10)?i.numberFormat(".2")(e):i.numberFormat(".3g")(e),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),a&&o&&"format"in h&&o in h.format.affixes.value?(n=h.format.affixes.value[o],n[0]+u+n[1]):u)}},{"../core/locale/languages/en_US.coffee":69}],170:[function(e,t,n){var r,i;r=e("../util/d3selection.coffee"),i=e("./validate.coffee"),t.exports=function(e,t){var n,o;return n=function(e,t,o){var a,s,l;s=[];for(a in e)l=e[a],"undefined"!=typeof l?!o&&i(l)?("object"!=typeof t[a]&&(t[a]={}),s.push(n(l,t[a],0===a.indexOf("d3plus")))):!r(l)&&l instanceof Array?s.push(t[a]=l.slice(0)):s.push(t[a]=l):s.push(void 0);return s},o={},e&&n(e,o),t&&n(t,o),o}},{"../util/d3selection.coffee":207,"./validate.coffee":171}],171:[function(e,t,n){t.exports=function(e){return e&&e.constructor===Object}},{}],172:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=t.unkeyed_index,t.unkeyed_index++),r==+r)return"undefined"!==e[r]?e[r]:n;for(var i=0;i<e.length;i++)if("object"==typeof e[i]&&"undefined"!=typeof e[i][r])return e[i][r];return n}.bind(t))}},{}],173:[function(e,t,n){var r,i;r=e("./format.js"),i=e("../core/locale/languages/en_US.coffee").ui,t.exports=function(e,t,n,o){var a;return e instanceof Array?(e=e.slice(0),t||(t=i.and),o||(o=i.moreText),2===e.length?e.join(" "+t+" "):(n&&e.length>n&&(a=e.length-n+1,e=e.slice(0,n-1),e[n-1]=r(o,a)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}},{"../core/locale/languages/en_US.coffee":69,"./format.js":172}],174:[function(e,t,n){t.exports=function(e){var t=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return e+="",""+e.replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"_";if(t.indexOf(e)>=0)return"";for(var r=e,i=0;i<n.length;i++)if(new RegExp(n[i][0]).test(e)){r=n[i][1];break}return r})}},{}],175:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,o,a,s;return e?(t||(t={}),o=t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(a="locale"in this?this.locale.value:r,s=a.lowercase.map(function(e){return e.toLowerCase()}),i=a.uppercase,i=i.concat(i.map(function(e){return e+"s"})),n=i.map(function(e){return e.toLowerCase()}),e.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(t,r){var o,a;return t?(o=n.indexOf(t.toLowerCase()),a=o>=0?i[o]:s.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()):""}))):""}},{"../core/locale/languages/en_US.coffee":69}],176:[function(e,t,n){var r,i;r=e("./foreign.coffee"),i=e("./tspan.coffee"),t.exports=function(e){e.text.html.value?r(e):i(e)}},{"./foreign.coffee":177,"./tspan.coffee":180}],177:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;o=e.container.value,r=o.attr("font-family")||o.style("font-family"),t=e.align.value||o.attr("text-anchor")||o.style("text-anchor"),n=o.attr("fill")||o.style("fill"),i=o.attr("opacity")||o.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(o.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",i).text(e.text.current)}},{}],178:[function(e,t,n){t.exports=function(e){var t,n,r,i,o,a,s,l,u,c;return n=e.container.value,i=n.node().previousElementSibling,a=i?i.tagName.toLowerCase():"",i&&(i=d3.select(i)),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),i&&(e.shape.accepted.indexOf(a)>=0&&e.self.shape(a),"rect"===a?(u=parseFloat(i.attr("x"),10)||0,c=parseFloat(i.attr("y"),10)||0,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(i.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(i.attr("height")),e.self.height(r))):"circle"===a?(o=parseFloat(i.attr("r"),10),u=parseFloat(i.attr("cx"),10)||0,u-=o,c=parseFloat(i.attr("cy"),10)||0,c-=o,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*o,10),e.height.value||e.self.height(2*o,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),e.size.value?void 0:e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}},{}],179:[function(e,t,n){t.exports=function(e){var t;return e.text.value||(t=e.container.value.text(),t&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/^\s+|\s+$/g,""),e.self.text(t))),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):e.text.phrases=[e.text.value+""],e.align.value?void 0:e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}},{}],180:[function(e,t,n){var r;r=e("../../client/rtl.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D;return d=function(t){var r;return r=!g||t?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan"),r.attr("x",T+"px").attr("dy",n+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},f=-90===e.rotate.value||90===e.rotate.value,z=f?e.height.inner:e.width.inner,s=f?e.width.inner:e.height.inner,t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start",E="end"===t||"start"===t&&r?z:"middle"===t?z/2:0,S=e.valign.value||"top",T=e.container.x+E,o=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],n=e.container.dy||1.1*o,_=null,p=null,M=null,g=!1,D=0,"circle"===e.shape.value&&("middle"===S?D=s/n%1*n/2:"end"===S&&(D=s/n%1*n)),e.container.value.attr("text-anchor",t).attr("font-size",o+"px").style("font-size",o+"px").attr("x",e.container.x).attr("y",e.container.y),A=function(){return _.remove(),g?(l++,_=e.container.value.select("tspan")):(l--,_=d3.select(e.container.value.node().lastChild)),_.empty()?void 0:(M=_.text().match(/[^\s-]+-?/g),i())},u=function(){var t;return"circle"===e.shape.value?(t=(l-1)*n+D,t>s/2&&(t+=n),2*Math.sqrt(t*(2*(z/2)-t))):z},i=function(){var t,n;return M&&M.length?(n=M.pop(),t=n.charAt(n.length-1),1===n.length&&e.text.split.value.indexOf(n)>=0?i():(e.text.split.value.indexOf(t)>=0&&(n=n.substr(0,n.length-1)),_.text(M.join(" ")+" "+n+"..."),_.node().getComputedTextLength()>u()?i():void 0)):A()},h=function(t){var n,r,i,o;if(n=_.text(),o="",g){if(o=e.text.current.charAt(e.text.current.length-p.length-1)," "===o)for(i="",r=2;" "===o;)i+=" ",o=e.text.current.charAt(e.text.current.length-p.length-r),r++;else i="";p=t+i+p,_.text(t+i+n)}else{if(o=e.text.current.charAt(p.length)," "===o)for(i="",r=1;" "===o;)i+=" ",o=e.text.current.charAt(p.length+r),r++;else i="";p+=i+t,_.text(n+i+t)}return Math.floor(_.node().getComputedTextLength())>u()||"\n"===o?(_.text(n),n.length&&(_=d()),_.text(t),g?l--:l++):void 0},w=1,l=null,c=null,C=function(){var t,r,i,o,a,u;for(e.container.value.text("").html(""),M=e.text.words.slice(),g&&M.reverse(),p="",_=d(!0),l=w,r=0,i=M.length;i>r;r++){if(u=M[r],l*n>s){A();break}for(h(u),a=!0;a;){for(o=e.text.current.charAt(p.length),t=1;" "===o;)o=e.text.current.charAt(p.length+t),t++;a=e.text.split.value.indexOf(o)>=0,a&&h(o)}}return l*n>s&&A(),c=Math.abs(l-w)+1},C(),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"circle"===e.shape.value&&(b=s-c*n,b>n&&("middle"===S?(w=(b/n/2>>0)+1,C()):"bottom"===S&&(g=!0,w=s/n>>0,C()))),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"top"===S?j=0:(a=c*n,j="middle"===S?s/2-a/2:s-a),j-=.2*n,k="translate(0,"+j+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+z/2,x=e.container.y+s/2):(v=e.rotate.value<0?z:s,y=e.container.x+v/2,x=e.container.y+v/2),m="rotate("+e.rotate.value+", "+y+", "+x+")",e.container.value.attr("transform",m+k)}},{"../../client/rtl.coffee":40}],181:[function(e,t,n){var r,i,o,a;r=e("./flow.coffee"),i=e("../../font/sizes.coffee"),a=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text["break"]),t=e.text.current.charAt(0),t!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?o(e):r(e))},t.exports=a,o=function(e){var t,n,o,s,l,u,c,f,d,h,p,g,v,m,y,x,b;for(b=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",b.push(e.text.words[c]+t),c++;h=-90===e.rotate.value||90===e.rotate.value,y=h?e.height.inner:e.width.inner,l=h?e.width.inner:e.height.inner,p=Math.floor(e.size.value[1]),f="circle"===e.shape.value?.75*y:y,v=i(b,{"font-size":p+"px"},{parent:e.container.value}),d=d3.max(v,function(e){return e.width}),n=1.165+y/l*.11,m=d3.sum(v,function(t){var n;return n=e.container.dy||1.2*p,t.width*n})*n,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):f*l,(d>f||m>s)&&(o=Math.sqrt(s/m),x=f/d,g=d3.min([o,x]),p=d3.max([e.size.value[0],Math.floor(p*g)])),u=Math.floor(.8*l),p>u&&(p=u),d*(p/e.size.value[1])<=f?(p!==e.size.value[1]&&e.self.size([e.size.value[0],p]),r(e)):a(e)}},{"../../font/sizes.coffee":101,"./flow.coffee":176}],182:[function(e,t,n){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t+1]),e},value:!1}},{}],183:[function(e,t,n){arguments[4][107][0].apply(n,arguments)},{dup:107}],184:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e!==!1&&(r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e))},value:!1}},{"../../util/d3selection.coffee":207}],185:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],186:[function(e,t,n){var r,i;r=e("../../core/console/print.coffee"),i=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var n;return this.initialized===!1?e:(t.container.value===!1?(n=t.format.locale.value.dev.setContainer,r.warning(n,"container")):t.container.value.empty()?(n=t.format.locale.value.dev.noContainer,r.warning(i(n,'"'+t.container.value+'"'),"container")):(t.dev.value&&r.time("total draw time"),t.container.value.call(t.self)),
e)},value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],187:[function(e,t,n){var r,i;r=e("../../core/locale/locale.coffee"),i=e("../../object/merge.coffee"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(r)},process:function(e){var t,n;return t="en_US",n=r[t],e!==t&&(n=i(n,r[e])),this.language=e,n},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":78,"../../object/merge.coffee":170}],188:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],189:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],190:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],191:[function(e,t,n){t.exports={accepted:[-180,-90,0,90,180],value:0}},{}],192:[function(e,t,n){t.exports={accepted:["circle","square"],value:!1}},{}],193:[function(e,t,n){t.exports={accepted:[Array,!1],value:!1}},{}],194:[function(e,t,n){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this["break"]=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this["break"]=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}},{}],195:[function(e,t,n){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],196:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],197:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],198:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{dup:188}],199:[function(e,t,n){var r,i,o,a,s;r=e("../core/methods/attach.coffee"),o=e("./helpers/parseSize.coffee"),i=e("../core/console/print.coffee"),a=e("./helpers/parseText.coffee"),s=e("./helpers/wrap.coffee"),t.exports=function(){var t;return t={self:function(e){return e.each(function(){o(t),t.size.value[0]<=t.height.inner?(a(t),s(t)):t.container.value.html(""),t.dev.value&&i.timeEnd("total draw time")}),t.self}},r(t,{align:e("./methods/align.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),padding:e("./methods/padding.coffee"),resize:e("./methods/resize.coffee"),rotate:e("./methods/rotate.coffee"),text:e("./methods/text.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),valign:e("./methods/valign.coffee"),width:e("./methods/width.coffee"),x:e("./methods/x.coffee"),y:e("./methods/y.coffee")}),t.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"./helpers/parseSize.coffee":178,"./helpers/parseText.coffee":179,"./helpers/wrap.coffee":181,"./methods/align.coffee":182,"./methods/config.coffee":183,"./methods/container.coffee":184,"./methods/dev.coffee":185,"./methods/draw.coffee":186,"./methods/format.coffee":187,"./methods/height.coffee":188,"./methods/padding.coffee":189,"./methods/resize.coffee":190,"./methods/rotate.coffee":191,"./methods/shape.coffee":192,"./methods/size.coffee":193,"./methods/text.coffee":194,"./methods/valign.coffee":195,"./methods/width.coffee":196,"./methods/x.coffee":197,"./methods/y.coffee":198}],200:[function(e,t,n){function r(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var i=e("../core/locale/languages/en_US.coffee"),o=e("../client/pointer.coffee"),a=e("../color/legible.coffee"),s=e("./move.coffee"),l=e("../client/prefix.coffee"),u=e("../client/rtl.coffee"),c=e("./remove.coffee"),f=e("../client/scroll.js"),d=e("../string/list.coffee"),h=e("../color/text.coffee");t.exports=function(e){var t=e.fullscreen?250:200,n=l();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||i,e.stacked=e.stacked||!1;var p=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.parent.node()===document.body?e.limit=[window.innerWidth+f.x(),window.innerHeight+f.y()]:e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)],e.title instanceof Array){var g=e.locale.ui.and,v=e.locale.ui.more;e.title=d(e.title,g,3,v)}if(c(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?p/2:window.innerHeight/2;else if(e.align){var m=e.align.split(" ");e.anchor.y=m[0],m[1]?e.anchor.x=m[1]:e.anchor.x="center"}else e.anchor.x="center",e.anchor.y="top";var y=e.width-30;e.fullscreen&&e.parent.append("div").attr("id","d3plus_tooltip_curtain_"+e.id).attr("class","d3plus_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(o.click,function(){c(e.id)});var x=e.parent.append("div").datum(e).attr("id","d3plus_tooltip_id_"+e.id).attr("class","d3plus_tooltip d3plus_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(o.out,r);e.max_height&&x.style("max-height",e.max_height+"px"),e.fixed?(x.style("z-index",500),e.mouseevents=!0):x.style("z-index",2e3);var b=x.append("div").datum(e).attr("class","d3plus_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html&&!e.stacked){_=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,P=e.parent?.75*p:.75*window.innerHeight,b.style("width",_+"px").style("height",P+"px");var w=b.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var _="auto";b.style("max-width",e.max_width+"px")}else var _=e.width-14+"px";var w=b.style("width",_)}if(e.title||e.icon)var k=w.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen&&(x.append("div").attr("class","d3plus_tooltip_close").style("background-color",e.color).style("color",h(e.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(o.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(o.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(o.click,function(){c(e.id)}),d3.select("body").on("keydown.esc_"+e.id,function(){27===d3.event.keyCode&&(c(e.id),d3.select("body").on("keydown.esc_"+e.id,null))})),e.mouseevents){if(e.mouseevents!==!0){var A=d3.select(e.mouseevents).on(o.out),S=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var n="string"==typeof t.className?t.className:t.className.baseVal,i=0==n.indexOf("d3plus_tooltip");else var i=!1;t&&(z(x.node(),t)||z(e.mouseevents,t)||i)||(A(d3.select(e.mouseevents).datum()),r(),d3.select(e.mouseevents).on(o.out,A))},z=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(e.mouseevents).on(o.out,S),x.on(o.out,S);var M=d3.select(e.mouseevents).on(o.move);M&&x.on(o.move,M)}}else x.style("pointer-events","none");if(e.arrow&&x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",e.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1),e.icon){var C=k.append("div").attr("class","d3plus_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&C.style("background-color",e.color),y-=C.node().offsetWidth}if(e.title){var T=e.max_width-6;e.icon&&(T-=e.iconsize+6),T+="px",k.append("div").attr("class","d3plus_tooltip_title").style("max-width",T).style("color",e.icon?e.fontcolor:a(e.color)).style("vertical-align","top").style("width",y+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}if(e.description&&w.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description),e.data||e.html&&!e.fullscreen)var E=w.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var j=0,D={},O=null;e.data.forEach(function(t,i){t.group&&O!=t.group&&(O=t.group,E.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var s=E.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);t.highlight===!0?s.style("color",a(e.color)):(t.allColors||t.highlight!==e.color)&&s.style("color",a(t.highlight));var c=s.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(t.name).on(o.out,function(){d3.event.stopPropagation()});if(t.link&&c.style("cursor","pointer").on(o.click,t.link),t.value instanceof Array){var f=e.locale.ui.and,d=e.locale.ui.more;t.value=list(t.value,f,3,d)}var h=s.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(o.out,function(){d3.event.stopPropagation()});if(u?h.style("left","6px"):h.style("right","6px"),e.mouseevents&&t.desc){var p=s.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(t.desc).on(o.out,function(){d3.event.stopPropagation()}),g=p.node().offsetHeight||p.node().getBoundingClientRect().height;p.style("height","0px");var v=c.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(l+"transition","background-color 0.5s").text("?").on(o.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),p.style("height",g+"px")}).on(o.out,function(){d3.event.stopPropagation()});c.style("cursor","pointer").on(o.over,function(){r();var e=d3.select(this.parentNode).style("color");v.style("background-color",e),p.style("height",g+"px")}),s.on(o.out,function(){d3.event.stopPropagation(),r()})}var m=parseFloat(h.style("width"),10);m>e.width/2&&(m=e.width/2),m>j&&(j=m),i!=e.data.length-1&&(t.group&&t.group==e.data[i+1].group||!t.group&&!e.data[i+1].group)&&E.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),E.selectAll(".d3plus_tooltip_data_name").style("width",function(){var e=parseFloat(d3.select(this.parentNode).style("width"),10);return e-j-30+"px"}),E.selectAll(".d3plus_tooltip_data_value").style("width",j+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);D[e.name]=t}),E.selectAll(".d3plus_tooltip_data_name").style("min-height",function(e){return D[e.name]+"px"})}!e.html||e.fullscreen&&!e.stacked||(E.append("div").html(e.html),e.js&&e.js(b));var N=w.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&N.html(e.footer),e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,e.html&&e.fullscreen&&!e.stacked){var P=e.height-12,_=x.node().offsetWidth-e.width-44;b.append("div").attr("class","d3plus_tooltip_html").style("width",_+"px").style("height",P+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html),e.js&&e.js(b)}if(e.width=x.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||(!e.fullscreen||e.stacked)&&e.html){if(!e.fullscreen||e.stacked)var F=e.fixed?p-e.y-10:p-10,P=e.height<F?e.height:F;else var P=e.height;P-=parseFloat(b.style("padding-top"),10),P-=parseFloat(b.style("padding-bottom"),10),k&&(P-=k.node().offsetHeight||k.node().getBoundingClientRect().height,P-=parseFloat(k.style("padding-top"),10),P-=parseFloat(k.style("padding-bottom"),10)),N&&(P-=N.node().offsetHeight||N.node().getBoundingClientRect().height,P-=parseFloat(N.style("padding-top"),10),P-=parseFloat(N.style("padding-bottom"),10)),E.style("max-height",P+"px")}e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,s(e.x,e.y,e.id)}},{"../client/pointer.coffee":38,"../client/prefix.coffee":39,"../client/rtl.coffee":40,"../client/scroll.js":41,"../color/legible.coffee":44,"../color/text.coffee":50,"../core/locale/languages/en_US.coffee":69,"../string/list.coffee":173,"./move.coffee":201,"./remove.coffee":202}],201:[function(e,t,n){var r,i;i=e("../client/scroll.js"),t.exports=function(e,t,n){var o,a,s;return n||(n="default"),s=d3.select("div#d3plus_tooltip_id_"+n),s.node()&&(o=s.datum(),o.cx=e,o.cy=t,o.fixed||(a="body"===o.parent.node().tagName.toLowerCase()?[i.x(),i.y()]:[0,0],"center"!==o.anchor.y?("right"===o.anchor.x?o.x=o.cx-o.arrow_offset-4:"center"===o.anchor.x?o.x=o.cx-o.width/2:"left"===o.anchor.x&&(o.x=o.cx-o.width+o.arrow_offset+2),"bottom"===o.anchor.y?o.flip=o.cy+o.height+o.offset<=o.limit[1]:"top"===o.anchor.y&&(o.flip=o.cy-o.height-o.offset<a[1]),o.flip?o.y=o.cy+o.offset+o.arrow_offset:o.y=o.cy-o.height-o.offset-o.arrow_offset):(o.y=o.cy-o.height/2,"right"===o.anchor.x?o.flip=o.cx+o.width+o.offset<=o.limit[0]:"left"===o.anchor.x&&(o.flip=o.cx-o.width-o.offset<a[0]),"center"===o.anchor.x?(o.flip=!1,o.x=o.cx-o.width/2):o.flip?o.x=o.cx+o.offset+o.arrow_offset:o.x=o.cx-o.width-o.offset),o.x<a[0]?o.x=a[0]:o.x+o.width>o.limit[0]&&(o.x=o.limit[0]-o.width),o.y<a[1]?o.y=a[1]:o.y+o.height>o.limit[1]&&(o.y=o.limit[1]-o.height)),s.style("top",o.y+"px").style("left",o.x+"px"),o.arrow&&s.selectAll(".d3plus_tooltip_arrow").call(r)),s},r=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5,t<2-e.width/2&&(t=2-e.width/2)):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5),t>e.width/2-11&&(t=e.width/2-11)),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset,t<4-e.height/2&&(t=4-e.height/2)):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset),t>e.height/2-22&&(t=e.height/2-22)),t+"px")})}},{"../client/scroll.js":41}],202:[function(e,t,n){t.exports=function(e){return e?(d3.selectAll("div#d3plus_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3plus_tooltip_id_"+e).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],203:[function(e,t,n){t.exports=function(e,t){var n,r;return n=[],r=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+r,r)}},{}],204:[function(e,t,n){var r;r=e("./d3selection.coffee"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{"./d3selection.coffee":207}],205:[function(e,t,n){t.exports=function(e,t){var n,r;return t.constructor===String?(r=e.indexOf(t),r>-1?e[r]:e[0]):(n=e[0],e.forEach(function(e){return Math.abs(t-e)<Math.abs(t-n)?n=e:void 0}),n)}},{}],206:[function(e,t,n){var r,i,o;i=e("../object/merge.coffee"),o=e("../object/validate.coffee"),r=function(e){var t;return o(e)?i(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(r(e))}),t):e},t.exports=r},{"../object/merge.coffee":170,"../object/validate.coffee":171}],207:[function(e,t,n){var r;r=e("../client/ie.js"),t.exports=function(e){return r?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}},{"../client/ie.js":37}],208:[function(e,t,n){t.exports=function(e,t){var n;n=new Image,n.src=e,n.crossOrigin="Anonymous",n.onload=function(){var e,n;e=document.createElement("canvas"),e.width=this.width,e.height=this.height,n=e.getContext("2d"),n.drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}},{}],209:[function(e,t,n){var r,i;r=e("../object/validate.coffee"),i=function(e,t,n,o,a,s){var l,u,c,f,d,h,p,g,v,m,y,x,b,w;if(void 0===e)return[];if(o&&void 0===a&&(a=o.id.value),s=!0===s&&void 0===s,e instanceof Array||(e=[e]),m=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),m.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),m.push(n)),e},[]);if(w=[],l=function(e){var t;return void 0!==e&&null!==e&&(t=JSON.stringify(e),m.indexOf(t)<0)?(w.push(e),m.push(t)):void 0},"function"==typeof n&&o)for(c=0,h=e.length;h>c;c++)for(u=e[c],b=i(n(o,u,t,a)),f=0,p=b.length;p>f;f++)x=b[f],l(x);else if("function"==typeof t)for(d=0,g=e.length;g>d;d++)u=e[d],b=t(u),l(b);else for(y=0,v=e.length;v>y;y++)u=e[y],r(u)&&(b=u[t],l(b));return s?w.sort(function(e,t){return e-t}):w},t.exports=i},{"../object/validate.coffee":171}],210:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;for(e.container.value.style("position",function(){var e,t;return e=d3.select(this).style("position"),t=["absolute","fixed"].indexOf(e)>=0,t?e:"relative"}),e.container.changed&&e.container.value.html(""),i=["width","height"],n=0,r=i.length;r>n;n++)o=i[n],e[o].value||(t=function(n){var r,i;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(i=window["inner"+o.charAt(0).toUpperCase()+o.slice(1)],r=document!==n&&d3.select(n),r&&("width"===o?(i-=parseFloat(r.style("margin-left"),10),i-=parseFloat(r.style("margin-right"),10),i-=parseFloat(r.style("padding-left"),10),i-=parseFloat(r.style("padding-right"),10)):(i-=parseFloat(r.style("margin-top"),10),i-=parseFloat(r.style("margin-bottom"),10),i-=parseFloat(r.style("padding-top"),10),i-=parseFloat(r.style("padding-bottom"),10))),e[o].value=20>=i?e[o].small:i):(i=parseFloat(d3.select(n).style(o),10),"number"==typeof i&&i>0?e[o].value=i:"BODY"!==n.tagName?t(n.parentNode):void 0)},t(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}},{}],211:[function(e,t,n){var r=e("../../core/data/format.js"),i=e("../../core/data/color.js"),o=e("../../core/data/keys.coffee"),a=e("../../core/data/load.coffee"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.coffee"),c=e("./errorCheck.js"),f=e("../../core/fetch/data.js"),d=e("./finish.js"),h=e("./focus/tooltip.coffee"),p=e("./ui/history.coffee"),g=e("../../core/parse/edges.js"),v=e("../../core/parse/nodes.js"),m=e("../../core/console/print.coffee"),y=e("../../tooltip/remove.coffee"),x=e("./types/run.coffee"),b=e("./shapes/draw.js"),w=e("../../string/format.js"),_=e("./svg/enter.js"),k=e("./svg/update.js"),A=e("./ui/titles.js"),S=e("../../object/validate.coffee");t.exports=function(e){var t=[],n=e.type.value,z=e.format.locale.value,M=z.message.ui,C=z.message.draw,T=["data","attrs","coords","nodes","edges"];if(T.forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({"function":function(e,t){a(e,n,t)},message:z.message.loading,wait:!0})}),e.draw.update){var E=z.visualization[n]||n,j=e.types[n].setup||!1,D=e.types[n].requirements||[],O=w(z.message.initializing,E),N=z.message.data;D instanceof Array||(D=[D]),E=E.toLowerCase(),e.error.value||"function"!=typeof j||t.push({"function":function(e){if(e.dev.value){var t="running "+E+" setup";m.time(t)}j(e),e.dev.value&&m.timeEnd(t)},message:O}),e.container.changed&&t.push({"function":_,message:O}),n in e.g.apps||t.push({"function":function(e){if(e.dev.value){var t="creating "+E+" group";m.time(t)}e.g.apps[n]=e.g.app.append("g").attr("id",n).attr("opacity",0),e.dev.value&&m.timeEnd(t)},message:O}),e.data.changed&&t.push({"function":function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,o(e,"data")},message:N}),e.attrs.changed&&t.push({"function":function(e){o(e,"attrs")},message:N}),t.push({"function":function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";m.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;S(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&m.timeEnd(t)}},message:N}),D.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)&&t.push({"function":g,message:N}),D.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({"function":v,message:N}),(e.data.changed||e.time.changed||e.time.format.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({"function":r,message:N}),e.error.value||t.push({"function":function(e){var t=e.time.fixed.value?null:["all"];if(e.dev.value){var n=t?"fetching pool data":"fetching data";m.time(n)}e.data.pool=f(e,t),e.dev.value&&m.timeEnd(n),t?(e.dev.value&&m.time("fetching data for current year"),e.data.viz=f(e),e.dev.value&&m.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:N}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&e.color.valueScale===!1},"function":i,message:N})}return t.push({"function":function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;m.time(t)}e.type.previous&&n!==e.type.previous&&y(e.type.previous),y(n),e.dev.value&&m.timeEnd(t)},message:M}),e.error.value||t.push({"function":c,message:M}),t.push({"function":function(e){if(e.margin.process(),A(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&m.time("calculating margins");var t=e.container.value.select("div#d3plus_drawer").node().offsetHeight||e.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&m.timeEnd("calculating margins")}p(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:M}),e.error.value||t.push({"function":h,message:M}),t.push({"function":k,message:C}),!e.error.value&&e.draw.update&&t.push({"function":[x,b],message:C}),t.push({"function":d,message:C}),t}},{"../../core/console/print.coffee":52,"../../core/data/color.js":54,"../../core/data/format.js":56,"../../core/data/keys.coffee":58,"../../core/data/load.coffee":59,"../../core/fetch/data.js":64,"../../core/parse/edges.js":94,"../../core/parse/nodes.js":97,"../../object/validate.coffee":171,"../../string/format.js":172,"../../tooltip/remove.coffee":202,"./errorCheck.js":212,"./finish.js":213,"./focus/tooltip.coffee":214,"./shapes/draw.js":224,"./svg/enter.js":237,"./svg/update.js":238,"./types/run.coffee":241,"./ui/drawer.js":242,"./ui/history.coffee":243,"./ui/legend.js":244,"./ui/timeline.coffee":246,"./ui/titles.js":247}],212:[function(e,t,n){var r=e("../../core/fetch/text.js"),i=e("../../core/console/print.coffee"),o=e("../../core/methods/rejected.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e){e.dev.value&&i.time("checking for errors");var t=["id"],n=e.types[e.type.value].requirements;n&&(n instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(n));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value||l.push('"'+t+'"');else if("function"==typeof t){var n=t(e);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=a(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0){var d=e.edges.connections(e.focus.value[0],e.id.value);if(0==d.length){var h=r(e,e.focus.value[0],e.depth.value),u=e.format.locale.value.error.connections;e.error.internal=a(u,'"'+h+'"')}}var t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));var l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){var u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=a(u,c,l[0])}var p=e.shape.accepted(e);p instanceof Array||(p=[p]);var g=e.shape.value;if((!g||o(e,p,g,"shape"))&&e.self.shape(p[0]),"modes"in e.types[e.type.value]){var v=e.types[e.type.value].modes;v instanceof Array||(v=[v]);var m=e.type.mode.value;(!m||o(e,v,m,"mode"))&&e.self.type({mode:v[0]})}e.dev.value&&i.timeEnd("checking for errors")}},{"../../core/console/print.coffee":52,"../../core/fetch/text.js":66,"../../core/methods/rejected.coffee":90,"../../string/format.js":172,"../../string/list.coffee":173}],213:[function(e,t,n){var r=e("./shapes/edges.js"),i=e("./shapes/paths.js"),o=e("./ui/message.js"),a=e("./focus/viz.js"),s=e("../../core/methods/reset.coffee"),l=e("../../core/console/print.coffee"),u=e("./shapes/labels.js"),c=e("../../string/title.coffee"),f=e("./zoom/bounds.coffee"),d=e("./zoom/labels.coffee"),h=e("./zoom/mouse.coffee");t.exports=function(e){if(e.draw.first?setTimeout(function(){a(e)},e.draw.timing):a(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&l.time("calculating zoom"),e.draw.first||e.zoom.reset?f(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&f(e,t),e.dev.value&&l.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,f(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,p=e.zoom.size?e.zoom.size.height:e.height.viz,g=e.zoom.bounds?e.zoom.bounds[0][0]:0,v=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",p).attr("x",g).attr("y",v),e.error.value||(e.draw.update?(e.edges.path?i(e):r(e),u(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){u(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){d(e)},e.draw.timing)),!e.error.value){var m=e.types[e.type.value].requirements||[];m instanceof Array||(m=[m]);var y=m.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!y||(e.error.internal=e.format.locale.value.error.data)}var x=e.type.previous;if(x&&e.type.value!=x&&e.g.apps[x]&&(e.dev.value&&l.time('hiding "'+x+'"'),e.draw.timing?e.g.apps[x].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[x].attr("opacity",0),e.dev.value&&l.timeEnd()),!e.error.value){var b=y&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,w=e.draw.timing;e.group.transition().duration(w).attr("opacity",b),e.g.data.transition().duration(w).attr("opacity",b),e.g.edges.transition().duration(w).attr("opacity",b)}e.error.value?o(e,e.error.value):e.error.internal?(e.error.internal=c(e.error.internal),l.warning(e.error.internal),o(e,e.error.internal),e.error.internal=null):o(e),setTimeout(function(){s(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",h)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.coffee":52,"../../core/methods/reset.coffee":92,"../../string/title.coffee":175,"./focus/viz.js":215,"./shapes/edges.js":225,"./shapes/labels.js":227,"./shapes/paths.js":229,"./ui/message.js":245,"./zoom/bounds.coffee":248,"./zoom/labels.coffee":250,"./zoom/mouse.coffee":251}],214:[function(e,t,n){var r,i,o,a;r=e("../tooltip/create.js"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../tooltip/remove.coffee"),t.exports=function(e){var t,n,s;n=e.focus,!e.error.internal&&1===n.value.length&&n.value.length&&!e.small&&n.tooltip.value?(e.dev.value&&o.time("drawing focus tooltip"),t=e.data.pool.filter(function(t){return i(e,t,e.id.value)===n.value[0]}),t.length>=1?t=t[0]:(t={},t[e.id.value]=n.value[0]),s=e.labels.padding,r({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,
y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&o.timeEnd("drawing focus tooltip")):a("visualization_focus")}},{"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../tooltip/remove.coffee":202,"../tooltip/create.js":239}],215:[function(t,n,r){var i=t("../../../client/pointer.coffee"),o=t("../../../client/ie.js"),a=t("../../../core/fetch/value.coffee"),s=t("../../../core/console/print.coffee"),l=t("../../../util/uniques.coffee");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||r==t.focus.value[0]){var i=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(i).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return o&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";return"source"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";return"target"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,a,t);u.push(t.focus.value[0]);var c=[],f=[],d=[0],h=[0];if(t.g.data.selectAll("g").each(function(n){if(u.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0)),r=d3.select(r).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&c.push(n.d3plus.x),"y"in n.d3plus&&f.push(n.d3plus.y),"r"in n.d3plus?(d.push(n.d3plus.r),h.push(n.d3plus.r)):("width"in n.d3plus&&d.push(n.d3plus.width/2),"height"in n.d3plus&&h.push(n.d3plus.height/2)));for(e in i){var o=d3.select(this).on(i[e]);o&&r.on(i[e],o)}}}),c.length&&f.length){var p=d3.extent(c),g=d3.extent(f),v=d3.max(d),m=d3.max(h);t.zoom.viewport=[[p[0]-v,g[0]-m],[p[1]+v,g[1]+m]]}t.g.data_focus.selectAll("path").style("stroke-width",o&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":37,"../../../client/pointer.coffee":38,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../util/uniques.coffee":209}],216:[function(e,t,n){var r,i,o,a;a=e("./style.coffee"),i=e("../../../geom/largestRect.coffee"),o=e("../../../geom/path2poly.coffee"),r={start:{},end:{}},t.exports=function(e,t,n,s){var l,u,c,f;l=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return e.d3plus.startAngle}).endAngle(function(e){return e.d3plus.endAngle}),c=function(t){var n,r;return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:(n=o(l(t)),r=i(n,{angle:0}),r[0]?t.d3plus_label={w:r[0].width,h:r[0].height,x:r[0].cx,y:r[0].cy}:delete t.d3plus_label)),[t]},e.draw.timing?(f=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return void 0===r.start[e.d3plus.id]&&(r.start[e.d3plus.id]=0),isNaN(r.start[e.d3plus.id])&&(r.start[e.d3plus.id]=e.d3plus.startAngle),r.start[e.d3plus.id]}).endAngle(function(e){return void 0===r.end[e.d3plus.id]&&(r.end[e.d3plus.id]=0),isNaN(r.end[e.d3plus.id])&&(r.end[e.d3plus.id]=e.d3plus.endAngle),r.end[e.d3plus.id]}),u=function(e,t){return e.attrTween("d",function(e){var n,i,o,a;return void 0===t?(a=e.d3plus.startAngle,n=e.d3plus.endAngle):0===t&&(a=0,n=0),o=d3.interpolate(r.start[e.d3plus.id],a),i=d3.interpolate(r.end[e.d3plus.id],n),function(t){return r.start[e.d3plus.id]=o(t),r.end[e.d3plus.id]=i(t),f(e)}})},n.append("path").attr("class","d3plus_data").call(a,e).attr("d",f),t.selectAll("path.d3plus_data").data(c).transition().duration(e.draw.timing).call(a,e).call(u),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(u,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(c).call(a,e).attr("d",l))}},{"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"./style.coffee":233}],217:[function(e,t,n){var r=e("../../../core/fetch/text.js"),i=e("../../../font/sizes.coffee"),o=e("../../../geom/largestRect.coffee"),a=e("./style.coffee");t.exports=function(e,t,n,s){var l=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),u=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y0}).interpolate(e.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(e){return u(e.values)}).call(a,e);var c={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};t.selectAll("path.d3plus_data").data(function(t){if(e.labels.value&&t.values.length>1){var n=d3.max(t.values,function(e){return e.d3plus.y0-e.d3plus.y}),a=!1;if(n>e.labels.font.size){var s=[],l=[],u=r(e,t);t.values.forEach(function(e){s.push([e.d3plus.x,e.d3plus.y]),l.push([e.d3plus.x,e.d3plus.y0])}),s=s.concat(l.reverse());var f=null;if(u.length){var d=i(u[0],c);f=d[0].width/d[0].height}a=o(s,{angle:d3.range(-70,71,1),aspectRatio:f,tolerance:0})}if(a&&a[0]){var h={w:~~a[0].width,h:~~a[0].height,x:~~a[0].cx,y:~~a[0].cy,angle:-1*a[0].angle,padding:2,names:u};0!==a[0].angle?h.translate={x:h.x,y:h.y}:h.translate=!1,h.w>=10&&h.h>=10&&(t.d3plus_label=h)}}return[t]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).attr("d",function(e){return l(e.values)}).call(a,e):t.selectAll("path.d3plus_data").attr("d",function(e){return l(e.values)}).call(a,e)}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],218:[function(e,t,n){var r=(e("../../../core/fetch/text.js"),e("../../../geom/largestRect.coffee"),e("./style.coffee"));t.exports=function(e,t,n,i){function o(e){e.attr("transform","scale(1)")}function a(e){e.attr("transform",function(e){var t=Math.min(e.d3plus.width,e.d3plus.height),n=Math.floor(t/16);return"scale("+n+")"})}n.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"../../../core/fetch/text.js":66,"../../../geom/largestRect.coffee":159,"./style.coffee":233}],219:[function(e,t,n){var r,i,o,a;i=e("../../../core/fetch/value.coffee"),r=e("../../../core/fetch/color.coffee"),o=e("../../../color/lighter.coffee"),a=e("./segments.coffee"),t.exports=function(e,t,n){var i,s,l,u;return s=e.d3plus.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?r(t,e):"temp"===s?n?r(t,e):"url(#d3plus_hatch_"+e.d3plus.id+")":e.d3plus["static"]?o(r(t,e),.75):(i=a(t,e,"active"),l=a(t,e,"temp"),u=a(t,e,"total"),!t.active.value&&!t.temp.value||i===!0||i&&u&&i>=u&&!l||i&&!u?r(t,e):t.active.spotlight.value?t.color.missing:o(r(t,e),.75))}},{"../../../color/lighter.coffee":45,"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"./segments.coffee":232}],220:[function(e,t,n){var r,i,o,a,s,l,u,c;r=e("../../../util/copy.coffee"),i=e("../../../network/distance.coffee"),o=e("../../../core/fetch/text.js"),a=e("../../../font/sizes.coffee"),l=e("../../../geom/largestRect.coffee"),u=e("../../../geom/path2poly.coffee"),c=e("./style.coffee"),s={},t.exports=function(e,t,n,f){var d,h;return d=d3.geo[e.coords.projection.value](),d.center&&d.center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geo.path().projection(d),e.draw.timing?t.selectAll("path.d3plus_data").attr("d",e.path).transition().duration(e.draw.timing).call(c,e):t.selectAll("path.d3plus_data").attr("d",e.path).call(c,e),n.append("path").attr("id",function(e){return e.id}).attr("class","d3plus_data").attr("d",e.path).call(c,e),h=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||h||e.coords.mute.changed||e.coords.solo.changed||e.type.changed||e.text.changed||e.coords.projection.changed||e.labels.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var n,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T;if(e.coords.simplify.value&&t.geometry.coordinates.length>1){for(m=[],c=[],n=0,b=r(t),z=r(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,r){var i;return z.geometry.coordinates=[t],i=e.path.area(z),i>0&&(c.push(i),i>n&&(b.geometry.coordinates=[t],n=i),!0)}),h=e.path.centroid(b),M=t.geometry.coordinates,y=x=0,w=M.length;w>x;y=++x)d=M[y],z.geometry.coordinates=[d],m.push(i(e.path.centroid(z),h));v=m.reduce(function(e,t,n){return t&&e.push(c[n]/t),e},[]),g=d3.quantile(v,e.coords.threshold.value),z.geometry.coordinates=t.geometry.coordinates.filter(function(e,t){var n,r;return r=m[t],n=c[t],0===r||n/r>=g}),p=b.geometry.coordinates[0],p&&"MultiPolygon"===b.geometry.type&&(p=p[0],b.geometry.coordinates[0]=p,b.geometry.type="Polygon")}else z=t,b=t,p=t.geometry.coordinates[0];return e.zoom.coords[t.d3plus.id]=z,delete t.d3plus_label,e.labels.value&&(_=o(e,t),p&&_.length&&(k=u(e.path(b)),T={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},A=null,1===_[0].split(" ").length&&(C=a(_[0],T)[0],A=C.width/C.height),S=l(k,{angle:0,aspectRatio:A}),S&&(S=S[0],t.d3plus_label={anchor:"middle",valign:"center",h:S.height,w:S.width,x:S.cx,y:S.cy,names:_}))),s[t.id]=t.d3plus_label,f=e.path.bounds(z),e.zoom.bounds?(e.zoom.bounds[0][0]>f[0][0]&&(e.zoom.bounds[0][0]=f[0][0]),e.zoom.bounds[0][1]>f[0][1]&&(e.zoom.bounds[0][1]=f[0][1]),e.zoom.bounds[1][0]<f[1][0]&&(e.zoom.bounds[1][0]=f[1][0]),e.zoom.bounds[1][1]<f[1][1]?e.zoom.bounds[1][1]=f[1][1]:void 0):e.zoom.bounds=f})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3plus_label=s[e.id]}))}},{"../../../core/fetch/text.js":66,"../../../font/sizes.coffee":101,"../../../geom/largestRect.coffee":159,"../../../geom/path2poly.coffee":161,"../../../network/distance.coffee":164,"../../../util/copy.coffee":206,"./style.coffee":233}],221:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("cross").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("cross").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":233}],222:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("diamond").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("diamond").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":233}],223:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(t,n,r,i){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof i)var i=void 0;t.attrTween("d",function(t){if(void 0==r)var o=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var o=r;if(void 0==i)var a=t.d3plus.segments[t.d3plus.shape];else var a=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,o+n),u=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=l(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=u(n),s(t)}})}function a(e){return e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var s=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"])return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3plus.shape][t.d3plus.id].r});e.draw.timing?(i.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o,0,0).each("end",function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),t.selectAll("path.d3plus_data").data(a).transition().duration(e.draw.timing).call(o).call(r,e),n.append("path").attr("class","d3plus_data").transition().duration(0).call(o,0,0).call(r,e).transition().duration(e.draw.timing).call(o).call(r,e)):(i.selectAll("path.d3plus_data").each(function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(a).call(o).call(r,e))}},{"./style.coffee":233}],224:[function(e,t,n){var r=e("../../../util/child.coffee"),i=e("../../../util/closest.coffee"),o=e("../tooltip/create.js"),a=e("../../../client/pointer.coffee"),s=e("../../../core/fetch/value.coffee"),l=e("../../../core/fetch/color.coffee"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.coffee"),f=e("../../../core/console/print.coffee"),d=e("../../../tooltip/remove.coffee"),h=e("./segments.coffee"),p=e("./fill.js"),g=e("../../../string/strip.js"),v=e("../../../client/touch.coffee"),m=e("../zoom/propagation.coffee"),y=e("../../../util/uniques.coffee"),x=e("../../../object/validate.coffee"),b=e("../zoom/direction.coffee"),w={arc:e("./arc.coffee"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.coffee"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),radial:e("./radial.coffee"),rect:e("./rect.coffee"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.coffee")};t.exports=function(e){function t(t){if(!t.d3plus.id){t.d3plus.id="";for(var n=0;n<=e.depth.value;n++)t.d3plus.id+=s(e,t,e.id.nesting[n])+"_";t.d3plus.id+=E,["x","y","x2","y2"].forEach(function(n){if("discrete"==e[n].scale.value){var r=s(e,t,e[n].value);r.constructor===Date&&(r=r.getTime()),t.d3plus.id+="_"+r}}),t.d3plus.suffix&&(t.d3plus.id+="_"+t.d3plus.suffix),t.d3plus.id=g(t.d3plus.id)}return t}function n(t,n){var r=e.types[e.type.value].scale,i=1;r&&(x[r]&&e.shape.value in r?i=r[e.shape.value]:"function"==typeof r?i=r(e,e.shape.value):"number"==typeof r&&(i=r)),i=n?i:1,t.attr("transform",function(e){if(["line","area","coordinates"].indexOf(E)<0){var t=e.d3plus.x||0,n=e.d3plus.y||0;return"translate("+t+","+n+")scale("+i+")"}return"scale("+i+")"})}function _(t){t.attr("class",function(t){var n=e["class"].value?" "+s(e,t,e["class"].value):"";return"d3plus_"+E+n})}function k(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(n){var r=t[e.id.value],i=n[e.edges.source][e.id.value],o=n[e.edges.target][e.id.value];if(i==r||i=="left_"+r||i=="right_"+r||o==r||o=="left_"+r||o=="right_"+r){var a=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(a).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(t){return e.edges.path&&t.dy?Math.max(1,t.dy):e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}var A=e.returned.nodes||[],S=e.returned.edges||[];e.draw.timing=A.length<e.data.large&&S.length<e.edges.large?e.timing.transitions:0;var z={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},M={};A.forEach(function(t){var n=t.d3plus&&t.d3plus.shape?t.d3plus.shape:e.shape.value;n in z&&(t.d3plus&&(t.d3plus.shape=n),n=z[n],M[n]||(M[n]=[]),M[n].push(t))});for(var C in z)if(!(z[C]in M)||0===d3.keys(M).length){var T=e.g.data.selectAll("g.d3plus_"+z[C]);e.draw.timing?T.transition().duration(e.draw.timing).attr("opacity",0).remove():T.remove()}for(var E in M){var j=e.g.data.selectAll("g.d3plus_"+E).data(M[E],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===E)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(e){e=t(e),e.d3plus.shape="circle"}),n.d3plus.id=n.key;else if(n=t(n),!n.d3plus.segments){n.d3plus.segments={donut:2*Math.PI};var r=h(e,n,"active"),i=h(e,n,"temp"),o=h(e,n,"total");o&&(r?n.d3plus.segments.active=r/o*(2*Math.PI):n.d3plus.segments.active=0,i?n.d3plus.segments.temp=i/o*(2*Math.PI)+n.d3plus.segments.active:n.d3plus.segments.temp=0)}return!!n.d3plus&&n.d3plus.id});if(e.draw.timing)var D=j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else var D=j.exit().remove();e.draw.timing?j.transition().duration(e.draw.timing).call(n).call(_):j.call(n).call(_);var O=e.draw.timing?0:1,N=j.enter().append("g").attr("opacity",O).call(n).call(_);e.draw.timing&&N.transition().duration(e.draw.timing).attr("opacity",1),j.order(),e.dev.value&&f.time('drawing "'+E+'" shapes'),w[E](e,j,N,D,n),e.dev.value&&f.timeEnd('drawing "'+E+'" shapes'),["rect","donut"].indexOf(E)>=0&&e.types[e.type.value].fill&&(e.dev.value&&f.time('filling "'+E+'" shapes'),p(e,j,N,D,n),e.dev.value&&f.timeEnd('filling "'+E+'" shapes'))}if(k(),e.tooltip.value)e.g.data.selectAll("g").on(a.over,function(t){if(v&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.over.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])d(e.type.value);else if("function"==typeof e.mouse.over.value)e.mouse.over.value(t,e.self);else{var r=b(t.d3plus_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[a.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===r||-1===r&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",s?"pointer":"auto").transition().duration(e.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),f=i(c,u);t.d3plus_data=t.values[c.indexOf(f)],t.d3plus=t.values[c.indexOf(f)].d3plus}var h=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:h}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.over]&&e.mouse.viz[a.over](t.d3plus_data||t,e),k(t)}}).on(a.move,function(t){if(v&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.move.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])d(e.type.value);else if("function"==typeof e.mouse.move.value)e.mouse.move.value(t,e.self);else{var n=b(t.d3plus_data||t,e),r="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[a.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===n||-1===n&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",r?"pointer":"auto"),e.types[e.type.value].tooltip||"follow",t.values&&e.axes.discrete){var s="x"===e.axes.discrete?0:1,l=d3.mouse(e.container.value.node())[s],u=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),c=i(u,l);t.d3plus_data=t.values[u.indexOf(c)],t.d3plus=t.values[u.indexOf(c)].d3plus}var f=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:f}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.move]&&e.mouse.viz[a.move](t.d3plus_data||t,e)}}).on(a.out,function(t){if(v&&m(e,d3.event),!d3.event.buttons&&e.mouse.value&&e.mouse.out.value)if("function"==typeof e.mouse.out.value)e.mouse.out.value(t,e.self);else{var i=r(this,d3.event.toElement);i||e.draw.frozen||t.d3plus&&t.d3plus["static"]||(d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||d(e.type.value),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.out]&&e.mouse.viz[a.out](t.d3plus_data||t,e),k())}else d(e.type.value)});else{var P=function(){m(e,d3.event)};e.g.data.selectAll("g").on(a.over,P).on(a.move,P).on(a.out,P)}d3.select(window).on("scroll.d3plus",function(){d(e.type.value)}),e.g.data.selectAll("g").on(a.click,function(t){if((!e.mouse.viz||e.mouse.viz.click!==!1)&&e.mouse.value&&e.mouse.click.value&&!d3.event.defaultPrevented&&!e.draw.frozen&&(!t.d3plus||!t.d3plus["static"]))if("function"==typeof e.mouse.click.value)e.mouse.click.value(t,e.self);else{if(t.values&&e.axes.discrete){var r="x"===e.axes.discrete?0:1,f=d3.mouse(e.container.value.node())[r],h=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),p=i(h,f);t.d3plus_data=t.values[h.indexOf(p)],t.d3plus=t.values[h.indexOf(p)].d3plus}"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.out]?e.mouse.viz[a.out](t.d3plus_data||t,e):e.mouse.viz[a.click]&&e.mouse.viz[a.click](t.d3plus_data||t,e);var g=b(t.d3plus_data||t,e),v=e.id.solo.value,m=u(e,t)[0],x=c(l(e,t)),w=e.title.sub.value||!1,_=e.title.sub.font.color,A=e.title.total.font.color;if(t.d3plus.threshold&&t.d3plus.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:v}).title({sub:{font:{color:_},value:w},total:{font:{color:A}}}).draw()}),e.self.id({solo:v.concat(y(t.d3plus.merged,e.id.value,s,e))}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw();else if(1===g&&e.zoom.value){var S=s(e,t.d3plus_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:v}).title({sub:{font:{color:_},value:w},total:{font:{color:A}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:v.concat(S)}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw()}else if(-1===g&&e.zoom.value&&e.history.states.length&&!e.tooltip.value["long"])e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)k(),d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),d(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){k();var z=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:z})}}})}},{"../../../client/pointer.coffee":38,"../../../client/touch.coffee":43,"../../../color/legible.coffee":44,"../../../core/console/print.coffee":52,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../tooltip/remove.coffee":202,"../../../util/child.coffee":204,"../../../util/closest.coffee":205,"../../../util/uniques.coffee":209,"../tooltip/create.js":239,"../zoom/direction.coffee":249,"../zoom/propagation.coffee":252,"./arc.coffee":216,"./area.js":217,"./check.js":218,"./coordinates.coffee":220,"./cross.js":221,"./diamond.js":222,"./donut.js":223,"./fill.js":226,"./line.js":228,"./radial.coffee":230,"./rect.coffee":231,"./segments.coffee":232,"./triangle_down.js":234,"./triangle_up.js":235,"./whisker.coffee":236}],225:[function(e,t,n){var r=e("../../../util/buckets.coffee"),i=e("../../../geom/offset.coffee");t.exports=function(e){function t(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function n(t){var n=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===p?h:"function"===p?h(t,e):e.edges.opacity.scale.value(t[h])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function o(t){t.attr("x1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].y})}function a(e){e.attr("d",function(e){return g(e.d3plus.spline)})}function s(t){if(delete t.d3plus_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3plus)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),i=this.getPointAtLength(n/2-.1*n),o=this.getPointAtLength(n/2+.1*n),a=Math.atan2(o.y-i.y,o.x-i.x),s=a*(180/Math.PI),l=(this.parentNode.getBBox(),.8*n),u=r.x,c=r.y;else var f=(this.getBBox(),t[e.edges.source]),d=t[e.edges.target],h={x:f.d3plus.edges[d[e.id.value]].x,y:f.d3plus.edges[d[e.id.value]].y},p={x:d.d3plus.edges[f[e.id.value]].x,y:d.d3plus.edges[f[e.id.value]].y},g=p.x-h.x,v=p.y-h.y,r={x:p.x-g/2,y:p.y-v/2},a=Math.atan2(v,g),s=a*(180/Math.PI),n=Math.sqrt(g*g+v*v),l=n,u=r.x,c=r.y;l+=2*e.labels.padding;var m=0;e.edges.arrows.value&&(m="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,m/=e.zoom.behavior.scaleExtent()[1],l-=2*m),(-90>s||s>90)&&(s-=180),l*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3plus_label={x:u,y:c,translate:{x:u,y:c},w:l,h:15+2*e.labels.padding,angle:s,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var l=e.returned.edges||[],u=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var c=d3.extent(l,function(t){return t[e.edges.size.value]}),f=d3.min(e.returned.nodes||[],function(e){return e.d3plus.r})*(2*e.edges.size.scale);e.edges.scale=d3.scale.sqrt().domain(c).range([e.edges.size.min,f*u])}else{var d="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return d}}var h=e.edges.opacity.value,p=typeof h;e.edges.opacity.changed&&"string"===p&&e.edges.opacity.scale.value.domain(d3.extent(l,function(e){return e[h]})).range([e.edges.opacity.min.value,1]);var g=d3.svg.line().interpolate(e.edges.interpolate.value),v=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var m=r(e.edges.scale.range(),4),y=[],x=0;3>x;x++)y.push(m[x+1]+(m[1]-m[0])*(x+2)*2);else var b="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,y="number"==typeof e.edges.size.value?e.edges.size.value/b:b;var w=e.defs.selectAll(".d3plus_edge_marker").data(v,String),_=function(t){t.attr("d",function(t){var n=t.split("_");if(2==n.length&&e.edges.scale){n=parseInt(n[1]);var r=y[n]}else var r=y;return"target"==e.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(t){var n=t.split("_")[0];return"default"==n?e.edges.color:"focus"==n?e.color.focus:e.color.primary}).attr("transform","scale("+1/u+")")};e.draw.timing?(w.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),w.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(_)):(w.exit().remove(),w.select("path").attr("opacity",1).call(_));var k=e.draw.timing?0:1,A=w.enter().append("marker").attr("id",function(e){return"d3plus_edge_marker_"+e}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",k).attr("vector-effect","non-scaling-stroke").call(_);e.draw.timing&&A.transition().duration(e.draw.timing).attr("opacity",1);var S="string"==typeof e.edges.size.value?r(e.edges.scale.domain(),4):null,z=e.edges.arrows.direction.value,M=l.filter(function(t){if(t.d3plus||(t.d3plus={}),t.d3plus.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.spline!==!0){if(S){var n=t[e.edges.size.value];t.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var o=t[e.edges.source],a=t[e.edges.target];if(!o.d3plus||!a.d3plus)return!1;var s=Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x),l=Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x),c="source"==z&&e.edges.arrows.value?o.d3plus.r+r:o.d3plus.r,f="target"==z&&e.edges.arrows.value?a.d3plus.r+r:a.d3plus.r,d=i(s,c,e.shape.value),h=i(l,f,e.shape.value);return"edges"in o.d3plus||(o.d3plus.edges={}),o.d3plus.edges[a[e.id.value]]={x:o.d3plus.x-d.x,y:o.d3plus.y-d.y},"edges"in a.d3plus||(a.d3plus.edges={}),a.d3plus.edges[o[e.id.value]]={x:a.d3plus.x-h.x,y:a.d3plus.y-h.y},!0}return!1}),C=e.g.edges.selectAll("g.d3plus_edge_line").data(M,function(e){return e.d3plus.id}),T=l.filter(function(t){if(t.d3plus.spline){if(S){var n=t[e.edges.size.value];t.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var o=t[e.edges.source],a=t[e.edges.target],s=o.d3plus.edges?o.d3plus.edges[a[e.id.value]]||{}:{},l=a.d3plus.edges?a.d3plus.edges[o[e.id.value]]||{}:{},c=e.edges.arrows.value&&"source"==z?r:0,f=e.edges.arrows.value&&"target"==z?r:0,d=.1,h=o.d3plus.x>a.d3plus.x?1-d:1+d,p=o.d3plus.x>a.d3plus.x?1+d:1-d,g="number"==typeof s.angle?s.angle:Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)*h,v=i(g,o.d3plus.r+c,e.shape.value),m="number"==typeof l.angle?l.angle:Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x)*p,x=i(m,a.d3plus.r+f,e.shape.value),b=[o.d3plus.x-v.x,o.d3plus.y-v.y],w=!!s.offset&&i(g,s.offset),_=w?[b[0]-w.x,b[1]-w.y]:b,k=[a.d3plus.x-x.x,a.d3plus.y-x.y],A=!!l.offset&&i(m,l.offset),M=A?[k[0]-A.x,k[1]-A.y]:k,C=M[0]-_[0],T=M[1]-_[1],E="number"==typeof s.radius?s.radius:Math.sqrt(C*C+T*T)/4,j="number"==typeof l.radius?l.radius:Math.sqrt(C*C+T*T)/4,D=i(g,E-o.d3plus.r-2*c),O=i(m,j-a.d3plus.r-2*f);
t.d3plus.spline=[b,k];var N=Math.abs(Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)).toFixed(5),P=Math.abs(g).toFixed(5),F=Math.abs(m-Math.PI).toFixed(5);return(P!==F||[P,F].indexOf(N)<0)&&(t.d3plus.spline.splice(1,0,[_[0]-D.x,_[1]-D.y],[M[0]-O.x,M[1]-O.y]),w&&t.d3plus.spline.splice(1,0,_),A&&t.d3plus.spline.splice(t.d3plus.spline.length-1,0,M)),!0}return!1}),E=e.g.edges.selectAll("g.d3plus_edge_path").data(T,function(e){return e.d3plus.id});e.draw.timing?(C.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),C.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(o).call(n).each("end",s),E.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(a).call(n).each("end",s),C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(t).transition().duration(e.draw.timing).call(n).each("end",s),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).transition().duration(e.draw.timing).call(n).each("end",s)):(C.exit().remove(),E.exit().remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),C.selectAll("line").data(function(e){return[e]}).call(o).call(n).call(s),E.selectAll("path").data(function(e){return[e]}).call(a).call(n).call(s),C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(t).call(n).call(s),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).call(n).call(s))}},{"../../../geom/offset.coffee":160,"../../../util/buckets.coffee":203}],226:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/color.coffee"),o=(e("../../../core/fetch/value.coffee"),e("./segments.coffee")),a=e("./style.coffee");t.exports=function(e,t,n,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,n){n||(n=0),t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2-n/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2-n/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t+n}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t+n}).attr("rx",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("ry",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}function c(t,n,r,i){n||(n=0),"number"!=typeof r&&(r=void 0),"number"!=typeof i&&(i=void 0),t.attrTween("d",function(t){if(void 0===r)var o=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var o=r;if(void 0===i)var a=t.d3plus.segments[t.d3plus.shape];else var a=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a="donut"===t.d3plus.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,o+n),l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=s(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=l(n),f(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var f=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"]||"donut"!==e.shape.value)return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return"donut"===e.shape.value?n:2*n});t.each(function(t){function n(t){t.attr("stroke",p).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var s=o(e,t,"active"),f=o(e,t,"temp"),d=o(e,t,"total"),h=d3.select(this),p=i(e,t),g=[],v=[];if(d&&e.types[e.type.value].fill){if(f){var m=r(t);m.d3plus.shape="temp",g.push(m),v=["temp"]}if(s&&(d>s||f)){var m=r(t);m.d3plus.shape="active",g.push(m)}}var y=e.defs.selectAll("pattern#d3plus_hatch_"+t.d3plus.id).data(v);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",p),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",p)):(y.selectAll("rect").style("fill",p),y.selectAll("line").style("stroke",p));var x=y.enter().append("pattern").attr("id","d3plus_hatch_"+t.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");x.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",p).attr("fill-opacity",.25),x.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(n),x.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(n),x.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(n);var b=g.length?[t]:[],w=h.selectAll("#d3plus_clip_"+t.d3plus.id).data(b);w.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+t.d3plus.id).append("rect").attr("class","d3plus_clipping").call(l),e.draw.timing?(w.selectAll("rect").transition().duration(e.draw.timing).call(u),w.exit().transition().delay(e.draw.timing).remove()):(w.selectAll("rect").call(u),w.exit().remove());var _=h.selectAll("path.d3plus_fill").data(g);_.transition().duration(e.draw.timing).call(a,e).call(c),_.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+t.d3plus.id+")").transition().duration(0).call(a,e).call(c,0,void 0,0).transition().duration(e.draw.timing).call(c).call(a,e),_.exit().transition().duration(e.draw.timing).call(c,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":63,"../../../core/fetch/value.coffee":67,"../../../util/copy.coffee":206,"./segments.coffee":232,"./style.coffee":233}],227:[function(e,t,n){var r=(e("../../../util/copy.coffee"),e("../../../core/fetch/text.js")),i=e("../../../core/fetch/value.coffee"),o=e("../../../color/mix.coffee"),a=e("../../../core/console/print.coffee"),s=(e("../../../client/rtl.coffee"),e("./segments.coffee")),l=e("./color.coffee"),u=e("../../../string/list.coffee"),c=e("../../../color/text.coffee"),f=e("../../../textwrap/textwrap.coffee");t.exports=function(e,t){var n=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],d=e.g[t].selectAll("g"),h=function(t){t.attr("opacity",function(t){var r=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},p=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},g=function(t){var r="bottom"===e.labels.valign.value?"top":"bottom";t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var n=l(t.parent,e),r=c(n),i=t.text?.15:1;return o(n,r,.2,i)}).each(function(t){t.resize instanceof Array&&(t.resize[0],t.resize[1]);var i=t.resize,o=!0;if(t.text){i instanceof Array||(i=[9,50],o=t.resize);var a=t.y-t.h*n[1]/2+t.padding/2;"bottom"===r&&(a+=t.h*n[1]/2),f().align("center").container(d3.select(this)).height(t.h*n[1]/2).padding(t.padding/2).resize(o).size(i).text(e.format.value(100*t.text,{key:"share",vars:e})).width(t.w*n[1]).valign(r).x(t.x-t.w*n[1]/2+t.padding/2).y(a).draw()}else{t.resize instanceof Array||(i=[7,40*(n[1]/n[0])],o=t.resize);var s="bottom"===e.labels.valign.value?t.share:0;f().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(o).size(i).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+s).draw()}}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",r=e.angle||0,i=e.translate&&e.translate.x?e.translate.x:0,o=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+r+","+i+","+o+")scale("+1/n[1]+")translate("+(e.x*n[1]-e.x)+","+(e.y*n[1]-e.y)+")"+t})};if("edges"===t||e.labels.value){if(e.dev.value){var v="drawing "+t+" labels";a.time(v)}d.each(function(t){function o(t){var n="string"==typeof l.background?l.background:"none"===e.background.value?"#ffffff":e.background.value,r="string"==typeof l.background?l.background:n,i=_.attr("transform").split(")");i.pop(),i.pop(),i.push(""),i=i.join(")"),t.attr("fill",r).attr(T).attr("transform",i)}var a=t.d3plus&&"label"in t.d3plus&&!t.d3plus.label,l=t.d3plus_label||null,c=t.d3plus_share,f=t.d3plus.text?t.d3plus.text:l&&l.names?l.names:e.labels.text.value?i(e,t,e.labels.text.value):r(e,t),d=l&&"group"in l?l.group:d3.select(this),v=0,m=e.types[e.type.value].fill;if(f instanceof Array||(f=[f]),l)if(["line","area"].indexOf(e.shape.value)>=0)var y=!0;else if(t&&"d3plus"in t)var x=s(e,t,"active"),b=s(e,t,"temp"),w=s(e,t,"total"),y=!b&&!x||x>=w||!x&&b>=w;if(a||!(l&&l.force||y)&&m)delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(c&&t.d3plus.share&&c.w-2*e.labels.padding>=10&&c.h-2*e.labels.padding>=10&&"middle"!=e.labels.valign.value){c.resize=e.labels.resize.value!==!1&&(!(c&&"resize"in c)||c.resize),c.padding=e.labels.padding,c.text=t.d3plus.share,c.parent=t;var _=d.selectAll("text#d3plus_share_"+t.d3plus.id).data([c],function(e){return e.w+""+e.h+e.text});e.draw.timing&&1===e.zoom.scale?(_.transition().duration(e.draw.timing/2).call(g),_.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).attr("opacity",1)):(_.attr("opacity",1).call(g),_.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(g)),v=_.node().getBBox().height+e.labels.padding,_.exit().call(p)}else d.selectAll("text.d3plus_share").call(p);if(l&&(l.resize=e.labels.resize.value!==!1&&(!(l&&"resize"in l)||l.resize),l.padding="number"==typeof l.padding?l.padding:e.labels.padding),l&&l.w*n[1]-l.padding>=20&&l.h*n[1]-l.padding>=10&&f.length){for(var k=e.format.locale.value.ui.and,A=e.format.locale.value.ui.more,S=0;S<f.length;S++)f[S]instanceof Array&&(f[S]=u(f[S],k,3,A));l.names=f,l.share=v,l.parent=t;var _=d.selectAll("text#d3plus_label_"+t.d3plus.id).data([l],function(e){return!!e&&e.w+"_"+e.h+"_"+e.x+"_"+e.y+"_"+e.names.join("_")}),z=l.resize?void 0:e.labels.font.size*n[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(_.transition().duration(e.draw.timing/2).call(g).call(h),_.enter().append("text").attr("font-size",z).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(h)):(_.attr("opacity",1).call(g).call(h),_.enter().append("text").attr("font-size",z).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").call(g).call(h)),_.exit().call(p),0===_.size()||0===_.selectAll("tspan").size())delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(l.background){var M=["background"],C=_.node().getBBox(),T={height:C.height,width:C.width,x:C.x,y:C.y};T.width+=e.labels.padding*n[0],T.height+=e.labels.padding*n[0],T.x-=e.labels.padding*n[0]/2,T.y-=e.labels.padding*n[0]/2;var E=_.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];E=E.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),E=E.split(","),E.length>1&&(E=E[E.length-1],E=E.substring(0,E.length-1),T.y+=E)}else var M=[],T={};var j=d.selectAll("rect#d3plus_label_bg_"+t.d3plus.id).data(M),D="number"==typeof l.background?l.background:"string"==typeof l.background?1:.6;e.draw.timing?(j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j.transition().duration(e.draw.timing).attr("opacity",D).call(o),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(o).transition().duration(e.draw.timing).attr("opacity",D)):(j.exit().remove(),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg"),j.attr("opacity",D).call(o))}}else delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p)}}),e.dev.value&&a.timeEnd(v)}else{if(e.dev.value){var v="removing "+t+" labels";a.time(v)}d.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.dev.value&&a.timeEnd(v)}}},{"../../../client/rtl.coffee":40,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../string/list.coffee":173,"../../../textwrap/textwrap.coffee":199,"../../../util/copy.coffee":206,"./color.coffee":219,"./segments.coffee":232}],228:[function(e,t,n){function r(e){e.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y}).attr("width",0).attr("height",0)}function i(e,t){void 0===t&&(t=0),e.attr("x",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return e.d3plus.x-(n/2+t/2)}).attr("y",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return e.d3plus.y-(n/2+t/2)}).attr("width",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return n+t}).attr("height",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return n+t}).attr("rx",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return(n+t)/2}).attr("ry",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return(n+t)/2})}function o(e,t,n,r){var o=e.draw.timing?e.timing.mouseevents:0;void 0===r&&(r=0),o?(d3.select(t.parentNode).selectAll("path.d3plus_line").transition().duration(o).style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var o=c(e,t,n);i=o&&o.length?d3.max(o):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").transition().duration(o).style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r)):(d3.select(t.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var o=c(e,t,n);i=o&&o.length?d3.max(o):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r))}var a=e("../../../util/copy.coffee"),s=e("../../../util/closest.coffee"),l=e("../../../client/pointer.coffee"),u=e("./style.coffee"),c=e("../../../core/fetch/value.coffee");t.exports=function(e,t,n,f){var d=d3.svg.line().x(function(e){return e.d3plus.x}).y(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),h=e.size.value||2*e.data.stroke.width,p=e[e.axes.discrete],g=function(t){var n=h;if(n.constructor!==Number){var r=c(e,t,h);n=r&&r.length?d3.max(r):e.data.stroke.width}return 15>n?15:n},v=p.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var n=!1,f=[],m=[],y=a(t),x=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(r,i,o){var l=c(e,r,p.value);l.constructor===Date&&(l=l.getTime());var u=v.indexOf(s(v,l));n===!1||n===u-1?(y.values.push(r),y.segment_key+="_"+u):(y.values.length>1?f.push(y):m.push(y.values[0]),y=a(t),y.values=[r]),i===o.length-1&&(y.values.length>1?f.push(y):m.push(y.values[0])),n=u});var b=x.selectAll("path.d3plus_line").data(f,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.shape="line",e.segment_key}),w=x.selectAll("rect.d3plus_anchor").data(m,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.r=2*e.data.stroke.width,t.d3plus.id});e.draw.timing?(b.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).call(u,e),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(e){return d(e.values)}).call(u,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}).call(r).call(u,e),w.transition().duration(e.draw.timing).call(i).call(u,e),w.exit().transition().duration(e.draw.timing).call(r).remove()):(b.exit().remove(),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),b.attr("d",function(e){return d(e.values)}).call(u,e),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}),w.exit().remove(),w.call(i).call(u,e));var _=x.selectAll("path.d3plus_mouse").data(f,function(e){return e.segment_key});_.enter().append("path").attr("class","d3plus_mouse").attr("d",function(e){return d(e.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),_.on(l.over,function(t){e.draw.frozen||o(e,this,h,2)}).on(l.out,function(t){e.draw.frozen||o(e,this,h,0)}),e.draw.timing?_.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).style("stroke-width",g):_.attr("d",function(e){return d(e.values)}).style("stroke-width",g),_.exit().remove()})}},{"../../../client/pointer.coffee":38,"../../../core/fetch/value.coffee":67,"../../../util/closest.coffee":205,"../../../util/copy.coffee":206,"./style.coffee":233}],229:[function(e,t,n){t.exports=function(e){function t(t){t.attr("d",e.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3plus.x+","+e.d3plus.y+")"})}var n=e.returned.edges||[],r=e.g.edges.selectAll("g.d3plus_edge_path").data(n,function(t){return t.d3plus.id="path_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.id});e.draw.timing?(r.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),r.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(e.draw.timing).call(t)):(r.exit().remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),r.selectAll("path").data(function(e){return[e]}).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").call(t))}},{}],230:[function(e,t,n){var r,i,o,a;a=e("./style.coffee"),o={},r={},i={r:{},a:{}},t.exports=function(e,t,n,s){var l,u,c,f,d;c=e.id.nesting[e.depth.value+1],f=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return e.d3plus.r}).angle(function(e){return e.d3plus.a}),l=function(t){return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label),[t]},e.draw.timing?(t.each(function(t){var n,r,i,o,a;for(o=t[c],a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(n.d3plus.id=n[e.id.value]+"_"+n[c]);return a}),u=d3.svg.line.radial().interpolate("linear-closed").radius(function(e,t){return void 0===o[e.d3plus.id]&&(o[e.d3plus.id]=0),isNaN(o[e.d3plus.id])&&(o[e.d3plus.id]=e.d3plus.r),o[e.d3plus.id]}).angle(function(e,t){return void 0===r[e.d3plus.id]&&(r[e.d3plus.id]=e.d3plus.a),isNaN(r[e.d3plus.id])&&(r[e.d3plus.id]=e.d3plus.a),r[e.d3plus.id]}),d=function(e,t){return e.attrTween("d",function(e){var n,a,s,l,f,d,h;for(h=e[c],s=l=0,f=h.length;f>l;s=++l)a=h[s],n=a.d3plus.a,void 0===t?d=a.d3plus.r:0===t&&(d=0),i.a[a.d3plus.id]=d3.interpolate(r[a.d3plus.id],n),i.r[a.d3plus.id]=d3.interpolate(o[a.d3plus.id],d);return function(t){var n,l,f;for(f=e[c],s=n=0,l=f.length;l>n;s=++n)a=f[s],r[a.d3plus.id]=i.a[a.d3plus.id](t),o[a.d3plus.id]=i.r[a.d3plus.id](t);return u(e[c])}})},n.append("path").attr("class","d3plus_data").call(a,e).attr("d",function(e){return u(e[c])}),t.selectAll("path.d3plus_data").data(l).transition().duration(e.draw.timing).call(a,e).call(d),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(d,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(l).call(a,e).attr("d",function(e){return f(e[c])}))}},{"./style.coffee":233}],231:[function(e,t,n){var r;r=e("./style.coffee"),t.exports=function(e,t,n,i){var o,a,s;return o=function(t){var n,r;return e.labels.value&&!t.d3plus.label?(r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,t.d3plus_label={w:r,h:n,x:0,y:0},t.d3plus_share={w:r,h:n,x:0,y:0},t.d3plus_label.shape="circle"===t.d3plus.shape?"circle":"square"):t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]},a=function(e){return e.attr("x",function(e){return e.d3plus.init&&"x"in e.d3plus.init?e.d3plus.init.x:e.d3plus.init&&"width"in e.d3plus.init?-e.d3plus.width/2:0}).attr("y",function(e){return e.d3plus.init&&"y"in e.d3plus.init?e.d3plus.init.y:e.d3plus.init&&"height"in e.d3plus.init?-e.d3plus.height/2:0}).attr("width",function(e){return e.d3plus.init&&"width"in e.d3plus.init?e.d3plus.init.width:0}).attr("height",function(e){return e.d3plus.init&&"height"in e.d3plus.init?e.d3plus.init.height:0})},s=function(t){return t.attr("x",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,-t/2}).attr("y",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,-t/2}).attr("width",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.width}).attr("height",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3plus.shape,n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3plus.shape,t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3plus?"rotate("+e.d3plus.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3plus.shape||"rotate"in t.d3plus?"auto":e.shape.rendering.value})},e.draw.timing?(n.append("rect").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("rect.d3plus_data").data(o).transition().duration(e.draw.timing).call(s).call(r,e),i.selectAll("rect.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("rect").attr("class","d3plus_data"),t.selectAll("rect.d3plus_data").data(o).call(s).call(r,e))}},{"./style.coffee":233}],232:[function(e,t,n){var r;r=e("../../../core/fetch/value.coffee"),t.exports=function(e,t,n){var i;return i=e[n].value,i?n in t.d3plus?t.d3plus[n]:r(e,t,i):t.d3plus[n]}},{"../../../core/fetch/value.coffee":67}],233:[function(e,t,n){var r,i,o;r=e("./color.coffee"),i=e("../../../client/ie.js"),o=e("../../../core/fetch/value.coffee"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3plus&&e.d3plus.spline?"none":r(e,t)}).style("stroke",function(e){var n;return e.d3plus&&e.d3plus.stroke?e.d3plus.stroke:(n=e.values?r(e.values[0],t):r(e,t,!0),d3.rgb(n).darker(.6))}).style("stroke-width",function(e){var n;if(i&&t.types[t.type.value].zoom)return 0;if("line"===e.d3plus.shape&&t.size.value){if(t.size.value.constructor===Number)return t.size.value;if(n=o(t,e,t.size.value),n&&n.length)return d3.max(n)}return t.data.stroke.width}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":37,"../../../core/fetch/value.coffee":67,"./color.coffee":219}],234:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":233}],235:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":233}],236:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a,s,l,u,c,f,d;o=function(e){return e.d3plus.text?e.d3plus_label={w:f,h:f,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3plus.position)>=0?90:0}:e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]},d=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},a=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n,r;return["top","bottom"].indexOf(e.d3plus.position)>=0?0:(t=e.d3plus.offset||0,n=e.d3plus.width||0,r=0>t?-n:n,r+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("y1",function(e){var t,n,r;return["left","right"].indexOf(e.d3plus.position)>=0?0:(n=e.d3plus.offset||0,t=e.d3plus.height||0,r=0>n?-t:t,r+n)}).attr("y2",function(e){return["left","right"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},s=e.defs.selectAll("#d3plus_whisker_marker").data([0]),s.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),i=t.datum(),i?(u=i.d3plus.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",f="horizontal"===l?i.d3plus.width:i.d3plus.height):(l="horizontal",f=0),s.select("line").attr("x1","horizontal"===l?-f/2:0).attr("x2","horizontal"===l?f/2:0).attr("y1","vertical"===l?-f/2:0).attr("y2","vertical"===l?f/2:0).call(d).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(n.append("line").attr("class","d3plus_data").call(d).call(a),t.selectAll("line.d3plus_data").data(o).transition().duration(e.draw.timing).call(d).call(c),r.selectAll("line.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("line").attr("class","d3plus_data"),t.selectAll("line.d3plus_data").data(o).call(d).call(c))}},{}],237:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../client/prefix.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/touch.coffee"),s=e("../zoom/propagation.coffee");t.exports=function(e){e.dev.value&&o.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3plus").data([0]),e.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("stroke","none").attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),e.g.viz.enter().append("g").attr("id","d3plus_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),e.g.overlay.on(r.move,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grabbing"):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),e.g.labels.enter().append("g").attr("id","d3plus_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&o.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../client/touch.coffee":43,"../../../core/console/print.coffee":52,"../zoom/propagation.coffee":252}],238:[function(e,t,n){var r=e("../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),
e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":52}],239:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../tooltip/create.js"),o=e("../../../core/data/nest.js"),a=e("./data.js"),s=e("../../../core/fetch/color.coffee"),l=e("../../../core/fetch/text.js"),u=e("../../../core/fetch/value.coffee"),c=e("../../../object/merge.coffee"),f=e("../../../tooltip/remove.coffee"),d=e("../shapes/segments.coffee"),h=e("../../../client/scroll.js"),p=e("../../../util/uniques.coffee"),g=e("../../../object/validate.coffee"),v=e("../zoom/direction.coffee");t.exports=function(e){function t(t){function h(e){return"string"==typeof n[e].value?n[e].value:n.format.locale.value.method[e]}var v,w="depth"in e?e.depth:y,z={},M=n.id.nesting[w+1]in m?w+1:w,C=n.id.nesting[M],O="merged"in m.d3plus?m.d3plus.merged:m[C];O instanceof Array||(O=[O]);var N=u(n,m,n.size.value);if(n.tooltip.children.value){if(O=O.slice(0),O.length>1&&g(O[0])&&(O=o(n,O,[C])),n.size.value&&g(O[0])){var P=[],F=O.filter(function(e){var t=u(n,e,n.size.value);return!(null===t||"d3plus"in e&&e.d3plus.merged)||void P.push(e)});r(F,n.size.value,"desc",[],n),O=F.concat(P)}var I="short"===S?3:n.data.large,R=O.length,L=d3.min([R,I]);v={values:[]};for(var B=0;L>B&&O.length;B++){var q=O.shift(),U=l(n,q,M)[0],V=g(q)?u(n,q,C,M):q;if(V!==m[n.id.nesting[w]]&&U&&!v[U]){var $=g(q)?u(n,q,n.size.value,C):null,H=s(n,q,C);v[U]=!$||$ instanceof Array?"":n.format.value($,{key:n.size.value,vars:n,data:q});var Y={};Y[U]=v[U],v.values.push(Y),H&&(v.d3plus_colors||(v.d3plus_colors={}),v.d3plus_colors[U]=H)}else B--}R>L&&(v.d3plusMore=R-L)}m.d3plus.tooltip&&(z=c(z,m.d3plus.tooltip)),n.tooltip.size.value&&(N&&"number"!=typeof n.size.value&&(z[h("size")]=N),n.axes.opposite&&n[n.axes.opposite].value!==n.size.value&&(z[h(n.axes.opposite)]=u(n,m,n[n.axes.opposite].value)),n.axes.opposite&&n[n.axes.opposite+"2"].value!==n.size.value&&(z[h(n.axes.opposite+"2")]=u(n,m,n[n.axes.opposite+"2"].value)),n.color.valueScale&&(z[h("color")]=u(n,m,n.color.value)));var W=d(n,m,"active"),X=d(n,m,"temp"),J=d(n,m,"total");"number"==typeof W&&W>0&&J&&(z[h("active")]=W+"/"+J+" ("+n.format.value(W/J*100,{key:"share",vars:n,data:m})+")"),"number"==typeof X&&X>0&&J&&(z[h("temp")]=X+"/"+J+" ("+n.format.value(X/J*100,{key:"share",vars:n,data:m})+")"),n.tooltip.share.value&&m.d3plus.share&&(z.share=n.format.value(100*m.d3plus.share,{key:"share",vars:n,data:m}));var M="depth"in e?e.depth:y,G=e.title||l(n,m,M)[0],Q=p(m,n.icon.value,u,n,n.id.nesting[M]),Z=a(n,m,S,z,v,M);if(Q=1===Q.length&&"string"==typeof Q[0]&&Q[0],Z.length>0||T||!m.d3plus_label&&"short"==S&&G||m.d3plus_label&&(!("visible"in m.d3plus_label)||"visible"in m.d3plus_label&&m.d3plus_label.visible===!1)){G||(G=n.format.value(V,{key:n.id.value,vars:n}));var M="d3plus"in m&&"merged"in m.d3plus?y-1:"depth"in e?e.depth:y;if(0>M&&(M=0),M=n.id.nesting[M],"string"==typeof n.icon.style.value)var K=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[M])var K=n.icon.style.value[M];else var K="default";var ee=n.tooltip.small;e.width?ee=e.width:k&&(ee=n.tooltip.large);var te=!k&&"long"!==e.length||k&&n.tooltip.fullscreen.value?d3.select("body"):n.container.value;!e.description&&m&&n.tooltip.sub.value&&(e.description=u(n,m,n.tooltip.sub.value)),i({align:A,arrow:b,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:Z,color:s(n,m),allColors:!0,footer:e.footer===!1?e.footer:T,fullscreen:k,html:t,js:e.js,icon:Q,id:_,max_height:e.maxheight,max_width:ee,mouseevents:x,offset:D,parent:te,stacked:n.tooltip.stacked.value,style:K,title:G,description:e.description,width:e.width||k||0!=Z.length?ee:"auto",x:E,y:j})}else f(_)}"d3plus"in e.data||(e.data.d3plus={});var n=e.vars,m=e.data,y="d3plus"in m&&"depth"in m.d3plus?m.d3plus.depth:n.depth.value,x=(e.ex,!!e.mouseevents&&e.mouseevents),b=!("arrow"in e)||e.arrow,w=u(n,m,n.id.value),_=e.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value["long"]||"fullscreen"in e){var k=!1,A=e.anchor||n.tooltip.anchor,S=e.length||"short",z=v(m,n);if(-1===z){var M=n.id.nesting[y-1];u(n,w,M)}var C="";if(n.mouse.click.value&&(!n.mouse.viz||n.mouse.viz.click!==!1))if(1===z&&n.zoom.value)var C=n.format.value(n.format.locale.value.ui.expand);else if(-1===z&&n.zoom.value&&n.history.states.length&&!n.tooltip.value["long"])var C=n.format.value(n.format.locale.value.ui.collapse);else if(n.small||"short"!=S||!n.tooltip.html.value&&!n.tooltip.value["long"]||1===n.focus.value.length&&n.focus.value[0]==w){if("long"==S)var C=n.footer.value||""}else var C=n.format.locale.value.ui.moreInfo;var T=!!C.length&&n.format.value(C,{key:"footer",vars:n})}else{var k=!0,b=!1,x=!0,S="long",T=n.footer.value;n.covered=!0}if("x"in e)var E=e.x;else if("static"===n.types[n.type.value].tooltip){var E=m.d3plus.x;n.zoom.translate&&n.zoom.scale&&(E=n.zoom.translate[0]+E*n.zoom.scale),E+=n.margin.left,"long"!==e.length&&(j+=h.x(),E+=n.container.value.node().getBoundingClientRect().left,E+=parseFloat(n.container.value.style("padding-left"),10))}else var E=d3.mouse(d3.select("html").node())[0];if("y"in e)var j=e.y;else if("static"==n.types[n.type.value].tooltip){var j=m.d3plus.y;n.zoom.translate&&n.zoom.scale&&(j=n.zoom.translate[1]+j*n.zoom.scale),j+=n.margin.top,"long"!==e.length&&(j+=h.y(),j+=n.container.value.node().getBoundingClientRect().top,j+=parseFloat(n.container.value.style("padding-top"),10))}else var j=d3.mouse(d3.select("html").node())[1];if("offset"in e)var D=e.offset;else if("static"==n.types[n.type.value].tooltip){var D=m.d3plus.r?m.d3plus.r:m.d3plus.height/2;n.zoom.scale&&(D*=n.zoom.scale)}else var D=3;if(k||"long"===e.length)if("string"==typeof n.tooltip.html.value)t(n.tooltip.html.value);else if("function"==typeof n.tooltip.html.value)t(n.tooltip.html.value(w));else if(n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url){var O=n.tooltip.html.value.url;"function"==typeof O&&(O=O(w)),d3.json(O,function(e){var r=n.tooltip.html.value.callback?n.tooltip.html.value.callback(e):e;t(r)})}else t(e.html);else t(e.html)}},{"../../../array/sort.coffee":34,"../../../client/scroll.js":41,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../tooltip/create.js":200,"../../../tooltip/remove.coffee":202,"../../../util/uniques.coffee":209,"../shapes/segments.coffee":232,"../zoom/direction.coffee":249,"./data.js":240}],240:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/fetch/color.coffee"),a=e("../../../core/fetch/text.js"),s=e("../../../color/legible.coffee"),l=e("../../../object/merge.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../string/format.js"),f=e("../../../object/validate.coffee");t.exports=function(e,t,n,d,h,p){function g(n,r){if(e.attrs.value[r])var o=r;else var o=null;r&&(r=e.format.value(r));var a=m[n]||i(e,t,n,o);if(f(a))w.push({name:e.format.value(n),value:e.format.value(a.value,{key:a.key,vars:e}),group:r});else if(null!=a&&"undefined"!=a&&!(a instanceof Array)&&("string"==typeof a&&a.indexOf("d3plus_other")<0||"string"!=typeof a)){var s=e.format.locale.value.ui[n]?e.format.value(e.format.locale.value.ui[n]):e.format.value(n),l=x.indexOf(n)>=0;a instanceof Array?a.forEach(function(r){r=e.format.value(r,{key:n,vars:e,data:t})}):a=e.format.value(a,{key:n,vars:e,data:t});var u={name:s,value:a,highlight:l,group:r};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in e.descs.value&&(u.desc=e.descs.value[n]);w.push(u)}}if(e.small)return[];if(!n)var n="long";if("long"==n)var v="short";else var v="long";var m={};if(d&&"string"==typeof d)d=[d];else if(d&&"object"==typeof d){m=l(m,d);var d=[];for(var y in m)d.push(y)}else if(!d)var d=[];var x=[];if(e.tooltip.value instanceof Array)var b=e.tooltip.value;else if("string"==typeof e.tooltip.value)var b=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[p]])var b=e.tooltip.value[e.id.nesting[p]];else var b=e.tooltip.value;b instanceof Array||(b=b[n]?b[n]:b[v]?[]:l({"":[]},b)),"string"==typeof b?b=[b]:b instanceof Array||(b=l({"":[]},b))}var w=[];if(b.constructor===Array&&(b={"":b}),e.id.nesting.length&&p<e.id.nesting.length-1){var b=r(b);e.id.nesting.forEach(function(e,t){t>p&&b[e]&&delete b[e]})}for(var _ in b){b[_].constructor!==Array&&(b[_]=[b[_]]);for(var k=d.length;k>0;k--)b[_].indexOf(d[k-1])>=0&&d.splice(k-1,1)}if(e.tooltip.value["long"]&&"object"==typeof e.tooltip.value["long"])for(var _ in e.tooltip.value["long"])for(var k=d.length;k>0;k--){var A=d[k-1];e.tooltip.value["long"][_].indexOf(A)>=0&&(b[_]||(b[_]=[]),b[_].push(A),d.splice(k-1,1))}d.length&&(b[""]||(b[""]=[]),b[""]=b[""].concat(d));for(var _ in b)b[_].forEach(function(e){g(e,_)});if(h){var S=e.format.locale.value.ui.including,z=h.d3plus_colors;h.values.forEach(function(t){var n=d3.keys(t)[0];w.push({group:e.format.value(S),highlight:!(!z||!z[n])&&z[n],name:n,value:t[n]})}),h.d3plusMore&&w.push({group:e.format.value(S),highlight:!0,name:c(e.format.locale.value.ui.more,h.d3plusMore),value:""})}if(e.tooltip.connections.value&&"long"===n){var M=e.edges.connections(t[e.id.value],e.id.value,!0);M.length&&M.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]===t[e.id.value]}),n=n.length?n[0]:t,r=a(e,n)[0],i=o(e,n),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+i,"border-color: "+s(i),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";var f=function(){e.self.focus([n[e.id.value]]).draw()};w.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:f,name:"<div id='d3plustooltipfocuslink_"+n[e.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+r+"</div>"})})}return w}},{"../../../client/prefix.coffee":39,"../../../color/legible.coffee":44,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/merge.coffee":170,"../../../object/validate.coffee":171,"../../../string/format.js":172,"../../../util/copy.coffee":206}],241:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,f=e.types[e.type.value],u=f.requirements||[],i=u.indexOf("data")>=0,o=!i||i&&e.data.viz.length,!e.error.internal&&o){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&r.time("running "+t),l=e.data.viz,a=0,s=l.length;s>a;a++)n=l[a],n.d3plus&&(delete n.d3plus.shape,delete n.d3plus.label,delete n.d3plus.rotate,delete n.d3plus.share);c=f(e),e.dev.value&&r.timeEnd("running "+t)}else c=null;e.returned={nodes:[],edges:null},c instanceof Array?e.returned.nodes=c:c&&(c.nodes&&(e.returned.nodes=c.nodes),c.edges&&(e.returned.edges=c.edges))}},{"../../../core/console/print.coffee":52}],242:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../form/form.js"),o=e("../../../core/console/print.coffee"),a=e("../../../object/validate.coffee");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,n=e.ui.position.value;e.dev.value&&t&&o.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);s.enter().append("div").attr("id","d3plus_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==n?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3plus_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block"),u.style("padding",e.ui.padding+"px").each(function(t){t.form||(t.form=i().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var n,o;"string"==typeof t.method&&t.method in e?(n=e[t.method].value,o=function(n){n!==e[t.method].value&&e.self[t.method](n).draw()}):(n=t.value[0],a(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(o=function(n){t.method(n,e.self)}));var s,l=[];t.label?s=t.label:"string"==typeof t.method&&t.method in e&&(s=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var n={};a(t)?(n.id=t[d3.keys(t)[0]],n.text=e.format.value(d3.keys(t)[0])):(n.id=t,n.text=e.format.value(t)),l.push(n)});var u=r(e.ui.font);u.align=r(e.font.align),u.secondary=r(u),t.form.data(l).font(u).focus(t.value.length>1&&n).focus({callback:o}).format(e.format.locale.language).format({number:e.format.number.value,text:e.format.text.value}).title(e.format.value(s)).type(t.type||"auto").ui({align:e.ui.align.value,border:e.ui.border,color:{primary:e.ui.color.primary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding,margin:0}).width(t.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[n]+=c),e.dev.value&&t&&o.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":52,"../../../form/form.js":103,"../../../object/validate.coffee":171,"../../../util/copy.coffee":206}],243:[function(e,t,n){var r,i,o,a;r=e("../../../client/pointer.coffee"),i=e("../../../color/lighter.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/css.coffee"),t.exports=function(e){var t,n,s,l,u,c,f,d,h,p,g,v,m,y,x;return!e.small&&e.history.states.length>0?(e.dev.value&&o.time("drawing back button"),t=e.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),h=e.title.sub.font.size,n=e.title.sub.font.color,u=e.title.sub.font.family.value,x=e.title.sub.font.weight,d=e.title.sub.padding,v=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?v="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?v="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(v="title"),v?(p=function(e){var t;return t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0],t=t.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),t=t.split(","),t=t[t.length-1],parseFloat(t.substring(0,t.length-1))},m=e.svg.select(".d3plus_title."+v),y=p(m)+p(m.select("text"))):(y=e.margin.top-e.title.padding,f=h+2*d,e.margin.top+=f),s=parseFloat(e.container.value.style("padding-top"),10),y+=s,s=parseFloat(e.container.value.style("padding-left"),10),c=e.margin.left+h/2+s,g=function(e){return e.style("position","absolute").style("left",c+"px").style("top",y+"px").style("color",n).style("font-family",u).style("font-weight",x).style("font-size",h+"px")},l=t.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(g).html(function(){var t;return a("font-awesome")&&0===e.icon.back.value.indexOf("fa-")?(t="<i class='fa "+e.icon.back.value,t+="' style='margin-top:2px;margin-right:4px;'></i>"):t=e.icon.back.value+" ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(r.over,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",i(n,.25)):void 0}).on(r.out,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",n):void 0}).on(r.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(g),e.dev.value?o.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3plus_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../color/lighter.coffee":45,"../../../core/console/print.coffee":52}],244:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../util/buckets.coffee"),o=e("../../../util/copy.coffee"),a=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataURL.coffee"),u=e("../../../client/pointer.coffee"),c=e("../../../core/fetch/value.coffee"),f=e("../../../core/fetch/color.coffee"),d=e("../../../core/fetch/text.js"),h=e("../../../core/console/print.coffee"),p=e("../../../tooltip/remove.coffee"),g=e("../../../color/text.coffee"),v=e("../../../util/uniques.coffee"),m=e("../../../client/scroll.js"),y=e("../../../string/strip.js"),x=e("../../../textwrap/textwrap.coffee"),b=(e("../../../client/touch.coffee"),e("../../../object/validate.coffee"));t.exports=function(e){function t(t){t.attr("transform",function(t,n){var r=D+n*(e.ui.padding+_);return"translate("+r+","+e.ui.padding+")"})}function n(t){t.attr("width",_).attr("height",_).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var n=v(t,e.icon.value,c,e,L),r=f(e,t,L);if(e.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var i,o=y(n+"_"+r),a=e.icon.style.value,s=e.defs.selectAll("pattern#"+o).data([o]);i="string"==typeof a?e.icon.style.value:b(a)&&a[L]?a[L]:"default",r="knockout"==i?r:"none",s.select("rect").transition().duration(e.draw.timing).attr("fill",r).attr("width",_).attr("height",_),s.select("image").transition().duration(e.draw.timing).attr("width",_).attr("height",_);var u=s.enter().append("pattern").attr("id",o).attr("width",_).attr("height",_);return u.append("rect").attr("fill",r).attr("width",_).attr("height",_),u.append("image").attr("xlink:href",n).attr("width",_).attr("height",_).each(function(e){0===n.indexOf("/")||n.indexOf(window.location.hostname)>=0?l(n,function(e){s.select("image").attr("xlink:href",e)}):s.select("image").attr("xlink:href",n)}),"url(#"+o+")"}if(e.legend.labels.value){var h;if(h=e.legend.text.value?[c(e,t,e.legend.text.value,R)]:d(e,t,R),1===h.length&&!(h[0]instanceof Array)&&h[0].length){var p=d3.select(this.parentNode).append("text"),m=e.legend.font.size;m instanceof Array||(m=[m]),p.attr("font-size",m[m.length-1]+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("stroke","none").attr("fill",g(r)).attr("x",0).attr("y",0).each(function(t){x().align("middle").container(d3.select(this)).height(_).padding(e.ui.padding).resize(m.length>1).size(m).text(h[0]).width(_).valign("middle").draw()}),p.select("tspan").empty()&&p.remove()}}return r})}var w=!0,_=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&h.time("drawing color scale"),e.g.legend.selectAll("g.d3plus_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var k=e.color.valueScale.domain(),A=e.color.valueScale.range();k.length<=2&&(k=i(k,6));var S=e.g.legend.selectAll("g.d3plus_scale").data(["scale"]);S.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var z=S.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);z.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var M=z.selectAll("stop").data(d3.range(0,A.length));M.enter().append("stop").attr("stop-opacity",1),M.attr("offset",function(e){return Math.round(e/(A.length-1)*100)+"%"}).attr("stop-color",function(e){return A[e]}),M.exit().remove();var C=S.selectAll("rect#gradient").data(["gradient"]);C.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var T=S.selectAll("text.d3plus_tick").data(d3.range(0,k.length));T.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var E=0;T.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(k[t],{key:e.color.value,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);t>E&&(E=t)}),E+=2*e.labels.padding;var j=E*(k.length-1);if(j+E<e.width.value){j+E<e.width.value/2&&(j=e.width.value/2,E=j/k.length,j-=E);var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-j:e.width.value/2-j/2,T.transition().duration(e.draw.timing).attr("x",function(e){return D+E*e}),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var O=S.selectAll("rect.d3plus_tick").data(d3.range(0,k.length));O.enter().append("rect").attr("class","d3plus_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.transition().duration(e.draw.timing).attr("x",function(e){var t=0===e?1:0;return D+E*e-t}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.exit().transition().duration(e.draw.timing).attr("width",0).remove(),C.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-j/2:"end"==e.legend.align?e.width.value-j-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",j).attr("height",e.legend.gradient.height),S.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&h.timeEnd("drawing color scale")}else w=!1}else w=!1;else{e.dev.value&&h.time("grouping data by colors");var N;if(e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(N=o(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var P=0;P<N.length;P++){var F=e.data.viz.filter(function(t){return t[e.id.value]===N[P][e.id.value]});F.length&&(N[P]=F[0])}}else N=e.data.viz;N.length&&"key"in N[0]&&"values"in N[0]&&(N=d3.merge(N.map(function(e){return e.values})));var I=function(t){return f(e,t,R)},R=0,L=e.id.value,B=e.id.nesting.indexOf(e.color.value);if(B>=0)R=B,L=e.id.nesting[B];else for(var q=0;q<=e.depth.value;q++){R=q,L=e.id.nesting[q];var U=v(N,function(t){return c(e,t,L)}),V=v(N,I);if(U.length>=V.length&&V.length>1)break}var $=[e.color.value],A=s(e,N,$,!1);e.dev.value&&h.timeEnd("grouping data by color");var H=e.width.value;_=e.legend.size;var j=_*A.length+e.ui.padding*(A.length+1);if(_ instanceof Array){e.dev.value&&h.time("calculating legend size");for(var P=_[1];P>=_[0];P--)if(j=P*A.length+e.ui.padding*(A.length+1),H>=j){_=P;break}e.dev.value&&h.timeEnd("calculating legend size")}else"number"!=typeof _&&_!==!1&&(_=30);if(j>H||1==A.length)w=!1;else{j-=2*e.ui.padding,e.dev.value&&h.time("sorting legend");var Y=e[e.legend.order.value].value,W=e.color.value;Y?"color"!==e.legend.order.value&&(W=[]):Y=e[e.color.value].value,r(A,Y,e.legend.order.sort.value,W,e,R),e.dev.value&&h.timeEnd("sorting legend"),e.dev.value&&h.time("drawing legend");var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?H-e.ui.padding-j:H/2-j/2,e.g.legend.selectAll("g.d3plus_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var X={},J=e.g.legend.selectAll("g.d3plus_color").data(A,function(t){var n=f(e,t,L);return n in X||(X[n]=-1),X[n]++,X[n]+"_"+n});J.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(t).append("rect").attr("class","d3plus_color").call(n),J.order().transition().duration(e.draw.timing).call(t).attr("opacity",1).selectAll("rect.d3plus_color").call(n),J.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.legend.tooltip.value&&J.on(u.over,function(t,n){d3.select(this).style("cursor","pointer");var r,i,o=this.getBoundingClientRect(),s=o.left+_/2+m.x(),l=o.top+_/2+m.y()+5,f=c(e,t,L),h=e.id.nesting.indexOf(L),p=h>=0?d(e,t,h)[0]:e.format.value(c(e,t,e.color.value,L),{key:e.color.value,vars:e,data:t});if(e.legend.filters.value&&!(f instanceof Array)){r="<div style='text-align:center;'>";var g=e.format.locale.value;r+="<div class='mute'>"+e.format.value(g.method.mute)+"</div>",r+="<div class='solo'>"+e.format.value(g.method.solo)+"</div>",r+="</div>",i=function(t){var n={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};t.select(".mute").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.mute.value;e.history.states.push(function(){e.self.id({mute:t}).draw()}),e.self.id({mute:f}).draw()}),t.select(".solo").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.solo.value;e.history.states.push(function(){e.self.id({solo:t}).draw()}),e.self.id({solo:f}).draw()})}}a({data:t,html:r,js:i,depth:R,footer:!1,vars:e,x:s,y:l,mouseevents:this,title:p,offset:.4*_})}).on(u.out,function(t){p(e.type.value)}),e.dev.value&&h.timeEnd("drawing legend")}}else w=!1;if(e.legend.value&&key&&w){if(e.dev.value&&h.time("positioning legend"),_)var G=_+e.ui.padding;else var Q=e.g.legend.node().getBBox(),G=Q.height+Q.y;0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=G,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&h.timeEnd("positioning legend")}else e.dev.value&&h.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&h.timeEnd("hiding legend")}},{"../../../array/sort.coffee":34,"../../../client/pointer.coffee":38,"../../../client/scroll.js":41,"../../../client/touch.coffee":43,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/nest.js":60,"../../../core/fetch/color.coffee":63,"../../../core/fetch/text.js":66,"../../../core/fetch/value.coffee":67,"../../../object/validate.coffee":171,"../../../string/strip.js":174,"../../../textwrap/textwrap.coffee":199,"../../../tooltip/remove.coffee":202,"../../../util/buckets.coffee":203,"../../../util/copy.coffee":206,"../../../util/dataURL.coffee":208,"../../../util/uniques.coffee":209,"../tooltip/create.js":239}],245:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../color/text.coffee");t.exports=function(e,t){function n(t){t.style(a).style("position","absolute").style("background-color",l).style("text-align","center").style("left",function(){return"center"==s?"50%":"0px"}).style("width",function(){return"center"==s?"auto":e.width.value+"px"}).style("margin-left",function(){return"center"==s?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==s?"50%":"top"==s?"0px":"auto"}).style("bottom",function(){return"bottom"==s?"0px":"auto"}).style("margin-top",function(){if("large"==o){var e=this.offsetHeight||this.getBoundingClientRect().height;return-e/2+"px"}return"0px"})}t=e.messages.value?t:null;var o=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===o)var a=e.messages,s="center";else{if(e.footer.value)var a=e.footer;else if(e.title.value)var a=e.title;else if(e.title.sub.value)var a=e.title.sub;else if(e.title.total.value)var a=e.title.total;else var a=e.title.sub;var s=a.position}var a={color:a.font.color,"font-family":a.font.family.value,"font-weight":a.font.weight,"font-size":a.font.size+"px",padding:a.padding+"px"},l=e.messages.background.value;l||(l=e.background.value,("none"===l||"transparent"===l)&&(l=i(a.color))),e.g.message=e.container.value.selectAll("div#d3plus_message").data(["message"]);var u=e.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);u.append("div").attr("class","d3plus_message_text").style("display","block"),e.g.message.select(".d3plus_message_text").text(t?t:e.g.message.text());var c=navigator.onLine,f=75,d=e.g.message.selectAll(".d3plus_message_branding").data(e.messages.branding.value&&"center"===s?[0]:[]);d.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size","11px").style("background-size",f+"px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(r.click,function(){window.open("http://www.d3plus.org/","_blank")});var h=d3.hsl(l).l<.5?e.messages.branding.image.dark:e.messages.branding.image.light;d.text(c?"Powered by:":"Powered by D3plus").style("background-color",c?l:"transparent").style("background-image",c?"url('"+h+"')":"none").style("min-width",c?f+"px":"auto").style("height",c?f+"px":"auto"),d.exit().remove(),e.g.message.style("display",t?"inline-block":"none").call(n).style("opacity",t?1:0)}},{"../../../client/pointer.coffee":38,"../../../color/text.coffee":50}],246:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d;r=e("../../../util/closest.coffee"),i=e("../../../client/css.coffee"),a=e("../../../font/sizes.coffee"),o=e("../../../client/pointer.coffee"),s=e("../../../color/mix.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../core/console/print.coffee"),f=e("../../../color/text.coffee"),d=e("../../../core/data/time.coffee"),l=!1,t.exports=function(e){var t,n,a,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&c.time("drawing timeline"),H={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},ae=e.data.time.ticks.map(function(e){return new Date(e)}),G=d(e,{values:ae,style:H}),te=G.values.map(Number),J=G.format,e.time.solo.value.length)for(w=d3.extent(e.time.solo.value),b=_=0,S=w.length;S>_;b=++_)m=w[b],m.constructor!==Date&&(m+="",4===m.length&&parseInt(m)+""===m&&(m+="/01/01"),m=new Date(m),w[b]=m);else w=d3.extent(ae);if(oe=ae.slice(),re=d3.max(G.sizes.map(function(e){return e.height})),k=~~d3.max(G.sizes.map(function(e){return e.width}))+1,k+=2*e.ui.padding,Z=e.timeline.height.value||re+2*e.ui.padding,ee=k*ae.length,F=Z,U=Z-2*e.ui.padding>=re,t=e.width.value-2*e.ui.padding,U&&e.timeline.play.value&&(t-=F+e.ui.padding),!U||te.length<ae.length||t<k*te.length){for(T=k,k=(t-k)/ae.length,
ee=k*ae.length,K=1,W=~~(T/(ee/te.length))+1;W<te.length-1&&(te.length-1)%W!==0;)W++;te=te.filter(function(e,t){return t%W===0})}else K=0,M=new Date(ae[0]),B=e.data.time.stepType,M["set"+B](M["get"+B]()+ae.length),oe.push(M);return R=new Date(w[0]),R=r(oe,R),y=new Date(w[1]),K||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=r(oe,y),ie=oe.map(Number),C=ie.indexOf(+R),z=ie.indexOf(+y),h=[R,y],L="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-ee:e.width.value/2-ee/2,U&&e.timeline.play.value&&(L+=(F+e.ui.padding)/2),q=function(){return clearInterval(l),l=!1,j.call(D,"icon")},g=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(l&&q(),h=a.extent(),n=r(oe,h[0]),t=r(oe,h[1]),n===t&&(C=ie.indexOf(+n),n<h[0]||0===C?t=oe[C+1]:n=oe[C-1]),C=ie.indexOf(+n),z=ie.indexOf(+t),z-C>=1)e=[n,t];else if(C+1<=ae.length)e=[n,oe[C+1]];else{for(e=[n],b=1;1>=b;)C+b<=ae.length?e.push(oe[C+b]):e.unshift(oe[C-(C+b-ae.length)]),b++;e=[e[0],e[e.length-1]]}return h=e,V.attr("fill",$),d3.select(this).call(a.extent(e))}},I=function(){var t;return z-C===ae.length-K?t=[]:(t=ie.filter(function(e,t){return t>=C&&z+K>t}),t=t.map(function(e){return new Date(e)})),P(),e.self.time({solo:t}).draw()},v=function(){var t,n,i,o;return null!==d3.event.sourceEvent&&(e.time.solo.value.length?(o=d3.extent(e.time.solo.value),i=ie.indexOf(+r(oe,o[0])),n=ie.indexOf(+r(oe,o[1])),t=i!==C||n!==z):t=z-C!==ae.length-K,t)?I():void 0},E=e.g.timeline.selectAll("rect.d3plus_timeline_play").data(U&&e.timeline.play.value?[0]:[]),N=function(t){return t.attr("width",F+1).attr("height",Z+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",L-F-1-e.ui.padding).attr("y",e.ui.padding)},E.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(N),E.transition().duration(e.draw.timing).call(N),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=e.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(U&&e.timeline.play.value?[0]:[]),D=function(t,n){var r;return n=e.timeline.play[n],i("font-awesome")?(n=n.awesome,r="FontAwesome"):(n=n.fallback,r="inherit"),t.style("font-family",r).text(n)},O=function(t){var n;return n=Z/2+e.ui.padding+1,t.attr("fill",f(e.ui.color.primary.value)).attr("stroke","none").attr(H).attr("x",L-(F-1)/2-e.ui.padding).attr("y",n).attr("dy","0.5ex").call(D,l?"pause":"icon")},j.enter().append("text").attr("class","d3plus_timeline_playIcon").call(O).style("pointer-events","none").attr("opacity",0),j.call(O).transition().duration(e.draw.timing).attr("opacity",1),j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),P=function(){return z-C===ae.length-K?(E.on(o.hover,null).on(o.click,null).transition().duration(e.draw.timing).attr("opacity",.3),j.transition().duration(e.draw.timing).attr("opacity",.3)):(E.on(o.over,function(){return d3.select(this).style("cursor","pointer")}).on(o.out,function(){return d3.select(this).style("cursor","auto")}).on(o.click,function(){return l?q():(j.call(D,"pause"),z===ae.length?(z-=C,C=0):(C++,z++),I(),l=setInterval(function(){return z===ae.length-K?q():(C++,z++,I())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),j.transition().duration(e.draw.timing).attr("opacity",1))},P(),$=function(t){var n,r,i;return r=K?t<=h[1]:t<h[1],t>=h[0]&&r?(i=1,n=f(e.ui.color.secondary.value)):(i=.5,n=f(e.ui.color.primary.value)),K&&e.background.value&&"none"!==e.background.value&&(n=d3.rgb(f(e.background.value))),n=d3.rgb(n),"rgba("+n.r+","+n.g+","+n.b+","+i+")"},n=e.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),n.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",L-1).attr("y",e.ui.padding),n.transition().duration(e.draw.timing).attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",L-1).attr("y",e.ui.padding),X=e.g.timeline.selectAll("g#ticks").data(["ticks"]),X.enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),p=e.g.timeline.selectAll("g#brush").data(["brush"]),p.enter().append("g").attr("id","brush"),A=e.g.timeline.selectAll("g#labels").data(["labels"]),A.enter().append("g").attr("id","labels"),V=A.selectAll("text").data(ae,function(e,t){return t}),V.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),ne=d3.time.scale().domain(d3.extent(oe)).rangeRound([0,ee]),V.order().attr(H).text(function(e,t){return te.indexOf(+e)>=0?J(e):""}).attr("opacity",function(t,n){return e.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",$).attr("transform",function(t,n){var r,i;return r=L+ne(t),K||(r+=k/2),i=Z/2+e.ui.padding+1,K&&(i+=Z/2+re),"translate("+Math.round(r)+","+Math.round(i)+")"}),V.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),a=d3.svg.brush().x(ne).extent(h).on("brush",g).on("brushend",v),Y=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,X.attr("transform","translate("+L+","+(e.ui.padding+1)+")").transition().duration(e.draw.timing).call(d3.svg.axis().scale(ne).orient("top").ticks(function(){return oe}).tickFormat("").tickSize(-Z).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return te.indexOf(+t)>=0?Y:s(Y,e.background.value,.4,1)}),X.selectAll("path").attr("fill","none"),p.attr("transform","translate("+L+","+(e.ui.padding+1)+")").attr("opacity",1).call(a),V.attr("pointer-events","none"),p.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",Z).attr("shape-rendering","crispEdges").on(o.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),p.selectAll("rect.extent").attr("opacity",.75).attr("height",Z).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(o.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?(x=p.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),x.enter().insert("rect","rect").attr("class","d3plus_handle"),x.attr("fill",e.timeline.handles.color).attr("transform",function(t){var n;return n="resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0,"translate("+n+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),p.selectAll("g.resize").selectAll("rect").attr("height",Z)):p.selectAll("g.resize").remove(),Q=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=Q.height+Q.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?c.time("drawing timeline"):void 0}},{"../../../client/css.coffee":36,"../../../client/pointer.coffee":38,"../../../client/prefix.coffee":39,"../../../color/mix.coffee":46,"../../../color/text.coffee":50,"../../../core/console/print.coffee":52,"../../../core/data/time.coffee":62,"../../../font/sizes.coffee":101,"../../../util/closest.coffee":205}],247:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/rtl.coffee"),s=e("../../../textwrap/textwrap.coffee");t.exports=function(e){function t(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}function n(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!a||"right"==t&&a?"start":"left"==t&&a||"right"==t&&!a?"end":t}var l=e.size.value?e.size.value:"number"===e.color.type&&e.color.value;if(e.data.viz&&e.title.total.value&&!e.small)if(l){e.dev.value&&o.time("calculating total value");var u=e.data.pool;e.focus.value.length&&(u=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]}));var c,f=e.aggs.value[l]||"sum";if(f.constructor===Function?c=f(u):(u=u.reduce(function(t,n){var r=i(e,n,l);return r instanceof Array?t=t.concat(r):t.push(r),t},[]),c=d3[f](u)),(0===c||null===c||void 0===c)&&(c=!1),"number"==typeof c){var d="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var h=d3.sum(e.data.value,function(t){if(e.time.solo.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))>=0;else if(e.time.mute.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))<0;else var n=!0;return n?i(e,t,l):void 0});if(h>c){var d=c/h*100,p=e.format.value(h,{key:e.size.value,vars:e});d=" ("+e.format.value(d,{key:"share",vars:e})+" of "+p+")"}}c=e.format.value(c,{key:e.size.value,vars:e});var g=e.title.total.value,v=g.prefix||e.format.value(e.format.locale.value.ui.total)+": ";c=v+c,g.suffix?c+=g.suffix:null,c+=d}e.dev.value&&o.timeEnd("calculating total value")}else var c=!1;else var c=!1;var m=[];if(e.footer.value&&m.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){if(e.title.value){var y=e.title.value;"function"==typeof y&&(y=y(e.self)),m.push({link:e.title.link,style:e.title,type:"title",value:y})}if(e.title.sub.value){var y=e.title.sub.value;"function"==typeof y&&(y=y(e.self)),m.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:y})}e.title.total.value&&c&&m.push({link:e.title.total.link,style:e.title.total,type:"total",value:c})}e.dev.value&&o.time("drawing titles");var x=e.svg.selectAll("g.d3plus_title").data(m,function(e){return e.type}),b=e.title.width||e.width.value-e.margin.left-e.margin.right;x.enter().append("g").attr("class",function(e){return"d3plus_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(t),x.each(function(r){var i=d3.select(this).select("text").call(t),o=n(r);s().align(o).container(i).height(e.height.value/2).size(!1).text(r.value).width(b).draw(),r.y=e.margin[r.style.position],e.margin[r.style.position]+=this.getBBox().height+2*r.style.padding}).on(r.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(r.out,function(n){n.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(t)}).on(r.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var r=t.style.position,i="top"==r?0+t.y:e.height.value-t.y;"bottom"==r?i-=this.getBBox().height+t.style.padding:i+=t.style.padding;var o=n(t);if("start"===o)var a=e.margin.left+e.title.padding;else d3.select(this).select("text").node().getBBox().width,a="middle"===o?e.width.value/2-b/2:e.width.value-b-e.margin.right-e.title.padding;return"translate("+a+","+i+")"}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var w=e.title.height;w&&e.margin[e.title.position]<w&&(e.margin[e.title.position]=w),e.dev.value&&o.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":38,"../../../client/rtl.coffee":40,"../../../core/console/print.coffee":52,"../../../core/fetch/value.coffee":67,"../../../textwrap/textwrap.coffee":199}],248:[function(e,t,n){var r,i;r=e("./labels.coffee"),i=e("./transform.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h;return t||(t=e.zoom.bounds),"number"!=typeof n&&(n=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},h=e.types[e.type.value],s=e.coords.fit.value,o="auto"===s||h.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],u=d3.min([e.width.viz,e.height.viz]),c=h.zoom?2*e.coords.padding:0,f=(u-c)/u/o,a=e.zoom.behavior.scaleExtent(),(a[0]===a[1]||t===e.zoom.bounds)&&e.zoom.behavior.scaleExtent([f,16*f]),l=e.zoom.behavior.scaleExtent()[1],f>l&&(f=l),e.zoom.scale=f,d=[e.width.viz/2-e.zoom.size.width*f/2-t[0][0]*f,e.height.viz/2-e.zoom.size.height*f/2-t[0][1]*f],e.zoom.translate=d,e.zoom.behavior.translate(d).scale(f),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&r(e),i(e,n)}},{"./labels.coffee":250,"./transform.coffee":253}],249:[function(e,t,n){t.exports=function(e,t){var n,r,i;return r=t.id.nesting.length-1,n=t.depth.value,i=t.id.nesting[n+1],t.types[t.type.value].nesting===!1?0:(e.d3plus.merged||i in e&&r>n)&&(!e||i in e)?1:!(n===r&&n>0||e&&i&&!(i in e))||!t.small&&t.tooltip.html.value?0:-1}},{}],250:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n;return e.dev.value&&r.time("determining label visibility"),n=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var r;return t||(t={}),r=parseFloat(d3.select(this).attr("font-size"),10),t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3plus_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3plus_label").call(t),e.dev.value?r.timeEnd("determining label visibility"):void 0}},{"../../../core/console/print.coffee":52}],251:[function(e,t,n){var r,i,o;r=e("./labels.coffee"),i=e("../../../tooltip/remove.coffee"),o=e("./transform.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,a=e.zoom.bounds,f=(e.width.viz-e.zoom.size.width*s)/2,c=f>0?f:0,u=f>0?e.width.viz-f:e.width.viz,p=(e.height.viz-e.zoom.size.height*s)/2,h=p>0?p:0,d=p>0?e.height.viz-p:e.height.viz,l[0]+a[0][0]*s>c?l[0]=-a[0][0]*s+c:l[0]+a[1][0]*s<u&&(l[0]=u-a[1][0]*s),l[1]+a[0][1]*s>h?l[1]=-a[0][1]*s+h:l[1]+a[1][1]*s<d&&(l[1]=d-a[1][1]*s),e.zoom.behavior.translate(l).scale(s),e.zoom.translate=l,e.zoom.scale=s,"wheel"===n&&i(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===n?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return r(e)},t)):r(e)),"dblclick"===n?o(e,e.timing.transitions):o(e,0)}},{"../../../tooltip/remove.coffee":202,"./labels.coffee":250,"./transform.coffee":253}],252:[function(e,t,n){t.exports=function(e,t){var n,r,i,o;r=e.zoom,t||(t=d3.event),o=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,i=t.touches&&t.touches.length>1&&n,i||o||t.stopPropagation()}},{}],253:[function(e,t,n){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}},{}],254:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:r(!0),solo:r(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],255:[function(e,t,n){t.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],256:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:r,value:!1}},{"../../core/methods/process/data.coffee":86}],257:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/rendering.coffee":91}],258:[function(e,t,n){t.exports={accepted:[String],value:"#ffffff"}},{}],259:[function(e,t,n){t.exports={accepted:[Function,String],value:!1}},{}],260:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../color/scale.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:r(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(e){return e instanceof Array?d3.scale.ordinal().range(e):"d3plus"===e?i:"string"==typeof e?d3.scale[e]():e},value:"d3plus"},solo:r(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":48,"../../core/methods/filter.coffee":80}],261:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],262:[function(e,t,n){arguments[4][107][0].apply(n,arguments)},{dup:107}],263:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return e!==!1&&("default"===t.container.id&&t.self.container({id:"d3plus_"+ +new Date}),r(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):d3.select(e).append("div"))},value:!1}},{"../../util/d3selection.coffee":207}],264:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:r(!1),padding:20,process:i,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:r(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":80,"../../core/methods/process/data.coffee":86}],265:[function(e,t,n){var r,i,o;r=e("../../core/fetch/value.coffee"),i=e("../../client/ie.js"),o=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var n,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B;if(void 0===t.returned)return[];if(e=e||t.cols.value,e instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],L=[],t.title.value?(R=t.title.value,"function"==typeof R&&(R=R(t.self)),R=o(R),C=250,R=R.substr(0,C)):R="D3plus Visualization Data",e===!0)for(l=d3.keys(t.data.keys),c.push(l),N=t.data.value,g=0,y=N.length;y>g;g++){for(f=N[g],I=[],v=0,x=l.length;x>v;v++)a=l[v],B=f[a],"string"===t.data.keys[a]&&(B='"'+B+'"'),I.push(B);c.push(I)}else{for(l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),m=0,b=l.length;b>m;m++)a=l[m],L.push(t.format.value(a));for(c.push(L),P=t.returned.nodes,M=0,w=P.length;w>M;M++)if(E=P[M],null!=E.values&&E.values instanceof Array)for(F=E.values,T=0,_=F.length;_>T;T++){for(B=F[T],I=[],j=0,k=l.length;k>j;j++)s=l[j],B=r(t,B,s),"string"==typeof B&&(B='"'+B+'"'),I.push(B);c.push(I)}else{for(I=[],D=0,A=l.length;A>D;D++)s=l[D],I.push(r(t,E,s));c.push(I)}}for(u="data:text/csv;charset=utf-8,",p=O=0,S=c.length;S>O;p=++O)a=c[p],d=a.join(","),u+=p<c.length?d+"\n":d;return i?(n=new Blob([u],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(n,R+".csv")):(h=encodeURI(u),z=document.createElement("a"),z.setAttribute("href",h),z.setAttribute("download",R+".csv"),z.click()),this.data=c,l},value:void 0}},{"../../client/ie.js":37,"../../core/fetch/value.coffee":67,"../../string/strip.js":174}],266:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return r(e,t,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":86}],267:[function(e,t,n){t.exports={accepted:[Function,Number],value:0}},{}],268:[function(e,t,n){t.exports={accepted:[!1,Function,Object],value:!1}},{}],269:[function(e,t,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],270:[function(e,t,n){var r=e("../../core/console/print.coffee"),i=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;r.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;r.warning(i(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&r.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var o={};changes.forEach(function(e){var t=e.method;delete e.method,o[t]=e}),e(o),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":52,"../../string/format.js":172}],271:[function(e,t,n){var r=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,n){var r=this;if(!r.value)return[];if(!t)var t="id";var i=r.restricted||r.value,o=[];if(!e)return i;var a=i.filter(function(i){var a=!1;return i[r.source][t]==e?(a=!0,n&&o.push(i[r.target])):i[r.target][t]==e&&(a=!0,n&&o.push(i[r.source])),a});return n?o:a},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":86}],272:[function(e,t,n){t.exports={accepted:[Boolean,String],value:!1}},{}],273:[function(e,t,n){t.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(e){return e===!1?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],274:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:o(),secondary:{align:r(),color:"#444444",decoration:i(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],275:[function(e,t,n){var r,i,o;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:r(),family:i(),size:11,transform:o(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],276:[function(e,t,n){var r,i,o,a;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),o=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=o(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,o;return t||(t={}),t.locale||(t.locale=this.locale.value),o=t.vars||{},o.time&&o.time.value&&t.key===o.time.value?(i=e.constructor===Date?e:new Date(e),o.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":78,"../../number/format.coffee":169,"../../object/merge.coffee":170,"../../string/title.coffee":175}],277:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],278:[function(e,t,n){var r,i,o,a,s,l,u,c;r=e("../../../core/methods/font/align.coffee"),i=e("../../../core/methods/font/decoration.coffee"),o=e("../../../core/methods/font/family.coffee"),a=e("../../../core/methods/filter.coffee"),l=e("../../../core/methods/font/position.coffee"),u=e("../../../core/methods/rendering.coffee"),c=e("../../../core/methods/font/transform.coffee"),s={x:"bottom",x2:"top",y:"left",y2:"right"},t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:i(!1),family:o(""),size:!1,spacing:0,transform:c(!1),weight:!1},rendering:u(),value:!0},dataFilter:!0,deprecates:[e+"axis",e+"axis_val",e+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:u(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return this.value===!0?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:i(),family:o(),size:12,spacing:0,transform:c(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:r("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:i(),family:o(),padding:{accepted:[Number],value:10},position:l("middle"),size:12,transform:c(),weight:200},process:Array,rendering:u(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"none"},rendering:u(),width:2,value:!0},mute:a(!0),orient:{accepted:["top","right","bottom","left"],value:s[e]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",e+"axis_scale"],process:function(t,n){var r,i,o,a;for(o=["log","discrete","share"],r=0,i=o.length;i>r;r++)a=o[r],a===t?n.axes[a]=e:n.axes[a]===e&&(n.axes[a]=!1);return"discrete"===t&&(n.axes.opposite=0===e.indexOf("x")?"y":"x"),t},value:"linear"},solo:a(!0),stacked:{accepted:[Boolean],process:function(t,n){return t||n.axes.stacked!==e?t&&(n.axes.stacked=e):n.axes.stacked=!1,t},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:i(),family:o(),size:10,spacing:0,transform:c(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:u(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":80,"../../../core/methods/font/align.coffee":81,"../../../core/methods/font/decoration.coffee":82,"../../../core/methods/font/family.coffee":83,"../../../core/methods/font/position.coffee":84,"../../../core/methods/font/transform.coffee":85,"../../../core/methods/rendering.coffee":91}],279:[function(e,t,n){t.exports={accepted:[Boolean],back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}},{}],280:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":88}],281:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:r(!0),nesting:["id"],solo:r(!0),value:"id"}},{"../../core/methods/filter.coffee":80}],282:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:r(),family:i(),size:11,transform:o(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],283:[function(e,t,n){var r;r=e("../../core/methods/font/family.coffee"),t.exports={accepted:[Boolean],align:"middle",filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:r(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83}],284:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={font:{color:"#444444",decoration:r(),family:i(),transform:o(),weight:200},hover:{color:"#444444",decoration:r(),family:i(),transform:o(),weight:200}}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],285:[function(e,t,n){arguments[4][122][0].apply(n,arguments)},{"../../core/methods/process/margin.coffee":89,dup:122
}],286:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",decoration:r(),family:i(),size:16,transform:o(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],287:[function(e,t,n){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},{}],288:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:r,value:!1}},{"../../core/methods/process/data.coffee":86}],289:[function(e,t,n){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],290:[function(e,t,n){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,t){var n,r;return!!e&&(n=null,r=function(){var e,n,r;return n=t.container.value.node().parentNode.getBoundingClientRect(),r=n.width,e=n.height,t.width.value=r,t.height.value=e,t.self(t.container.value)},d3.select(window).on("resize."+t.container.id,function(e){return function(t){return clearTimeout(n),n=setTimeout(r,e.timeout)}}(this)),e)}}},{}],291:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={accepted:function(e){var t;return t=e.types[e.type.value].shapes,!t||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:r(),value:!1}},{"../../core/methods/rendering.coffee":91}],292:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:r(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:r(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":80}],293:[function(e,t,n){t.exports={value:!1}},{}],294:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],295:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],296:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:r(!1),solo:r(!1),value:!1}},{"../../core/methods/filter.coffee":80}],297:[function(e,t,n){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:""},pause:{accepted:[!1,String],awesome:"",fallback:""},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],298:[function(e,t,n){t.exports={mouseevents:60,transitions:600,ui:200}},{}],299:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),o=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:a(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=o(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:a(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:a(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85,"../../string/strip.js":174}],300:[function(e,t,n){var r,i;r=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:r(),size:12,transform:i(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],301:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":80}],302:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],303:[function(e,t,n){var r,i,o,a;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Array,Boolean],align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:i(),family:o(),size:11,transform:a(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":81,"../../core/methods/font/decoration.coffee":82,"../../core/methods/font/family.coffee":83,"../../core/methods/font/transform.coffee":85}],304:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],305:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],306:[function(e,t,n){var r,i,o,a,s,l,u,c;i=e("../../util/closest.coffee"),o=e("../../core/fetch/value.coffee"),a=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("../../array/sort.coffee"),u=e("./helpers/graph/stack.coffee"),c=e("../../core/data/threshold.js"),r=function(e){var t,n,r,i,s,c,f,d,h,p,g;if(a(e,{buffer:e.axes.opposite,zero:!0}),i=e.x.domain.viz.concat(e.y.domain.viz),i.indexOf(void 0)>=0)return[];for(n=l(e.data.viz,null,null,null,e),r=e[e.axes.discrete],h=e[e.axes.opposite],s=0,f=n.length;f>s;s++)for(p=n[s],p.d3plus||(p.d3plus={}),g=p.values,c=0,d=g.length;d>c;c++)t=g[c],t.d3plus||(t.d3plus={}),t.d3plus.x=r.scale.viz(o(e,t,r.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=h.scale.viz(o(e,t,h.value)),t.d3plus.y+=e.axes.margin.top,t.d3plus.merged instanceof Array&&(p.d3plus.merged||(p.d3plus.merged=[]),p.d3plus.merged=p.d3plus.merged.concat(t.d3plus.merged)),t.d3plus.text&&!p.d3plus.text&&(p.d3plus.text=t.d3plus.text);return u(e,n)},r.filter=function(e,t){return s(e,c(e,t,e[e.axes.discrete].value))},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["area"],r.threshold=function(e){return 20/e.height.viz},r.tooltip="static",t.exports=r},{"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/value.coffee":67,"../../util/closest.coffee":205,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],307:[function(e,t,n){var r,i,o,a,s,l,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../util/buckets.coffee"),o=e("../../core/fetch/value.coffee"),a=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("./helpers/graph/stack.coffee"),u=e("../../util/uniques.coffee"),r=function(e){var t,n,r,s,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H;if(d=e.axes.discrete,v="x"===d?"height":"width",V="x"===d?"width":"height",P=e.axes.opposite,r="x"===d?"left":"top",j="x"===d?"top":"left",a(e,{buffer:!0,zero:P}),g=e.x.domain.viz.concat(e.y.domain.viz),g.indexOf(void 0)>=0)return[];if(T=e.data.viz,e.axes.stacked)for(x=0,_=T.length;_>x;x++)R=T[x],l(e,R.values);for(q=e.axes[V]/e[e.axes.discrete].ticks.values.length,I=e[e.axes.discrete].padding.value,1>I&&(I*=q),2*I>q&&(I=.1*q),M=q-2*I,e.axes.stacked||(e[d].persist.position.value?(L=e[d].value,p=c.call(e.id.nesting,L)>=0?d3.max(T,function(e){return e.values.length}):u(T,e.id.value,o,e).length,M/=p,D=q/2-M/2-I,$=d3.scale.ordinal(),1===p?$.domain([0]).range([0]):$.domain([0,p-1]).range([-D,D])):$=d3.scale.linear()),f=[],H=0,e[d].persist.position.value&&!e.axes.stacked&&(y=u(d3.merge(T.map(function(e){return e.values})),e.id.value,o,e,e.id.value,!1),$.domain(y),1===y.length?$.range([0]):$.range(i($.range(),y.length))),z=d3.max(T,function(e){return e.values.length}),b=0,k=T.length;k>b;b++)for(F=T[b],e.axes.stacked?(t=1,E=M):e[d].persist.position.value?(t=p,E=M):(t=F.values.length,e[d].persist.size.value?(E=M/z,D=q/2-(z-t)*(E/2)-E/2-I):(E=M/t,D=q/2-E/2-I),$.domain([0,t-1]),$.range([-D,D])),B=F.values,m=w=0,A=B.length;A>w;m=++w){if(s=B[m],C=e.axes.stacked?0:$(e[d].persist.position.value?o(e,s,e.id.value):m%t),O=e[P],e.axes.stacked)U=s.d3plus[P],n=s.d3plus[P+"0"];else{if(N=o(e,s,O.value),null===N&&(O=e[P+"2"],N=o(e,s,O.value)),0===N)continue;"log"===O.scale.value&&(H=0>N?-1:1),U=O.scale.viz(N),n=O.scale.viz(H)}h=o(e,s,e[d].value),s.d3plus[d]=e[d].scale.viz(h),s.d3plus[d]+=e.axes.margin[r]+C,S=n-U,s.d3plus[P]=n-S/2,e.axes.stacked||(s.d3plus[P]+=e.axes.margin[j]),delete s.d3plus.r,s.d3plus[V]=E,s.d3plus[v]=Math.abs(S),s.d3plus.init={},s.d3plus.init[P]=O.scale.viz(H),s.d3plus.init[P]-=s.d3plus[P],s.d3plus.init[P]+=e.axes.margin[j],s.d3plus.init[V]=s.d3plus[V],e.text.value?delete s.d3plus.label:s.d3plus.label=!1,f.push(s)}return f},r.filter=function(e,t){return s(e,t,e[e.axes.discrete].value)},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["square"],t.exports=r},{"../../core/fetch/value.coffee":67,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],308:[function(e,t,n){var r,i,o,a,s;i=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),a=e("../../string/strip.js"),s=e("../../util/uniques.coffee"),r=function(e){var t,n,r,l,u,c,f,d,h,p,g,v,m,y;return o(e,{buffer:!0}),r=e.x.domain.viz.concat(e.y.domain.viz),r.indexOf(void 0)>=0?[]:(n=e.axes.discrete,p=e.axes.opposite,t="x"===n?e.axes.margin.left:e.axes.margin.top,h="x"===p?e.axes.margin.left:e.axes.margin.top,l="x"===n?"height":"width",y="x"===n?"width":"height",m=e.axes[y]/e[n].ticks.values.length,v=e.size.value,v="number"==typeof v?v:100,m=d3.min([m-2*e.labels.padding,v]),f=e.type.mode.value,f instanceof Array||(f=[f,f]),c=function(t){var n,r,o;r={};for(n in e.data.keys)o=s(t,n,i,e),r[n]=1===o.length?o[0]:o;return r},d=!1,u=[],g=[],d3.nest().key(function(t){return i(e,t,e[n].value)}).rollup(function(r){var o,v,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X;for(R=e[p].scale.viz,Y=r.map(function(t){return i(e,t,e[p].value)}),Y.sort(function(e,t){return e-t}),$=s(Y),A=d3.quantile(Y,.25),D=d3.quantile(Y,.5),L=d3.quantile(Y,.75),B={},"tukey"===f[1]?(z=A-L,q=L-1.5*z,U="top tukey"):"extent"===f[1]?(q=d3.max(Y),U="maximum"):"number"==typeof f[1]&&(q=d3.quantile(Y,(100-f[1])/100),U=f[1]+" percentile"),q=d3.min([d3.max(Y),q]),e.tooltip.extent.value&&(B[U]={key:e[p].value,value:q}),e.tooltip.iqr.value&&(B["third quartile"]={key:e[p].value,value:L},B.median={key:e[p].value,value:D},B["first quartile"]={key:e[p].value,value:A}),"tukey"===f[0]?(z=A-L,o=A+1.5*z,v="bottom tukey"):"extent"===f[0]?(o=d3.min(Y),v="minimum"):"number"==typeof f[0]&&(o=d3.quantile(Y,f[0]/100),v=f[0]+" percentile"),o=d3.max([d3.min(Y),o]),e.tooltip.extent.value&&(B[v]={key:e[p].value,value:o}),b=[],x=[],V=[],I=[],S=0,E=r.length;E>S;S++)w=r[S],H=i(e,w,e[p].value),H>=A&&L>=H?b.push(w):H>=o&&A>H?x.push(w):q>=H&&H>L?V.push(w):I.push(w);for(C=i(e,r[0],e[n].value),W=e[n].scale.viz(C),W+=t,T=e.format.value(C,{key:e[n].value,vars:e}),C.constructor===Date&&(C=C.getTime()),C=a(C),b=c(b),b.d3plus={color:"white",id:"box_"+C,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+T},b.d3plus[y]=m,b.d3plus.init[y]=m,b.d3plus[l]=Math.abs(R(A)-R(L)),b.d3plus[n]=W,X=d3.min([R(A),R(L)])+b.d3plus[l]/2,X+=h,b.d3plus[p]=X,b.d3plus.tooltip=B,g.push(b),N={d3plus:{id:"median_line_"+C,position:"height"===l?"top":"right",shape:"whisker","static":!0}},F=e.format.value(D,{key:e[p].value,vars:e}),T={background:"#fff",names:[F],padding:0,resize:!1,x:0,y:0},_=Math.abs(R(D)-R(A)),k=Math.abs(R(D)-R(L)),P=2*d3.min([_,k]),O=2*e.data.stroke.width+2*e.labels.padding,T["width"===y?"w":"h"]=m-O,T["width"===l?"w":"h"]=P-O,N.d3plus.label=T,N.d3plus[y]=m,N.d3plus[n]=W,N.d3plus[p]=R(D)+h,g.push(N),x=c(x),x.d3plus={id:"bottom_whisker_line_"+C,offset:b.d3plus[l]/2,position:"height"===l?"bottom":"left",shape:"whisker","static":!0},"x"===p&&(x.d3plus.offset*=-1),x.d3plus[l]=Math.abs(R(o)-R(A)),x.d3plus[y]=m,x.d3plus[n]=W,x.d3plus[p]=X,g.push(x),V=c(V),V.d3plus={id:"top_whisker_line_"+C,offset:b.d3plus[l]/2,position:"height"===l?"top":"right",shape:"whisker","static":!0},"y"===p&&(V.d3plus.offset*=-1),V.d3plus[l]=Math.abs(R(q)-R(L)),V.d3plus[y]=m,V.d3plus[n]=W,V.d3plus[p]=X,g.push(V),M=0,j=I.length;j>M;M++)w=I[M],w.d3plus[n]=W,w.d3plus[p]=R(i(e,w,e.y.value)),w.d3plus[p]+=h,w.d3plus.r=4,w.d3plus.shape=e.shape.value;return d=!I.length&&q-o===0,u.push(D),g=g.concat(I),r}).entries(e.data.viz),d&&1===s(u).length?[]:g)},r.modes=["tukey","extent",Array,Number],r.requirements=["data","x","y"],r.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],r.setup=function(e){var t;return e.axes.discrete?void 0:(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},t.exports=r},{"../../core/fetch/value.coffee":67,"../../string/strip.js":174,"../../util/uniques.coffee":209,"./helpers/graph/draw.coffee":313}],309:[function(e,t,n){var r,i,o,a,s,l,u;r=e("../../array/sort.coffee"),s=e("../../core/fetch/value.coffee"),o=e("../../core/fetch/color.coffee"),a=e("../../core/fetch/text.js"),u=e("../../color/legible.coffee"),l=e("../../core/data/group.coffee"),i=function(e){var t,n,i,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q;if(m=l(e,e.data.viz),m=r(m,null,null,null,e),d=m.length,4>d?(i=d,E=1):(j=e.width.viz/e.height.viz,i=Math.ceil(Math.sqrt(d*j)),E=Math.ceil(Math.sqrt(d/j))),d>0)for(;(E-1)*i>=d;)E--;for(n=e.width.viz/i,t=e.height.viz/E,e.size.value?(g=d3.min(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value,"min")}),p=d3.max(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value)}),h=[g,p]):h=[0,0],C=5,O=d3.min([n,t])/2-2*C,_=e.labels.value&&!e.small&&O>=40?d3.max([20,d3.min([.25*O,50])]):0,O-=_,N=d3.min([O,e.size.scale.min.value]),D=e.size.scale.value.domain(h).rangeRound([N,O]),M=d3.layout.pack().children(function(e){return e.values}).padding(C).radius(function(e){return D(e)}).size([n-2*C,t-2*C-_]).value(function(e){return e.value}),f=[],T=0,y=x=0,k=m.length;k>x;y=++x){for(c=m[y],F=M.nodes(c),R=n*y%e.width.viz,q=t*T,b=0,A=F.length;A>b;b++)P=F[b],P.children?(z={d3plus:{}},z[e.id.value]=P.key):z=P.d3plus,z.d3plus.depth=e.id.grouping.value?P.depth:e.depth.value,z.d3plus.x=P.x,z.d3plus.xOffset=R,z.d3plus.y=P.y,z.d3plus.yOffset=q+_,z.d3plus.r=P.r,f.push(z);(y+1)%i===0&&T++}for(v=O/d3.max(f,function(e){return e.d3plus.r}),I=M.size()[0]/2,B=M.size()[1]/2,w=0,S=f.length;S>w;w++)c=f[w],c.d3plus.x=(c.d3plus.x-I)*v+I+c.d3plus.xOffset,c.d3plus.y=(c.d3plus.y-B)*v+B+c.d3plus.yOffset,c.d3plus.r=c.d3plus.r*v,delete c.d3plus.xOffset,delete c.d3plus.yOffset,c.d3plus["static"]=c.d3plus.depth<e.depth.value&&e.id.grouping.value,!_||0!==c.d3plus.depth&&e.id.grouping.value!==!1?delete c.d3plus.label:(c.d3plus.text=a(e,c[e.id.value],c.d3plus.depth),L=_>3*e.labels.padding?e.labels.padding:0,c.d3plus.label={x:0,y:-(O+L+_/2),w:2*O,h:_-L,padding:0,resize:!0,color:u(o(e,c,c.d3plus.depth)),force:!0});return f.sort(function(e,t){return e.d3plus.depth-t.d3plus.depth})},i.fill=!0,i.requirements=["data"],i.scale=1.05,i.shapes=["circle","donut"],t.exports=i},{"../../array/sort.coffee":34,"../../color/legible.coffee":44,"../../core/data/group.coffee":57,"../../core/fetch/color.coffee":63,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67}],310:[function(e,t,n){var r,i;i=e("../../../core/console/print.coffee"),r=function(e){var t,n;n={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},t=n[e.shape.value],i.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+t+'" visualization type.'),e.self.type(t).draw()},r.shapes=["circle","donut","line","square","area"],t.exports=r},{"../../../core/console/print.coffee":52}],311:[function(e,t,n){var r;r=function(e){var t,n,r,i,o,a;return t=e.coords.value,r=e.coords.key||d3.keys(t.objects)[0],a=topojson.feature(t,t.objects[r]),n=a.features,o=e.coords.solo.value,i=e.coords.mute.value,n=n.filter(function(t){return t[e.id.value]=t.id,o.length?o.indexOf(t.id)>=0:!i.length||i.indexOf(t.id)<0})},r.libs=["topojson"],r.nesting=!1,r.requirements=["coords"],r.scale=1,r.shapes=["coordinates"],r.zoom=!0,t.exports=r},{}],312:[function(e,t,n){var r,i,o;r=e("../../../../core/fetch/color.coffee"),i=e("../../../../color/legible.coffee"),o=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p;for(t=e.axes,s=t.stacked||!t.ticks.value?[]:e.data.viz,p=2*s.length>e.data.large?0:e.draw.timing,f=function(n,o){return 0===o.indexOf("y")?n.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3plus.y-t.margin.top}).attr("y2",function(e){return e.d3plus.y-t.margin.top}):n.attr("x1",function(e){return e.d3plus.x-t.margin.left}).attr("x2",function(e){return e.d3plus.x-t.margin.left}).attr("y1",t.height+2).attr("y2",t.height+8),n.style("stroke",function(t){return i(r(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&o.time("creating axis tick groups"),h=e.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(s,function(n){var r;return r=t.discrete?"_"+n.d3plus[t.discrete]:"","tick_"+n[e.id.value]+"_"+n.d3plus.depth+r}),h.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),e.dev.value&&o.timeEnd("creating axis tick groups"),c=["x","y"],l=0,u=c.length;u>l;l++)n=c[l],e.dev.value&&p&&o.time("creating "+n+" ticks"),a=p&&n!==t.discrete?s:[],d=h.selectAll("line.d3plus_data_"+n).data(a,function(t){return"tick_"+t[e.id.value]+"_"+t.d3plus.depth}),e.dev.value&&p&&o.timeEnd("creating "+n+" ticks"),e.dev.value&&p&&o.time("styling "+n+" ticks"),p>0?d.transition().duration(p).call(f,n):d.call(f,n),d.enter().append("line").attr("class","d3plus_data_"+n).call(f,n),e.dev.value&&p&&o.timeEnd("styling "+n+" ticks");p>0?(h.transition().duration(p).attr("opacity",1),h.exit().transition().duration(p).attr("opacity",0).remove()):(h.attr("opacity",1),h.exit().remove())}},{"../../../../color/legible.coffee":44,"../../../../core/console/print.coffee":52,"../../../../core/fetch/color.coffee":63}],313:[function(e,t,n){var r,i,o,a;r=e("./includes/axes.coffee"),i=e("./includes/svg.coffee"),o=e("./includes/mouse.coffee"),a=e("./includes/plot.coffee"),t.exports=function(e,t){void 0===t&&(t={}),r(e,t),a(e,t),i(e,t),e.mouse.viz=t.mouse===!0&&o}},{"./includes/axes.coffee":314,"./includes/mouse.coffee":316,"./includes/plot.coffee":317,"./includes/svg.coffee":318}],314:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p;r=e("../../../../../array/sort.coffee"),a=e("./buffer.coffee"),o=e("../../../../../util/buckets.coffee"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.coffee"),d=e("../../../../../core/console/print.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,o,l,g,v,m,y,x,b,w,_;for(o=s(e),(o||!e.axes.dataset)&&(e.axes.dataset=c(e)),e.axes.scale=!(!t.buffer||t.buffer===!0)&&h(e,t.buffer),n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],g=0,m=n.length;m>g;g++)r=n[g],x=0===r.indexOf("x")?"y":"x",w=e.order.changed||e.order.sort.changed||e.order.value===!0&&e[x].changed,e[r].value&&(!e[r].ticks.values||o||w)&&(e.dev.value&&d.time("calculating "+r+" axis"),e[r].reset=!0,e[r].ticks.values=!1,r===e.axes.discrete&&e[r].value!==e.time.value&&(e[r].ticks.values=p(e.axes.dataset,e[r].value,u,e)),_=t.zero===!0||0===r.indexOf(t.zero),b=i(e,r,_),0===r.indexOf("y")&&(b=b.reverse()),e[r].scale.viz=f(e,r,b),e[r].domain.viz=b,e.dev.value&&d.timeEnd("calculating "+r+" axis"));if(e.axes.mirror.value&&(l=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=l,e.x.scale.viz.domain(l),l=l.slice().reverse(),e.y.domain.viz=l,e.y.scale.viz.domain(l)),t.buffer)for(v=0,y=n.length;y>v;v++)r=n[v],r!==e.axes.discrete&&a(e,r,t.buffer)},s=function(e){var t,n,r,i,o,a,s,l,u,c,f,d,h;if(n=e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed),n||(n=e.id.solo.changed||e.id.mute.changed),n)return n;for(r=["data","time","id","depth","type","x","y","x2","y2"],i=0,l=r.length;l>i;i++)if(a=r[i],e[a].changed){n=!0;break}if(n)return n;for(h=["mute","range","scale","solo","stacked","zerofill"],f=["x","y","x2","y2"],o=0,u=f.length;u>o;o++)for(t=f[o],s=0,c=h.length;c>s;s++)if(d=h[s],e[t][d].changed){n=!0;break}return n},c=function(e){var t,n;return e.time.fixed.value?e.data.viz:(n=d3.range(0,e.id.nesting.length),d3.merge([function(){var r,i,o;for(o=[],r=0,i=n.length;i>r;r++)t=n[r],o.push(l(e,"all",t));return o}()]))},i=function(e,t,n,i){var o,a,s,l,c,f,d,h,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P;if(S=0===t.indexOf("x")?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(D=[],z=e.axes.dataset,g=0,x=z.length;x>g;g++)d=z[g],d.values?D=D.concat(d.values):D.push(d);return c=d3.nest().key(function(t){return u(e,t,e[S].value)}).rollup(function(n){var r,i;return i=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),r>0?r:0}),r=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),0>r?r:0}),[r,i]}).entries(D),P=d3.merge(c.map(function(e){return e.values})),d3.extent(P)}if(e[t].value===e.time.value)return e.time.solo.value.length?d3.extent(e.time.solo.value).map(function(e){return e.constructor!==Date?(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(e.data.time.ticks);for(P=[],M=e.axes.dataset,v=0,b=M.length;b>v;v++)d=M[v],N=u(e,d,e[t].value),N instanceof Array?P=P.concat(N):P.push(N);if(P=P.filter(function(e){return null!==e}),t===e.axes.discrete){if(j=e.order.value===!0?e[S].value:e.order.value){for(E=e.order.sort.value,o=e.order.agg.value||e.aggs.value[j]||"max",a=typeof o,f=P.reduce(function(e,t){return e[t]=[],e},{}),C=e.axes.dataset,y=0,w=C.length;w>y;y++)if(d=C[y],d.values)for(T=d.values,k=0,_=T.length;_>k;k++)O=T[k],h=u(e,O,e[t].value),f[h].push(u(e,O,j));else h=u(e,d,e[t].value),f[h].push(u(e,d,j));for(m in f)O=f[m],"string"===a?f[m]=d3[o](O):"function"===a&&(f[m]=o(O,j));return f=r(d3.entries(f),"value",E),f=f.reduce(function(e,t){return e.push(t.key),e},[])}return p(P).sort()}return P.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===P[0]&&(P[0]=1),0===P[P.length-1]&&(P[P.length-1]=-1)),n&&(l=P.every(function(e){return e>0}),s=P.every(function(e){return 0>e}),(l||s)&&(A=l?1:-1,P.push("log"===e[t].scale.value?A:0))),d3.extent(P)},f=function(e,t,n){var r,i,a,s;return i=0===t.indexOf("x")?e.width.viz:e.height.viz,a=e[t].scale.value,["discrete","share"].indexOf(a)>=0&&(a="linear"),s=10,"string"==typeof n[0]?(a="ordinal",r=o([0,i],n.length)):(r=[0,i],"linear"===e[t].scale.value&&(s=Math.floor(i/(4*e[t].ticks.font.size)))),e[t].scale.ticks=s,d3.scale[a]().domain(n).range(r)},h=function(e,t){var n,r,i;return t===!0&&(t="size"),t in e&&(t=e[t].value),i=e.size.scale.min.value,"function"==typeof i&&(i=i(e)),r=e.size.scale.max.value,"function"==typeof r&&(r=r(e)),t===!1?e.size.scale.value.rangeRound([r,r]):"number"==typeof t?e.size.scale.value.rangeRound([t,t]):t?(e.dev.value&&d.time("calculating buffer scale"),n=d3.extent(e.axes.dataset,function(n){var r;return r=u(e,n,t),r?r:0}),n[0]===n[1]&&(i=r),e.dev.value&&d.timeEnd("calculating buffer scale"),e.size.scale.value.domain(n).rangeRound([i,r])):void 0}},{"../../../../../array/sort.coffee":34,"../../../../../core/console/print.coffee":52,"../../../../../core/fetch/data.js":64,"../../../../../core/fetch/value.coffee":67,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],315:[function(e,t,n){var r,i;r=e("../../../../../util/buckets.coffee"),i=e("../../../../../util/closest.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if(t===e.axes.discrete){if(p=e[t].scale.viz.domain(),"string"==typeof p[0]){for(y=p.length;y>=0;)p.splice(y,0,"d3plus_buffer_"+y),y--;return z=e[t].scale.viz.range(),z=r(d3.extent(z),p.length),e[t].scale.viz.domain(p).range(z)}if(0===t.indexOf("y")&&(p=p.slice().reverse()),1===e[t].ticks.values.length)e[t].value===e.time.value&&1!==e.data.time.ticks.length?(u=i(e.data.time.ticks,p[0]),E=e.data.time.ticks.indexOf(u),E>0?p[0]=e.data.time.ticks[E-1]:(d=e.data.time.ticks[E+1]-u,p[0]=new Date(u.getTime()-d)),E<e.data.time.ticks.length-1?p[1]=e.data.time.ticks[E+1]:(d=u-e.data.time.ticks[E-1],p[1]=new Date(u.getTime()+d))):(p[0]-=1,p[1]+=1);else if(e.axes.scale)h=Math.abs(p[1]-p[0]),a=h/(e[t].ticks.values.length-1),a/=2,M=e[t].scale.viz.range()[1],k=1.5*e.axes.scale.range()[1],m=e[t].scale.viz.invert(-k),v=e[t].scale.viz.invert(M+k),p[0]-a<m?(p[0]=p[0]-a,p[1]=p[1]+a):(p=[m,v],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1));else if(e[t].value===e.time.value)h=Math.abs(p[1]-p[0]),a=h/(e[t].ticks.values.length-1),a/=2,p[0]=p[0]-a,p[1]=p[1]+a;else{for(h=Math.abs(p[1]-p[0]),o=h/2,y=p.length,S=p.slice();y>=0;)f=y?S[y-1]+o:S[y]-o,p.splice(y,0,f),y--;z=e[t].scale.viz.range(),z=r(d3.extent(z),p.length),e[t].scale.viz.domain(p).range(z)}return 0===t.indexOf("y")&&(p=p.reverse()),e[t].scale.viz.domain(p)}if("x"===n&&0===t.indexOf("x")||"y"===n&&0===t.indexOf("y")||n===!0)return p=e[t].scale.viz.domain(),l=p[0]>=0&&p[1]>=0,s=p[0]<=0&&p[1]<=0,"log"===e[t].scale.value?(P=l?1:-1,l&&0===t.indexOf("y")&&(p=p.slice().reverse()),w=Math.pow(10,parseInt(Math.abs(p[0])).toString().length-1)*P,b=p[0]%w,x=b,b&&.1>=x/w&&(x+=w*P),_=0===b?w:x,p[0]-=_,0===p[0]&&(p[0]=P),O=Math.pow(10,parseInt(Math.abs(p[1])).toString().length-1)*P,D=p[1]%O,j=Math.abs(O-D),D&&.1>=j/O&&(j+=O*P),N=0===D?O:j,p[1]+=N,0===p[1]&&(p[1]=P),l&&0===t.indexOf("y")&&(p=p.reverse())):(P=0,0===t.indexOf("y")&&(p=p.slice().reverse()),T=p.filter(function(e){return e.constructor===String}),a=.05*Math.abs(p[1]-p[0])||1,T.length||(p[0]=p[0]-a,p[1]=p[1]+a,(l&&p[0]<P||s&&p[0]>P)&&(p[0]=P),(l&&p[1]<P||s&&p[1]>P)&&(p[1]=P)),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p);if(e.axes.scale)return c=!1,e.axes.mirror.value&&(A=0===t.indexOf("y")?"x":"y",c=e[A].scale.viz,C=e.width.viz>e.height.viz?"x":"y"),t===C&&c?p=c.domain().slice().reverse():(M=e[t].scale.viz.range()[1],k=e.axes.scale.range()[1],m=e[t].scale.viz.invert(1.5*-k),v=e[t].scale.viz.invert(M+1.5*k),p=[m,v],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p)}}},{"../../../../../util/buckets.coffee":203,"../../../../../util/closest.coffee":205}],316:[function(e,t,n){var r,i,o,a,s,l;r=e("../../../../../util/copy.coffee"),i=e("../../../../../client/pointer.coffee"),o=e("../../../../../core/fetch/color.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../color/legible.coffee"),l=e("../../../../../color/text.coffee"),t.exports=function(e,t){var n,r,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A;return n=d3.event.type===i.click&&(t.tooltip.value["long"]||t.tooltip.html.value),u=[i.over,i.move].indexOf(d3.event.type)>=0,k=e.d3plus.x,A=e.d3plus.y,v=e.d3plus.r||0,x=t.types[t.type.value].scale||1,v*=x,c=t.axes,_=t.draw.timing?t.timing.mouseevents:0,!n&&u?(r=s(o(t,e)),f=["x","y","x2","y2"].filter(function(n){var r;return r=a(t,e,t[n].value),r&&!(r instanceof Array)&&n!==t.axes.stacked&&t[n].mouse.value&&n!==t.axes.discrete})):f=[],d=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?k:k-v}).attr("y1",function(e){return 0===e.indexOf("y")?A:A+v}).attr("x2",function(e){return 0===e.indexOf("x")?k:k-v}).attr("y2",function(e){return 0===e.indexOf("y")?A:A+v}).attr("opacity",0)},h=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":r}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},p=function(n){return n.attr("x1",function(e){return 0===e.indexOf("x")?k:k-v;
}).attr("y1",function(e){return 0===e.indexOf("y")?A:A+v}).attr("x2",function(n){return 0===n.indexOf("x")?k:e.d3plus.x0?e.d3plus.x0:"y"===n?c.margin.left-t[n].ticks.size:c.margin.left+c.width+t[n].ticks.size}).attr("y2",function(n){return 0===n.indexOf("y")?A:e.d3plus.y0?e.d3plus.y0:"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size}).style("opacity",1)},g=t.g.labels.selectAll("line.d3plus_mouse_axis_label").data(f),_?(g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(h),g.transition().duration(_).call(p).call(h),g.exit().transition().duration(_).call(d).remove()):(g.call(p).call(h),g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(h),g.exit().remove()),b=function(n){return n.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?k:"y"===e?c.margin.left-5-t[e].ticks.size:c.margin.left+c.width+5+t[e].ticks.size}).attr("y",function(n){return 0===n.indexOf("y")?A:e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-6:"x"===n?c.height+c.margin.top+5+t[n].ticks.size:c.margin.top-5-t[n].ticks.size-1.35*t[n].ticks.font.size}).attr("fill","area"===t.shape.value?"white":l(r))},w=t.g.labels.selectAll("text.d3plus_mouse_axis_label").data(f),w.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(e){return e+"_d3plusmouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(b),w.text(function(n){var r,i;return r=t.axes.stacked||n,i=a(t,e,t[r].value),t.format.value(i,{key:t[r].value,vars:t,labels:t[r].affixes.value})}),_?(w.transition().duration(_).delay(_).attr("opacity",1).call(b),w.exit().transition().duration(_).attr("opacity",0).remove()):(w.attr("opacity",1).call(b),w.exit().remove()),m=function(n){var i;return i=function(e){var t;return t=d3.select("text#"+e+"_d3plusmouseaxislabel"),t.size()?t.node().getBBox():{width:0,height:0}},n.attr("x",function(e){var n;return n=i(e).width,0===e.indexOf("x")?k-n/2-5:"y"===e?c.margin.left-t[e].ticks.size-n-10:c.margin.left+c.width+t[e].ticks.size}).attr("y",function(n){var r;return r=i(n).height,0===n.indexOf("y")?A-(r/2+5):e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-(r/2+5):"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size-r-10}).attr("width",function(e){return i(e).width+10}).attr("height",function(e){return i(e).height+10}).style("stroke","area"===t.shape.value?"transparent":r).attr("fill",r).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},y=t.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(f),_?(y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(m),y.transition().duration(_).delay(_).attr("opacity",1).call(m),y.exit().transition().duration(_).attr("opacity",0).remove()):(y.attr("opacity",1).call(m),y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(m),y.exit().remove())}},{"../../../../../client/pointer.coffee":38,"../../../../../color/legible.coffee":44,"../../../../../color/text.coffee":50,"../../../../../core/fetch/color.coffee":63,"../../../../../core/fetch/value.coffee":67,"../../../../../util/copy.coffee":206}],317:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p;r=e("../../../../../util/buckets.coffee"),i=e("./buffer.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../font/sizes.coffee"),d=e("../../../../../textwrap/textwrap.coffee"),h=e("../../../../../core/data/time.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,s,l,f,d,p,g,v,m,y,x,b,w,_,k,A,S;for(e.axes.margin=c(e),e.axes.height=e.height.viz,e.axes.width=e.width.viz,n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],f=0,p=n.length;p>f;f++)if(r=n[f],e[r].value){if(e[r].ticks.values===!1)if(e[r].value===e.time.value){for(k=e.time.solo.value,k=k.length?k.map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,l=d3.extent(k),b=e.data.time.stepType,k=[l[0]],_=l[0];_<l[1];)v=new Date(_),_=new Date(v["set"+b](v["get"+b]()+1)),k.push(_);e[r].ticks.values=k}else 1===r.indexOf("2")?(y=e[r.slice(0,1)].scale.viz,x=e[r].scale.viz,k=e[r.slice(0,1)].scale.ticks,e[r].ticks.values=y.ticks(k).map(function(e){return parseFloat(d3.format(".5f")(x.invert(y(e))))})):e[r].ticks.values=e[r].scale.viz.ticks(e[r].scale.ticks);e[r].ticks.values.length||(S=a(e,e.data.viz,e[r].value),S instanceof Array||(S=[S]),e[r].ticks.values=S),m=0===r.indexOf("x")?"y":"x",(1===e[r].ticks.values.length||t.buffer&&t.buffer!==m&&r===e.axes.discrete&&e[r].reset===!0)&&i(e,r,t.buffer),e[r].reset=!1,e[r].value===e.time.value?(s={"font-family":e[r].ticks.font.family.value,"font-weight":e[r].ticks.font.weight,"font-size":e[r].ticks.font.size+"px","text-transform":e[r].ticks.font.transform.value,"letter-spacing":e[r].ticks.font.spacing+"px"},A=h(e,{values:e[r].ticks.values,limit:e.width.viz,style:s}),e[r].ticks.value?e[r].ticks.visible=e[r].ticks.value.map(Number):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value.map(Number):e[r].ticks.visible=A.values.map(Number),e[r].ticks.format=A.format):e[r].ticks.value?(e[r].ticks.values=e[r].ticks.value,e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:e[r].ticks.visible=e[r].ticks.value):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:"log"===e[r].scale.value?(k=e[r].ticks.values,w=k.filter(function(e){return"1"===Math.abs(e).toString().charAt(0)}),w.length<3?e[r].ticks.visible=k:e[r].ticks.visible=w):e[r].ticks.visible=e[r].ticks.values}for(e.small||u(e),d=0,g=n.length;g>d;d++)r=n[d],e[r].axis.svg=o(e,r)},c=function(e){return e.small?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}},u=function(e){var t,n,i,o,a,u,c,f,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N;for(b=e.x.scale.viz.domain(),E=e.y.scale.viz.domain(),e.x2.value&&(v=e.x2.scale.viz.domain()),e.y2.value&&(M=e.y2.scale.viz.domain()),f=["y","y2"],n=0,a=f.length;a>n;n++)t=f[n],e[t].value&&(c="y"===t?"left":"right",C={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},N=e[t].ticks.visible,"log"===e[t].scale.value?O=N.map(function(e){return l(e)}):"share"===e[t].scale.value?O=N.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?O=N.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof N[0]&&(N=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),O=N.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),e[t].ticks.labels.value?(e[t].ticks.hidden=!1,T=d3.max(s(O,C),function(e){return e.width}),T=Math.ceil(T+e.labels.padding),e.axes.margin[c]+=T):e[t].ticks.hidden=!0,j=e[t].label.fetch(e),j?(D={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([j],D)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));for(e.axes.width-=e.axes.margin.left+e.axes.margin.right,e.x.scale.viz.range(r([0,e.axes.width],b.length)),v&&e.x2.scale.viz.range(r([0,e.axes.width],v.length)),h=["x","x2"],i=0,u=h.length;u>i;i++)t=h[i],e[t].value&&(c="x"===t?"bottom":"top",e[t].ticks.labels.value?(e[t].ticks.hidden=!1,m={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},z=e[t].ticks.visible,"log"===e[t].scale.value?S=z.map(function(e){return l(e)}):"share"===e[t].scale.value?S=z.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?S=z.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof z[0]&&(z=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),S=z.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),A=s(S,m),x=d3.max(A,function(e){return e.width}),y=d3.max(A,function(e){return e.height}),1===z.length?k=e.axes.width:(k=e[t].scale.viz(z[1])-e[t].scale.viz(z[0]),k=Math.abs(k)),x>k&&S.join("").indexOf(" ")>0?(e[t].ticks.wrap=!0,A=s(S,m,{mod:function(t){return d().container(d3.select(t)).height(e.axes.height/2).width(k).draw()}}),x=d3.max(A,function(e){return e.width}),y=d3.max(A,function(e){return e.height})):e[t].ticks.wrap=!1,e[t].ticks.baseline="auto",k>=x?e[t].ticks.rotate=0:x<e.axes.height/2?(A=s(S,m,{mod:function(t){return d().container(d3.select(t)).width(e.axes.height/2).height(k).draw()}}),y=d3.max(A,function(e){return e.width}),x=d3.max(A,function(e){return e.height}),e[t].ticks.rotate=-90):(x=0,y=0),x&&y||(e[t].ticks.hidden=!0,e[t].ticks.rotate=0),x=Math.ceil(x),y=Math.ceil(y),e[t].ticks.maxHeight=y,e[t].ticks.maxWidth=x,e.axes.margin[c]+=y+e.labels.padding,o=e[t].ticks.visible[e[t].ticks.visible.length-1],p=e[t].scale.viz(o),p+=x/2+e.axes.margin.left,p>e.width.value&&(g=p-e.width.value+e.axes.margin.right,e.axes.width-=g,e.axes.margin.right+=g)):e[t].ticks.hidden=!0,w=e[t].label.fetch(e),w?(_={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([w],_)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));return e.axes.height-=e.axes.margin.top+e.axes.margin.bottom,e.x.scale.viz.range(r([0,e.axes.width],b.length)),v&&e.x2.scale.viz.range(r([0,e.axes.width],v.length)),e.y.scale.viz.range(r([0,e.axes.height],E.length)),M?e.y2.scale.viz.range(r([0,e.axes.height],M.length)):void 0},o=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient(e[t].orient.value).scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(n,r){var i,o;return e[t].ticks.hidden?null:(o=e[t].scale.value,i=n.constructor===Date?+n:n,e[t].ticks.visible.indexOf(i)>=0?"share"===o?e.format.value(100*n,{key:"share",vars:e,labels:e[t].affixes.value,output:t}):n.constructor===Date?e[t].ticks.format(n):"log"===o?l(n):e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t}):null)})},f="",l=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return f[e]}).join(""),"1"!==r&&(t=r+" x "+t),0>e?"-"+t:t}},{"../../../../../core/data/time.coffee":62,"../../../../../core/fetch/value.coffee":67,"../../../../../font/sizes.coffee":101,"../../../../../textwrap/textwrap.coffee":199,"../../../../../util/buckets.coffee":203,"../../../../../util/uniques.coffee":209,"./buffer.coffee":315}],318:[function(e,t,n){var r,i,o;r=e("../../../../../color/mix.coffee"),i=e("../../../../../textwrap/textwrap.coffee"),o=e("../../../../../object/validate.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce;if(p=e.x.domain.viz.concat(e.y.domain.viz),p.indexOf(void 0)>=0)return null;for(f={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},n={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],oe=function(t,n){return t.attr("x1",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):0}).attr("x2",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):0}).attr("y2",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):e.axes.height})},ae=function(t,n,i){var o,a;return o=i?e[n].grid.color:e[n].ticks.color,a="log"===e[n].scale.value,t.attr("stroke",function(t){var s;return 0===t?e[n].axis.color:(t.constructor===Date&&(t=+t),s=e[n].ticks.visible.indexOf(t)>=0,!s||a&&"1"!==Math.abs(t).toString().charAt(0)?i&&"transparent"!==e.axes.background.color?r(o,e.axes.background.color,.4,1):"transparent"!==e.background.value?r(o,e.background.value,.4,1):r(o,"white",.4,1):o)}).attr("stroke-width",e[n].ticks.width).attr("shape-rendering",e[n].ticks.rendering.value)},g=function(t,n,r){var i;return i=0===n?"axis":"ticks",n=e[t][i].font[r],n&&(n.length||"number"==typeof n)?n:e[t].ticks.font[r]},ie=function(t,n){var i;return i="log"===e[n].scale.value,t.attr("font-size",function(e){return g(n,e,"size")+"px"}).attr("stroke","none").attr("fill",function(t){var o;return o=g(n,t,"color"),i&&"1"!==Math.abs(t).toString().charAt(0)?r(o,e.background.value,.4,1):o}).attr("font-family",function(e){return g(n,e,"family").value}).attr("font-weight",function(e){return g(n,e,"weight")}).style("text-transform",function(e){return g(n,e,"transform").value}).style("letter-spacing",function(e){return g(n,e,"spacing")+"px"})},P=function(t,n){var r,i;return r=0===n.indexOf("x")?"height":"width",i=0===n.indexOf("x")?"y":"x",t.attr(i+"1",0).attr(i+"2",e.axes[r]).attr(n+"1",function(e){return e.coords.line}).attr(n+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[n].lines.color}).attr("stroke-width",e[n].lines.width).attr("shape-rendering",e[n].lines.rendering.value).attr("stroke-dasharray",e[n].lines.dasharray.value)},D=function(t,r){var i;return i=0===r.indexOf("x")?"y":"x",t.attr(i,function(e){return e.coords.text[i]+"px"}).attr(r,function(e){return e.coords.text[r]+"px"}).attr("dy",e[r].lines.font.position.value).attr("text-anchor",n[e[r].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[r].lines.font.size+"px").attr("fill",function(t){return t.color||e[r].lines.color}).attr("font-family",e[r].lines.font.family.value).attr("font-weight",e[r].lines.font.weight)},V="translate("+e.axes.margin.left+","+e.axes.margin.top+")",U=e.group.selectAll("g#d3plus_graph_plane").data([0]),U.transition().duration(e.draw.timing).attr("transform",V),U.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",V),c=U.selectAll("rect#d3plus_graph_background").data([0]),c.transition().duration(e.draw.timing).attr(f),c.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(f),L=U.selectAll("path#d3plus_graph_mirror").data([0]),L.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),L.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return t=f.width,e=f.height,"M "+t+" "+e+" L 0 "+e+" L "+t+" 0 Z"}),Z=0!==e.x.ticks.rotate,ue=function(t,n){var r,o;return o="x"===n?e.axes.height:0,r=t.attr("transform","translate(0,"+o+")").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var r;return t.constructor===Date&&(t=+t),r=d3.select(this).attr("y2"),e[n].ticks.visible.indexOf(t)>=0?r:r/2}),r.select("text").style("text-anchor",Z&&"x"===n?"end":Z?"start":"middle").call(ie,n).each(function(t){return d3.select(this).attr("dy","0px").attr("font-size",function(e){return g(n,e,"size")+"px"}),t.constructor===Date&&(t=+t),!e[n].ticks.hidden&&e[n].ticks.visible.indexOf(t)>=0?i().container(d3.select(this)).rotate(e[n].ticks.rotate).align(Z?"end":"center").valign(Z?"middle":"x"===n?"top":"bottom").width(e[n].ticks.maxWidth).height(e[n].ticks.maxHeight).padding(0).x(-e[n].ticks.maxWidth/2).y("x2"===n?-(e[n].ticks.maxHeight+2*e.labels.padding):0).draw():void 0})},ce=function(t,n){var r,i;return i="y2"===n?e.axes.width:0,r=t.attr("transform","translate("+i+", 0)").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),r.select("text").call(ie,n)},X=["x","x2","y","y2"],x=0,S=X.length;S>x;x++)a=X[x],ee=0===a.indexOf("x")?ue:ce,H=s.length&&e[a].value?[0]:[],l=U.selectAll("g#d3plus_graph_"+a+"ticks").data(H),l.transition().duration(e.draw.timing).call(ee,a),l.selectAll("line").transition().duration(e.draw.timing).call(ae,a),y=l.enter().append("g").attr("id","d3plus_graph_"+a+"ticks").call(ee,a),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(ae,a),l.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(A=function(t,n){return t.attr("x",0===n.indexOf("x")?e.width.viz/2:-(e.axes.height/2+e.axes.margin.top)).attr("y","x"===n?e.height.viz-e[n].label.height/2-e[n].label.padding:"y2"===n?e.width.viz-e[n].label.height/2-e[n].label.padding:e[n].label.height/2+e[n].label.padding).attr("transform",0===n.indexOf("y")?"rotate(-90)":null).attr("font-family",e[n].label.font.family.value).attr("font-weight",e[n].label.font.weight).attr("font-size",e[n].label.font.size+"px").attr("fill",e[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",e[n].label.font.transform.value).style("letter-spacing",e[n].label.font.spacing+"px")},J=["x","y"],b=0,z=J.length;z>b;b++)a=J[b],e[a].grid.value?m=e[a].ticks.value?e[a].ticks.value:e[a].ticks.values:(m=[],q="x"===a?"y":"x",e[a].ticks.values.indexOf(0)>=0&&e[q].axis.value&&(m=[0])),v=U.selectAll("g#d3plus_graph_"+a+"grid").data([0]),v.enter().append("g").attr("id","d3plus_graph_"+a+"grid"),F=v.selectAll("line").data(m,function(e,t){return e.constructor===Date?e.getTime():e}),F.transition().duration(e.draw.timing).call(oe,a).call(ae,a,!0),F.enter().append("line").style("opacity",0).call(oe,a).call(ae,a,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),F.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove();for(G=["x","x2","y","y2"],w=0,M=G.length;M>w;w++)a=G[w],e[a].value?(u=e[a].label.fetch(e),k=s&&u?[0]:[],t=e.format.affixes.value[e[a].value],u&&!e[a].affixes.value&&t&&(K=e[a].affixes.separator.value,K===!0?K=["[","]"]:K===!1&&(K=["",""]),u+=" "+K[0]+t[0]+" "+t[1]+K[1])):(u="",k=[]),_=e.group.selectAll("text#d3plus_graph_"+a+"label").data(k),_.text(u).transition().duration(e.draw.timing).call(A,a),_.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+a+"label").text(u).call(A,a),_.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(Q=["x","y","x2","y2"],R=0,C=Q.length;C>R;R++)if(a=Q[R],e[a].value){for(O=U.selectAll("g#d3plus_graph_"+a+"_userlines").data([0]),O.enter().append("g").attr("id","d3plus_graph_"+a+"_userlines"),h=e[a].scale.viz.domain(),0===a.indexOf("y")&&(h=h.slice().reverse()),te=[],j=[],se=e[a].lines.value||[],B=0,T=se.length;T>B;B++)E=se[B],d=o(E)?E.position:E,le=a===e.axes.discrete?h.indexOf(d)>=0:d>=h[0]&&d<=h[1],le&&(d=o(E)?E:{position:d},d.coords={line:e[a].scale.viz(d.position)},j.push(d),d.text&&(d.axis=a,d.padding=.5*e[a].lines.font.padding.value,d.align=e[a].lines.font.align.value,$=e[a].lines.font.position.text,ne="middle"===$?0:2*d.padding,"top"===$&&(ne=-ne),0===a.indexOf("x")?(re="left"===d.align?e.axes.height:"center"===d.align?e.axes.height/2:0,"left"===d.align&&(re-=2*d.padding),"right"===d.align&&(re+=2*d.padding)):(re="left"===d.align?0:"center"===d.align?e.axes.width/2:e.axes.width,"right"===d.align&&(re-=2*d.padding),"left"===d.align&&(re+=2*d.padding)),d.coords.text={},d.coords.text[0===a.indexOf("x")?"y":"x"]=re,d.coords.text[a]=e[a].scale.viz(d.position)+ne,d.transform=0===a.indexOf("x")?"rotate(-90,"+d.coords.text.x+","+d.coords.text.y+")":null,te.push(d)));F=O.selectAll("line.d3plus_graph_"+a+"line").data(j,function(e){return e.position}),F.enter().append("line").attr("class","d3plus_graph_"+a+"line").attr("opacity",0).call(P,a),F.transition().duration(e.draw.timing).attr("opacity",1).call(P,a),F.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),I=O.selectAll("text.d3plus_graph_"+a+"line_text").data(te,function(e){return e.position}),I.enter().append("text").attr("class","d3plus_graph_"+a+"line_text").attr("id",function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),"d3plus_graph_"+a+"line_text_"+t}).attr("opacity",0).call(D,a),I.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(D,a),I.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),W=function(t){var n;return n=function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),U.select("text#d3plus_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return n(e).x-e.padding}).attr("y",function(e){return n(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return n(e).width+2*e.padding}).attr("height",function(e){return n(e).height+2*e.padding}).attr("fill","transparent"!==e.axes.background.color?e.axes.background.color:"white")},Y=e[a].lines.font.background.value?te:[],N=O.selectAll("rect.d3plus_graph_"+a+"line_rect").data(Y,function(e){return e.position}),N.enter().insert("rect","text.d3plus_graph_"+a+"line_text").attr("class","d3plus_graph_"+a+"line_rect").attr("pointer-events","none").attr("opacity",0).call(W),N.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(W)}),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":46,"../../../../../object/validate.coffee":171,"../../../../../textwrap/textwrap.coffee":199}],319:[function(e,t,n){var r,i,o;r=e("../../../../core/fetch/value.coffee"),i=e("../../../../string/strip.js"),o=e("../../../../util/uniques.coffee"),t.exports=function(e,t,n){var a,s,l,u,c,f,d;return void 0===n?n=e.id.nesting.slice(0,e.depth.value+1):n.constructor!==Array&&(n=[n]),void 0===s&&(s=[]),t||(t=e.data.viz),a=e[e.axes.discrete],u=e[e.axes.opposite],d=a.value===e.time.value,d?(f=e.data.time.ticks,l=e.time.solo.value.length?"solo":"mute",e.time[l].value.length&&(c=e.time[l].value.slice().map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),f=f.filter(function(e){return"solo"===l?c.indexOf(+e)>=0:c.indexOf(+e)<0}))):f=a.ticks.values?a.ticks.values:o(t,a.value,r,e),d3.nest().key(function(t){var o,a,s,l,u;for(l="nesting",a=0,s=n.length;s>a;a++)o=n[a],u=r(e,t,o),u instanceof Array&&(u=u.join("_")),l+="_"+i(u);return l}).rollup(function(t){var n,i,s,c,h,p,g,v,m,y,x,b;if(n=o(t,a.value,r,e),b=n.length&&n[0].constructor===Date,b&&(n=n.map(Number)),a.zerofill.value)for(i="log"===a.scale.value?u.scale.viz.domain().every(function(e){return 0>e})?-1:1:0,s=c=0,p=f.length;p>c;s=++c)if(x=f[s],y=d?+x:x,n.indexOf(y)<0){for(v={d3plus:{}},m=e.id.nesting,h=0,g=m.length;g>h;h++)l=m[h],l in t[0]&&(v[l]=t[0][l]);v[a.value]=x,v[u.value]=0,v[u.value]=i,t.splice(s,0,v)}return"string"==typeof t[0][a.value]?t:t.sort(function(t,n){var i,o,s,l,c;return i=r(e,t,a.value),s=r(e,n,a.value),(c=i-s)?c:(o=r(e,t,u.value),l=r(e,n,u.value),o-l)})}).entries(t)}},{"../../../../core/fetch/value.coffee":67,"../../../../string/strip.js":174,"../../../../util/uniques.coffee":209}],320:[function(e,t,n){var r;r=e("../../../../core/fetch/value.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x;for(m=e.axes.stacked||e.axes.opposite,i=e[m].scale.viz(0),g=e[m].scale.value,h="x"===m?"y":"x",u="y"===m?e.axes.margin.top:e.axes.margin.left,d="share"===g?"expand":"zero",v=d3.layout.stack().values(function(e){return e.values||[e]}).offset(d).x(function(e){return e.d3plus[h]}).y(function(t){return i-e[m].scale.viz(r(e,t,e[m].value))}).out(function(t,n,o){var a,s;return s=r(e,t,e[m].value),a=0>s,"share"===g?(t.d3plus[m+"0"]=(1-n)*i,t.d3plus[m]=t.d3plus[m+"0"]-o*i):(t.d3plus[m+"0"]=i,e.axes.stacked&&(t.d3plus[m+"0"]-=n),t.d3plus[m]=t.d3plus[m+"0"]-o),t.d3plus[m]+=u,t.d3plus[m+"0"]+=u}),p=[],f=[],o=0,s=t.length;s>o;o++)if(n=t[o],x=r(e,n,e[m].value),x instanceof Array){for(c=!0,a=0,l=x.length;l>a;a++)if(y=x[a],y>=0){c=!1;break}c?f.push(n):p.push(n)}else x>=0&&p.push(n),0>x&&f.push(n);return 0===p.length||0===f.length?v(t):(p.length&&(p=v(p)),f.length&&(f=v(f)),p.concat(f))}},{"../../../../core/fetch/value.coffee":67}],321:[function(e,t,n){var r,i,o,a,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("./helpers/graph/nest.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/stack.coffee"),o=function(e){var t,n,o,a,u,c,f,d,h,p,g;if(i(e,{buffer:e.axes.opposite,mouse:!0}),o=e.x.domain.viz.concat(e.y.domain.viz),o.indexOf(void 0)>=0)return[];for(n=s(e.data.viz,null,null,null,e),a=0,c=n.length;c>a;a++)for(d=n[a],h=d.values,u=0,f=h.length;f>u;u++)t=h[u],p=r(e,t,e.x.value),null!==p?(t.d3plus.x2=!1,t.d3plus.x=e.x.scale.viz(p)):(t.d3plus.x2=!0,t.d3plus.x=e.x2.scale.viz(r(e,t,e.x2.value))),t.d3plus.x+=e.axes.margin.left,g=r(e,t,e.y.value),null!==g?(t.d3plus.y2=!1,t.d3plus.y=e.y.scale.viz(g)):(t.d3plus.y2=!0,t.d3plus.y=e.y2.scale.viz(r(e,t,e.y2.value))),t.d3plus.y+=e.axes.margin.top;return e.axes.stacked?l(e,n):n},o.filter=function(e,t){return a(e,t)},o.requirements=["data","x","y"],o.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},o.shapes=["line"],o.tooltip="static",t.exports=o},{"../../array/sort.coffee":34,"../../core/fetch/value.coffee":67,"./helpers/graph/draw.coffee":313,"./helpers/graph/nest.coffee":319,"./helpers/graph/stack.coffee":320}],322:[function(e,t,n){var r=e("../../network/smallestGap.coffee"),i=e("../../core/fetch/value.coffee"),o=function(e){var t=e.nodes.restricted||e.nodes.value,n=e.edges.restricted||e.edges.value,o=d3.extent(t,function(e){return e.x}),a=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var n=i(e,t,e.size.value);return 0===n?null:n})),"undefined"==typeof s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var l=r(t,{accessor:function(e){return[e.x,e.y]}}),c=l/2,f=e.size.value?e.nodes.overlap:.4;if(l*=f,e.edges.arrows.value&&(l=.5*l),s[0]===s[1]){var u=c;l=c}else{var d=o[1]+1.1*l-(o[0]-1.1*l),h=a[1]+1.1*l-(a[0]-1.1*l),p=d/h,g=e.width.viz/e.height.viz;if(g>p)var v=e.height.viz/h;else var v=e.width.viz/d;var u=.25*l;2>u*v&&(u=2/v)}}var m=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[o[0]-1.1*l,a[0]-1.1*l],[o[1]+1.1*l,a[1]+1.1*l]];var y=[],x={};return t.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]==t[e.id.value]})[0],r=n||{};r[e.id.value]=t[e.id.value],r.d3plus={},r.d3plus.x=t.x,r.d3plus.y=t.y;var o=i(e,r,e.size.value);r.d3plus.r=o?m(o):m.range()[0],x[r[e.id.value]]={x:r.d3plus.x,y:r.d3plus.y,r:r.d3plus.r},y.push(r)}),y.sort(function(e,t){return t.d3plus.r-e.d3plus.r}),n.forEach(function(t,n){t.d3plus&&delete t.d3plus.spline,t[e.edges.source].d3plus={};var r=x[t[e.edges.source][e.id.value]];t[e.edges.source].d3plus.r=r.r,t[e.edges.source].d3plus.x=r.x,t[e.edges.source].d3plus.y=r.y,t[e.edges.target].d3plus={};var i=x[t[e.edges.target][e.id.value]];t[e.edges.target].d3plus.r=i.r,t[e.edges.target].d3plus.x=i.x,t[e.edges.target].d3plus.y=i.y}),{nodes:y,edges:n}};o.nesting=!1,o.requirements=["nodes","edges"],o.scale=1.05,o.shapes=["circle","square","donut"],o.tooltip="static",o.zoom=!0,t.exports=o},{"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167}],323:[function(e,t,n){var r,i,o,a,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../network/shortestPath.coffee"),r=e("../../core/fetch/value.coffee"),o=e("../../util/uniques.coffee"),a=function(e){var t,n,i,o,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,fe,de;for(p=[],H={},H[e.focus.value[0]]=0,H[e.focus.value[1]]=0,Y={all:[[e.focus.value[0]],[e.focus.value[1]]]},G=a.paths,$=m=0,k=G.length;k>m;$=++m)for(V=G[$],p=p.concat(V.edges),_=e.focus.value[0],Y[$]=[_],Q=V.edges,h=y=0,A=Q.length;A>y;h=++y)d=Q[h],d[e.edges.source]=e.data.viz.filter(function(t){return d[e.edges.source][e.id.value]===t[e.id.value]})[0],d[e.edges.target]=e.data.viz.filter(function(t){return d[e.edges.target][e.id.value]===t[e.id.value]})[0],I=d[e.edges.source][e.id.value]===_?"target":"source",R=d[e.edges[I]][e.id.value],void 0===H[R]&&(H[R]=$),Y[$].push(R),_=R;oe=0;for($ in Y)if(V=Y[$],"all"!==$){for(P=0,g=x=0,S=V.length;S>x;g=++x)if(v=V[g],0!==g&&g!==V.length-1&&H[v]===parseFloat($)){for(P=1,W=V[g-1],F=V[g+1],X=null,L=null,Z=Y.all,u=j=0,z=Z.length;z>j;u=++j)l=Z[u],s.call(l,W)>=0&&(X=u),s.call(l,F)>=0&&(L=u);null!==X&&null===L?X+1===Y.all.length-1?Y.all.splice(X+1,0,[v]):Y.all[X+1].push(v):L-X===1?Y.all.splice(L,0,[v]):L-X>1&&Y.all[L-1].push(v)}oe+=P}for(ie=Math.floor(e.height.viz/oe),de=[],g=0;oe>g;)g%2===0?de.push(g):de.unshift(g),g++;for(b=e.size.value&&!e.small?30:0,fe=d3.scale.ordinal().domain(de).range(d3.range(ie/2-b,e.height.viz+ie/2-b,(e.height.viz-ie)/(oe-1))),f=Y.all.length,c=Math.floor(e.width.viz/f),ue=d3.scale.linear().domain([0,f-1]).rangeRound([c/2,e.width.viz-c/2]),O=5,D=.4*d3.min([c,ie-b]),se=d3.extent(e.data.viz,function(t){var n;return n=r(e,t,e.size.value),n||0}),ae=e.size.scale.value.domain(se).rangeRound([O,D]),K=e.data.viz,N=0,M=K.length;M>N;N++){for(B=K[N],null==B.d3plus&&(B.d3plus={}),ee=Y.all,u=q=0,C=ee.length;C>q;u=++q)l=ee[u],te=B[e.id.value],s.call(l,te)>=0&&(B.d3plus.x=ue(u));B.d3plus.y=fe(H[B[e.id.value]]),e.size.value?(le=r(e,B,e.size.value),B.d3plus.r=le?ae(le):O):B.d3plus.r=D,B.d3plus.r<.1*c&&!e.small?B.d3plus.label={x:0,y:B.d3plus.r+2*e.labels.padding,w:.6*c,h:b+D-B.d3plus.r,resize:!1}:delete B.d3plus.label}for(ne=a.paths,$=U=0,T=ne.length;T>U;$=++U)for(V=ne[$],_=e.focus.value[0],re=V.edges,h=J=0,E=re.length;E>J;h=++J)d=re[h],I=d[e.edges.source][e.id.value]===_?"target":"source",w="target"===I?"source":"target",R=d[e.edges[I]][e.id.value],H[_]!==H[R]?(d.d3plus={spline:!0},null==(t=d[e.edges.source]).d3plus&&(t.d3plus={}),null==(n=d[e.edges.source].d3plus).edges&&(n.edges={}),null==(i=d[e.edges.target]).d3plus&&(i.d3plus={}),null==(o=d[e.edges.target].d3plus).edges&&(o.edges={}),ce=d[I].d3plus.x-d[w].d3plus.x,d[w].d3plus.edges[d[I][e.id.value]]={angle:Math.PI,radius:c/2},d[I].d3plus.edges[d[w][e.id.value]]={angle:0,radius:c/2,offset:ce-c}):delete d.d3plus,_=R;return{nodes:e.data.viz,edges:p}},a.filter=function(e,t){var n,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A;for(u=e.edges.filtered||e.edges.value,a.paths=i(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),a.nodes=[],n=[],b=a.paths,d=0,g=b.length;g>d;d++)for(x=b[d],w=x.edges,h=0,v=w.length;v>h;h++)l=w[h],k=l[e.edges.source],A=l[e.edges.target],n.indexOf(k[e.id.value])<0&&(a.nodes.push(k),
n.push(k[e.id.value])),n.indexOf(A[e.id.value])<0&&(a.nodes.push(A),n.push(A[e.id.value]));for(f=o(a.nodes,e.id.value,r,e),_=[],p=0,m=f.length;m>p;p++)c=f[p],s=t.filter(function(t){return t[e.id.value]===c}),s[0]?_.push(s[0]):(y={d3plus:{}},y[e.id.value]=c,_.push(y));return _},a.nesting=!1,a.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],a.scale=1,a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../core/fetch/value.coffee":67,"../../network/shortestPath.coffee":166,"../../util/uniques.coffee":209}],324:[function(e,t,n){var r,i,o,a;r=e("../../array/comparator.coffee"),i=e("../../core/data/threshold.js"),o=e("../../core/data/group.coffee"),a=function(e){var t,n,i,a,s,l,u,c,f;for(u=d3.layout.pie().value(function(e){return e.value}).sort(function(t,n){return e.order.value?r(t.d3plus,n.d3plus,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3plus,n.d3plus,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3plus,n.d3plus,[e.size.value],"desc",[],e)}),n=o(e,e.data.viz,[]),l=u(n),f=[],c=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,i=0,s=l.length;s>i;i++)t=l[i],a=t.data.d3plus,a.d3plus.startAngle=t.startAngle,a.d3plus.endAngle=t.endAngle,a.d3plus.r=c,a.d3plus.x=e.width.viz/2,a.d3plus.y=e.height.viz/2,a.d3plus.share=(t.endAngle-t.startAngle)/(2*Math.PI),f.push(a);return f},a.filter=i,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a},{"../../array/comparator.coffee":32,"../../core/data/group.coffee":57,"../../core/data/threshold.js":61}],325:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h;i=e("../../array/comparator.coffee"),f=e("../../array/sort.coffee"),o=e("../../core/data/threshold.js"),a=e("../../core/fetch/text.js"),s=e("../../core/fetch/value.coffee"),l=e("../../font/sizes.coffee"),u=e("../../geom/offset.coffee"),d=e("../../textwrap/textwrap.coffee"),r=e("../../util/buckets.coffee"),h=e("../../util/uniques.coffee"),c=function(e){var t,n,i,o,c,f,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se;for(m=e.data.viz,V=e.depth.value+1,$=e.id.nesting[V],g=function(){var e,t,n;for(n=[],e=0,t=m.length;t>e;e++)v=m[e],n.push(v[$]);return n}(),oe=function(){var t,n,r;for(r=[],t=0,n=m.length;n>t;t++)v=m[t],r.push(h(m,$,s,e,V));return r}(),oe=h(d3.merge(oe)).length,o=2*Math.PI/oe,q=d3.min([e.width.viz,e.height.viz])/2,E=0,O=0,N=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(a(e,f,V)[0]);return r}(),N=h(d3.merge(N)),e.labels.value&&(y=u(Math.PI/2,q),ee=u(o+Math.PI/2,q),E=y.x-ee.x-2*e.labels.padding,re={fill:e.x.ticks.font.color,"font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight,"font-size":e.x.ticks.font.size+"px"},te=l(N,re,{mod:function(t){return d().container(d3.select(t)).width(e.height.viz/8).height(E).draw()}}),O=d3.max(te,function(e){return e.width}),q-=O,q-=2*e.labels.padding),B=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(function(){var t,n,r;for(r=[],t=0,n=f.length;n>t;t++)v=f[t],r.push(s(e,v,e.size.value));return r}());return r}(),B=d3.max(d3.merge(B)),W=d3.scale.linear().domain([0,B]).range([0,q]),k=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(s(e,f,$));return r}(),k=h(d3.merge(k)),_=d3.scale.ordinal().domain(k).range(d3.range(0,k.length)),S=0,P=m.length;P>S;S++)for(v=m[S],v.d3plus.x=e.width.viz/2+e.margin.top,v.d3plus.y=e.height.viz/2+e.margin.left,X=v[$],w=z=0,F=X.length;F>z;w=++z)t=X[w],t.d3plus||(t.d3plus={}),t.d3plus.r=W(s(e,t,e.size.value)),t.d3plus.a=_(s(e,t,$))*o;for(A=1,J=[10,5,4,2],L=0,I=J.length;I>L;L++)if(w=J[L],q/w>=20){A=w;break}for(Q=r([q/A,q],A-1).reverse(),Q.length===A&&Q.shift(),K=e.group.selectAll(".d3plus_radar_rings").data(Q,function(e,t){return t}),Z=function(t){return t.attr("fill",function(t,n){return 0===n?e.axes.background.color:"transparent"}).attr("cx",e.width.viz/2+e.margin.top).attr("cy",e.height.viz/2+e.margin.left).attr("stroke",e.x.grid.value?e.x.grid.color:"transparent")},K.enter().append("circle").attr("class","d3plus_radar_rings").call(Z).attr("r",0),K.transition().duration(e.draw.timing).call(Z).attr("r",function(e){return e}),K.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=d3.scale.ordinal().domain(N).range(d3.range(0,N.length)),C=[],U=0,R=N.length;R>U;U++)M=N[U],n=o*j(M)-Math.PI/2,t=n*(180/Math.PI),-90>t||t>90?(t-=180,c=-(q+2*e.labels.padding+O),i="end"):(c=q+2*e.labels.padding,i="start"),ie=0>n||n>Math.PI,G=n<Math.PI/2,Y=q,e.labels.value&&(Y+=e.labels.padding),H=u(n,Y),ae=H.x,se=H.y,G||(ae-=O),ie&&(se-=E),p=[0,Math.PI].indexOf(o*j(M))>=0,p&&(ae-=O/2),C.push({text:M,angle:t,x:c,anchor:i,offset:H});return T=e.group.selectAll("g.d3plus_radar_label_group").data([0]),T.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),T.transition().duration(e.draw.timing).attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),ne=T.selectAll(".d3plus_radar_labels").data(e.labels.value?C:[],function(e,t){return t}),D=function(e){return e.attr(re).each(function(e,t){return d().container(d3.select(this)).height(E).width(O).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-E/2).draw()}).attr("transform",function(e){var t;return t=d3.select(this).attr("transform")||"",t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},ne.call(D),ne.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(D).transition().duration(e.draw.timing).attr("opacity",1),ne.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),x=e.group.selectAll(".d3plus_radar_lines").data(C,function(e,t){return t}),b=function(t){return t.attr("stroke",e.x.grid.color).attr("x1",e.width.viz/2+e.margin.left).attr("y1",e.height.viz/2+e.margin.top)},x.enter().append("line").attr("class","d3plus_radar_lines").call(b).attr("x2",e.width.viz/2+e.margin.left).attr("y2",e.height.viz/2+e.margin.top),x.transition().duration(e.draw.timing).call(b).attr("x2",function(t){return e.width.viz/2+e.margin.left+t.offset.x}).attr("y2",function(t){return e.height.viz/2+e.margin.top+t.offset.y}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.mouse.viz={click:!1},m},c.requirements=["data","size"],c.shapes=["radial"],t.exports=c},{"../../array/comparator.coffee":32,"../../array/sort.coffee":34,"../../core/data/threshold.js":61,"../../core/fetch/text.js":66,"../../core/fetch/value.coffee":67,"../../font/sizes.coffee":101,"../../geom/offset.coffee":160,"../../textwrap/textwrap.coffee":199,"../../util/buckets.coffee":203,"../../util/uniques.coffee":209}],326:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("../../client/pointer.coffee"),o=e("../../core/fetch/value.coffee"),s=e("../../core/fetch/color.coffee"),l=e("../../color/legible.coffee"),u=e("../../tooltip/remove.coffee"),c=e("../../network/smallestGap.coffee"),f=e("../../color/text.coffee"),d=e("../../util/uniques.coffee"),h=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,h=e.small||!e.labels.value?1.4*n:n,p=2*n,g=[],v=[],m=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];m||(m={d3plus:{}},m[e.id.value]=e.focus.value[0]),m.d3plus.x=e.width.viz/2,m.d3plus.y=e.height.viz/2,m.d3plus.r=.65*h;var y=[],x=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var n=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],r=e.data.viz.filter(function(t){return t[e.id.value]===n[e.id.value]})[0];r||(r={d3plus:{}},r[e.id.value]=n[e.id.value]),r.d3plus.edges=e.edges.connections(r[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),r.d3plus.edge=t,x.push(r[e.id.value]),y.push(r)});var b=e.order.value||e.color.value||e.size.value||e.id.value;y.sort(function(t,n){var i=t.d3plus.edges.length-n.d3plus.edges.length;return i?i:r([t,n],b,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?y=y.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(y=e.edges.limit.value(y));var w=[],_=0;y.forEach(function(t){var n=t[e.id.value];t.d3plus.edges=t.d3plus.edges.filter(function(t){var r=t[e.edges.source][e.id.value],i=t[e.edges.target][e.id.value];return x.indexOf(r)<0&&i==n||x.indexOf(i)<0&&r==n}),_+=t.d3plus.edges.length||1,t.d3plus.edges.forEach(function(t){var r=t[e.edges.source],i=t[e.edges.target],o=i[e.id.value]==n?r:i;x.push(o[e.id.value])})}),r(y,b,e.order.sort.value,e.color.value||[],e);var k=0,A=2*Math.PI,S=0;y.forEach(function(t,n){var i=t.d3plus.edges.length||1,o=A/_*i;0==n&&(S=s,k-=o/2);var s=k+o/2;s-=A/4,t.d3plus.radians=s,t.d3plus.x=e.width.viz/2+h*Math.cos(s),t.d3plus.y=e.height.viz/2+h*Math.sin(s),k+=o,t.d3plus.edges.sort(function(n,i){var n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],i=i[e.edges.source][e.id.value]==t[e.id.value]?i[e.edges.target]:i[e.edges.source];return r([n,i],b,e.order.sort.value,e.color.value||[],e)}),t.d3plus.edges.forEach(function(n,r){var o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],l=A/_,u=e.data.viz.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];u||(u={d3plus:{}},u[e.id.value]=o[e.id.value]),a=s-l*i/2+l/2+l*r,u.d3plus.radians=a,u.d3plus.x=e.width.viz/2+p*Math.cos(a),u.d3plus.y=e.height.viz/2+p*Math.sin(a),w.push(u)})});var z=c(y,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}}),M=c(w,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}});if(z||(z=n/2),M||(M=n/4),8>z/2-4)var C=d3.min([z/2,8]);else var C=z/2-4;if(4>M/2-4)var T=d3.min([M/2,4]);else var T=M/2-4;T>n/10&&(T=n/10),T>C&&T>10&&(T=.75*C),C>1.5*T&&(C=1.5*T),C=Math.floor(C),T=Math.floor(T);var E=d(y,e.id.value,o,e);E=E.concat(d(w,e.id.value,o,e)),E.push(e.focus.value[0]);var j=e.data.viz.filter(function(t){return E.indexOf(t[e.id.value])>=0});if(e.size.value){var D=d3.extent(j,function(t){return o(e,t,e.size.value)});D[0]==D[1]&&(D[0]=0);var t=d3.scale.linear().domain(D).rangeRound([3,d3.min([C,T])]),O=o(e,m,e.size.value);m.d3plus.r=t(O)}else{var t=d3.scale.linear().domain([1,2]).rangeRound([C,T]);e.edges.label&&(m.d3plus.r=1.5*t(1))}w.forEach(function(n){n.d3plus.ring=2;var r=e.size.value?o(e,n,e.size.value):2;n.d3plus.r=t(r)}),y.forEach(function(n){n.d3plus.ring=1;var r=e.size.value?o(e,n,e.size.value):1;n.d3plus.r=t(r)}),v=[m].concat(y).concat(w),y.forEach(function(t,r){var i=[e.edges.source,e.edges.target],o=t.d3plus.edge;i.forEach(function(t){o[t]=v.filter(function(n){return n[e.id.value]==o[t][e.id.value]})[0]}),delete o.d3plus,g.push(o),e.edges.connections(t[e.id.value],e.id.value).forEach(function(r){var i=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source];if(i[e.id.value]!=m[e.id.value]){var o=w.filter(function(t){return t[e.id.value]==i[e.id.value]})[0];if(o||(o=y.filter(function(t){return t[e.id.value]==i[e.id.value]})[0]),o){r.d3plus={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}};var a=[e.edges.source,e.edges.target];a.forEach(function(i,a){r[i]=v.filter(function(t){return t[e.id.value]==r[i][e.id.value]})[0],void 0===r[i].d3plus.edges&&(r[i].d3plus.edges={});var s=0===a?r[e.edges.target][e.id.value]:r[e.edges.source][e.id.value];r[i][e.id.value]==t[e.id.value]?r[i].d3plus.edges[s]={angle:t.d3plus.radians+Math.PI,radius:n/2}:r[i].d3plus.edges[s]={angle:o.d3plus.radians,radius:n/2}}),g.push(r)}}})});var N=!1;return e.background.value&&["transparent","none"].indexOf(e.background.value)<0&&d3.hsl(e.background.value).l<.5&&(N=f(e.background.value)),v.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3plus.rotate=t.d3plus.radians*(180/Math.PI);var r=t.d3plus.rotate,i=n-3*e.labels.padding-t.d3plus.r;if(-90>r||r>90){r-=180;var o=-(t.d3plus.r+i/2+e.labels.padding),a="end"}else var o=t.d3plus.r+i/2+e.labels.padding,a="start";var u=y.indexOf(t)>=0,c=1==t.d3plus.ring?z:M;t.d3plus.label={x:o,y:0,w:i,h:c,angle:r,anchor:a,valign:"center",color:N||l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){var c=h-2*t.d3plus.r-2*e.labels.padding;t.d3plus.label={x:0,y:t.d3plus.r+c/2,w:h,h:c,color:N||l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3plus.rotate,delete t.d3plus.label;else delete t.d3plus.rotate,delete t.d3plus.label}),e.mouse.viz={},e.mouse.viz[i.click]=function(t){if(t[e.id.value]!=e.focus.value[0]){u(e.type.value);var n=e.focus.value[0];e.history.states.push(function(){e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()}},{edges:g,nodes:v,data:j}};h.filter=function(e,t){var n=e.edges.connections(e.focus.value[0],e.id.value,!0),r=[];n.forEach(function(t){r=r.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var i=n.concat(r),a=d(i,e.id.value,o,e),s=[];return a.forEach(function(n){var r=t.filter(function(t){return t[e.id.value]==n})[0];if(r)s.push(r);else{var i={d3plus:{}};i[e.id.value]=n,s.push(i)}}),s},h.nesting=!1,h.scale=1,h.shapes=["circle","square","donut"],h.requirements=["edges","focus"],h.tooltip="static",t.exports=h},{"../../array/sort.coffee":34,"../../client/pointer.coffee":38,"../../color/legible.coffee":44,"../../color/text.coffee":50,"../../core/fetch/color.coffee":63,"../../core/fetch/value.coffee":67,"../../network/smallestGap.coffee":167,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209}],327:[function(e,t,n){var r,i,o,a,s;r=e("./sankey.js"),i=e("../../client/pointer.coffee"),o=e("../../tooltip/remove.coffee"),s=e("../../util/uniques.coffee"),a=function(e){var t,n,a,s,l,u,c,f,d,h,p,g,v,m,y;for(s=e.focus.value[0],g=2*e.data.stroke.width,y=e.size.value.constructor===Number?e.size.value:20,a=e.edges.connections(s,e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!==s||t[e.edges.target][e.id.value]!==s}),p=[],v=[],a=a.map(function(t){var n,r;return t[e.edges.target][e.id.value]===s?(n={id:"left_"+t[e.edges.source][e.id.value],dupe:"left",data:t[e.edges.source],value:t[e.edges.strength.value]},r=t[e.edges.target]):(n=t[e.edges.source],r={id:"right_"+t[e.edges.target][e.id.value],dupe:"right",data:t[e.edges.target],value:t[e.edges.strength.value]}),v.indexOf(n.id)<0&&p.push(n),v.indexOf(r.id)<0&&p.push(r),v.push(n.id),v.push(r.id),{source:n,target:r,value:t[e.edges.strength.value]||1}}),c=r().nodeWidth(y).nodePadding(e.data.padding.value).size([e.width.viz-2*g,e.height.viz-2*g]).nodes(p).links(a).layout(2),m=[],l=0,f=p.length;f>l;l++)h=p[l],t=h.data||h,t={id:t[e.id.value]},t.d3plus={x:h.x+h.dx/2+g,y:h.y+h.dy/2+g,width:h.dx,height:h.dy,suffix:h.dupe},t.id!==s&&(t[e.edges.strength.value]=h.value),m.push(t);for(e.edges.path=c.link(),u=0,d=a.length;d>u;u++)n=a[u],n.d3plus={x:g,y:g};return e.mouse.viz={},e.mouse.viz[i.click]=function(t){var n;return t[e.id.value]!==e.focus.value[0]?(o(e.type.value),n=e.focus.value[0],e.history.states.push(function(){return e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()):void 0},{nodes:m,edges:a}},a.requirements=["edges","focus","nodes"],a.shapes=["square"],t.exports=a},{"../../client/pointer.coffee":38,"../../tooltip/remove.coffee":202,"../../util/uniques.coffee":209,"./sankey.js":328}],328:[function(e,t,n){t.exports=function(){function e(){h.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),p.forEach(function(e){var t=e.source,n=e.target;"number"==typeof t&&(t=e.source=h[e.source]),"number"==typeof n&&(n=e.target=h[e.target]),t.sourceLinks.push(e),n.targetLinks.push(e)})}function t(){h.forEach(function(e){e.value=Math.max(d3.sum(e.sourceLinks,l),d3.sum(e.targetLinks,l))})}function n(){for(var e,t=h,n=0;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=c,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;r(n),i((d[0]-c)/(n-1))}function r(e){h.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}function i(e){h.forEach(function(t){t.x*=e})}function o(e){function t(){var e=d3.min(a,function(e){return(d[1]-(e.length-1)*f)/d3.sum(e,l)});a.forEach(function(t){t.forEach(function(t,n){t.y=n,t.dy=t.value*e})}),p.forEach(function(t){t.dy=t.value*e})}function n(e){function t(e){return s(e.source)*e.value}a.forEach(function(n,r){n.forEach(function(n){if(n.targetLinks.length){var r=d3.sum(n.targetLinks,t)/d3.sum(n.targetLinks,l);n.y+=(r-s(n))*e}})})}function r(e){function t(e){return s(e.target)*e.value}a.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=d3.sum(n.sourceLinks,t)/d3.sum(n.sourceLinks,l);n.y+=(r-s(n))*e}})})}function i(){a.forEach(function(e){var t,n,r,i=0,a=e.length;for(e.sort(o),r=0;a>r;++r)t=e[r],n=i-t.y,n>0&&(t.y+=n),i=t.y+t.dy+f;if(n=i-f-d[1],n>0)for(i=t.y-=n,r=a-2;r>=0;--r)t=e[r],n=t.y+t.dy+f-i,n>0&&(t.y-=n),i=t.y})}function o(e,t){return e.y-t.y}var a=d3.nest().key(function(e){return e.x}).sortKeys(d3.ascending).entries(h).map(function(e){return e.values});t(),i();for(var u=1;e>0;--e)r(u*=.99),i(),n(u),i()}function a(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}h.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),h.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}function s(e){return e.y+e.dy/2}function l(e){return e.value}var u={},c=24,f=8,d=[1,1],h=[],p=[];return u.nodeWidth=function(e){return arguments.length?(c=+e,u):c},u.nodePadding=function(e){return arguments.length?(f=+e,u):f},u.nodes=function(e){return arguments.length?(h=e,u):h},u.links=function(e){return arguments.length?(p=e,u):p},u.size=function(e){return arguments.length?(d=e,u):d},u.layout=function(r){return e(),t(),n(),o(r),a(),u},u.relayout=function(){return a(),u},u.link=function(){function e(e){var n=e.source.x+e.source.dx,r=e.target.x,i=d3.interpolateNumber(n,r),o=i(t),a=i(1-t),s=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l}var t=.5;return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},u}},{}],329:[function(e,t,n){var r,i,o,a,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),o=e("../../core/console/print.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/dataTicks.coffee"),a=function(e){var t,n,o,a,u;if(i(e,{buffer:"size",mouse:!0}),n=e.x.domain.viz.concat(e.y.domain.viz),n.indexOf(void 0)>=0)return[];for(u=e.data.viz,o=0,a=u.length;a>o;o++)t=u[o],t.d3plus.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3plus.y+=e.axes.margin.top,"number"!=typeof e.size.value&&e.size.value?t.d3plus.r=e.axes.scale(r(e,t,e.size.value)):t.d3plus.r=e.axes.scale(0);return l(e),s(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)},a.fill=!0,a.requirements=["data","x","y"],a.scale=1.1,a.setup=function(e){return e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value)?e.self.y({scale:"discrete"}):void 0},a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../array/sort.coffee":34,"../../core/console/print.coffee":52,"../../core/fetch/value.coffee":67,"./helpers/graph/dataTicks.coffee":312,"./helpers/graph/draw.coffee":313}],330:[function(e,t,n){var r=e("../../core/fetch/value.coffee"),i=e("../../util/uniques.coffee"),o=e("../../util/copy.coffee"),a=e("../../color/random.coffee"),s=function(e){var t=i(e.data.viz,e.id.value,r,e),n=i(e.cols.value);n.indexOf("label")<0&&e.cols.index.value&&n.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/n.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var f=[],d={};return n.forEach(function(t,n){var r={d3plus:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:e.format.value(t)}};if(t==e.id.value&&(r.d3plus.color="#fff"),"label"==t&&(r.d3plus.label=!1,r.d3plus.color="#fff",r.d3plus.stroke="#fff"),f.push(r),"number"==e.data.keys[t]){var i=d3.extent(e.data.viz,function(e){return e[t]});i[0]==i[1]&&(i=[i[0]-1,i[1]]),d[t]=d3.scale.linear().domain(i).range([e.color.missing,a(t)])}else"boolean"==e.data.keys[t]&&(d[t]=function(n){return n?a(t):e.color.missing})}),e.data.viz.forEach(function(t,r){r+=1,n.forEach(function(n,i){var a=o(t);a.d3plus.id="d3p_"+a[e.id.value].toString().replace(/ /g,"_")+"_"+n,a.d3plus.x=l*i+l/2,a.d3plus.y=s*r+s/2,a.d3plus.width=l,a.d3plus.height=s,"label"==n&&(a.d3plus.shape="square",a.d3plus.color="#fff",f.push(a)),d3.keys(t).indexOf(n)>=0&&n in t&&(d[n]&&(a.d3plus.color=d[n](a[n])),a.d3plus.text=e.format.value(a[n]),"boolean"==e.data.keys[n]?a.d3plus.label=!1:"string"==e.data.keys[n]&&(a.d3plus.color=e.color.missing,a.d3plus.stroke="#fff",a.d3plus.shape="square"),f.push(a))})}),f};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.coffee":47,"../../core/fetch/value.coffee":67,"../../util/copy.coffee":206,"../../util/uniques.coffee":209}],331:[function(e,t,n){var r,i,o,a;r=e("../../core/data/threshold.js"),i=e("../../core/data/group.coffee"),o=e("../../object/merge.coffee"),a=function(e){var t,n,r,a,s,l,u;if(r=i(e,e.data.viz),n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return n=e.value-t.value,0===n?e.id<t.id:n}).nodes({name:"root",values:r}).filter(function(e){return!e.values&&e.area}),n.length){for(u=n[0];u.parent;)u=u.parent;for(l=[],a=0,s=n.length;s>a;a++)t=n[a],t.d3plus.d3plus=o(t.d3plus.d3plus,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3plus)}return l},a.filter=r,a.modes=["squarify","slice","dice","slice-dice"],a.requirements=["data","size"],a.shapes=["square"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a},{"../../core/data/group.coffee":57,"../../core/data/threshold.js":61,"../../object/merge.coffee":170}],332:[function(e,t,n){var r,i,o,a,s,l,u;r=e("../core/methods/attach.coffee"),i=e("./methods/helpers/axis.coffee"),a=e("./helpers/ui/message.js"),s=e("./helpers/drawSteps.js"),l=e("../core/console/print.coffee"),o=e("./helpers/container.coffee"),u=e("../object/validate.coffee"),t.exports=function(){var t;return t={g:{apps:{}},types:{area:e("./types/area.coffee"),bar:e("./types/bar.coffee"),bubbles:e("./types/bubbles.coffee"),box:e("./types/box.coffee"),chart:e("./types/deprecated/chart.coffee"),geo_map:e("./types/geo_map.coffee"),line:e("./types/line.coffee"),network:e("./types/network.js"),paths:e("./types/paths.coffee"),pie:e("./types/pie.coffee"),radar:e("./types/radar.coffee"),rings:e("./types/rings.js"),sankey:e("./types/sankey.coffee"),scatter:e("./types/scatter.coffee"),stacked:e("./types/area.coffee"),table:e("./types/table.js"),tree_map:e("./types/tree_map.coffee")}},t.self=function(e){return e.each(function(){var e,n,r,i,u,c,f;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),o(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,n=function(){f.length?i():t.dev.value&&(l.groupEnd(),l.timeEnd("total draw time"),l.log("\n"))},r=function(e,r){r=r||"function",e[r]instanceof Array?e[r].forEach(function(e){e(t,n)}):"function"==typeof e[r]&&e[r](t,n),e.wait||n()},i=function(){var i,o,s,u;u=f.shift(),s=t.g.message&&e===u.message,o=!("check"in u)||u.check,"function"==typeof o&&(o=o(t)),o?s?r(u):(t.dev.value&&(e!==!1&&l.groupEnd(),l.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,i=t.messages.value):(e=u.message,i=t.format.value(u.message)),t.draw.update?(a(t,i),t.error.value?r(u):setTimeout(function(){return r(u)},10)):r(u)):"otherwise"in u?t.error.value?r(u,"otherwise"):setTimeout(function(){return r(u,"otherwise")},10):n()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",f=s(t),i()}),t.self},r(t,{active:e("./methods/active.coffee"),aggs:e("./methods/aggs.coffee"),attrs:e("./methods/attrs.coffee"),axes:e("./methods/axes.coffee"),background:e("./methods/background.coffee"),"class":e("./methods/class.coffee"),color:e("./methods/color.coffee"),cols:e("./methods/cols.js"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),coords:e("./methods/coords.coffee"),csv:e("./methods/csv.coffee"),data:e("./methods/data.coffee"),depth:e("./methods/depth.coffee"),descs:e("./methods/descs.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.coffee"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),footer:e("./methods/footer.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),labels:e("./methods/labels.coffee"),legend:e("./methods/legend.coffee"),links:e("./methods/links.coffee"),margin:e("./methods/margin.coffee"),messages:e("./methods/messages.coffee"),mouse:e("./methods/mouse.coffee"),nodes:e("./methods/nodes.coffee"),order:e("./methods/order.coffee"),resize:e("./methods/resize.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),style:e("./methods/style.coffee"),temp:e("./methods/temp.coffee"),text:e("./methods/text.coffee"),time:e("./methods/time.coffee"),timeline:e("./methods/timeline.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),tooltip:e("./methods/tooltip.coffee"),total:e("./methods/total.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee"),x:i("x"),x2:i("x2"),y:i("y"),y2:i("y2"),zoom:e("./methods/zoom.js")}),t.self}},{"../core/console/print.coffee":52,"../core/methods/attach.coffee":79,"../object/validate.coffee":171,"./helpers/container.coffee":210,"./helpers/drawSteps.js":211,"./helpers/ui/message.js":245,"./methods/active.coffee":254,"./methods/aggs.coffee":255,"./methods/attrs.coffee":256,"./methods/axes.coffee":257,"./methods/background.coffee":258,"./methods/class.coffee":259,"./methods/color.coffee":260,"./methods/cols.js":261,"./methods/config.coffee":262,"./methods/container.coffee":263,"./methods/coords.coffee":264,"./methods/csv.coffee":265,"./methods/data.coffee":266,"./methods/depth.coffee":267,"./methods/descs.coffee":268,"./methods/dev.coffee":269,"./methods/draw.js":270,"./methods/edges.js":271,"./methods/error.coffee":272,"./methods/focus.coffee":273,"./methods/font.coffee":274,"./methods/footer.coffee":275,"./methods/format.coffee":276,"./methods/height.coffee":277,"./methods/helpers/axis.coffee":278,"./methods/history.coffee":279,"./methods/icon.coffee":280,"./methods/id.coffee":281,"./methods/labels.coffee":282,"./methods/legend.coffee":283,"./methods/links.coffee":284,"./methods/margin.coffee":285,"./methods/messages.coffee":286,"./methods/mouse.coffee":287,"./methods/nodes.coffee":288,"./methods/order.coffee":289,"./methods/resize.coffee":290,"./methods/shape.coffee":291,"./methods/size.coffee":292,"./methods/style.coffee":293,"./methods/temp.coffee":294,"./methods/text.coffee":295,"./methods/time.coffee":296,"./methods/timeline.coffee":297,"./methods/timing.coffee":298,"./methods/title.coffee":299,"./methods/tooltip.coffee":300,"./methods/total.coffee":301,"./methods/type.coffee":302,"./methods/ui.coffee":303,"./methods/width.coffee":304,"./methods/zoom.js":305,"./types/area.coffee":306,"./types/bar.coffee":307,"./types/box.coffee":308,"./types/bubbles.coffee":309,"./types/deprecated/chart.coffee":310,"./types/geo_map.coffee":311,"./types/line.coffee":321,"./types/network.js":322,"./types/paths.coffee":323,"./types/pie.coffee":324,"./types/radar.coffee":325,"./types/rings.js":326,"./types/sankey.coffee":327,"./types/scatter.coffee":329,"./types/table.js":330,"./types/tree_map.coffee":331}]},{},[162]),!function r(e,t,n){function i(a,s){if(!t[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,r,e,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?a(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):l(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function a(e,t){if(e=g(e,0>t?0:0|v(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(t,n);return e=g(e,r),e.write(t,n),e}function l(e,t){if(o.isBuffer(t))return u(e,t);if(G(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return f(e,t);if(t instanceof ArrayBuffer)return d(e,t)}return t.length?h(e,t):p(e,t)}function u(e,t){var n=0|v(t.length);return e=g(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){return t.byteLength,o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e=f(e,new Uint8Array(t)),e}function h(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&G(t.data)&&(n=t.data,r=0|v(n.length)),e=g(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function g(e,t){o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):e.length=t;var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=Q),e}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var n=new o(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){
case"hex":return j(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return T(this,t,n);case"binary":return E(this,t,n);case"base64":return z(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function w(e,t,n,r){return W(V(t,e.length-n),e,n,r)}function _(e,t,n,r){return W($(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function A(e,t,n,r){return W(Y(t),e,n,r)}function S(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function z(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var l,u,c,f;switch(s){case 1:128>o&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(f=(31&o)<<6|63&l,f>127&&(a=f));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(f=(15&o)<<12|(63&l)<<6|63&u,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return C(r)}function C(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=U(e[o]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function P(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function I(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(e,t,n,r,i){return i||I(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||I(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function B(e){if(e=q(e).replace(K,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return X.toByteArray(B(e))}function W(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var X=e("base64-js"),J=e("ieee754"),G=e("isarray");n.Buffer=o,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Q={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),o._augment=function(e){return e.__proto__=o.prototype,e},o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);a>i&&e[i]===t[i];)++i;return i!==a&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!G(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new o(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):x.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"binary":return k(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,(void 0));for(var a=0;i>a;a++)r[a]=this[a+e]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&t>n&&r>t)for(i=a-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=V(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}};var K=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===d?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[f++]=e}var r,i,a,s,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new o(3*e.length/4-l),a=l>0?e.length-4:e.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===l?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===l&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,o,a,s=e.length%3,l="";for(r=0,a=e.length-s;a>r;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=n(o);switch(s){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],3:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*g}},{}],4:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],5:[function(e,t,n){!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function n(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function r(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function i(e){return null===e?NaN:+e}function o(e){return!isNaN(e)}function a(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function s(e){return e.length}function l(e){for(var t=1;e*t%1;)t*=10;return t}function u(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function c(){this._=Object.create(null)}function f(e){return(e+="")===_a||e[0]===ka?ka+e:e}function d(e){return(e+="")[0]===ka?e.slice(1):e}function h(e){return f(e)in this._}function p(e){return(e=f(e))in this._&&delete this._[e]}function g(){var e=[];for(var t in this._)e.push(d(t));return e}function v(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function y(){this._=Object.create(null)}function x(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function w(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Aa.length;r>n;++n){var i=Aa[n]+t;if(i in e)return i}}function _(){}function k(){}function A(e){function t(){for(var t,r=n,i=-1,o=r.length;++i<o;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new c;return t.on=function(t,i){var o,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function S(){ua.event.preventDefault()}function z(){for(var e,t=ua.event;e=t.sourceEvent;)t=e;return t}function M(e){for(var t=new k,n=0,r=arguments.length;++n<r;)t[arguments[n]]=A(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=ua.event;i.target=e,ua.event=i,t[i.type].apply(n,r)}finally{ua.event=o}}},t}function C(e){return za(e,Ea),e}function T(e){return"function"==typeof e?e:function(){return Ma(e,this)}}function E(e){return"function"==typeof e?e:function(){return Ca(e,this)}}function j(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ua.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?o:i}function D(e){return e.trim().replace(/\s+/g," ")}function O(e){return new RegExp("(?:^|\\s+)"+ua.requote(e)+"(?:\\s+|$)","g")}function N(e){return(e+"").trim().split(/^|\s+/)}function P(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=N(e).map(F);var i=e.length;return"function"==typeof t?r:n}function F(e){var t=O(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",D(i+" "+e))):n.setAttribute("class",D(i.replace(t," ")))}}function I(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function o(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?o:i}function R(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function L(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n&&n!==t.documentElement.namespaceURI?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=ua.ns.qualify(e)).local?n:t}function B(){var e=this.parentNode;e&&e.removeChild(this)}function q(e){return{__data__:e}}function U(e){return function(){return Ta(this,e)}}function V(e){return arguments.length||(e=r),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function $(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,o=e[n],a=0,s=o.length;s>a;a++)(i=o[a])&&t(i,a,n);return e}function H(e){return za(e,Da),e}function Y(e){var t,n;return function(r,i,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<l;);return a}}function W(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function i(){var i=l(t,fa(arguments));r.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}function o(){var t,n=new RegExp("^__on([^.]+)"+ua.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),l=X;s>0&&(e=e.slice(0,s));var u=Oa.get(e);return u&&(e=u,l=J),s?t?i:r:t?_:o}function X(e,t){return function(n){var r=ua.event;ua.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ua.event=r}}}function J(e,t){var n=X(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function G(t){var r=".dragsuppress-"+ ++Pa,i="click"+r,o=ua.select(n(t)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Na&&(Na=!("onselectstart"in t)&&w(t.style,"userSelect")),Na){var a=e(t).style,s=a[Na];a[Na]="none"}return function(e){if(o.on(r,null),Na&&(a[Na]=s),e){var t=function(){o.on(i,null)};o.on(i,function(){S(),t()},!0),setTimeout(t,0)}}}function Q(e,t){t.changedTouches&&(t=t.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Fa){var o=n(e);if(o.scrollX||o.scrollY){r=ua.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Fa=!(a.f||a.e),r.remove()}}return Fa?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Z(){return ua.event.changedTouches[0].identifier}function K(e){return e>0?1:0>e?-1:0}function ee(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function te(e){return e>1?0:-1>e?La:Math.acos(e)}function ne(e){return e>1?Ua:-1>e?-Ua:Math.asin(e)}function re(e){return((e=Math.exp(e))-1/e)/2}function ie(e){return((e=Math.exp(e))+1/e)/2}function oe(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function se(){}function le(e,t,n){return this instanceof le?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof le?new le(e.h,e.s,e.l):_e(""+e,ke,le):new le(e,t,n)}function ue(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(a-o)*e/60:180>e?a:240>e?o+(a-o)*(240-e)/60:o}function i(e){return Math.round(255*r(e))}var o,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,o=2*n-a,new ye(i(e+120),i(e),i(e-120))}function ce(e,t,n){return this instanceof ce?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ce?new ce(e.h,e.c,e.l):e instanceof de?pe(e.l,e.a,e.b):pe((e=Ae((e=ua.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ce(e,t,n)}function fe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new de(n,Math.cos(e*=Va)*t,Math.sin(e)*t)}function de(e,t,n){return this instanceof de?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof de?new de(e.l,e.a,e.b):e instanceof ce?fe(e.h,e.c,e.l):Ae((e=ye(e)).r,e.g,e.b):new de(e,t,n)}function he(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return i=ge(i)*es,r=ge(r)*ts,o=ge(o)*ns,new ye(me(3.2404542*i-1.5371385*r-.4985314*o),me(-.969266*i+1.8760108*r+.041556*o),me(.0556434*i-.2040259*r+1.0572252*o))}function pe(e,t,n){return e>0?new ce(Math.atan2(n,t)*$a,Math.sqrt(t*t+n*n),e):new ce(NaN,NaN,e)}function ge(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ve(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ye(e,t,n){return this instanceof ye?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ye?new ye(e.r,e.g,e.b):_e(""+e,ye,ue):new ye(e,t,n)}function xe(e){return new ye(e>>16,e>>8&255,255&e)}function be(e){return xe(e)+""}function we(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function _e(e,t,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(ze(i[0]),ze(i[1]),ze(i[2]))}return(o=os.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function ke(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new le(r,i,l)}function Ae(e,t,n){e=Se(e),t=Se(t),n=Se(n);var r=ve((.4124564*e+.3575761*t+.1804375*n)/es),i=ve((.2126729*e+.7151522*t+.072175*n)/ts),o=ve((.0193339*e+.119192*t+.9503041*n)/ns);return de(116*i-16,500*(r-i),200*(i-o))}function Se(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ze(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Me(e){return"function"==typeof e?e:function(){return e}}function Ce(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Te(t,n,e,r)}}function Te(e,t,n,r){function i(){var e,t=l.status;if(!t&&je(l)||t>=200&&300>t||304===t){try{e=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=ua.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=ua.event;ua.event=e;try{a.progress.call(o,l)}finally{ua.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(u=e,o):u},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(fa(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ua.rebind(o,a,"on"),null==r?o:o.get(Ee(r))}function Ee(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function je(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function De(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,o={c:e,t:i,n:null};return ss?ss.n=o:as=o,ss=o,ls||(us=clearTimeout(us),ls=1,cs(Oe)),o}function Oe(){var e=Ne(),t=Pe()-e;t>24?(isFinite(t)&&(clearTimeout(us),us=setTimeout(Oe,t)),ls=0):(ls=1,cs(Oe))}function Ne(){for(var e=Date.now(),t=as;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Pe(){for(var e,t=as,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:as=t.n;return ss=e,n}function Fe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ie(e,t){var n=Math.pow(10,3*wa(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Re(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:x;return function(e){var n=ds.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",v="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),h){case"n":f=!0,h="g";break;case"%":p=100,v="%",h="f";break;case"p":p=100,v="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=hs.get(h)||Le;var x=u&&f;return function(e){var n=v;if(m&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>p){var l=ua.formatPrefix(e,d);e=l.scale(e),n=l.symbol+v}else e*=p;e=h(e,d);var b,w,_=e.lastIndexOf(".");if(0>_){var k=y?e.lastIndexOf("e"):-1;0>k?(b=e,w=""):(b=e.substring(0,k),w=e.substring(k))}else b=e.substring(0,_),w=t+e.substring(_+1);!u&&f&&(b=o(b,1/0));var A=g.length+b.length+w.length+(x?0:i.length),S=c>A?new Array(A=c-A+1).join(r):"";return x&&(b=o(S+b,S.length?c-w.length:1/0)),i+=g,e=b+w,("<"===a?i+e+S:">"===a?S+i+e:"^"===a?S.substring(0,A>>=1)+i+e+S.substring(A):i+(x?e:S+e))+n}}}function Le(e){return e+""}function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function qe(e,t,n){function r(t){var n=e(t),r=o(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new gs(n-1)),1),n}function o(e,n){return t(e=new gs((+e)),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date((+a))),t(a,1);else for(;r>a;)s.push(new Date((+a))),t(a,1);return s}function s(e,t,n){try{gs=Be;var r=new Be;return r._=e,a(r,t,n)}finally{gs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var l=e.utc=Ue(e);return l.floor=l,l.round=Ue(r),l.ceil=Ue(i),l.offset=Ue(o),l.range=s,e}function Ue(e){return function(t,n){try{gs=Be;var r=new Be;return r._=t,e(r,n)._}finally{gs=Date}}}function Ve(e){function t(e){function t(t){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=ms[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=C[n])&&(n=o(t,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(e.slice(l,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&gs!==Be,a=new(o?Be:gs);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,o,a,s=0,l=t.length,u=n.length;l>s;){if(r>=u)return-1;if(i=t.charCodeAt(s++),37===i){
if(a=t.charAt(s++),o=T[a in ms?t.charAt(s++):a],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){z.lastIndex=0;var r=z.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){A.lastIndex=0;var r=A.exec(t.slice(n));return r?(e.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,C.c.toString(),t,r)}function l(e,t,r){return n(e,C.x.toString(),t,r)}function u(e,t,r){return n(e,C.X.toString(),t,r)}function c(e,t,n){var r=x.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,h=e.time,p=e.periods,g=e.days,v=e.shortDays,m=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{gs=Be;var t=new gs;return t._=e,r(t)}finally{gs=Date}}var r=t(e);return n.parse=function(e){try{gs=Be;var t=r.parse(e);return t&&t._}finally{gs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=ut;var x=ua.map(),b=He(g),w=Ye(g),_=He(v),k=Ye(v),A=He(m),S=Ye(m),z=He(y),M=Ye(y);p.forEach(function(e,t){x.set(e.toLowerCase(),t)});var C={a:function(e){return v[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return m[e.getMonth()]},c:t(f),d:function(e,t){return $e(e.getDate(),t,2)},e:function(e,t){return $e(e.getDate(),t,2)},H:function(e,t){return $e(e.getHours(),t,2)},I:function(e,t){return $e(e.getHours()%12||12,t,2)},j:function(e,t){return $e(1+ps.dayOfYear(e),t,3)},L:function(e,t){return $e(e.getMilliseconds(),t,3)},m:function(e,t){return $e(e.getMonth()+1,t,2)},M:function(e,t){return $e(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return $e(e.getSeconds(),t,2)},U:function(e,t){return $e(ps.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return $e(ps.mondayOfYear(e),t,2)},x:t(d),X:t(h),y:function(e,t){return $e(e.getFullYear()%100,t,2)},Y:function(e,t){return $e(e.getFullYear()%1e4,t,4)},Z:st,"%":function(){return"%"}},T={a:r,A:i,b:o,B:a,c:s,d:tt,e:tt,H:rt,I:rt,j:nt,L:at,m:et,M:it,p:c,S:ot,U:Xe,w:We,W:Je,x:l,X:u,y:Qe,Y:Ge,Z:Ze,"%":lt};return t}function $e(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(t)+i:i)}function He(e){return new RegExp("^(?:"+e.map(ua.requote).join("|")+")","i")}function Ye(e){for(var t=new c,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function We(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Xe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Je(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ge(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Qe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.y=Ke(+r[0]),n+r[0].length):-1}function Ze(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ke(e){return e+(e>68?1900:2e3)}function et(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function tt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function rt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function it(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ot(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function at(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function st(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=wa(t)/60|0,i=wa(t)%60;return n+$e(r,"0",2)+$e(i,"0",2)}function lt(e,t,n){xs.lastIndex=0;var r=xs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ut(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ct(){}function ft(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function dt(e,t){e&&ks.hasOwnProperty(e.type)&&ks[e.type](e,t)}function ht(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ht(e[n],t,1);t.polygonEnd()}function gt(){function e(e,t){e*=Va,t=t*Va/2+La/4;var n=e-r,a=n>=0?1:-1,s=a*n,l=Math.cos(t),u=Math.sin(t),c=o*u,f=i*l+c*Math.cos(s),d=c*a*Math.sin(s);Ss.add(Math.atan2(d,f)),r=e,i=l,o=u}var t,n,r,i,o;zs.point=function(a,s){zs.point=e,r=(t=a)*Va,i=Math.cos(s=(n=s)*Va/2+La/4),o=Math.sin(s)},zs.lineEnd=function(){e(t,n)}}function vt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function _t(e){return[Math.atan2(e[1],e[0]),ne(e[2])]}function kt(e,t){return wa(e[0]-t[0])<Ia&&wa(e[1]-t[1])<Ia}function At(e,t){e*=Va;var n=Math.cos(t*=Va);St(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function St(e,t,n){++Ms,Ts+=(e-Ts)/Ms,Es+=(t-Es)/Ms,js+=(n-js)/Ms}function zt(){function e(e,i){e*=Va;var o=Math.cos(i*=Va),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-t*l)*u+(u=t*s-n*a)*u),t*a+n*s+r*l);Cs+=u,Ds+=u*(t+(t=a)),Os+=u*(n+(n=s)),Ns+=u*(r+(r=l)),St(t,n,r)}var t,n,r;Rs.point=function(i,o){i*=Va;var a=Math.cos(o*=Va);t=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Rs.point=e,St(t,n,r)}}function Mt(){Rs.point=At}function Ct(){function e(e,t){e*=Va;var n=Math.cos(t*=Va),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,d=Math.sqrt(u*u+c*c+f*f),h=r*a+i*s+o*l,p=d&&-te(h)/d,g=Math.atan2(d,h);Ps+=p*u,Fs+=p*c,Is+=p*f,Cs+=g,Ds+=g*(r+(r=a)),Os+=g*(i+(i=s)),Ns+=g*(o+(o=l)),St(r,i,o)}var t,n,r,i,o;Rs.point=function(a,s){t=a,n=s,Rs.point=e,a*=Va;var l=Math.cos(s*=Va);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),St(r,i,o)},Rs.lineEnd=function(){e(t,n),Rs.lineEnd=Mt,Rs.point=At}}function Tt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Et(){return!0}function jt(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(kt(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var l=new Ot(n,e,null,(!0)),u=new Ot(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new Ot(r,e,null,(!1)),u=new Ot(r,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(t),Dt(o),Dt(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;u>s;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Dt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Ot(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Nt(e,t,n,r){return function(i,o){function a(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&t){e=n[0];var i,r=e.length-1,a=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Pt))}var h,p,g,v=t(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,h=ua.merge(h);var e=qt(m,p);h.length?(w||(o.polygonStart(),w=!0),jt(h,It,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Ft(),b=t(x),w=!1;return y}}function Pt(e){return e.length>1}function Ft(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:_,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function It(e,t){return((e=e.x)[0]<0?e[1]-Ua-Ia:Ua-e[1])-((t=t.x)[0]<0?t[1]-Ua-Ia:Ua-t[1])}function Rt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?La:-La,l=wa(o-n);wa(l-La)<Ia?(e.point(n,r=(r+a)/2>0?Ua:-Ua),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=La&&(wa(n-i)<Ia&&(n-=i*Ia),wa(o-s)<Ia&&(o-=s*Ia),r=Lt(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Lt(e,t,n,r){var i,o,a=Math.sin(e-n);return wa(a)>Ia?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}function Bt(e,t,n,r){var i;if(null==e)i=n*Ua,r.point(-La,i),r.point(0,i),r.point(La,i),r.point(La,0),r.point(La,-i),r.point(0,-i),r.point(-La,-i),r.point(-La,0),r.point(-La,i);else if(wa(e[0]-t[0])>Ia){var o=e[0]<t[0]?La:-La;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function qt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ss.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+La/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0),e=u[v];var m=e[0],y=e[1]/2+La/4,x=Math.sin(y),b=Math.cos(y),w=m-d,_=w>=0?1:-1,k=_*w,A=k>La,S=p*x;if(Ss.add(Math.atan2(S*_*Math.sin(k),g*b+S*Math.cos(k))),o+=A?w+_*Ba:w,A^d>=n^m>=n){var z=yt(vt(f),vt(e));wt(z);var M=yt(i,z);wt(M);var C=(A^w>=0?-1:1)*ne(M[2]);(r>C||r===C&&(z[0]||z[1]))&&(a+=A^w>=0?1:-1)}if(!v++)break;d=m,p=x,g=b,f=e}}return(-Ia>o||Ia>o&&0>Ss)^1&a}function Ut(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],g=t(f,d),v=a?g?0:i(f,d):g?i(f+(0>f?La:-La),d):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(h=r(n,p),(kt(n,h)||kt(p,h))&&(p[0]+=Ia,p[1]+=Ia,g=t(p[0],p[1]))),g!==l)c=0,g?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&a^g){var m;v&o||!(m=r(p,n,!0))||(c=0,a?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||n&&kt(n,p)||e.point(p[0],p[1]),n=p,l=g,o=v},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=vt(e),i=vt(t),a=[1,0,0],s=yt(r,i),l=mt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var f=o*l/c,d=-o*u/c,h=yt(a,s),p=bt(a,f),g=bt(s,d);xt(p,g);var v=h,m=mt(p,v),y=mt(v,v),x=m*m-y*(mt(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=bt(v,(-m-b)/y);if(xt(w,p),w=_t(w),!n)return w;var _,k=e[0],A=t[0],S=e[1],z=t[1];k>A&&(_=k,k=A,A=_);var M=A-k,C=wa(M-La)<Ia,T=C||Ia>M;if(!C&&S>z&&(_=S,S=z,z=_),T?C?S+z>0^w[1]<(wa(w[0]-k)<Ia?S:z):S<=w[1]&&w[1]<=z:M>La^(k<=w[0]&&w[0]<=A)){var E=bt(v,(-m+b)/y);return xt(E,p),[w,_t(E)]}}}function i(t,n){var r=a?e:La-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(e),a=o>0,s=wa(o)>Ia,l=vn(e,6*Va);return Nt(t,n,l,a?[0,-e]:[-La,e-La])}function Vt(e,t,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=s.x,f=s.y,d=0,h=1,p=c-l,g=f-u;if(o=e-l,p||!(o>0)){if(o/=p,0>p){if(d>o)return;h>o&&(h=o)}else if(p>0){if(o>h)return;o>d&&(d=o)}if(o=n-l,p||!(0>o)){if(o/=p,0>p){if(o>h)return;o>d&&(d=o)}else if(p>0){if(d>o)return;h>o&&(h=o)}if(o=t-u,g||!(o>0)){if(o/=g,0>g){if(d>o)return;h>o&&(h=o)}else if(g>0){if(o>h)return;o>d&&(d=o)}if(o=r-u,g||!(0>o)){if(o/=g,0>g){if(o>h)return;o>d&&(d=o)}else if(g>0){if(d>o)return;h>o&&(h=o)}return d>0&&(i.a={x:l+d*p,y:u+d*g}),1>h&&(i.b={x:l+h*p,y:u+h*g}),i}}}}}}function $t(e,t,n,r){function i(r,i){return wa(r[0]-e)<Ia?i>0?0:3:wa(r[0]-n)<Ia?i>0?2:1:wa(r[1]-t)<Ia?i>0?1:0:i>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=v.length,r=e[1],i=0;n>i;++i)for(var o,a=1,s=v[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&ee(u,o,e)>0&&++t:o[1]<=r&&ee(u,o,e)<0&&--t,u=o;return 0!==t}function u(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(i,o){return i>=e&&n>=i&&o>=t&&r>=o}function f(e,t){c(e,t)&&s.point(e,t)}function d(){T.point=p,v&&v.push(m=[]),A=!0,k=!1,w=_=NaN}function h(){g&&(p(y,x),b&&k&&M.rejoin(),g.push(M.buffer())),T.point=f,k&&s.lineEnd()}function p(e,t){e=Math.max(-Bs,Math.min(Bs,e)),t=Math.max(-Bs,Math.min(Bs,t));var n=c(e,t);if(v&&m.push([e,t]),A)y=e,x=t,b=n,A=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&k)s.point(e,t);else{var r={a:{x:w,y:_},b:{x:e,y:t}};C(r)?(k||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(e,t),S=!1)}w=e,_=t,k=n}var g,v,m,y,x,b,w,_,k,A,S,z=s,M=Ft(),C=Vt(e,t,n,r),T={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=M,g=[],v=[],S=!0},polygonEnd:function(){s=z,g=ua.merge(g);var t=l([e,r]),n=S&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&jt(g,o,t,u,s),s.polygonEnd()),g=v=m=null}};return T}}function Ht(e){var t=0,n=La/3,r=ln(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*La/180,n=e[1]*La/180):[t/La*180,n/La*180]},i}function Yt(e,t){function n(e,t){var n=Math.sqrt(o-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,ne((o-(e*e+n*n)*i*i)/(2*i))]},n}function Wt(){function e(e,t){Us+=i*e-r*t,r=e,i=t}var t,n,r,i;Ws.point=function(o,a){Ws.point=e,t=r=o,n=i=a},Ws.lineEnd=function(){e(t,n)}}function Xt(e,t){Vs>e&&(Vs=e),e>Hs&&(Hs=e),$s>t&&($s=t),t>Ys&&(Ys=t)}function Jt(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function i(){a.push("Z")}var o=Gt(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return o=Gt(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function Gt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Qt(e,t){Ts+=e,Es+=t,++js}function Zt(){function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);Ds+=a*(t+e)/2,Os+=a*(n+r)/2,Ns+=a,Qt(t=e,n=r)}var t,n;Js.point=function(r,i){Js.point=e,Qt(t=r,n=i)}}function Kt(){Js.point=Qt}function en(){function e(e,t){var n=e-r,o=t-i,a=Math.sqrt(n*n+o*o);Ds+=a*(r+e)/2,Os+=a*(i+t)/2,Ns+=a,a=i*e-r*t,Ps+=a*(r+e),Fs+=a*(i+t),Is+=3*a,Qt(r=e,i=t)}var t,n,r,i;Js.point=function(o,a){Js.point=e,Qt(t=r=o,n=i=a)},Js.lineEnd=function(){e(t,n)}}function tn(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,Ba)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return a=e,s},result:_};return s}function nn(e){function t(e){return(s?r:n)(e)}function n(t){return an(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){x=NaN,A.point=o,t.lineStart()}function o(n,r){var o=vt([n,r]),a=e(n,r);i(x,b,y,w,_,k,x=a[0],b=a[1],y=n,w=o[0],_=o[1],k=o[2],s,t),t.point(x,b)}function a(){A.point=n,t.lineEnd()}function l(){r(),A.point=u,A.lineEnd=c}function u(e,t){o(f=e,d=t),h=x,p=b,g=w,v=_,m=k,A.point=o}function c(){i(x,b,y,w,_,k,h,p,f,g,v,m,s,t),A.lineEnd=a,a()}var f,d,h,p,g,v,m,y,x,b,w,_,k,A={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),A.lineStart=l},polygonEnd:function(){t.polygonEnd(),A.lineStart=r}};return A}function i(t,n,r,s,l,u,c,f,d,h,p,g,v,m){var y=c-t,x=f-n,b=y*y+x*x;if(b>4*o&&v--){var w=s+h,_=l+p,k=u+g,A=Math.sqrt(w*w+_*_+k*k),S=Math.asin(k/=A),z=wa(wa(k)-1)<Ia||wa(r-d)<Ia?(r+d)/2:Math.atan2(_,w),M=e(z,S),C=M[0],T=M[1],E=C-t,j=T-n,D=x*E-y*j;(D*D/b>o||wa((y*E+x*j)/b-.5)>.3||a>s*h+l*p+u*g)&&(i(t,n,r,s,l,u,C,T,z,w/=A,_/=A,k,v,m),m.point(C,T),i(C,T,z,w,_,k,c,f,d,h,p,g,v,m))}}var o=.5,a=Math.cos(30*Va),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function rn(e){var t=nn(function(t,n){return e([t*$a,n*$a])});return function(e){return un(t(e))}}function on(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function sn(e){return ln(function(){return e})()}function ln(e){function t(e){return e=s(e[0]*Va,e[1]*Va),[e[0]*d+l,u-e[1]*d]}function n(e){return e=s.invert((e[0]-l)/d,(u-e[1])/d),e&&[e[0]*$a,e[1]*$a]}function r(){s=Tt(a=dn(m,y,b),o);var e=o(g,v);return l=h-e[0]*d,u=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,s,l,u,c,f=nn(function(e,t){return e=o(e,t),[e[0]*d+l,u-e[1]*d]}),d=150,h=480,p=250,g=0,v=0,m=0,y=0,b=0,w=Ls,_=x,k=null,A=null;return t.stream=function(e){return c&&(c.valid=!1),c=un(w(a,f(_(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Ls):Ut((k=+e)*Va),i()):k},t.clipExtent=function(e){return arguments.length?(A=e,_=e?$t(e[0][0],e[0][1],e[1][0],e[1][1]):x,i()):A},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Va,v=e[1]%360*Va,r()):[g*$a,v*$a]},t.rotate=function(e){return arguments.length?(m=e[0]%360*Va,y=e[1]%360*Va,b=e.length>2?e[2]%360*Va:0,r()):[m*$a,y*$a,b*$a]},ua.rebind(t,f,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function un(e){return an(e,function(t,n){e.point(t*Va,n*Va)})}function cn(e,t){return[e,t]}function fn(e,t){return[e>La?e-Ba:-La>e?e+Ba:e,t]}function dn(e,t,n){return e?t||n?Tt(pn(e),gn(t,n)):pn(e):t||n?gn(t,n):fn}function hn(e){return function(t,n){return t+=e,[t>La?t-Ba:-La>t?t+Ba:t,n]}}function pn(e){var t=hn(e);return t.invert=hn(-e),t}function gn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),ne(c*o+l*a)]}var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),ne(c*r-s*i)]},n}function vn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var l=a*t;null!=i?(i=mn(n,i),o=mn(n,o),(a>0?o>i:i>o)&&(i+=a*Ba)):(i=e+a*Ba,o=e-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=_t([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function mn(e,t){var n=vt(t);n[0]-=e,wt(n);var r=te(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ia)%(2*Math.PI)}function yn(e,t,n){var r=ua.range(e,t-Ia,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function xn(e,t,n){var r=ua.range(e,t-Ia,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function bn(e){return e.source}function wn(e){return e.target}function _n(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(ae(r-t)+i*a*ae(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*l+t*c,i=n*u+t*f,a=n*o+t*s;return[Math.atan2(i,r)*$a,Math.atan2(a,Math.sqrt(r*r+i*i))*$a]}:function(){return[e*$a,t*$a]};return p.distance=d,p}function kn(){function e(e,i){var o=Math.sin(i*=Va),a=Math.cos(i),s=wa((e*=Va)-t),l=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),t=e,n=o,r=a}var t,n,r;Qs.point=function(i,o){t=i*Va,n=Math.sin(o*=Va),r=Math.cos(o),Qs.point=e},Qs.lineEnd=function(){Qs.point=Qs.lineEnd=_}}function An(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}function Sn(e,t){function n(e,t){a>0?-Ua+Ia>t&&(t=-Ua+Ia):t>Ua-Ia&&(t=Ua-Ia);var n=a/Math.pow(i(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var r=Math.cos(e),i=function(e){return Math.tan(La/4+e/2)},o=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),a=r*Math.pow(i(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,r=K(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Ua]},n):Mn}function zn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),o=r/i+e;return wa(i)<Ia?cn:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,o-K(i)*Math.sqrt(e*e+n*n)]},n)}function Mn(e,t){return[e,Math.log(Math.tan(La/4+t/2))]}function Cn(e){var t,n=sn(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=La*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function Tn(e,t){return[Math.log(Math.tan(La/4+t/2)),-e]}function En(e){return e[0]}function jn(e){return e[1]}function Dn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&ee(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function On(e,t){return e[0]-t[0]||e[1]-t[1]}function Nn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Pn(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+d*a,l+d*c]}function Fn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function In(){ir(this),this.edge=this.site=this.circle=null}function Rn(e){var t=ul.pop()||new In;return t.site=e,t}function Ln(e){Jn(e),al.remove(e),ul.push(e),ir(e)}function Bn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Ln(e);for(var l=o;l.circle&&wa(n-l.circle.x)<Ia&&wa(r-l.circle.cy)<Ia;)o=l.P,s.unshift(l),Ln(l),l=o;s.unshift(l),Jn(l);for(var u=a;u.circle&&wa(n-u.circle.x)<Ia&&wa(r-u.circle.cy)<Ia;)a=u.N,s.push(u),Ln(u),u=a;s.push(u),Jn(u);var c,f=s.length;for(c=1;f>c;++c)u=s[c],l=s[c-1],tr(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Kn(l.site,u.site,null,i),Xn(l),Xn(u)}function qn(e){for(var t,n,r,i,o=e.x,a=e.y,s=al._;s;)if(r=Un(s,a)-o,r>Ia)s=s.L;else{if(i=o-Vn(s,a),!(i>Ia)){r>-Ia?(t=s.P,n=s):i>-Ia?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Rn(e);if(al.insert(t,l),t||n){if(t===n)return Jn(t),n=Rn(t.site),al.insert(l,n),l.edge=n.edge=Kn(t.site,l.site),Xn(t),void Xn(n);if(!n)return void(l.edge=Kn(t.site,l.site));Jn(t),Jn(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,h=e.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,x=g*g+v*v,b={x:(v*y-h*x)/m+c,y:(d*x-g*y)/m+f};tr(n.edge,u,p,b),l.edge=Kn(u,e,null,b),n.edge=Kn(e,p,null,b),Xn(t),Xn(n)}}function Un(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,f=1/o-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function Vn(e,t){var n=e.N;if(n)return Un(n,t);var r=e.site;return r.y===t?r.x:1/0}function $n(e){this.site=e,this.edges=[]}function Hn(e){for(var t,n,r,i,o,a,s,l,u,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],g=ol,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)c=s[a].end(),r=c.x,i=c.y,u=s[++a%l].start(),t=u.x,n=u.y,(wa(r-t)>Ia||wa(i-n)>Ia)&&(s.splice(a,0,new nr(er(o.site,c,wa(r-f)<Ia&&p-i>Ia?{x:f,y:wa(t-f)<Ia?n:p}:wa(i-p)<Ia&&d-r>Ia?{x:wa(n-p)<Ia?t:d,y:p}:wa(r-d)<Ia&&i-h>Ia?{x:d,y:wa(t-d)<Ia?n:h}:wa(i-h)<Ia&&r-f>Ia?{x:wa(n-h)<Ia?t:f,y:h}:null),o.site,null)),++l)}function Yn(e,t){return t.angle-e.angle}function Wn(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=o.y-s,d=2*(l*f-u*c);if(!(d>=-Ra)){var h=l*l+u*u,p=c*c+f*f,g=(f*h-u*p)/d,v=(l*p-c*h)/d,f=v+s,m=cl.pop()||new Wn;m.arc=e,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,e.circle=m;for(var y=null,x=ll._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ll.insert(y,m),y||(sl=m)}}}}function Jn(e){var t=e.circle;t&&(t.P||(sl=t.N),ll.remove(t),cl.push(t),ir(t),e.circle=null)}function Gn(e){for(var t,n=il,r=Vt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Qn(t,e)||!r(t)||wa(t.a.x-t.b.x)<Ia&&wa(t.a.y-t.b.y)<Ia)&&(t.a=t.b=null,n.splice(i,1))}function Qn(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2,m=(h+g)/2;if(g===h){if(a>v||v>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(r=(d-p)/(g-h),i=m-r*v,-1>r||r>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>h){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Zn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Kn(e,t,n,r){var i=new Zn(e,t);return il.push(i),n&&tr(i,e,t,n),r&&tr(i,t,e,r),ol[e.i].edges.push(new nr(i,e,t)),ol[t.i].edges.push(new nr(i,t,e)),i}function er(e,t,n){var r=new Zn(e,null);return r.a=t,r.b=n,il.push(r),r}function tr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function nr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function rr(){this._=null}function ir(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function or(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ar(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function sr(e){for(;e.L;)e=e.L;return e}function lr(e,t){var n,r,i,o=e.sort(ur).pop();for(il=[],ol=new Array(e.length),al=new rr,ll=new rr;;)if(i=sl,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(ol[o.i]=new $n(o),qn(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;Bn(i.arc)}t&&(Gn(t),Hn(t));var a={cells:ol,edges:il};return al=ll=il=ol=null,a}function ur(e,t){return t.y-e.y||t.x-e.x}function cr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function fr(e){return e.x}function dr(e){return e.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=t.nodes;l[0]&&pr(e,l[0],n,r,a,s),l[1]&&pr(e,l[1],a,r,i,s),l[2]&&pr(e,l[2],n,s,a,o),l[3]&&pr(e,l[3],a,s,i,o)}}function gr(e,t,n,r,i,o,a){var s,l=1/0;return function u(e,c,f,d,h){if(!(c>o||f>a||r>d||i>h)){if(p=e.point){var p,g=t-e.x,v=n-e.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=t-y,i=n-y,o=t+y,a=n+y,s=p}}for(var x=e.nodes,b=.5*(c+d),w=.5*(f+h),_=t>=b,k=n>=w,A=k<<1|_,S=A+4;S>A;++A)if(e=x[3&A])switch(3&A){case 0:u(e,c,f,b,w);break;case 1:u(e,b,f,d,w);break;case 2:u(e,c,w,b,h);break;case 3:u(e,b,w,d,h)}}}(e,r,i,o,a),s}function vr(e,t){e=ua.rgb(e),t=ua.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+we(Math.round(n+o*e))+we(Math.round(r+a*e))+we(Math.round(i+s*e))}}function mr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=br(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function yr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xr(e,t){var n,r,i,o=dl.lastIndex=hl.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=dl.exec(e))&&(r=hl.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:yr(n,r)})),o=hl.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;t>r;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function br(e,t){for(var n,r=ua.interpolators.length;--r>=0&&!(n=ua.interpolators[r](e,t)););return n}function wr(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(br(e[n],t[n]));for(;o>n;++n)i[n]=e[n];for(;a>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function _r(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function kr(e){return function(t){return 1-e(1-t)}}function Ar(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Sr(e){return e*e}function zr(e){return e*e*e}function Mr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Cr(e){return function(t){return Math.pow(t,e)}}function Tr(e){return 1-Math.cos(e*Ua)}function Er(e){return Math.pow(2,10*(e-1))}function jr(e){return 1-Math.sqrt(1-e*e)}function Dr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ba*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ba/t)}}function Or(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Nr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Pr(e,t){e=ua.hcl(e),t=ua.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return fe(n+o*e,r+a*e,i+s*e)+""}}function Fr(e,t){e=ua.hsl(e),t=ua.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ue(n+o*e,r+a*e,i+s*e)+""}}function Ir(e,t){e=ua.lab(e),t=ua.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return he(n+o*e,r+a*e,i+s*e)+""}}function Rr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Lr(e){var t=[e.a,e.b],n=[e.c,e.d],r=qr(t),i=Br(t,n),o=qr(Ur(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*$a,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*$a:0}function Br(e,t){return e[0]*t[0]+e[1]*t[1]}function qr(e){var t=Math.sqrt(Br(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Ur(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Vr(e){return e.length?e.pop()+",":""}function $r(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(e[0],t[0])},{i:i-2,x:yr(e[1],t[1])
})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Hr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Vr(n)+"rotate(",null,")")-2,x:yr(e,t)})):t&&n.push(Vr(n)+"rotate("+t+")")}function Yr(e,t,n,r){e!==t?r.push({i:n.push(Vr(n)+"skewX(",null,")")-2,x:yr(e,t)}):t&&n.push(Vr(n)+"skewX("+t+")")}function Wr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Vr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(e[0],t[0])},{i:i-2,x:yr(e[1],t[1])})}else(1!==t[0]||1!==t[1])&&n.push(Vr(n)+"scale("+t+")")}function Xr(e,t){var n=[],r=[];return e=ua.transform(e),t=ua.transform(t),$r(e.translate,t.translate,n,r),Hr(e.rotate,t.rotate,n,r),Yr(e.skew,t.skew,n,r),Wr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Jr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Gr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Qr(e){for(var t=e.source,n=e.target,r=Kr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Zr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Kr(e,t){if(e===t)return e;for(var n=Zr(e),r=Zr(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function ei(e){e.fixed|=2}function ti(e){e.fixed&=-7}function ni(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ri(e){e.fixed&=-5}function ii(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(ii(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function oi(e,t){return ua.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=fi,e}function ai(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function si(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function li(e){return e.children}function ui(e){return e.value}function ci(e,t){return t.value-e.value}function fi(e){return ua.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function di(e){return e.x}function hi(e){return e.y}function pi(e,t,n){e.y0=t,e.y=n}function gi(e){return ua.range(e.length)}function vi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function mi(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function yi(e){return e.reduce(xi,0)}function xi(e,t){return e+t[1]}function bi(e,t){return wi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function wi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function _i(e){return[ua.min(e),ua.max(e)]}function ki(e,t){return e.value-t.value}function Ai(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Si(e,t){e._pack_next=t,t._pack_prev=e}function zi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Mi(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(n.forEach(Ci),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(o=n[2],ji(r,i,o),t(o),Ai(r,o),r._pack_prev=o,Ai(o,i),i=r._pack_next,a=3;u>a;a++){ji(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(zi(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!zi(l,o);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Si(r,i=s):Si(r=l,i),a--):(Ai(r,o),i=o,t(o))}var m=(c+f)/2,y=(d+h)/2,x=0;for(a=0;u>a;a++)o=n[a],o.x-=m,o.y-=y,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=x,n.forEach(Ti)}}function Ci(e){e._pack_next=e._pack_prev=e}function Ti(e){delete e._pack_next,delete e._pack_prev}function Ei(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ei(i[o],t,n,r)}function ji(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*i+u*o,n.y=e.y+l*o-u*i}else n.x=e.x+r,n.y=e.y}function Di(e,t){return e.parent==t.parent?1:2}function Oi(e){var t=e.children;return t.length?t[0]:e.t}function Ni(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Pi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Fi(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ii(e,t,n){return e.a.parent===t.parent?e.a:n}function Ri(e){return 1+ua.max(e,function(e){return e.y})}function Li(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Bi(e){var t=e.children;return t&&t.length?Bi(t[0]):e}function qi(e){var t,n=e.children;return n&&(t=n.length)?qi(n[t-1]):e}function Ui(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Vi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function $i(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Hi(e){return e.rangeExtent?e.rangeExtent():$i(e.range())}function Yi(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Wi(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Xi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Al}function Ji(e,t,n,r){var i=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=ua.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function Gi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Ji:Yi,l=r?Gr:Jr;return a=i(e,t,l,n),s=i(t,e,l,br),o}function o(e){return a(e)}var a,s;return o.invert=function(e){return s(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Rr)},o.clamp=function(e){return arguments.length?(r=e,i()):r},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return eo(e,t)},o.tickFormat=function(t,n){return to(e,t,n)},o.nice=function(t){return Zi(e,t),i()},o.copy=function(){return Gi(e,t,n,r)},i()}function Qi(e,t){return ua.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zi(e,t){return Wi(e,Xi(Ki(e,t)[2])),Wi(e,Xi(Ki(e,t)[2])),e}function Ki(e,t){null==t&&(t=10);var n=$i(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function eo(e,t){return ua.range.apply(ua,Ki(e,t))}function to(e,t,n){var r=Ki(e,t);if(n){var i=ds.exec(n);if(i.shift(),"s"===i[8]){var o=ua.formatPrefix(Math.max(wa(r[0]),wa(r[1])));return i[7]||(i[7]="."+no(o.scale(r[2]))),i[8]="f",n=ua.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+ro(i[8],r)),n=i.join("")}else n=",."+no(r[2])+"f";return ua.format(n)}function no(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ro(e,t){var n=no(t[2]);return e in Sl?Math.abs(n-no(Math.max(wa(t[0]),wa(t[1]))))+ +("e"!==e):n-2*("%"===e)}function io(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Wi(r.map(i),n?Math:Ml);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=$i(r),a=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),f=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var d=1;f>d;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=f-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(e,n){if(!arguments.length)return zl;arguments.length<2?n=zl:"function"!=typeof n&&(n=ua.format(n));var r=Math.max(1,t*e/a.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return t-.5>a*t&&(a*=t),r>=a?n(e):""}},a.copy=function(){return io(e.copy(),t,n,r)},Qi(a,e)}function oo(e,t,n){function r(t){return e(i(t))}var i=ao(t),o=ao(1/t);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return eo(n,e)},r.tickFormat=function(e,t){return to(n,e,t)},r.nice=function(e){return r.domain(Zi(n,e))},r.exponent=function(a){return arguments.length?(i=ao(t=a),o=ao(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return oo(e.copy(),t,n)},Qi(r,e)}function ao(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function so(e,t){function n(n){return o[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%o.length]}function r(t,n){return ua.range(e.length).map(function(e){return t+n*e})}var i,o,a;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new c;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,a=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return o=r(l+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return o=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=(f-c)/(e.length-s+2*l);return o=r(c+d*l,d),u&&o.reverse(),a=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=Math.floor((f-c)/(e.length-s+2*l));return o=r(c+Math.round((f-c-(e.length-s)*d)/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return $i(t.a[0])},n.copy=function(){return so(e,t)},n.domain(e)}function lo(e,t){function n(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=ua.quantile(e,n/r);return a}function a(e){return isNaN(e=+e)?void 0:t[ua.bisect(s,e)]}var s;return a.domain=function(t){return arguments.length?(e=t.map(i).filter(o).sort(r),n()):e},a.range=function(e){return arguments.length?(t=e,n()):t},a.quantiles=function(){return s},a.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},a.copy=function(){return lo(e,t)},n()}function uo(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/o+e,[t,t+1/o]},r.copy=function(){return uo(e,t,n)},i()}function co(e,t){function n(n){return n>=n?t[ua.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return co(e,t)},n}function fo(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return eo(e,t)},t.tickFormat=function(t,n){return to(e,t,n)},t.copy=function(){return fo(e)},t}function ho(){return 0}function po(e){return e.innerRadius}function go(e){return e.outerRadius}function vo(e){return e.startAngle}function mo(e){return e.endAngle}function yo(e){return e&&e.padAngle}function xo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function bo(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=e[0]+l,f=e[1]+u,d=t[0]+l,h=t[1]+u,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,x=n-r,b=c*h-d*f,w=(0>m?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),_=(b*m-v*w)/y,k=(-b*v-m*w)/y,A=(b*m+v*w)/y,S=(-b*v+m*w)/y,z=_-p,M=k-g,C=A-p,T=S-g;return z*z+M*M>C*C+T*T&&(_=A,k=S),[[_-l,k-u],[_*n/x,k*n/x]]}function wo(e){function t(t){function a(){u.push("M",o(e(c),s))}for(var l,u=[],c=[],f=-1,d=t.length,h=Me(n),p=Me(r);++f<d;)i.call(this,l=t[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=En,r=jn,i=Et,o=_o,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=Ol.get(e)||_o).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function _o(e){return e.length>1?e.join("L"):e+"Z"}function ko(e){return e.join("L")+"Z"}function Ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function So(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function zo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Mo(e,t){return e.length<4?_o(e):e[1]+Eo(e.slice(1,-1),jo(e,t))}function Co(e,t){return e.length<3?ko(e):e[0]+Eo((e.push(e[0]),e),jo([e[e.length-2]].concat(e,[e[1]]),t))}function To(e,t){return e.length<3?_o(e):e[0]+Eo(e,jo(e,t))}function Eo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return _o(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++)o=e[l],s=t[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function jo(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Do(e){if(e.length<3)return _o(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Fo(Fl,a),",",Fo(Fl,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Io(l,a,s);return e.pop(),l.push("L",r),l.join("")}function Oo(e){if(e.length<4)return _o(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(Fo(Fl,o)+","+Fo(Fl,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Io(n,o,a);return n.join("")}function No(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[Fo(Fl,a),",",Fo(Fl,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Io(t,a,s);return t.join("")}function Po(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return Do(e)}function Fo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Io(e,t,n){e.push("C",Fo(Nl,t),",",Fo(Nl,n),",",Fo(Pl,t),",",Fo(Pl,n),",",Fo(Fl,t),",",Fo(Fl,n))}function Ro(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Lo(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Ro(i,o);++t<n;)r[t]=(a+(a=Ro(i=o,o=e[t+1])))/2;return r[t]=a,r}function Bo(e){for(var t,n,r,i,o=[],a=Lo(e),s=-1,l=e.length-1;++s<l;)t=Ro(e[s],e[s+1]),wa(t)<Ia?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function qo(e){return e.length<3?_o(e):e[0]+Eo(e,Bo(e))}function Uo(e){for(var t,n,r,i=-1,o=e.length;++i<o;)t=e[i],n=t[0],r=t[1]-Ua,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Vo(e){function t(t){function l(){g.push("M",s(e(m),f),c,u(e(v.reverse()),f),"Z")}for(var d,h,p,g=[],v=[],m=[],y=-1,x=t.length,b=Me(n),w=Me(i),_=n===r?function(){return h}:Me(r),k=i===o?function(){return p}:Me(o);++y<x;)a.call(this,d=t[y],y)?(v.push([h=+b.call(this,d,y),p=+w.call(this,d,y)]),m.push([+_.call(this,d,y),+k.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=En,r=En,i=0,o=jn,a=Et,s=_o,l=s.key,u=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=o=e,t):o},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Ol.get(e)||_o).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(f=e,t):f},t}function $o(e){return e.radius}function Ho(e){return[e.x,e.y]}function Yo(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ua;return[n*Math.cos(r),n*Math.sin(r)]}}function Wo(){return 64}function Xo(){return"circle"}function Jo(e){var t=Math.sqrt(e/La);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Go(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Qo(e,t,n){return za(e,Vl),e.namespace=t,e.id=n,e}function Zo(e,t,n,r){var i=e.id,o=e.namespace;return $(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function Ko(e){return null==e&&(e=""),function(){this.textContent=e}}function ea(e){return null==e?"__transition__":"__transition_"+e+"__"}function ta(e,t,n,r,i){function o(e){var t=g.delay;return u.t=t+l,e>=t?a(e-t):void(u.c=a)}function a(n){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(e,e.__data__,o.index));for(var a in p)if(r>+a){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}u.c=s,De(function(){return u.c&&s(n||1)&&(u.c=null,u.t=NaN),1},0,l),p.active=r,g.event&&g.event.start.call(e,e.__data__,t),h=[],g.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),d=g.ease,f=g.duration}function s(i){for(var o=i/f,a=d(o),s=h.length;s>0;)h[--s].call(e,a);return o>=1?(g.event&&g.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1):void 0}var l,u,f,d,h,p=e[n]||(e[n]={active:0,count:0}),g=p[r];g||(l=i.time,u=De(o,0,l),g=p[r]={tween:new c,time:l,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function na(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function ra(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function ia(e){return e.toISOString()}function oa(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,o=ua.bisect(Zl,i);return o==Zl.length?[t.year,Ki(e.map(function(e){return e/31536e6}),n)[2]]:o?t[i/Zl[o-1]<Zl[o]/i?o-1:o]:[tu,Ki(e,n)[2]]}return r.invert=function(t){return aa(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(aa)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,aa(+n+1),t).length}var o=r.domain(),a=$i(o),s=null==e?i(a,10):"number"==typeof e&&i(a,e);return s&&(e=s[0],t=s[1]),r.domain(Wi(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=aa(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=aa(+t+1);return t}}:e))},r.ticks=function(e,t){var n=$i(r.domain()),o=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],aa(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return oa(e.copy(),t,n)},Qi(r,e)}function aa(e){return new Date(e)}function sa(e){return JSON.parse(e.responseText)}function la(e){var t=da.createRange();return t.selectNode(da.body),t.createContextualFragment(e.responseText)}var ua={version:"3.5.15"},ca=[].slice,fa=function(e){return ca.call(e)},da=this.document;if(da)try{fa(da.documentElement.childNodes)[0].nodeType}catch(ha){fa=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),da)try{da.createElement("DIV").style.setProperty("opacity",0,"")}catch(pa){var ga=this.Element.prototype,va=ga.setAttribute,ma=ga.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,xa=ya.setProperty;ga.setAttribute=function(e,t){va.call(this,e,t+"")},ga.setAttributeNS=function(e,t,n){ma.call(this,e,t,n+"")},ya.setProperty=function(e,t,n){xa.call(this,e,t+"",n)}}ua.ascending=r,ua.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},ua.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},ua.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},ua.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ua.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)o(n=+e[a])&&(r+=n);else for(;++a<i;)o(n=+t.call(e,e[a],a))&&(r+=n);return r},ua.mean=function(e,t){var n,r=0,a=e.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)o(n=i(e[s]))?r+=n:--l;else for(;++s<a;)o(n=i(t.call(e,e[s],s)))?r+=n:--l;return l?r/l:void 0},ua.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},ua.median=function(e,t){var n,a=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)o(n=i(e[l]))&&a.push(n);else for(;++l<s;)o(n=i(t.call(e,e[l],l)))&&a.push(n);return a.length?ua.quantile(a.sort(r),.5):void 0},ua.variance=function(e,t){var n,r,a=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)o(n=i(e[u]))&&(r=n-s,s+=r/++c,l+=r*(n-s));else for(;++u<a;)o(n=i(t.call(e,e[u],u)))&&(r=n-s,s+=r/++c,l+=r*(n-s));return c>1?l/(c-1):void 0},ua.deviation=function(){var e=ua.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ba=a(r);ua.bisectLeft=ba.left,ua.bisect=ua.bisectRight=ba.right,ua.bisector=function(e){return a(1===e.length?function(t,n){return r(e(t),n)}:e)},ua.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,2>o&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},ua.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},ua.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],o=new Array(0>r?0:r);r>n;)o[n]=[t=i,i=e[++n]];return o},ua.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=ua.min(e,s),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r},ua.zip=function(){return ua.transpose(arguments)},ua.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ua.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ua.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ua.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--a]=r[t];return n};var wa=Math.abs;ua.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],o=l(wa(n)),a=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},ua.map=function(e,t){var n=new c;if(e instanceof c)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var _a="__proto__",ka="\0";u(c,{has:h,get:function(e){return this._[f(e)]},set:function(e,t){return this._[f(e)]=t},remove:p,keys:g,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:v,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),ua.nest=function(){function e(t,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,u,f,d,h=-1,p=a.length,g=o[s++],v=new c;++h<p;)(d=v.get(l=g(u=a[h])))?d.push(u):v.set(l,[u]);return t?(u=t(),f=function(n,r){u.set(n,e(t,r,s))}):(u={},f=function(n,r){u[n]=e(t,r,s)}),v.forEach(f),u}function t(e,n){if(n>=o.length)return e;var r=[],i=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(ua.map,n,0),0)},i.key=function(e){return o.push(e),i},i.sortKeys=function(e){return a[o.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},ua.set=function(e){var t=new y;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},u(y,{has:h,add:function(e){return this._[f(e+="")]=!0,e},remove:p,values:g,size:v,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),ua.behavior={},ua.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var Aa=["webkit","ms","moz","Moz","o","O"];ua.dispatch=function(){for(var e=new k,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=A(e);return e},k.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},ua.event=null,ua.requote=function(e){return e.replace(Sa,"\\$&")};var Sa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,za={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Ma=function(e,t){return t.querySelector(e)},Ca=function(e,t){return t.querySelectorAll(e)},Ta=function(e,t){var n=e.matches||e[w(e,"matchesSelector")];return(Ta=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Ma=function(e,t){return Sizzle(e,t)[0]||null},Ca=Sizzle,Ta=Sizzle.matchesSelector),ua.selection=function(){return ua.select(da.documentElement)};var Ea=ua.selection.prototype=[];Ea.select=function(e){var t,n,r,i,o=[];e=T(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return C(o)},Ea.selectAll=function(e){var t,n,r=[];e=E(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(t=fa(e.call(n,n.__data__,s,i))),t.parentNode=n);return C(r)};var ja={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ua.ns={prefix:ja,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ja.hasOwnProperty(n)?{space:ja[n],local:e}:e}},Ea.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=ua.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(j(t,e[t]));return this}return this.each(j(e,t))},Ea.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=N(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!O(e[i]).test(t))return!1;return!0}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},Ea.style=function(e,t,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t="");for(r in e)this.each(I(r,e[r],t));return this}if(2>i){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(e)}r=""}return this.each(I(e,t,r))},Ea.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(R(t,e[t]));return this}return this.each(R(e,t))},Ea.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Ea.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Ea.append=function(e){return e=L(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Ea.insert=function(e,t){return e=L(e),t=T(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Ea.remove=function(){return this.each(B)},Ea.data=function(e,t){function n(e,n){var r,i,o,a=e.length,f=n.length,d=Math.min(a,f),h=new Array(f),p=new Array(f),g=new Array(a);if(t){var v,m=new c,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(m.has(v=t.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=t.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):p[r]=q(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=q(o);for(;f>r;++r)p[r]=q(n[r]);for(;a>r;++r)g[r]=e[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=e.parentNode,s.push(p),l.push(h),u.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(e[o]=i.__data__);return e}var s=H([]),l=C([]),u=C([]);if("function"==typeof e)for(;++o<a;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],e);return l.enter=function(){return s},l.exit=function(){return u},l},Ea.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Ea.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=U(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return C(i)},Ea.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ea.sort=function(e){e=V.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Ea.each=function(e){return $(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Ea.call=function(e){var t=fa(arguments);return e.apply(t[0]=this,t),this},Ea.empty=function(){return!this.node()},Ea.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){
var o=n[r];if(o)return o}return null},Ea.size=function(){var e=0;return $(this,function(){++e}),e};var Da=[];ua.selection.enter=H,ua.selection.enter.prototype=Da,Da.append=Ea.append,Da.empty=Ea.empty,Da.node=Ea.node,Da.call=Ea.call,Da.size=Ea.size,Da.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(t.push(r[u]=n=e.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):t.push(null)}return C(a)},Da.insert=function(e,t){return arguments.length<2&&(t=Y(this)),Ea.insert.call(this,e,t)},ua.select=function(t){var n;return"string"==typeof t?(n=[Ma(t,da)],n.parentNode=da.documentElement):(n=[t],n.parentNode=e(t)),C([n])},ua.selectAll=function(e){var t;return"string"==typeof e?(t=fa(Ca(e,da)),t.parentNode=da.documentElement):(t=fa(e),t.parentNode=null),C([t])},Ea.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(W(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(W(e,t,n))};var Oa=ua.map({mouseenter:"mouseover",mouseleave:"mouseout"});da&&Oa.forEach(function(e){"on"+e in da&&Oa.remove(e)});var Na,Pa=0;ua.mouse=function(e){return Q(e,z())};var Fa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ua.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var r,i=0,o=t.length;o>i;++i)if((r=t[i]).identifier===n)return Q(e,r)},ua.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function t(e,t,n,o,a){return function(){function s(){var e,n,r=t(d,g);r&&(e=r[0]-x[0],n=r[1]-x[1],p|=e|n,x=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(d,g)&&(m.on(o+v,null).on(a+v,null),y(p),h({type:"dragend"}))}var u,c=this,f=ua.event.target.correspondingElement||ua.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=e(),v=".drag"+(null==g?"":"-"+g),m=ua.select(n(f)).on(o+v,s).on(a+v,l),y=G(f),x=t(d,g);i?(u=i.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],h({type:"dragstart"})}}var r=M(e,"drag","dragstart","dragend"),i=null,o=t(_,ua.mouse,n,"mousemove","mouseup"),a=t(Z,ua.touch,x,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},ua.rebind(e,r,"on")},ua.touches=function(e,t){return arguments.length<2&&(t=z().touches),t?fa(t).map(function(t){var n=Q(e,t);return n.identifier=t.identifier,n}):[]};var Ia=1e-6,Ra=Ia*Ia,La=Math.PI,Ba=2*La,qa=Ba-Ia,Ua=La/2,Va=La/180,$a=180/La,Ha=Math.SQRT2,Ya=2,Wa=4;ua.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2],c=s-i,f=l-o,d=c*c+f*f;if(Ra>d)r=Math.log(u/a)/Ha,n=function(e){return[i+e*c,o+e*f,a*Math.exp(Ha*e*r)]};else{var h=Math.sqrt(d),p=(u*u-a*a+Wa*d)/(2*a*Ya*h),g=(u*u-a*a-Wa*d)/(2*u*Ya*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Ha,n=function(e){var t=e*r,n=ie(v),s=a/(Ya*h)*(n*oe(Ha*t+v)-re(v));return[i+s*c,o+s*f,a*n/ie(Ha*t+v)]}}return n.duration=1e3*r,n},ua.behavior.zoom=function(){function e(e){e.on(j,f).on(Ja+".zoom",h).on("dblclick.zoom",p).on(N,d)}function t(e){return[(e[0]-A.x)/A.k,(e[1]-A.y)/A.k]}function r(e){return[e[0]*A.k+A.x,e[1]*A.k+A.y]}function i(e){A.k=Math.max(C[0],Math.min(C[1],e))}function o(e,t){t=r(t),A.x+=e[0]-t[0],A.y+=e[1]-t[1]}function a(t,n,r,a){t.__chart__={x:A.x,y:A.y,k:A.k},i(Math.pow(2,a)),o(v=n,r),t=ua.select(t),T>0&&(t=t.transition().duration(T)),t.call(e.event)}function s(){w&&w.domain(b.range().map(function(e){return(e-A.x)/A.k}).map(b.invert)),k&&k.domain(_.range().map(function(e){return(e-A.y)/A.k}).map(_.invert))}function l(e){E++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function c(e){--E||(e({type:"zoomend"}),v=null)}function f(){function e(){s=1,o(ua.mouse(i),d),u(a)}function r(){f.on(D,null).on(O,null),h(s),c(a)}var i=this,a=P.of(i,arguments),s=0,f=ua.select(n(i)).on(D,e).on(O,r),d=t(ua.mouse(i)),h=G(i);Ul.call(i),l(a)}function d(){function e(){var e=ua.touches(p);return h=A.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=t(e))}),e}function n(){var t=ua.event.target;ua.select(t).on(b,r).on(w,s),_.push(t);for(var n=ua.event.changedTouches,i=0,o=n.length;o>i;++i)v[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-x){var c=l[0];a(p,c,v[c.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),S()}x=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],h=c[1]-f[1];m=d*d+h*h}}function r(){var e,t,n,r,a=ua.touches(p);Ul.call(p);for(var s=0,l=a.length;l>s;++s,r=null)if(n=a[s],r=v[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=m&&Math.sqrt(c/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(f*h)}x=null,o(e,t),u(g)}function s(){if(ua.event.touches.length){for(var t=ua.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}ua.selectAll(_).on(y,null),k.on(j,f).on(N,d),z(),c(g)}var h,p=this,g=P.of(p,arguments),v={},m=0,y=".zoom-"+ua.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],k=ua.select(p),z=G(p);n(),l(g),k.on(j,null).on(N,n)}function h(){var e=P.of(this,arguments);y?clearTimeout(y):(Ul.call(this),g=t(v=m||ua.mouse(this)),l(e)),y=setTimeout(function(){y=null,c(e)},50),S(),i(Math.pow(2,.002*Xa())*A.k),o(v,g),u(e)}function p(){var e=ua.mouse(this),n=Math.log(A.k)/Math.LN2;a(this,e,t(e),ua.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,v,m,y,x,b,w,_,k,A={x:0,y:0,k:1},z=[960,500],C=Ga,T=250,E=0,j="mousedown.zoom",D="mousemove.zoom",O="mouseup.zoom",N="touchstart.zoom",P=M(e,"zoomstart","zoom","zoomend");return Ja||(Ja="onwheel"in da?(Xa=function(){return-ua.event.deltaY*(ua.event.deltaMode?120:1)},"wheel"):"onmousewheel"in da?(Xa=function(){return ua.event.wheelDelta},"mousewheel"):(Xa=function(){return-ua.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=A;Bl?ua.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=z[0],r=z[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=ua.interpolateZoom([(i-A.x)/A.k,(o-A.y)/A.k,n/A.k],[(i-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=A={x:i-r[0]*s,y:o-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=A,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(A={x:+t[0],y:+t[1],k:A.k},s(),e):[A.x,A.y]},e.scale=function(t){return arguments.length?(A={x:A.x,y:A.y,k:null},i(+t),s(),e):A.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Ga:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(z=t&&[+t[0],+t[1]],e):z},e.duration=function(t){return arguments.length?(T=+t,e):T},e.x=function(t){return arguments.length?(w=t,b=t.copy(),A={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(k=t,_=t.copy(),A={x:0,y:0,k:1},e):k},ua.rebind(e,P,"on")};var Xa,Ja,Ga=[0,1/0];ua.color=se,se.prototype.toString=function(){return this.rgb()+""},ua.hsl=le;var Qa=le.prototype=new se;Qa.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new le(this.h,this.s,this.l/e)},Qa.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new le(this.h,this.s,e*this.l)},Qa.rgb=function(){return ue(this.h,this.s,this.l)},ua.hcl=ce;var Za=ce.prototype=new se;Za.brighter=function(e){return new ce(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?e:1)))},Za.darker=function(e){return new ce(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?e:1)))},Za.rgb=function(){return fe(this.h,this.c,this.l).rgb()},ua.lab=de;var Ka=18,es=.95047,ts=1,ns=1.08883,rs=de.prototype=new se;rs.brighter=function(e){return new de(Math.min(100,this.l+Ka*(arguments.length?e:1)),this.a,this.b)},rs.darker=function(e){return new de(Math.max(0,this.l-Ka*(arguments.length?e:1)),this.a,this.b)},rs.rgb=function(){return he(this.l,this.a,this.b)},ua.rgb=ye;var is=ye.prototype=new se;is.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ye(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ye(i,i,i)},is.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ye(e*this.r,e*this.g,e*this.b)},is.hsl=function(){return ke(this.r,this.g,this.b)},is.toString=function(){return"#"+we(this.r)+we(this.g)+we(this.b)};var os=ua.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});os.forEach(function(e,t){os.set(e,xe(t))}),ua.functor=Me,ua.xhr=Ce(x),ua.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Te(e,t,null==n?r:i(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:i(e)):n},a}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,o={},a={},s=[],u=e.length,c=0,f=0;(r=n())!==a;){for(var d=[];r!==o&&r!==a;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new y,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},ua.csv=ua.dsv(",","text/csv"),ua.tsv=ua.dsv("\t","text/tab-separated-values");var as,ss,ls,us,cs=this[w(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};ua.timer=function(){De.apply(this,arguments)},ua.timer.flush=function(){Ne(),Pe()},ua.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var fs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ie);ua.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=ua.round(e,Fe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),fs[8+n/3]};var ds=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,hs=ua.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ua.round(e,Fe(e,t))).toFixed(Math.max(0,Math.min(20,Fe(e*(1+1e-15),t))))}}),ps=ua.time={},gs=Date;Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vs.setUTCDate.apply(this._,arguments)},setDay:function(){vs.setUTCDay.apply(this._,arguments)},setFullYear:function(){vs.setUTCFullYear.apply(this._,arguments)},setHours:function(){vs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vs.setUTCSeconds.apply(this._,arguments)},setTime:function(){vs.setTime.apply(this._,arguments)}};var vs=Date.prototype;ps.year=qe(function(e){return e=ps.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=qe(function(e){var t=new gs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(e){var t=ps.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ps[e]=qe(function(e){return(e=ps.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ps[e+"s"]=n.range,ps[e+"s"].utc=n.utc.range,ps[e+"OfYear"]=function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var ms={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,xs=/^%/;ua.locale=function(e){return{numberFormat:Re(e),timeFormat:Ve(e)}};var bs=ua.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ua.format=bs.numberFormat,ua.geo={},ct.prototype={s:0,t:0,add:function(e){ft(e,this.t,ws),ft(ws.s,this.s,this),this.s?this.t+=ws.t:this.s=ws.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ws=new ct;ua.geo.stream=function(e,t){e&&_s.hasOwnProperty(e.type)?_s[e.type](e,t):dt(e,t)};var _s={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dt(n[r].geometry,t)}},ks={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ht(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ht(n[r],t,0)},Polygon:function(e,t){pt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dt(n[r],t)}};ua.geo.area=function(e){return As=0,ua.geo.stream(e,zs),As};var As,Ss=new ct,zs={sphere:function(){As+=4*La},point:_,lineStart:_,lineEnd:_,polygonStart:function(){Ss.reset(),zs.lineStart=gt},polygonEnd:function(){var e=2*Ss;As+=0>e?4*La+e:e,zs.lineStart=zs.lineEnd=zs.point=_}};ua.geo.bounds=function(){function e(e,t){x.push(b=[c=e,d=e]),f>t&&(f=t),t>h&&(h=t)}function t(t,n){var r=vt([t*Va,n*Va]);if(m){var i=yt(m,r),o=[i[1],-i[0],0],a=yt(o,i);wt(a),a=_t(a);var l=t-p,u=l>0?1:-1,g=a[0]*$a*u,v=wa(l)>180;if(v^(g>u*p&&u*t>g)){var y=a[1]*$a;y>h&&(h=y)}else if(g=(g+360)%360-180,v^(g>u*p&&u*t>g)){var y=-a[1]*$a;f>y&&(f=y)}else f>n&&(f=n),n>h&&(h=n);v?p>t?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);m=r,p=t}function n(){w.point=t}function r(){b[0]=c,b[1]=d,w.point=e,m=null}function i(e,n){if(m){var r=e-p;y+=wa(r)>180?r+(r>0?360:-360):r}else g=e,v=n;zs.point(e,n),t(e,n)}function o(){zs.lineStart()}function a(){i(g,v),zs.lineEnd(),wa(y)>Ia&&(c=-(d=180)),b[0]=c,b[1]=d,m=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,g,v,m,y,x,b,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,zs.polygonStart()},polygonEnd:function(){zs.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>Ss?(c=-(d=180),f=-(h=90)):y>Ia?h=90:-Ia>y&&(f=-90),b[0]=c,b[1]=d}};return function(e){h=d=-(c=f=1/0),x=[],ua.geo.stream(e,w);var t=x.length;if(t){x.sort(l);for(var n,r=1,i=x[0],o=[i];t>r;++r)n=x[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,p=-(1/0),t=o.length-1,r=0,i=o[t];t>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>p&&(p=a,c=n[0],d=i[1])}return x=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),ua.geo.centroid=function(e){Ms=Cs=Ts=Es=js=Ds=Os=Ns=Ps=Fs=Is=0,ua.geo.stream(e,Rs);var t=Ps,n=Fs,r=Is,i=t*t+n*n+r*r;return Ra>i&&(t=Ds,n=Os,r=Ns,Ia>Cs&&(t=Ts,n=Es,r=js),i=t*t+n*n+r*r,Ra>i)?[NaN,NaN]:[Math.atan2(n,t)*$a,ne(r/Math.sqrt(i))*$a]};var Ms,Cs,Ts,Es,js,Ds,Os,Ns,Ps,Fs,Is,Rs={sphere:_,point:At,lineStart:zt,lineEnd:Mt,polygonStart:function(){Rs.lineStart=Ct},polygonEnd:function(){Rs.lineStart=zt}},Ls=Nt(Et,Rt,Bt,[-La,-La/2]),Bs=1e9;ua.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),i=o(e),i.valid=!0,i},extent:function(s){return arguments.length?(o=$t(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(ua.geo.conicEqualArea=function(){return Ht(Yt)}).raw=Yt,ua.geo.albers=function(){return ua.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ua.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}var t,n,r,i,o=ua.geo.albers(),a=ua.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ua.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var u=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Ia,f+.12*u+Ia],[c-.214*u-Ia,f+.234*u-Ia]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Ia,f+.166*u+Ia],[c-.115*u-Ia,f+.234*u-Ia]]).stream(l).point,e},e.scale(1070)};var qs,Us,Vs,$s,Hs,Ys,Ws={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Us=0,Ws.lineStart=Wt},polygonEnd:function(){Ws.lineStart=Ws.lineEnd=Ws.point=_,qs+=wa(Us/2)}},Xs={point:Xt,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Js={point:Qt,lineStart:Zt,lineEnd:Kt,polygonStart:function(){Js.lineStart=en},polygonEnd:function(){Js.point=Qt,Js.lineStart=Zt,Js.lineEnd=Kt}};ua.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),ua.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,r,i,o,a,s=4.5;return e.area=function(e){return qs=0,ua.geo.stream(e,i(Ws)),qs},e.centroid=function(e){return Ts=Es=js=Ds=Os=Ns=Ps=Fs=Is=0,ua.geo.stream(e,i(Js)),Is?[Ps/Is,Fs/Is]:Ns?[Ds/Ns,Os/Ns]:js?[Ts/js,Es/js]:[NaN,NaN]},e.bounds=function(e){return Hs=Ys=-(Vs=$s=1/0),ua.geo.stream(e,i(Xs)),[[Vs,$s],[Hs,Ys]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||rn(e):x,t()):n},e.context=function(e){return arguments.length?(o=null==(r=e)?new Jt:new tn(e),"function"!=typeof s&&o.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(ua.geo.albersUsa()).context(null)},ua.geo.transform=function(e){return{stream:function(t){var n=new on(t);for(var r in e)n[r]=e[r];return n}}},on.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ua.geo.projection=sn,ua.geo.projectionMutator=ln,(ua.geo.equirectangular=function(){return sn(cn)}).raw=cn.invert=cn,ua.geo.rotation=function(e){function t(t){return t=e(t[0]*Va,t[1]*Va),t[0]*=$a,t[1]*=$a,t}return e=dn(e[0]%360*Va,e[1]*Va,e.length>2?e[2]*Va:0),t.invert=function(t){return t=e.invert(t[0]*Va,t[1]*Va),t[0]*=$a,t[1]*=$a,t},t},fn.invert=cn,ua.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=dn(-e[0]*Va,-e[1]*Va,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=$a,e[1]*=$a}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=vn((t=+r)*Va,i*Va),e):t},e.precision=function(r){return arguments.length?(n=vn(t*Va,(i=+r)*Va),e):i},e.angle(90)},ua.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Va,i=e[1]*Va,o=t[1]*Va,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},ua.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ua.range(Math.ceil(o/v)*v,i,v).map(d).concat(ua.range(Math.ceil(u/m)*m,l,m).map(h)).concat(ua.range(Math.ceil(r/p)*p,n,p).filter(function(e){return wa(e%v)>Ia}).map(c)).concat(ua.range(Math.ceil(s/g)*g,a,g).filter(function(e){return wa(e%m)>Ia}).map(f))}var n,r,i,o,a,s,l,u,c,f,d,h,p=10,g=p,v=90,m=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],o>i&&(t=o,o=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[o,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(v=+t[0],m=+t[1],e):[v,m]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=yn(s,a,90),f=xn(r,n,y),d=yn(u,l,90),h=xn(o,i,y),e):y},e.majorExtent([[-180,-90+Ia],[180,90-Ia]]).minorExtent([[-180,-80-Ia],[180,80+Ia]])},ua.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=bn,i=wn;return e.distance=function(){return ua.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},ua.geo.interpolate=function(e,t){return _n(e[0]*Va,e[1]*Va,t[0]*Va,t[1]*Va)},ua.geo.length=function(e){return Gs=0,ua.geo.stream(e,Qs),Gs};var Gs,Qs={sphere:_,point:_,lineStart:kn,lineEnd:_,polygonStart:_,polygonEnd:_},Zs=An(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ua.geo.azimuthalEqualArea=function(){return sn(Zs)}).raw=Zs;var Ks=An(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},x);(ua.geo.azimuthalEquidistant=function(){return sn(Ks)}).raw=Ks,(ua.geo.conicConformal=function(){return Ht(Sn)}).raw=Sn,(ua.geo.conicEquidistant=function(){return Ht(zn)}).raw=zn;var el=An(function(e){return 1/e},Math.atan);(ua.geo.gnomonic=function(){return sn(el)}).raw=el,Mn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ua]},(ua.geo.mercator=function(){return Cn(Mn)}).raw=Mn;var tl=An(function(){return 1},Math.asin);(ua.geo.orthographic=function(){return sn(tl)}).raw=tl;var nl=An(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ua.geo.stereographic=function(){return sn(nl)}).raw=nl,Tn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ua]},(ua.geo.transverseMercator=function(){var e=Cn(Tn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Tn,ua.geom={},ua.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Me(n),o=Me(r),a=e.length,s=[],l=[];for(t=0;a>t;t++)s.push([+i.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(On),t=0;a>t;t++)l.push([s[t][0],-s[t][1]]);var u=Dn(s),c=Dn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[s[u[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[s[c[t]][2]]);return h}var n=En,r=jn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},ua.geom.polygon=function(e){return za(e,rl),e};var rl=ua.geom.polygon.prototype=[];rl.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},rl.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},rl.clip=function(e){for(var t,n,r,i,o,a,s=Fn(e),l=-1,u=this.length-Fn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)a=t[n],Nn(a,c,i)?(Nn(o,c,i)||e.push(Pn(o,a,c,i)),e.push(a)):Nn(o,c,i)&&e.push(Pn(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var il,ol,al,sl,ll,ul=[],cl=[];$n.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Yn),t.length},nr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},rr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=sr(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(or(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ar(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ar(this,n),e=n,n=e.U),n.C=!1,r.C=!0,or(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?sr(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,or(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ar(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,or(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ar(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,or(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ar(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},ua.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return lr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Ia)*Ia,y:Math.round(a(e,t)/Ia)*Ia,i:t}})}var r=En,i=jn,o=r,a=i,s=fl;return e?t(e):(t.links=function(e){return lr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return lr(n(e)).cells.forEach(function(n,r){
for(var i,o,a=n.site,s=n.edges.sort(Yn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)i=c,o=f,c=s[l].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&cr(a,o,f)<0&&t.push([e[r],e[o.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(o=Me(r=e),t):r},t.y=function(e){return arguments.length?(a=Me(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?fl:e,t):s===fl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===fl?null:s&&s[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];ua.geom.delaunay=function(e){return ua.geom.voronoi().triangles(e)},ua.geom.quadtree=function(e,t,n,r,i){function o(e){function o(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(wa(l-n)+wa(c-r)<.01)u(e,t,n,r,i,o,a,s);else{var f=e.point;e.x=e.y=e.point=null,u(e,f,l,c,i,o,a,s),u(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,o,a,s)}function u(e,t,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,d=r>=c,h=d<<1|f;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=hr()),f?i=u:s=u,d?a=c:l=c,o(e,t,n,r,i,a,s,l)}var c,f,d,h,p,g,v,m,y,x=Me(s),b=Me(l);if(null!=t)g=t,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],d=[],p=e.length,a)for(h=0;p>h;++h)c=e[h],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;p>h;++h){var w=+x(c=e[h],h),_=+b(c,h);g>w&&(g=w),v>_&&(v=_),w>m&&(m=w),_>y&&(y=_),f.push(w),d.push(_)}var k=m-g,A=y-v;k>A?y=v+k:m=g+A;var S=hr();if(S.add=function(e){o(S,e,+x(e,++h),+b(e,h),g,v,m,y)},S.visit=function(e){pr(e,S,g,v,m,y)},S.find=function(e){return gr(S,e[0],e[1],g,v,m,y)},h=-1,null==t){for(;++h<p;)o(S,e[h],f[h],d[h],g,v,m,y);--h}else e.forEach(S.add);return f=d=e=c=null,S}var a,s=En,l=jn;return(a=arguments.length)?(s=fr,l=dr,3===a&&(i=n,r=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(l=e,o):l},o.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),o):null==t?null:[[t,n],[r,i]]},o.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),o):null==t?null:[r-t,i-n]},o)},ua.interpolateRgb=vr,ua.interpolateObject=mr,ua.interpolateNumber=yr,ua.interpolateString=xr;var dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(dl.source,"g");ua.interpolate=br,ua.interpolators=[function(e,t){var n=typeof t;return("string"===n?os.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:xr:t instanceof se?vr:Array.isArray(t)?wr:"object"===n&&isNaN(t)?mr:yr)(e,t)}],ua.interpolateArray=wr;var pl=function(){return x},gl=ua.map({linear:pl,poly:Cr,quad:function(){return Sr},cubic:function(){return zr},sin:function(){return Tr},exp:function(){return Er},circle:function(){return jr},elastic:Dr,back:Or,bounce:function(){return Nr}}),vl=ua.map({"in":x,out:kr,"in-out":Ar,"out-in":function(e){return Ar(kr(e))}});ua.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=gl.get(n)||pl,r=vl.get(r)||x,_r(r(n.apply(null,ca.call(arguments,1))))},ua.interpolateHcl=Pr,ua.interpolateHsl=Fr,ua.interpolateLab=Ir,ua.interpolateRound=Rr,ua.transform=function(e){var t=da.createElementNS(ua.ns.prefix.svg,"g");return(ua.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Lr(n?n.matrix:ml)})(e)},Lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};ua.interpolateTransform=Xr,ua.layout={},ua.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Qr(e[n]));return t}},ua.layout.chord=function(){function e(){var e,u,f,d,h,p={},g=[],v=ua.range(o),m=[];for(n=[],r=[],e=0,d=-1;++d<o;){for(u=0,h=-1;++h<o;)u+=i[d][h];g.push(u),m.push(ua.range(o)),e+=u}for(a&&v.sort(function(e,t){return a(g[e],g[t])}),s&&m.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Ba-c*o)/e,u=0,d=-1;++d<o;){for(f=u,h=-1;++h<o;){var y=v[d],x=m[y][h],b=i[y][x],w=u,_=u+=b*e;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<o;)for(h=d-1;++h<o;){var k=p[d+"-"+h],A=p[h+"-"+d];(k.value||A.value)&&n.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(o=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(a=e,n=r=null,u):a},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},ua.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,l=o*o+a*a;if(l>s*s/m){if(g>l){var u=t.charge/l;e.px-=o*u,e.py-=a*u}return!0}if(t.point&&l&&g>l){var u=t.pointCharge/l;e.px-=o*u,e.py-=a*u}}return!t.charge}}function t(e){e.px=ua.event.x,e.py=ua.event.y,l.resume()}var n,r,i,o,a,s,l={},u=ua.dispatch("start","tick","end"),c=[1,1],f=.9,d=yl,h=xl,p=-30,g=bl,v=.1,m=.64,y=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,d,h,g,m,x,w,_=y.length,k=b.length;for(r=0;k>r;++r)l=b[r],d=l.source,h=l.target,x=h.x-d.x,w=h.y-d.y,(g=x*x+w*w)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,x*=g,w*=g,h.x-=x*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*m,d.x+=x*(m=1-m),d.y+=w*m);if((m=i*v)&&(x=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<_;)l=y[r],l.x+=(x-l.x)*m,l.y+=(w-l.y)*m;if(p)for(ii(t=ua.geom.quadtree(y),i,s),r=-1;++r<_;)(l=y[r]).fixed||t.visit(e(l));for(r=-1;++r<_;)l=y[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(y=e,l):y},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,l):d},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.friction=function(e){return arguments.length?(f=+e,l):f},l.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(v=+e,l):v},l.theta=function(e){return arguments.length?(m=e*e,l):Math.sqrt(m)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=De(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;i>l;++l)n[l]=[];for(l=0;u>l;++l){var o=b[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][e]))return a;return Math.random()*r}var t,n,r,i=y.length,u=b.length,f=c[0],g=c[1];for(t=0;i>t;++t)(r=y[t]).index=t,r.weight=0;for(t=0;u>t;++t)r=b[t],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=y[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof d)for(t=0;u>t;++t)o[t]=+d.call(this,b[t],t);else for(t=0;u>t;++t)o[t]=d;if(a=[],"function"==typeof h)for(t=0;u>t;++t)a[t]=+h.call(this,b[t],t);else for(t=0;u>t;++t)a[t]=h;if(s=[],"function"==typeof p)for(t=0;i>t;++t)s[t]=+p.call(this,y[t],t);else for(t=0;i>t;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=ua.behavior.drag().origin(x).on("dragstart.force",ei).on("drag.force",t).on("dragend.force",ti)),arguments.length?void this.on("mouseover.force",ni).on("mouseout.force",ri).call(r):r},ua.rebind(l,u,"on")};var yl=20,xl=1,bl=1/0;ua.layout.hierarchy=function(){function e(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(e,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(e,o,o.depth)||0),delete o.children;return si(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ci,n=li,r=ui;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ai(t,function(e){e.children&&(e.value=0)}),si(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},ua.layout.partition=function(){function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;++u<a;)e(s=o[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return e(a[0],0,i[0],i[1]/t(a[0])),a}var r=ua.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},oi(n,r)},ua.layout.pie=function(){function e(a){var s,l=a.length,u=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),h=d*(0>f?-1:1),p=ua.sum(u),g=p?(f-l*h)/p:0,v=ua.range(l),m=[];return null!=n&&v.sort(n===wl?function(e,t){return u[t]-u[e]}:function(e,t){return n(a[e],a[t])}),v.forEach(function(e){m[e]={data:a[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+h,padAngle:d}}),m}var t=Number,n=wl,r=0,i=Ba,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var wl={};ua.layout.stack=function(){function e(s,l){if(!(d=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),f=n.call(e,c,l);u=ua.permute(u,f),c=ua.permute(c,f);var d,h,p,g,v=r.call(e,c,l),m=u[0].length;for(p=0;m>p;++p)for(i.call(e,u[0][p],g=v[p],c[0][p][1]),h=1;d>h;++h)i.call(e,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var t=x,n=gi,r=vi,i=pi,o=di,a=hi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:_l.get(t)||gi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:kl.get(t)||vi,e):r},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(i=t,e):i},e};var _l=ua.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(mi),o=e.map(yi),a=ua.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=a[t],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return ua.range(e.length).reverse()},"default":gi}),kl=ua.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,i,o,a,s,l,u,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;d>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,o=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}h[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;d>n;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:vi});ua.layout.histogram=function(){function e(e,o){for(var a,s,l=[],u=e.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),o=-1,d=u.length,h=f.length-1,p=t?1:1/d;++o<h;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(h>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[ua.bisect(f,s,1,h)-1],a.y+=p,a.push(e[o]));return l}var t=!0,n=Number,r=_i,i=bi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Me(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return wi(e,t)}:Me(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ua.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,si(s,function(e){e.r=+c(e.value)}),si(s,Mi),r){var f=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;si(s,function(e){e.r+=f}),si(s,Mi),si(s,function(e){e.r-=f})}return Ei(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var t,n=ua.layout.hierarchy().sort(ki),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},oi(e,n)},ua.layout.tree=function(){function e(e,i){var c=a.call(this,e,i),f=c[0],d=t(f);if(si(d,n),d.parent.m=-d.z,ai(d,r),u)ai(f,o);else{var h=f,p=f,g=f;ai(f,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var v=s(h,p)/2-h.x,m=l[0]/(p.x+s(p,h)/2+v),y=l[1]/(g.depth||1);ai(f,function(e){e.x=(e.x+v)*m,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Fi(e);var o=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,o=e,a=t,l=i.parent.children[0],u=i.m,c=o.m,f=a.m,d=l.m;a=Ni(a),i=Oi(i),a&&i;)l=Oi(l),o=Ni(o),o.a=e,r=a.z+f-i.z-u+s(a._,i._),r>0&&(Pi(Ii(a,e,n),e,r),u+=r,c+=r),f+=a.m,u+=i.m,d+=l.m,c+=o.m;a&&!Ni(o)&&(o.t=a,o.m+=f-c),i&&!Oi(l)&&(l.t=i,l.m+=u-d,n=e)}return n}function o(e){e.x*=l[0],e.y=e.depth*l[1]}var a=ua.layout.hierarchy().sort(null).value(null),s=Di,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?o:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:o,e):u?l:null},oi(e,a)},ua.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),l=s[0],u=0;si(l,function(e){var t=e.children;t&&t.length?(e.x=Li(t),e.y=Ri(t)):(e.x=a?u+=n(e,a):0,e.y=0,a=e)});var c=Bi(l),f=qi(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return si(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=ua.layout.hierarchy().sort(null).value(null),n=Di,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},oi(e,t)},ua.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],d=o.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var o,a=f(t),s=r.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*o*p)):1/0}function i(e,t,n,r){var i,o=-1,a=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=e[o],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=e[o],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),d&&(a=i),i}var a,s=ua.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Ui,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(u=e,o):u},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?Ui(t):Vi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Vi(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?Ui:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(l=e?Math.round:Number,o):l!=Number},o.sticky=function(e){return arguments.length?(d=e,a=null,o):d},o.ratio=function(e){return arguments.length?(p=e,o):p},o.mode=function(e){return arguments.length?(h=e+"",o):h},oi(o,s)},ua.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=ua.random.normal.apply(ua,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=ua.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},ua.scale={};var Al={floor:x,ceil:x};ua.scale.linear=function(){return Gi([0,1],[0,1],br,!1)};var Sl={s:1,g:1,p:1,r:1,e:1};ua.scale.log=function(){return io(ua.scale.linear().domain([0,1]),10,!0,[1,10])};var zl=ua.format(".0e"),Ml={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};ua.scale.pow=function(){return oo(ua.scale.linear(),1,[0,1])},ua.scale.sqrt=function(){return ua.scale.pow().exponent(.5)},ua.scale.ordinal=function(){return so([],{t:"range",a:[[]]})},ua.scale.category10=function(){return ua.scale.ordinal().range(Cl)},ua.scale.category20=function(){return ua.scale.ordinal().range(Tl)},ua.scale.category20b=function(){return ua.scale.ordinal().range(El)},ua.scale.category20c=function(){return ua.scale.ordinal().range(jl)};var Cl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),Tl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),El=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),jl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);ua.scale.quantile=function(){return lo([],[])},ua.scale.quantize=function(){return uo(0,1,[0,1])},ua.scale.threshold=function(){return co([.5],[0,1])},ua.scale.identity=function(){return fo([0,1])},ua.svg={},ua.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ua,f=s.apply(this,arguments)-Ua,d=Math.abs(f-c),h=c>f?0:1;if(e>u&&(p=u,u=e,e=p),d>=qa)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,g,v,m,y,x,b,w,_,k,A,S,z=0,M=0,C=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===Dl?Math.sqrt(e*e+u*u):+o.apply(this,arguments),h||(M*=-1),u&&(M=ne(v/u*Math.sin(m))),e&&(z=ne(v/e*Math.sin(m)))),u){y=u*Math.cos(c+M),x=u*Math.sin(c+M),b=u*Math.cos(f-M),w=u*Math.sin(f-M);var T=Math.abs(f-c-2*M)<=La?0:1;if(M&&xo(y,x,b,w)===h^T){var E=(c+f)/2;y=u*Math.cos(E),x=u*Math.sin(E),b=w=null}}else y=x=0;if(e){_=e*Math.cos(f-z),k=e*Math.sin(f-z),A=e*Math.cos(c+z),S=e*Math.sin(c+z);var j=Math.abs(c-f+2*z)<=La?0:1;if(z&&xo(_,k,A,S)===1-h^j){var D=(c+f)/2;_=e*Math.cos(D),k=e*Math.sin(D),A=S=null}}else _=k=0;if(d>Ia&&(p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){g=u>e^h?0:1;var O=p,N=p;if(La>d){var P=null==A?[_,k]:null==b?[y,x]:Pn([y,x],[A,S],[b,w],[_,k]),F=y-P[0],I=x-P[1],R=b-P[0],L=w-P[1],B=1/Math.sin(Math.acos((F*R+I*L)/(Math.sqrt(F*F+I*I)*Math.sqrt(R*R+L*L)))/2),q=Math.sqrt(P[0]*P[0]+P[1]*P[1]);N=Math.min(p,(e-q)/(B-1)),O=Math.min(p,(u-q)/(B+1))}if(null!=b){var U=bo(null==A?[_,k]:[A,S],[y,x],u,O,h),V=bo([b,w],[_,k],u,O,h);p===O?C.push("M",U[0],"A",O,",",O," 0 0,",g," ",U[1],"A",u,",",u," 0 ",1-h^xo(U[1][0],U[1][1],V[1][0],V[1][1]),",",h," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):C.push("M",U[0],"A",O,",",O," 0 1,",g," ",V[0])}else C.push("M",y,",",x);if(null!=A){var $=bo([y,x],[A,S],e,-N,h),H=bo([_,k],null==b?[y,x]:[b,w],e,-N,h);p===N?C.push("L",H[0],"A",N,",",N," 0 0,",g," ",H[1],"A",e,",",e," 0 ",h^xo(H[1][0],H[1][1],$[1][0],$[1][1]),",",1-h," ",$[1],"A",N,",",N," 0 0,",g," ",$[0]):C.push("L",H[0],"A",N,",",N," 0 0,",g," ",$[0])}else C.push("L",_,",",k)}else C.push("M",y,",",x),null!=b&&C.push("A",u,",",u," 0 ",T,",",h," ",b,",",w),C.push("L",_,",",k),null!=A&&C.push("A",e,",",e," 0 ",j,",",1-h," ",A,",",S);return C.push("Z"),C.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=po,r=go,i=ho,o=Dl,a=vo,s=mo,l=yo;return e.innerRadius=function(t){return arguments.length?(n=Me(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Me(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Me(t),e):i},e.padRadius=function(t){return arguments.length?(o=t==Dl?Dl:Me(t),e):o},e.startAngle=function(t){return arguments.length?(a=Me(t),e):a},e.endAngle=function(t){return arguments.length?(s=Me(t),e):s},e.padAngle=function(t){return arguments.length?(l=Me(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ua;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Dl="auto";ua.svg.line=function(){return wo(x)};var Ol=ua.map({linear:_o,"linear-closed":ko,step:Ao,"step-before":So,"step-after":zo,basis:Do,"basis-open":Oo,"basis-closed":No,bundle:Po,cardinal:To,"cardinal-open":Mo,"cardinal-closed":Co,monotone:qo});Ol.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Nl=[0,2/3,1/3,0],Pl=[0,1/3,2/3,0],Fl=[0,1/6,2/3,1/6];ua.svg.line.radial=function(){var e=wo(Uo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},So.reverse=zo,zo.reverse=So,ua.svg.area=function(){return Vo(x)},ua.svg.area.radial=function(){var e=Vo(Uo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ua.svg.chord=function(){function e(e,s){var l=t(this,o,e,s),u=t(this,a,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),o=s.call(e,i,r),a=l.call(e,i,r)-Ua,c=u.call(e,i,r)-Ua;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>La)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var o=bn,a=wn,s=$o,l=vo,u=mo;return e.radius=function(t){return arguments.length?(s=Me(t),e):s},e.source=function(t){return arguments.length?(o=Me(t),e):o},e.target=function(t){return arguments.length?(a=Me(t),e):a},e.startAngle=function(t){return arguments.length?(l=Me(t),e):l},e.endAngle=function(t){return arguments.length?(u=Me(t),e):u},e},ua.svg.diagonal=function(){function e(e,i){var o=t.call(this,e,i),a=n.call(this,e,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=bn,n=wn,r=Ho;return e.source=function(n){return arguments.length?(t=Me(n),e):t},e.target=function(t){return arguments.length?(n=Me(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},ua.svg.diagonal.radial=function(){var e=ua.svg.diagonal(),t=Ho,n=e.projection;return e.projection=function(e){return arguments.length?n(Yo(t=e)):t},e},ua.svg.symbol=function(){function e(e,r){return(Il.get(t.call(this,e,r))||Jo)(n.call(this,e,r))}var t=Xo,n=Wo;return e.type=function(n){return arguments.length?(t=Me(n),e):t},e.size=function(t){return arguments.length?(n=Me(t),e):n},e};var Il=ua.map({circle:Jo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ll)),n=t*Ll;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ua.svg.symbolTypes=Il.keys();var Rl=Math.sqrt(3),Ll=Math.tan(30*Va);Ea.transition=function(e){for(var t,n,r=Bl||++$l,i=ea(e),o=[],a=ql||{time:Date.now(),ease:Mr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&ta(n,c,i,r,a),t.push(n)}return Qo(o,i,r)},Ea.interrupt=function(e){return this.each(null==e?Ul:Go(ea(e)))};var Bl,ql,Ul=Go(ea()),Vl=[],$l=0;Vl.call=Ea.call,Vl.empty=Ea.empty,Vl.node=Ea.node,Vl.size=Ea.size,ua.transition=function(e,t){return e&&e.transition?Bl?e.transition(t):e:ua.selection().transition(e)},ua.transition.prototype=Vl,Vl.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=T(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),ta(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return Qo(a,o,i)},Vl.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=E(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&ta(i,p,s,a,o),t.push(i)}return Qo(l,s,a)},Vl.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=U(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]);for(var n=this[o],s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return Qo(i,this.namespace,this.id)},Vl.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):$(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Vl.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function o(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Xr:br,s=ua.ns.qualify(e);return Zo(this,"attr."+e,t,s.local?o:i)},Vl.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=ua.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Vl.style=function(e,t,r){function i(){this.style.removeProperty(e)}function o(t){return null==t?i:(t+="",function(){var i,o=n(this).getComputedStyle(this,null).getPropertyValue(e);return o!==t&&(i=br(o,t),function(t){this.style.setProperty(e,i(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(r in e)this.style(r,e[r],t);return this}r=""}return Zo(this,"style."+e,t,o)},Vl.styleTween=function(e,t,r){function i(i,o){var a=t.call(this,i,o,n(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Vl.text=function(e){return Zo(this,"text",e,Ko)},Vl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Vl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=ua.ease.apply(ua,arguments)),$(this,function(r){r[n][t].ease=e}))},Vl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:$(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},Vl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:$(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Vl.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=ql,o=Bl;try{Bl=n,$(this,function(t,i,o){ql=t[r][n],e.call(t,t.__data__,i,o)})}finally{ql=i,Bl=o}}else $(this,function(i){var o=i[r][n];(o.event||(o.event=ua.dispatch("start","end","interrupt"))).on(e,t)});return this},Vl.transition=function(){for(var e,t,n,r,i=this.id,o=++$l,a=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[a][i],ta(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Qo(s,a,o)},ua.svg.axis=function(){function e(e){e.each(function(){var e,u=ua.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==t?f.tickFormat?f.tickFormat.apply(f,s):x:t,p=u.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ia),v=ua.transition(p.exit()).style("opacity",Ia).remove(),m=ua.transition(p.order()).style("opacity",1),y=Math.max(i,0)+a,b=Hi(f),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),ua.transition(w));g.append("line"),g.append("text");var k,A,S,z,M=g.select("line"),C=m.select("line"),T=p.select("text").text(h),E=g.select("text"),j=m.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=na,k="x",S="y",A="x2",z="y2",T.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+D*o+"V0H"+b[1]+"V"+D*o)):(e=ra,k="y",S="x",A="y2",z="x2",T.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),_.attr("d","M"+D*o+","+b[0]+"H0V"+b[1]+"H"+D*o)),M.attr(z,D*i),E.attr(S,D*y),C.attr(A,0).attr(z,D*i),j.attr(k,0).attr(S,D*y),f.rangeBand){var O=f,N=O.rangeBand()/2;c=f=function(e){return O(e)+N}}else c.rangeBand?c=f:v.call(e,f,c);g.call(e,c,f),m.call(e,f,f)})}var t,n=ua.scale.linear(),r=Hl,i=6,o=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Yl?t+"":Hl,e):r},e.ticks=function(){
return arguments.length?(s=fa(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,o=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Hl="bottom",Yl={top:1,right:1,bottom:1,left:1};ua.svg.brush=function(){function e(n){n.each(function(){var n=ua.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=n.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=n.selectAll(".resize").data(g,x);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Wl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,f=ua.transition(n),d=ua.transition(a);u&&(l=Hi(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Hi(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),t(f)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==ua.event.keyCode&&(T||(x=null,j[0]-=f[1],j[1]-=d[1],T=2),S())}function g(){32==ua.event.keyCode&&2==T&&(j[0]+=f[1],j[1]+=d[1],T=0,S())}function v(){var e=ua.mouse(w),n=!1;b&&(e[0]+=b[0],e[1]+=b[1]),T||(ua.event.altKey?(x||(x=[(f[0]+f[1])/2,(d[0]+d[1])/2]),j[0]=f[+(e[0]<x[0])],j[1]=d[+(e[1]<x[1])]):x=null),M&&m(e,u,0)&&(r(A),n=!0),C&&m(e,c,1)&&(i(A),n=!0),n&&(t(A),k({type:"brush",mode:T?"move":"resize"}))}function m(e,t,n){var r,i,o=Hi(t),l=o[0],u=o[1],c=j[n],g=n?d:f,v=g[1]-g[0];return T&&(l-=c,u-=v+c),r=(n?p:h)?Math.max(l,Math.min(u,e[n])):e[n],T?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(u,2*x[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:a=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),A.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ua.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var x,b,w=this,_=ua.select(ua.event.target),k=l.of(w,arguments),A=ua.select(w),z=_.datum(),M=!/^(n|s)$/.test(z)&&u,C=!/^(e|w)$/.test(z)&&c,T=_.classed("extent"),E=G(w),j=ua.mouse(w),D=ua.select(n(w)).on("keydown.brush",o).on("keyup.brush",g);if(ua.event.changedTouches?D.on("touchmove.brush",v).on("touchend.brush",y):D.on("mousemove.brush",v).on("mouseup.brush",y),A.interrupt().selectAll("*").interrupt(),T)j[0]=f[0]-j[0],j[1]=d[0]-j[1];else if(z){var O=+/w$/.test(z),N=+/^n/.test(z);b=[f[1-O]-j[0],d[1-N]-j[1]],j[0]=f[O],j[1]=d[N]}else ua.event.altKey&&(x=j.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),ua.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),v()}var a,s,l=M(e,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=Xl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:f,y:d,i:a,j:s},n=this.__chart__||t;this.__chart__=t,Bl?ua.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=wr(f,t.x),r=wr(d,t.y);return a=s=null,function(i){f=t.x=n(i),d=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Xl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Xl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(h=!!t[0],p=!!t[1]):u?h=!!t:c&&(p=!!t),e):u&&c?[h,p]:u?h:c?p:null},e.extent=function(t){var n,r,i,o,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=t[0],o=t[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(l=i,i=o,o=l),(i!=d[0]||o!=d[1])&&(d=[i,o])),e):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=d[0],o=d[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},e.clear=function(){return e.empty()||(f=[0,0],d=[0,0],a=s=null),e},e.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},ua.rebind(e,l,"on")};var Wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jl=ps.format=bs.timeFormat,Gl=Jl.utc,Ql=Gl("%Y-%m-%dT%H:%M:%S.%LZ");Jl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ia:Ql,ia.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ia.toString=Ql.toString,ps.second=qe(function(e){return new gs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=qe(function(e){return new gs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=qe(function(e){var t=e.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=qe(function(e){return e=ps.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Zl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Kl=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],eu=Jl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Et]]),tu={range:function(e,t,n){return ua.range(Math.ceil(e/n)*n,+t,n).map(aa)},floor:x,ceil:x};Kl.year=ps.year,ps.scale=function(){return oa(ua.scale.linear(),Kl,eu)};var nu=Kl.map(function(e){return[e[0].utc,e[1]]}),ru=Gl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Et]]);nu.year=ps.year.utc,ps.scale.utc=function(){return oa(ua.scale.linear(),nu,ru)},ua.text=Ce(function(e){return e.responseText}),ua.json=function(e,t){return Te(e,"application/json",sa,t)},ua.html=function(e,t){return Te(e,"text/html",la,t)},ua.xml=Ce(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=ua,define(ua)):"object"==typeof t&&t.exports?t.exports=ua:this.d3=ua}()},{}],6:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":7}],7:[function(e,t,n){(function(){var e,r,i,o,a,s,l,u,c,f,d,h,p,g,v;i=Math.floor,f=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,o,a){var s;if(null==n&&(n=0),null==a&&(a=r),0>n)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);o>n;)s=i((n+o)/2),a(t,e[s])<0?o=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)},a=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,v(e,0,t)):i=n,i},u=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,v(e,0,n),i},l=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],v(e,0,n)),t},o=function(e,t){var n,o,a,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],o=0,a=s.length;a>o;o++)n=s[o],l.push(v(e,n,t));return l},p=function(e,t,n){var i;return null==n&&(n=r),i=e.indexOf(t),-1!==i?(g(e,0,i,n),v(e,i,n)):void 0},d=function(e,t,n){var i,a,s,u,c;if(null==n&&(n=r),a=e.slice(0,t),!a.length)return a;for(o(a,n),c=e.slice(t),s=0,u=c.length;u>s;s++)i=c[s],l(a,i,n);return a.sort(n).reverse()},h=function(e,t,n){var i,s,l,u,d,h,p,g,v,m;if(null==n&&(n=r),10*t<=e.length){if(u=e.slice(0,t).sort(n),!u.length)return u;for(l=u[u.length-1],g=e.slice(t),d=0,p=g.length;p>d;d++)i=g[d],n(i,l)<0&&(c(u,i,0,null,n),u.pop(),l=u[u.length-1]);return u}for(o(e,n),m=[],s=h=0,v=f(t,e.length);v>=0?v>h:h>v;s=v>=0?++h:--h)m.push(a(e,n));return m},g=function(e,t,n,i){var o,a,s;for(null==i&&(i=r),o=e[n];n>t&&(s=n-1>>1,a=e[s],i(o,a)<0);)e[n]=a,n=s;return e[n]=o},v=function(e,t,n){var i,o,a,s,l;for(null==n&&(n=r),o=e.length,l=t,a=e[t],i=2*t+1;o>i;)s=i+1,o>s&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=a,g(e,l,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=a,e.replace=u,e.pushpop=l,e.heapify=o,e.updateItem=p,e.nlargest=d,e.nsmallest=h,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return o(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],8:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i,o;for("undefined"==typeof t&&(t=15),i=.5,n=new Date;;){for(i*=2,o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;if(r=new Date,r-n>t)break}for(o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;return r=new Date,1e3*(3*i-1)/(r-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;n>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,r=1,i=r.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}function n(e){var i;if("undefined"==typeof e)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return r.push('"'+e+'"'),!1;if("boolean"==typeof e)return r.push(e.toString()),!1;if("number"==typeof e){var o=t(e),a=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),l=[o,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(i=1;i<l.length;i++)l[i].length<o.length&&(o=l[i]);return r.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===e)return r.push("null"),!1;if("function"==typeof e){r.push(e.toString());var u=!1;for(i in e)e.hasOwnProperty(i)&&(u?r.push(",\n"):r.push("\n{"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return u&&r.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return r.push("...Large Array..."),!0;var u=!1;for(r.push("["),i=0;i<e.length;i++)i>0&&(r.push(","),u&&r.push("\n ")),u=n(e[i]);return r.push("]"),!0}r.push("{");var u=!1;for(i in e)e.hasOwnProperty(i)&&(u&&r.push(",\n"),u=!0,r.push(i),r.push(": \n"),n(e[i]));return r.push("}"),!0}var r=[];return n(e),r.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseCSV=function(e){var t,n,r=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=function(e){return e.substr(0,e.length-1)},l=0;for(n=0;n<r.length;n++){var u,c=(r[n]+",").match(o);if(c.length>0){for(i[l]=[],t=0;t<c.length;t++)u=s(c[t]),a.test(u)?i[l][t]=parseFloat(u):i[l][t]=u;l++}}return i},numeric.toCSV=function(e){var t,n,r,i,o,a,s=numeric.dim(e);for(r=s[0],i=s[1],a=[],t=0;r>t;t++){for(o=[],n=0;r>n;n++)o[n]=e[t][n].toString();a[t]=o.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,r,i,o,a,s,l,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";for(t=0;u>t;t+=3)n=e[t],r=e[t+1],i=e[t+2],o=n>>2,a=((3&n)<<4)+(r>>4),s=((15&r)<<2)+(i>>6),l=63&i,t+1>=u?s=l=64:t+2>=u&&(l=64),f+=c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return f}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1,a=0;for(e.length,r=t;n>r;r++)a=255&(o^e[r]),o=o>>>8^i[a];return-1^o}var r,i,o,a,s,l,u,c,f,d,h=e[0].length,p=e[0][0].length,g=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(g,12,29),g[29]=d>>24&255,g[30]=d>>16&255,g[31]=d>>8&255,g[32]=255&d,r=1,i=0,u=0;h>u;u++){for(h-1>u?g.push(0):g.push(1),s=3*p+1+(0===u)&255,l=3*p+1+(0===u)>>8&255,g.push(s),g.push(l),g.push(255&~s),g.push(255&~l),0===u&&g.push(0),c=0;p>c;c++)for(o=0;3>o;o++)s=e[o][u][c],s=s>255?255:0>s?0:Math.round(s),r=(r+s)%65521,i=(i+r)%65521,g.push(s);g.push(0)}return f=(i<<16)+r,g.push(f>>24&255),g.push(f>>16&255),g.push(f>>8&255),g.push(255&f),a=g.length-41,g[33]=a>>24&255,g[34]=a>>16&255,g[35]=a>>8&255,g[36]=255&a,d=n(g,37),g.push(d>>24&255),g.push(d>>16&255),g.push(d>>8&255),g.push(255&d),g.push(0),g.push(0),g.push(0),g.push(0),g.push(73),g.push(69),g.push(78),g.push(68),g.push(174),g.push(66),g.push(96),g.push(130),"data:image/png;base64,"+t(g)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if(i=t.length,i!==n.length)return!1;for(r=0;i>r;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var r,i=e[n],o=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=t,o[r]=t;return-1===r&&(o[0]=t),o}for(r=i-1;r>=0;r--)o[r]=numeric.rep(e,t,n+1);return o},numeric.dotMMsmall=function(e,t){var n,r,i,o,a,s,l,u,c,f,d;for(o=e.length,a=t.length,s=t[0].length,l=Array(o),n=o-1;n>=0;n--){for(u=Array(s),c=e[n],i=s-1;i>=0;i--){for(f=c[a-1]*t[a-1][i],r=a-2;r>=1;r-=2)d=r-1,f+=c[r]*t[r][i]+c[d]*t[d][i];0===r&&(f+=c[0]*t[0][i]),u[i]=f}l[n]=u}return l},numeric._getCol=function(e,t,n){var r,i=e.length;for(r=i-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,o,a=numeric._getCol,s=t.length,l=Array(s),u=e.length,c=t[0].length,f=new Array(u),d=numeric.dotVV;for(--s,--u,r=u;-1!==r;--r)f[r]=Array(c);for(--c,r=c;-1!==r;--r)for(a(t,r,l),i=u;-1!==i;--i)o=0,n=e[i],f[i][r]=d(n,l);return f},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),o=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=o(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,o,a,s,l;for(i=e.length,o=t[0].length,a=Array(o),r=o-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),a[r]=s}return a},numeric.dotVV=function(e,t){var n,r,i=e.length,o=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,o+=e[n]*t[n]+e[r]*t[r];return 0===n&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,o=e.length,a=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),n=t+2,r=o-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),a[t]=i}return a},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(i=e[r].substring(0,e[r].length-3),s=i):i=e[r],"ret"===i&&(l=!0),o.push(i);return o[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function t(e,n,r,i,o){if(i===r.length-1)return void o(e,n);var a,s=r[i];for(a=s-1;a>=0;a--)t("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,r,i+1,o)},numeric._biforeach2=function n(e,t,r,i,o){if(i===r.length-1)return o(e,t);var a,s=r[i],l=Array(s);for(a=s-1;a>=0;--a)l[a]=n("object"==typeof e?e[a]:e,"object"==typeof t?t[a]:t,r,i+1,o);return l},numeric._foreach=function r(e,t,n,i){if(n===t.length-1)return void i(e);var o,a=t[n];for(o=a-1;o>=0;o--)r(e[o],t,n+1,i)},numeric._foreach2=function i(e,t,n,r){if(n===t.length-1)return r(e);var o,a=t[n],s=Array(a);for(o=a-1;o>=0;o--)s[o]=i(e[o],t,n+1,r);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,o,a,s,e,l=numeric.dim(e),u=Math.abs,c=l[0],f=l[1],d=numeric.clone(e),h=numeric.identity(c);for(a=0;f>a;++a){var p=-1,g=-1;for(o=a;o!==c;++o)s=u(d[o][a]),s>g&&(p=o,g=s);for(n=d[p],d[p]=d[a],d[a]=n,i=h[p],h[p]=h[a],h[a]=i,e=n[a],s=a;s!==f;++s)n[s]/=e;for(s=f-1;-1!==s;--s)i[s]/=e;for(o=c-1;-1!==o;--o)if(o!==a){for(t=d[o],r=h[o],e=t[a],s=a+1;s!==f;++s)t[s]-=n[s]*e;for(s=f-1;s>0;--s)r[s]-=i[s]*e,--s,r[s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,o,a,s,l,u,c=t[0],f=1,d=numeric.clone(e);for(r=0;c-1>r;r++){for(i=r,n=r+1;c>n;n++)Math.abs(d[n][r])>Math.abs(d[i][r])&&(i=n);for(i!==r&&(l=d[i],d[i]=d[r],d[r]=l,f*=-1),o=d[r],n=r+1;c>n;n++){for(a=d[n],s=a[r]/o[r],i=r+1;c-1>i;i+=2)u=i+1,a[i]-=o[i]*s,a[u]-=o[u]*s;i!==c&&(a[i]-=o[i]*s)}if(0===o[r])return 0;f*=o[r]}return f*d[r][r]},numeric.transpose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=l[n],o[t]=i[n],o[t-1]=r[n],--n,o=l[n],o[t]=i[n],o[t-1]=r[n];0===n&&(o=l[0],o[t]=i[0],o[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=r[n],--n,l[n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=l[n],o[t]=-i[n],o[t-1]=-r[n],--n,o=l[n],o[t]=-i[n],o[t-1]=-r[n];0===n&&(o=l[0],o[t]=-i[0],o[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=-r[n],--n,l[n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function o(e,t){var n,r,i=e[t],a=Array(i);if(t===e.length-1){for(r=Math.random,n=i-1;n>=1;n-=2)a[n]=r(),a[n-1]=r();return 0===n&&(a[0]=r()),a}for(n=i-1;n>=0;n--)a[n]=o(e,t+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),2>n)return 1===n?[e]:[];var r,i=Array(n);for(n--,r=n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){function r(e,o){var a,s=t[o],l=n[o]-s,u=Array(l);if(o===i.length-1){for(a=l;a>=0;a--)u[a]=e[a+s];return u}for(a=l;a>=0;a--)u[a]=r(e[a+s],o+1);return u}var i=numeric.dim(e);return r(e,0)},numeric.setBlock=function(e,t,n,r){function i(e,r,a){var s,l=t[a],u=n[a]-l;if(a===o.length-1)for(s=u;s>=0;s--)e[s+l]=r[s];for(s=u;s>=0;s--)i(e[s+l],r[s],a+1)}var o=numeric.dim(e);return i(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,o,a,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),o=u[r],a=e[t[r]],i=l-1;-1!==i;--i)o[i]=a[n[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,o,a,s=t[0],l=t[1];for(n=0,r=0,i=0;s>i;++i)n+=e[i][0].length;for(o=0;l>o;++o)r+=e[0][o][0].length;var u=Array(n);for(i=0;n>i;++i)u[i]=Array(r);var c,f,d,h,p,g=0;for(i=0;s>i;++i){for(c=r,
o=l-1;-1!==o;--o)for(a=e[i][o],c-=a[0].length,d=a.length-1;-1!==d;--d)for(p=a[d],f=u[g+d],h=p.length-1;-1!==h;--h)f[c+h]=p[h];g+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,s,l=n[0],u=r[0],c=Array(l);for(o=l-1;o>=0;o--){for(i=Array(u),s=e[o],a=u-1;a>=3;--a)i[a]=s*t[a],--a,i[a]=s*t[a],--a,i[a]=s*t[a],--a,i[a]=s*t[a];for(;a>=0;)i[a]=s*t[a],--a;c[o]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){if(numeric.indexOf,"string"!=typeof i){var o;i="";for(o in numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function a(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var a=numeric.div;return this.y?new numeric.T(a(this.x,e.x),a(this.y,e.x)):new numeric.T(a(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,o,a,s,l,u,c,f,t,n,r,d,h,p,g,v,m,y,x=e.x.length,b=numeric.identity(x),w=numeric.rep([x,x],0),_=numeric.clone(e.x),k=numeric.clone(e.y);for(t=0;x>t;t++){for(p=_[t][t],g=k[t][t],d=p*p+g*g,r=t,n=t+1;x>n;n++)p=_[n][t],g=k[n][t],h=p*p+g*g,h>d&&(r=n,d=h);for(r!==t&&(y=_[t],_[t]=_[r],_[r]=y,y=k[t],k[t]=k[r],k[r]=y,y=b[t],b[t]=b[r],b[r]=y,y=w[t],w[t]=w[r],w[r]=y),i=_[t],o=k[t],l=b[t],u=w[t],p=i[t],g=o[t],n=t+1;x>n;n++)v=i[n],m=o[n],i[n]=(v*p+m*g)/d,o[n]=(m*p-v*g)/d;for(n=0;x>n;n++)v=l[n],m=u[n],l[n]=(v*p+m*g)/d,u[n]=(m*p-v*g)/d;for(n=t+1;x>n;n++){for(a=_[n],s=k[n],c=b[n],f=w[n],p=a[t],g=s[t],r=t+1;x>r;r++)v=i[r],m=o[r],a[r]-=v*p-m*g,s[r]-=m*p+v*g;for(r=0;x>r;r++)v=l[r],m=u[r],c[r]-=v*p-m*g,f[r]-=m*p+v*g}}for(t=x-1;t>0;t--)for(l=b[t],u=w[t],n=t-1;n>=0;n--)for(c=b[n],f=w[n],p=_[n][t],g=k[n][t],r=x-1;r>=0;r--)v=l[r],m=u[r],c[r]-=p*v-g*m,f[r]-=p*m+g*v;return new numeric.T(b,w)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,o=e.length;if(r){for(;o>i;)t=e[i],n=n[t],r=r[t],i++;return new numeric.T(n,r)}for(;o>i;)t=e[i],n=n[t],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,o=0,a=e.length,s=t.x,l=t.y;if(0===a)return l?this.y=l:i&&(this.y=void 0),this.x=r,this;if(l){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);a-1>o;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=s,i[n]=l,this}if(i){for(;a-1>o;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=s,s instanceof Array?i[n]=numeric.rep(numeric.dim(s),0):i[n]=0,this}for(;a-1>o;)n=e[o],r=r[n],o++;return n=e[o],r[n]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,o=Array(i),a=this.x,s=this.y;for(n=e;t>=n;n++)o[n-e]=a[n];if(s){for(r=Array(i),n=e;t>=n;n++)r[n-e]=s[n];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,o=this.y,a=n.x,s=n.y;for(r=e;t>=r;r++)i[r]=a[r-e];if(s)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),r=e;t>=r;r++)o[r]=s[r-e];else if(o)for(r=e;t>=r;r++)o[r]=numeric.rep([a[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,o=t.y;return n[e]=i,o?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=o):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,o=numeric.setBlock,a=n.x,s=n.y;return s?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(r,e,t,a),o(i,e,t,s),this):(o(r,e,t,a),void(i&&o(i,e,t,numeric.rep(numeric.dim(a),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,o=numeric.rep;return i?new n(o(e,r),o(e,i)):new n(o(e,r))},numeric.T.diag=function s(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,s=numeric.diag;return n?new numeric.T(s(t),s(n)):new numeric.T(s(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,r=n*numeric.norm2(e);t[0]+=r;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,o,a,s,l,u,c,f,d=t[0],h=numeric.clone(e),p=numeric.identity(d);for(r=0;d-2>r;r++){for(o=Array(d-r-1),n=r+1;d>n;n++)o[n-r-1]=h[n][r];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(h,[r+1,r],[d-1,d-1]),l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(u=h[n],c=l[n-r-1],i=r;d>i;i++)u[i]-=2*c[i-r];for(s=numeric.getBlock(h,[0,r+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,a),a),n=0;d>n;n++)for(u=h[n],c=l[n],i=r+1;d>i;i++)u[i]-=2*c[i-r-1];for(s=Array(d-r-1),n=r+1;d>n;n++)s[n-r-1]=p[n];for(l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(f=p[n],c=l[n-r-1],i=0;d>i;i++)f[i]-=2*c[i]}}return{H:h,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b=(numeric.clone(e),numeric.dim(e)),w=b[0],_=numeric.identity(w);if(3>w)return{Q:_,B:[[0,w-1]]};var k=numeric.epsilon;for(x=0;t>x;x++){for(m=0;w-1>m;m++)if(Math.abs(e[m+1][m])<k*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),S=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[w-1,w-1]),t);for(h=Array(m+1),v=0;m>=v;v++)h[v]=_[v];for(p=numeric.dot(A.Q,h),v=0;m>=v;v++)_[v]=p[v];for(h=Array(w-m-1),v=m+1;w>v;v++)h[v-m-1]=_[v];for(p=numeric.dot(S.Q,h),v=m+1;w>v;v++)_[v]=p[v-m-1];return{Q:_,B:A.B.concat(numeric.add(S.B,m+1))}}if(i=e[w-2][w-2],o=e[w-2][w-1],a=e[w-1][w-2],s=e[w-1][w-1],u=i+s,l=i*s-o*a,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l){var z,M;z=.5*(u+Math.sqrt(u*u-4*l)),M=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+M)),numeric.diag(numeric.rep([3],z*M)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),h=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;3>v;v++)for(d=e[v],g=p[v],y=0;w>y;y++)d[y]-=2*g[y];for(h=numeric.getBlock(e,[0,0],[w-1,2]),p=numeric.tensor(numeric.dot(h,r),r),v=0;w>v;v++)for(d=e[v],g=p[v],y=0;3>y;y++)d[y]-=2*g[y];for(h=[_[0],_[1],_[2]],p=numeric.tensor(r,numeric.dot(r,h)),v=0;3>v;v++)for(f=_[v],g=p[v],y=0;w>y;y++)f[y]-=2*g[y];var C;for(m=0;w-2>m;m++){for(y=m;m+1>=y;y++)if(Math.abs(e[y+1][y])<k*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),S=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[w-1,w-1]),t);for(h=Array(y+1),v=0;y>=v;v++)h[v]=_[v];for(p=numeric.dot(A.Q,h),v=0;y>=v;v++)_[v]=p[v];for(h=Array(w-y-1),v=y+1;w>v;v++)h[v-y-1]=_[v];for(p=numeric.dot(S.Q,h),v=y+1;w>v;v++)_[v]=p[v-y-1];return{Q:_,B:A.B.concat(numeric.add(S.B,y+1))}}for(C=Math.min(w-1,m+3),n=Array(C-m),v=m+1;C>=v;v++)n[v-m-1]=e[v][m];for(r=numeric.house(n),h=numeric.getBlock(e,[m+1,m],[C,w-1]),p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;C>=v;v++)for(d=e[v],g=p[v-m-1],y=m;w>y;y++)d[y]-=2*g[y-m];for(h=numeric.getBlock(e,[0,m+1],[w-1,C]),p=numeric.tensor(numeric.dot(h,r),r),v=0;w>v;v++)for(d=e[v],g=p[v],y=m+1;C>=y;y++)d[y]-=2*g[y-m-1];for(h=Array(C-m),v=m+1;C>=v;v++)h[v-m-1]=_[v];for(p=numeric.tensor(r,numeric.dot(r,h)),v=m+1;C>=v;v++)for(f=_[v],g=p[v-m-1],y=0;w>y;y++)f[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(x.H,t),w=numeric.T,_=e.length,k=b.B,A=numeric.dot(b.Q,numeric.dot(x.H,numeric.transpose(b.Q))),S=new w(numeric.dot(b.Q,x.Q)),z=k.length,M=Math.sqrt;for(r=0;z>r;r++)if(n=k[r][0],n===k[r][1]);else{if(o=n+1,a=A[n][n],s=A[n][o],l=A[o][n],u=A[o][o],0===s&&0===l)continue;c=-a-u,f=a*u-s*l,d=c*c-4*f,d>=0?(h=0>c?-.5*(c-M(d)):-.5*(c+M(d)),m=(a-h)*(a-h)+s*s,y=l*l+(u-h)*(u-h),m>y?(m=M(m),g=(a-h)/m,v=s/m):(y=M(y),g=l/y,v=(u-h)/y),i=new w([[v,-g],[g,v]]),S.setRows(n,o,i.dot(S.getRows(n,o)))):(h=-.5*c,p=.5*M(-d),m=(a-h)*(a-h)+s*s,y=l*l+(u-h)*(u-h),m>y?(m=M(m+p*p),g=(a-h)/m,v=s/m,h=0,p/=m):(y=M(y+p*p),g=l/y,v=(u-h)/y,h=p/y,p=0),i=new w([[v,-g],[g,v]],[[h,p],[p,-h]]),S.setRows(n,o,i.dot(S.getRows(n,o))))}var C=S.dot(e).dot(S.transjugate()),_=e.length,T=numeric.T.identity(_);for(o=0;_>o;o++)if(o>0)for(r=o-1;r>=0;r--){var E=C.get([r,r]),j=C.get([o,o]);numeric.neq(E.x,j.x)||numeric.neq(E.y,j.y)?(h=C.getRow(r).getBlock([r],[o-1]),p=T.getRow(o).getBlock([r],[o-1]),T.set([o,r],C.get([r,o]).neg().sub(h.dot(p)).div(E.sub(j)))):T.setRow(o,T.getRow(r))}for(o=0;_>o;o++)h=T.getRow(o),T.setRow(o,h.div(h.norm2()));return T=T.transpose(),T=S.transjugate().dot(T),{lambda:C.getDiag(),E:T}},numeric.ccsSparse=function(e){var t,n,r,i,o=e.length,a=[];for(r=o-1;-1!==r;--r){n=e[r];for(i in n){for(i=parseInt(i);i>=a.length;)a[a.length]=0;0!==n[i]&&a[i]++}}var t=a.length,s=Array(t+1);for(s[0]=0,r=0;t>r;++r)s[r+1]=s[r]+a[r];var l=Array(s[t]),u=Array(s[t]);for(r=o-1;-1!==r;--r){n=e[r];for(i in n)0!==n[i]&&(a[i]--,l[s[i]+a[i]]=r,u[s[i]+a[i]]=n[i])}return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,i,o=e[0],a=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],f=numeric.rep([u,c],0);for(t=0;c>t;t++)for(r=o[t],i=o[t+1],n=r;i>n;++n)f[a[n]][t]=s[n];return f},numeric.ccsTSolve=function(e,t,n,r,i){function o(e){var t;if(0===n[e]){for(n[e]=1,t=a[e];t<a[e+1];++t)o(s[t]);i[f]=e,++f}}var a=e[0],s=e[1],l=e[2],u=a.length-1,c=Math.max,f=0;"undefined"==typeof r&&(n=numeric.rep([u],0)),"undefined"==typeof r&&(r=numeric.linspace(0,n.length-1)),"undefined"==typeof i&&(i=[]);var d,h,p,g,v,m,y;for(d=r.length-1;-1!==d;--d)o(r[d]);for(i.length=f,d=i.length-1;-1!==d;--d)n[i[d]]=0;for(d=r.length-1;-1!==d;--d)h=r[d],n[h]=t[h];for(d=i.length-1;-1!==d;--d){for(h=i[d],p=a[h],g=c(a[h+1],p),v=p;v!==g;++v)if(s[v]===h){n[h]/=l[v];break}for(y=n[h],v=p;v!==g;++v)m=s[v],m!==h&&(n[m]-=y*l[v])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,o){var a,s,l,u=0,c=i.length,f=this.k,d=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,f[0]=s=t[e],d[0]=l=t[e+1];;)if(s>=l){if(i[c]=h[u],0===u)return;++c,--u,s=f[u],l=d[u]}else a=o[n[s]],0===r[a]?(r[a]=1,f[u]=s,++u,h[u]=a,s=t[a],d[u]=l=t[a+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,o,a){var s,l,u,c,f,d,h,p,g,v=e[0],m=e[1],y=e[2],x=(v.length-1,t[0]),b=t[1],w=t[2];for(l=x[i],u=x[i+1],r.length=0,s=l;u>s;++s)a.dfs(o[b[s]],v,m,n,r,o);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)c=o[b[s]],n[c]=w[s];for(s=r.length-1;-1!==s;--s){for(c=r[s],f=v[c],d=v[c+1],h=f;d>h;++h)if(o[m[h]]===c){n[c]/=y[h];break}for(g=n[c],h=f;d>h;++h)p=o[m[h]],p!==c&&(n[p]-=g*y[h])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,A),o=-1,a=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[i]),s>o&&(a=i,o=s));for(w(y[n])<t*o&&(r=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=r,k[r]=a,o=y[n],y[n]=y[a],y[a]=o),o=d[n],a=g[n],l=y[n],h[o]=_[n],p[o]=1,++o,r=x.length-1;-1!==r;--r)i=x[r],s=y[i],x[r]=0,y[i]=0,n>=i?(v[a]=i,m[a]=s,++a):(h[o]=_[i],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(r=h.length-1;-1!==r;--r)h[r]=k[h[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,o,a){var s,l,u,c=0,f=i.length,d=this.k,h=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,d[0]=l=t[o[e]],h[0]=u=t[o[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(i[f]=o[p[c]],0===c)return;++f,--c,l=d[c],u=h[c]}else s=n[l],0===r[s]?(r[s]=1,d[c]=l,++c,p[c]=s,s=o[s],l=t[s],h[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,i,o,a,s){var l,u,c,f,d,h,p,g,v,m=e[0],y=e[1],x=e[2],b=(m.length-1,t[0]),w=t[1],_=t[2];for(u=b[i],c=b[i+1],r.length=0,l=u;c>l;++l)s.dfs(w[l],m,y,n,r,o,a);for(l=r.length-1;-1!==l;--l)f=r[l],n[a[f]]=0;for(l=u;l!==c;++l)f=w[l],n[f]=_[l];for(l=r.length-1;-1!==l;--l){for(f=r[l],g=a[f],d=m[f],h=m[f+1],p=d;h>p;++p)if(y[p]===g){n[g]/=x[p];break}for(v=n[g],p=d;h>p;++p)n[y[p]]-=v*x[p];n[g]=v}},numeric.ccsLUP0=function(e,t){var n,r,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,_,A),o=-1,a=-1,r=x.length-1;-1!==r;--r)i=x[r],n>=i||(s=w(y[_[i]]),s>o&&(a=i,o=s));for(w(y[_[n]])<t*o&&(r=_[n],o=_[a],_[n]=o,k[o]=n,_[a]=r,k[r]=a),o=d[n],a=g[n],l=y[_[n]],h[o]=_[n],p[o]=1,++o,r=x.length-1;-1!==r;--r)i=x[r],s=y[_[i]],x[r]=0,y[_[i]]=0,n>=i?(v[a]=i,m[a]=s,++a):(h[o]=_[i],p[o]=s/l,++o);d[n+1]=o,g[n+1]=a}for(r=h.length-1;-1!==r;--r)h[r]=k[h[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],o=r[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var a,s,l,u,c,f=t.length,d=n.length,h=numeric.rep([o],0),p=[],g=[],v=[h,p,g],m=e[0],y=e[1],x=e[2],b=numeric.rep([i],0),w=0,_=numeric.rep([i],0);for(s=0;d>s;++s){u=n[s];var k=m[u],A=m[u+1];for(a=k;A>a;++a)l=y[a],_[l]=1,b[l]=x[a];for(a=0;f>a;++a)c=t[a],_[c]&&(p[w]=a,g[w]=b[t[a]],++w);for(a=k;A>a;++a)l=y[a],_[l]=0;h[s+1]=w}return v},numeric.ccsDot=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h=e[0],p=e[1],g=e[2],v=t[0],m=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),w=x[0],_=(x[1],b[1]),k=numeric.rep([w],0),A=numeric.rep([w],0),S=Array(w),z=numeric.rep([_],0),M=[],C=[],T=[z,M,C];for(i=0;i!==_;++i){for(o=v[i],a=v[i+1],c=0,r=o;a>r;++r)for(f=m[r],d=y[r],s=h[f],l=h[f+1],n=s;l>n;++n)u=p[n],0===A[u]&&(S[c]=u,A[u]=1,c+=1),k[u]=k[u]+g[n]*d;for(o=z[i],a=o+c,z[i+1]=a,r=c-1;-1!==r;--r)d=o+r,n=S[r],M[d]=n,C[d]=k[n],A[n]=0,k[n]=0;z[i+1]=z[i]+c}return T},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),o=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],o=!0);var a,s,l,u,c,f,d=t[1],h=t[2],p=n[0].length-1,g=i.length-1,v=numeric.rep([p],0),m=Array(p),y=numeric.rep([p],0),x=Array(p),b=numeric.rep([g+1],0),w=[],_=[],k=numeric.ccsTSolve,A=0;for(a=0;g>a;++a){for(c=0,l=i[a],u=i[a+1],s=l;u>s;++s)f=e.Pinv[d[s]],x[c]=f,y[f]=h[s],++c;for(x.length=c,k(n,y,v,x,m),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(k(r,v,y,m,x),o)return y;for(s=m.length-1;-1!==s;--s)v[m[s]]=0;for(s=x.length-1;-1!==s;--s)f=x[s],w[A]=f,_[A]=y[f],y[f]=0,++A;b[a+1]=A}return[b,w,_]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],o=numeric.sup(r)+1,a=n.length,s=numeric.rep([o],0),l=Array(a),u=Array(a),c=numeric.rep([o],0);for(t=0;a>t;++t)c[r[t]]++;for(t=0;o>t;++t)s[t+1]=s[t]+c[t];var f,d,h=s.slice(0);for(t=0;a>t;++t)d=r[t],f=h[d],l[f]=n[t],u[f]=i[t],h[d]=h[d]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,i,o,a=e[0],s=e[1],l=e[2],u=a.length-1,c=s.length,f=Array(c),d=Array(c),h=Array(c);for(o=0,t=0;u>t;++t)for(r=a[t],i=a[t+1],n=r;n!==i;++n)d[o]=t,f[o]=s[n],h[o]=l[n],++o;return[f,d,h]},numeric.sdim=function l(e,t,n){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof n&&(n=0),n in t||(t[n]=0),e.length>t[n]&&(t[n]=e.length);var r;for(r in e)e.hasOwnProperty(r)&&l(e[r],t,n+1);return t},numeric.sclone=function u(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=numeric.sdim(e).length);var r,i=Array(e.length);if(t===n-1){for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}for(r in e)e.hasOwnProperty(r)&&(i[r]=u(e[r],t+1,n));return i},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){r=e[t];for(n in r)r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,o,a,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),f=c.length,d=Array(u);for(i=u-1;i>=0;i--){for(l=[],n=e[i],a=f-1;a>=0;a--){s=0,r=c[a];for(o in n)n.hasOwnProperty(o)&&o in r&&(s+=n[o]*r[o]);s&&(l[a]=s)}d[i]=l}return d},numeric.sdotMV=function(e,t){var n,r,i,o,a=e.length,s=Array(a);for(r=a-1;r>=0;r--){n=e[r],o=0;for(i in n)n.hasOwnProperty(i)&&t[i]&&(o+=n[i]*t[i]);o&&(s[r]=o)}return s},numeric.sdotVM=function(e,t){var n,r,i,o,a=[];for(n in e)if(e.hasOwnProperty(n)){i=t[n],o=e[n];for(r in i)i.hasOwnProperty(r)&&(a[r]||(a[r]=0),a[r]+=o*i[r])}return a},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length,i=1e3*n+r;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,o=e[0].length,a=e.length,s=[];for(n=o-1;n>=0;--n)if(e[a-1][n]){for(i=s,r=0;a-2>r;r++)t=e[r][n],i[t]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function c(e,t,n){"undefined"==typeof t&&(t=[]),"undefined"==typeof n&&(n=[]);var r,i,o;r=n.length;for(i in e)if(e.hasOwnProperty(i))if(n[r]=parseInt(i),o=e[i],"number"==typeof o){if(o){if(0===t.length)for(i=r+1;i>=0;--i)t[i]=[];for(i=r;i>=0;--i)t[i].push(n[i]);t[r+1].push(o)}}else c(o,t,n);return n.length>r&&n.pop(),t},numeric.cLU=function(e){var t,n,r,i,o,a,s=e[0],l=e[1],u=e[2],c=s.length,f=0;for(t=0;c>t;t++)s[t]>f&&(f=s[t]);f++;var d,h,p,g=Array(f),v=Array(f),m=numeric.rep([f],1/0),y=numeric.rep([f],-(1/0));for(r=0;c>r;r++)t=s[r],n=l[r],n<m[t]&&(m[t]=n),n>y[t]&&(y[t]=n);for(t=0;f-1>t;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=f-1;t>=1;t--)m[t]<m[t-1]&&(m[t-1]=m[t]);var x=0,b=0;for(t=0;f>t;t++)v[t]=numeric.rep([y[t]-m[t]+1],0),g[t]=numeric.rep([t-m[t]],0),x+=t-m[t]+1,b+=y[t]-t+1;for(r=0;c>r;r++)t=s[r],v[t][l[r]-m[t]]=u[r];for(t=0;f-1>t;t++)for(i=t-m[t],d=v[t],n=t+1;m[n]<=t&&f>n;n++)if(o=t-m[n],a=y[t]-t,h=v[n],p=h[o]/d[i]){for(r=1;a>=r;r++)h[r+o]-=p*d[r+i];g[n][t-m[n]]=p}var c,w,_,d=[],h=[],k=[],A=[],S=[],z=[];for(c=0,w=0,t=0;f>t;t++){for(i=m[t],o=y[t],_=v[t],n=t;o>=n;n++)_[n-i]&&(d[c]=t,h[c]=n,k[c]=_[n-i],c++);for(_=g[t],n=i;t>n;n++)_[n-i]&&(A[w]=t,S[w]=n,z[w]=_[n-i],w++);A[w]=t,S[w]=t,z[w]=1,w++}return{U:[d,h,k],L:[A,S,z]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,o=e.U,a=numeric.clone(t),s=i[0],l=i[1],u=i[2],c=o[0],f=o[1],d=o[2],h=c.length,p=(s.length,a.length);for(r=0,n=0;p>n;n++){for(;l[r]<n;)a[n]-=u[r]*a[l[r]],r++;r++}for(r=h-1,n=p-1;n>=0;n--){for(;f[r]>n;)a[n]-=d[r]*a[f[r]],r--;a[n]/=d[r],r--}return a},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,o=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(o[n][r]=i,i++);return o},numeric.cdelsq=function(e){var t,n,r,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],f=[],d=[];for(t=1;l-1>t;t++)for(n=1;u-1>n;n++)if(!(e[t][n]<0)){for(r=0;4>r;r++)i=t+a[r][0],o=n+a[r][1],e[i][o]<0||(c.push(e[t][n]),f.push(e[i][o]),d.push(-1));c.push(e[t][n]),f.push(e[t][n]),d.push(4)}return[c,f,d]},numeric.cdotMV=function(e,t){var n,r,i,o=e[0],a=e[1],s=e[2],l=o.length;for(i=0,r=0;l>r;r++)o[r]>i&&(i=o[r]);for(i++,n=numeric.rep([i],0),r=0;l>r;r++)n[o[r]]+=s[r]*t[a[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,n,r,i,o=this.x,a=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,f=numeric.sub,d=numeric.mul;n=f(d(l[t],o[t+1]-o[t]),f(s[t+1],a[t])),r=c(d(u[t+1],o[t]-o[t+1]),f(s[t+1],a[t])),i=(e-o[t])/(o[t+1]-o[t]);var h=i*(1-i);return c(c(c(d(1-i,a[t]),d(i,s[t+1])),d(n,h*(1-i))),d(r,h*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,o=i.length,a=Math.floor;for(t=0,n=o-1;n-t>1;)r=a((t+n)/2),i[r]<=e?t=r:n=r;return this._at(e,t)}var s,o=e.length,l=Array(o);for(s=o-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,o=this.yr,a=this.kl,s=this.kr,l=i.length,u=a,c=s,f=Array(l),d=Array(l),h=numeric.add,p=numeric.mul,g=numeric.div,v=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=v(o[e+1],i[e]),f[e]=g(h(p(n,6),p(a[e],-4*t),p(s[e+1],-2*t)),t*t),d[e+1]=g(h(p(n,-6),p(a[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,f,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],o=[o],a=[a]);var s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j=r.length,D=n.length-1,t=Array(j),O=Math.sqrt;for(s=0;s!==j;++s){for(c=r[s],f=i[s],d=o[s],h=a[s],p=[],l=0;l!==D;l++){for(l>0&&f[l]*c[l]<0&&p.push(n[l]),_=n[l+1]-n[l],k=n[l],m=c[l],y=f[l+1],g=d[l]/_,v=h[l+1]/_,w=e(g-v+3*(m-y))+12*v*m,x=v+3*m+2*g-3*y,b=3*(v+g+2*(m-y)),0>=w?(S=x/b,A=S>n[l]&&S<n[l+1]?[n[l],S,n[l+1]]:[n[l],n[l+1]]):(S=(x-O(w))/b,z=(x+O(w))/b,A=[n[l]],S>n[l]&&S<n[l+1]&&A.push(S),z>n[l]&&z<n[l+1]&&A.push(z),A.push(n[l+1])),C=A[0],S=this._at(C,l),u=0;u<A.length-1;u++)if(T=A[u+1],z=this._at(T,l),0!==S)if(0===z||S*z>0)C=T,S=z;else{for(var N=0;E=(S*T-z*C)/(S-z),!(C>=E||E>=T);)if(M=this._at(E,l),M*z>0)T=E,z=M,-1===N&&(S*=.5),N=-1;else{if(!(M*S>0))break;C=E,S=M,1===N&&(z*=.5),N=1}p.push(E),C=A[u+1],S=this._at(C,l)}else p.push(C),C=T,S=z;0===z&&p.push(T)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,o=e.length,a=[],s=[],l=[],u=numeric.sub,c=numeric.mul,f=numeric.add;for(i=o-2;i>=0;i--)s[i]=e[i+1]-e[i],l[i]=u(t[i+1],t[i]);("string"==typeof n||"string"==typeof r)&&(n=r="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":a[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":a[0]=f(c(3/(s[o-2]*s[o-2]),l[o-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(o-2,0,1),d[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(i=1;o-1>i;i++)a[i]=f(c(3/(s[i-1]*s[i-1]),l[i-1]),c(3/(s[i]*s[i]),l[i])),d[0].push(i,i,i),d[1].push(i-1,i,i+1),d[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":a[o-1]=c(3/(s[o-2]*s[o-2]),l[o-2]),d[0].push(o-1,o-1),d[1].push(o-2,o-1),d[2].push(1/s[o-2],2/s[o-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[o-1]=r,d[0].push(o-1),d[1].push(o-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var h=Array(a.length);if("string"==typeof n)for(i=h.length-1;-1!==i;--i)h[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[i]),h[i][o-1]=h[i][0];else for(i=h.length-1;-1!==i;--i)h[i]=numeric.cLUsolve(numeric.cLU(d),a[i]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function f(e,t){var n=e.length;if(1!==n){var r,i,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];f(s,l),f(u,c),i=n/2;var d,h,p,g=-6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),d=g*r,h=o(d),p=a(d),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric._ifftpow2=function d(e,t){var n=e.length;if(1!==n){var r,i,o=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],c[i]=t[r],--r,s[i]=e[r],l[i]=t[r];d(s,l),d(u,c),i=n/2;var f,h,p,g=6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),f=g*r,h=o(f),p=a(f),e[r]=s[i]+h*u[i]-p*c[i],t[r]=l[i]+h*c[i]+p*u[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){numeric.fftpow2(e,t),numeric.fftpow2(n,r);var i,o,a,s,l,u=e.length;for(i=u-1;-1!==i;--i)o=e[i],s=t[i],a=n[i],l=r[i],e[i]=o*a-s*l,t[i]=o*l+s*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=-3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=i,v.y.length=i,v},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(Math.floor(i/2),e=0;i>e;e++)p[e]=n[e];if("undefined"!=typeof r)for(e=0;i>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(p,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=i,v.y.length=i,v.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,o,a,s,l,u,c,f,d,h,p=Math.max,g=numeric.clone(t),v=Array(n),p=(numeric.div,numeric.sub,Math.max),m=.001,y=Math.abs,x=Math.min,b=0;for(i=0;n>i;i++)for(var w=p(1e-6*r,1e-8);;){if(++b,b>20)throw new Error("Numerical gradient fails");if(g[i]=t[i]+w,o=e(g),g[i]=t[i]-w,a=e(g),g[i]=t[i],isNaN(o)||isNaN(a))w/=16;else{if(v[i]=(o-a)/(2*w),l=t[i]-w,u=t[i],c=t[i]+w,f=(o-r)/w,d=(r-a)/w,h=p(y(v[i]),y(r),y(o),y(a),y(l),y(u),y(c),1e-8),s=x(p(y(f-v[i]),y(d-v[i]),y(f-d))/h,w/h),!(s>m))break;w/=16}}return v},numeric.uncmin=function(e,t,n,r,i,o,a){var s=numeric.gradient;"undefined"==typeof a&&(a={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof r&&(r=function(t){return s(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var l,u,c=t.length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,h=numeric.norm2;n=d(n,numeric.epsilon);
var p,g,v,m,y,x,b,w,_,k,A=a.Hinv||numeric.identity(c),S=numeric.dot,z=(numeric.inv,numeric.sub),M=numeric.add,C=numeric.tensor,T=numeric.div,E=numeric.mul,j=numeric.all,D=numeric.isFinite,O=numeric.neg,N=0,P="";for(g=r(t);i>N;){if("function"==typeof o&&o(N,t,f,g,A)){P="Callback returned true";break}if(!j(D(g))){P="Gradient has Infinity or NaN";break}if(p=O(S(A,g)),!j(D(p))){P="Search direction has Infinity or NaN";break}if(k=h(p),n>k){P="Newton step smaller than tol";break}for(_=1,u=S(g,p),y=t;i>N&&!(n>_*k)&&(m=E(p,_),y=M(t,m),l=e(y),l-f>=.1*_*u||isNaN(l));)_*=.5,++N;if(n>_*k){P="Line search step size smaller than tol";break}if(N===i){P="maxit reached during line search";break}v=r(y),x=z(v,g),w=S(x,m),b=S(A,x),A=z(M(A,E((w+S(x,b))/(w*w),C(m,m))),T(M(C(b,m),C(m,b)),w)),t=y,f=l,g=v,++N}return{solution:t,f:f,gradient:g,invHessian:A,iterations:N,message:P}},numeric.Dopri=function(e,t,n,r,i,o,a){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,o,a,s,l,e,u,c,f,d,h=this,p=h.x,g=h.y,v=h.f,m=h.ymid,y=(p.length,Math.floor,.5),x=numeric.add,b=numeric.mul,w=numeric.sub;return r=p[t],i=p[t+1],a=g[t],s=g[t+1],u=i-r,o=r+y*u,l=m[t],c=w(v[t],b(a,1/(r-o)+2/(r-i))),f=w(v[t+1],b(s,1/(i-o)+2/(i-r))),d=[n(e-i)*(e-o)/n(r-i)/(r-o),n(e-r)*n(e-i)/n(r-o)/n(i-o),n(e-r)*(e-o)/n(i-r)/(i-o),(e-r)*n(e-i)*(e-o)/n(r-i)/(r-o),(e-i)*n(e-r)*(e-o)/n(r-i)/(i-o)],x(x(x(x(b(a,d[0]),b(l,d[1])),b(s,d[2])),b(c,d[3])),b(f,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var o=e.length,a=Array(o);for(t=o-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var s=this.x;for(t=0,n=s.length-1;n-t>1;)r=i(.5*(t+n)),s[r]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,o,a){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof o&&(o=1e3);var s,l,u,c,f,d,h,p,g,v,m,y,x,b=[e],w=[n],_=[r(e,n)],k=[],A=.2,S=[.075,.225],z=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],C=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],T=[35/384,0,500/1113,125/192,-2187/6784,11/84],E=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],j=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],O=0,N=(t-e)/10,P=0,F=numeric.add,I=numeric.mul,R=(Math.max,Math.min),L=Math.abs,B=numeric.norminf,q=Math.pow,U=numeric.any,V=numeric.lt,$=numeric.and,H=(numeric.sub,new numeric.Dopri(b,w,_,k,(-1),""));for("function"==typeof a&&(m=a(e,n));t>e&&o>P;)if(++P,e+N>t&&(N=t-e),s=r(e+j[0]*N,F(n,I(A*N,_[O]))),l=r(e+j[1]*N,F(F(n,I(S[0]*N,_[O])),I(S[1]*N,s))),u=r(e+j[2]*N,F(F(F(n,I(z[0]*N,_[O])),I(z[1]*N,s)),I(z[2]*N,l))),c=r(e+j[3]*N,F(F(F(F(n,I(M[0]*N,_[O])),I(M[1]*N,s)),I(M[2]*N,l)),I(M[3]*N,u))),f=r(e+j[4]*N,F(F(F(F(F(n,I(C[0]*N,_[O])),I(C[1]*N,s)),I(C[2]*N,l)),I(C[3]*N,u)),I(C[4]*N,c))),g=F(F(F(F(F(n,I(_[O],N*T[0])),I(l,N*T[2])),I(u,N*T[3])),I(c,N*T[4])),I(f,N*T[5])),d=r(e+N,g),h=F(F(F(F(F(I(_[O],N*D[0]),I(l,N*D[2])),I(u,N*D[3])),I(c,N*D[4])),I(f,N*D[5])),I(d,N*D[6])),v="number"==typeof h?L(h):B(h),v>i){if(N=.2*N*q(i/v,.25),e+N===e){H.msg="Step size became too small";break}}else{if(k[O]=F(F(F(F(F(F(n,I(_[O],N*E[0])),I(l,N*E[2])),I(u,N*E[3])),I(c,N*E[4])),I(f,N*E[5])),I(d,N*E[6])),++O,b[O]=e+N,w[O]=g,_[O]=d,"function"==typeof a){var Y,W,X=e,J=e+.5*N;if(y=a(J,k[O-1]),x=$(V(m,0),V(0,y)),U(x)||(X=J,J=e+N,m=y,y=a(J,g),x=$(V(m,0),V(0,y))),U(x)){for(var G,Q,Z=0,K=1,ee=1;;){if("number"==typeof m)W=(ee*y*X-K*m*J)/(ee*y-K*m);else for(W=J,p=m.length-1;-1!==p;--p)m[p]<0&&y[p]>0&&(W=R(W,(ee*y[p]*X-K*m[p]*J)/(ee*y[p]-K*m[p])));if(X>=W||W>=J)break;Y=H._at(W,O-1),Q=a(W,Y),G=$(V(m,0),V(0,Q)),U(G)?(J=W,y=Q,x=G,ee=1,-1===Z?K*=.5:K=1,Z=-1):(X=W,m=Q,K=1,1===Z?ee*=.5:ee=1,Z=1)}return g=H._at(.5*(e+W),O-1),H.f[O]=r(W,Y),H.x[O]=W,H.y[O]=Y,H.ymid[O-1]=g,H.events=x,H.iterations=P,H}}e+=N,n=g,m=y,N=R(.8*N*q(i/v,.25),4*N)}return H.iterations=P,H},numeric.LU=function(e,t){t=t||!1;var n,r,i,o,a,s,l,u,c,f=Math.abs,d=e.length,h=d-1,p=new Array(d);for(t||(e=numeric.clone(e)),i=0;d>i;++i){for(l=i,s=e[i],c=f(s[i]),r=i+1;d>r;++r)o=f(e[r][i]),o>c&&(c=o,l=r);for(p[i]=l,l!=i&&(e[i]=e[l],e[l]=s,s=e[i]),a=s[i],n=i+1;d>n;++n)e[n][i]/=a;for(n=i+1;d>n;++n){for(u=e[n],r=i+1;h>r;++r)u[r]-=u[i]*s[r],++r,u[r]-=u[i]*s[r];r===h&&(u[r]-=u[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,o,a,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;l>n;++n)for(i=c[n],c[n]!==n&&(a=u[n],u[n]=u[i],u[i]=a),o=s[n],r=0;n>r;++r)u[n]-=u[r]*o[r];for(n=l-1;n>=0;--n){for(o=s[n],r=n+1;l>r;++r)u[n]-=u[r]*o[r];u[n]/=o[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,o,a,s,l,u=numeric.dim(e),c=u[0],f=u[1],d=numeric.identity(c),h=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;c>t;++t){for(r=0,o=e[t],a=d[t],n=1;f>n;++n)p(o[r])<p(o[n])&&(r=n);for(h[t]=r,g(a,o[r]),g(o,o[r]),n=0;c>n;++n)if(n!==t){for(s=e[n],l=s[r],i=f-1;-1!==i;--i)s[i]-=o[i]*l;for(s=d[n],i=c-1;-1!==i;--i)s[i]-=a[i]*l}}return{I:d,A:e,P:h}},numeric.__solveLP=function(e,t,n,r,i,o,a){var s,l,u,c,f=numeric.sum,d=(numeric.log,numeric.mul),h=numeric.sub,p=numeric.dot,g=numeric.div,v=numeric.add,m=e.length,y=n.length,x=!1,b=0,w=1,_=(numeric.transpose(t),numeric.svd,numeric.transpose),k=(numeric.leq,Math.sqrt),A=Math.abs,S=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,M=numeric.gt,C=Array(m),T=Array(y),E=(numeric.rep([y],1),numeric.solve),j=h(n,p(t,o)),D=p(e,e);for(u=b;i>u;++u){var O,N;for(O=y-1;-1!==O;--O)T[O]=g(t[O],j[O]);var P=_(T);for(O=m-1;-1!==O;--O)C[O]=f(P[O]);w=.25*A(D/p(e,C));var F=100*k(D/p(C,C));for((!isFinite(w)||w>F)&&(w=F),c=v(e,d(w,C)),l=p(P,T),O=m-1;-1!==O;--O)l[O][O]+=1;N=E(l,g(c,w),!0);var I=g(j,p(t,N)),R=1;for(O=y-1;-1!==O;--O)I[O]<0&&(R=S(R,-.999*I[O]));if(s=h(o,d(N,R)),j=h(n,p(t,s)),!z(M(j,0)))return{solution:o,message:"",iterations:u};if(o=s,r>w)return{solution:s,message:"",iterations:u};if(a){var L=p(e,c),B=p(t,c);for(x=!0,O=y-1;-1!==O;--O)if(L*B[O]<0){x=!1;break}}else x=!(o[m-1]>=0);if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,i){var o,a=e.length,s=n.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),f=numeric.rep([s,1],-1),d=numeric.blockMatrix([[t,f]]),h=n,o=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(c,d,h,r,i,o,!1),g=numeric.clone(p.solution);g.length=a;var v=numeric.inf(l(n,u(t,g)));if(0>v)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var m=numeric.__solveLP(e,t,n,r,i-p.iterations,g,!0);return m.iterations+=p.iterations,m},numeric.solveLP=function(e,t,n,r,i,o,a){if("undefined"==typeof a&&(a=1e3),"undefined"==typeof o&&(o=numeric.epsilon),"undefined"==typeof r)return numeric._solveLP(e,t,n,o,a);var s,l=r.length,u=r[0].length,c=t.length,f=numeric.echelonize(r),d=numeric.rep([u],0),h=f.P,p=[];for(s=h.length-1;-1!==s;--s)d[h[s]]=1;for(s=u-1;-1!==s;--s)0===d[s]&&p.push(s);var g=numeric.getRange,v=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=g(r,v,p),x=g(t,m,h),b=g(t,m,p),w=numeric.dot,_=numeric.sub,k=w(x,f.I),A=_(b,w(k,y)),S=_(n,w(k,i)),z=Array(h.length),M=Array(p.length);for(s=h.length-1;-1!==s;--s)z[s]=e[h[s]];for(s=p.length-1;-1!==s;--s)M[s]=e[p[s]];var C=_(M,w(z,w(f.I,y))),T=numeric._solveLP(C,A,S,o,a),E=T.solution;if(E!==E)return T;var j=w(f.I,_(i,w(y,E))),D=Array(e.length);for(s=h.length-1;-1!==s;--s)D[h[s]]=j[s];for(s=p.length-1;-1!==s;--s)D[p[s]]=E[s];return{solution:D,message:T.message,iterations:T.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+s[a]+"\n")}e instanceof String&&e.split("\n");var n,r,i,o,a=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=e.length,u=0,c={},f=[],d=0,h={},p=0,g=[],v=[],m=[];for(n=0;l>n;++n){i=e[n];var y=i.match(/\S*/g),x=[];for(r=0;r<y.length;++r)""!==y[r]&&x.push(y[r]);if(0!==x.length){for(r=0;r<s.length&&i.substr(0,s[r].length)!==s[r];++r);if(r<s.length){if(a=r,1===r&&(o=x[1]),6===r)return{name:o,c:g,A:numeric.transpose(v),b:m,rows:c,vars:h}}else switch(a){case 0:case 1:t("Unexpected line");case 2:switch(x[0]){case"N":0===u?u=x[1]:t("Two or more N rows");break;case"L":c[x[1]]=d,f[d]=1,m[d]=0,++d;break;case"G":c[x[1]]=d,f[d]=-1,m[d]=0,++d;break;case"E":c[x[1]]=d,f[d]=0,m[d]=0,++d;break;default:t("Parse error "+numeric.prettyPrint(x))}break;case 3:h.hasOwnProperty(x[0])||(h[x[0]]=p,g[p]=0,v[p]=numeric.rep([d],0),++p);var b=h[x[0]];for(r=1;r<x.length;r+=2)if(x[r]!==u){var w=c[x[r]];v[b][w]=(f[w]<0?-1:1)*parseFloat(x[r+1])}else g[b]=parseFloat(x[r+1]);break;case 4:for(r=1;r<x.length;r+=2)m[c[x[r]]]=(f[c[x[r]]]<0?-1:1)*parseFloat(x[r+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,o,a){function s(e){var t,r,i=this,o=e.length,a=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);n>a;)i.S[a]=a++;for(a=0;n>a;a++)t=i.S[a],s=c(s+t+e[a%o]),r=i.S[s],i.S[a]=r,i.S[s]=t;i.g=function(e){var t=i.S,r=c(i.i+1),o=t[r],a=c(i.j+o),s=t[a];t[r]=s,t[a]=o;for(var l=t[c(o+s)];--e;)r=c(r+1),o=t[r],a=c(a+o),s=t[a],t[r]=s,t[a]=o,l=l*n+t[c(o+s)];return i.i=r,i.j=a,l},i.g(n)}function l(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(l(e[r],t-1))}catch(o){}return n.length?n:e+("string"!=i?"\0":"")}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[c(r)]=c((n^=19*t[c(r)])+e.charCodeAt(r));e="";for(r in t)e+=String.fromCharCode(t[r]);return e}function c(e){return e&n-1}t.seedrandom=function(c,f){var d,h=[];return c=u(l(f?[c,e]:arguments.length?c:[(new Date).getTime(),e,window],3),h),d=new s(h),u(d.S,e),t.random=function(){for(var e=d.g(r),t=a,s=0;i>e;)e=(e+s)*n,t*=n,s=d.g(1);for(;e>=o;)e/=2,t/=2,s>>>=1;return(e+s)/t},c},a=t.pow(n,r),i=t.pow(2,i),o=2*i,u(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;i>n;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;i>t;t++)r[t-1]=n(e[t]);return r}function r(e,t,n){var r,i,o,a,s;for(o=1;n>=o;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],r=1;o>r;r+=1)e[r][o]=s*e[r][o];if(a=o+1,a>n)break;for(i=a;n>=i;i+=1)for(s=e[o][i],e[o][i]=0,r=1;o>=r;r+=1)e[r][i]=e[r][i]+s*e[r][o]}}function i(e,t,n,r){var i,o,a,s;for(o=1;n>=o;o+=1){for(s=0,i=1;o>i;i+=1)s+=e[i][o]*r[i];r[o]=(r[o]-s)/e[o][o]}for(a=1;n>=a;a+=1)for(o=n+1-a,r[o]=r[o]/e[o][o],s=-r[o],i=1;o>i;i+=1)r[i]=r[i]+s*e[i][o]}function o(e,t,n,r){var i,o,a,s,l,u;for(o=1;n>=o;o+=1){if(r[1]=o,u=0,a=o-1,1>a){if(u=e[o][o]-u,0>=u)break;e[o][o]=Math.sqrt(u)}else{for(s=1;a>=s;s+=1){for(l=e[s][o],i=1;s>i;i+=1)l-=e[i][o]*e[i][s];l/=e[s][s],e[s][o]=l,u+=l*l}if(u=e[o][o]-u,0>=u)break;e[o][o]=Math.sqrt(u)}r[1]=0}}function a(e,t,n,a,s,l,u,c,f,d,h,p,g,v,m,y){function x(){for(v[1]=v[1]+1,z=O,A=1;d>=A;A+=1){for(z+=1,L=-c[A],S=1;a>=S;S+=1)L+=u[S][A]*s[S];if(Math.abs(L)<W&&(L=0),A>h)m[z]=L;else if(m[z]=-Math.abs(L),L>0){for(S=1;a>=S;S+=1)u[S][A]=-u[S][A];c[A]=-c[A]}}for(A=1;g>=A;A+=1)m[O+p[A]]=0;for(P=0,R=0,A=1;d>=A;A+=1)m[O+A]<R*m[I+A]&&(P=A,R=m[O+A]/m[I+A]);return 0===P?999:0}function b(){for(A=1;a>=A;A+=1){for(L=0,S=1;a>=S;S+=1)L+=e[S][A]*u[S][P];m[A]=L}for(M=E,A=1;a>=A;A+=1)m[M+A]=0;for(S=g+1;a>=S;S+=1)for(A=1;a>=A;A+=1)m[M+A]=m[M+A]+e[A][S]*m[S];for(H=!0,A=g;A>=1;A-=1){for(L=m[A],z=D+A*(A+3)/2,M=z-A,S=A+1;g>=S;S+=1)L-=m[z]*m[j+S],z+=S;if(L/=m[M],m[j+A]=L,p[A]<h)break;if(0>L)break;H=!1,T=A}if(!H)for(B=m[N+T]/m[j+T],A=1;g>=A&&!(p[A]<h)&&!(m[j+A]<0);A+=1)R=m[N+A]/m[j+A],B>R&&(B=R,T=A);for(L=0,A=E+1;E+a>=A;A+=1)L+=m[A]*m[A];if(Math.abs(L)<=W){if(H)return y[1]=1,999;for(A=1;g>=A;A+=1)m[N+A]=m[N+A]-B*m[j+A];return m[N+g+1]=m[N+g+1]+B,700}for(L=0,A=1;a>=A;A+=1)L+=m[E+A]*u[A][P];for(q=-m[O+P]/L,Y=!0,H||q>B&&(q=B,Y=!1),A=1;a>=A;A+=1)s[A]=s[A]+q*m[E+A],Math.abs(s[A])<W&&(s[A]=0);for(l[1]=l[1]+q*L*(q/2+m[N+g+1]),A=1;g>=A;A+=1)m[N+A]=m[N+A]-q*m[j+A];if(m[N+g+1]=m[N+g+1]+q,!Y){for(L=-c[P],S=1;a>=S;S+=1)L+=s[S]*u[S][P];if(P>h)m[O+P]=L;else if(m[O+P]=-Math.abs(L),L>0){for(S=1;a>=S;S+=1)u[S][P]=-u[S][P];c[P]=-c[P]}return 700}for(g+=1,p[g]=P,z=D+(g-1)*g/2+1,A=1;g-1>=A;A+=1)m[z]=m[A],z+=1;if(g===a)m[z]=m[a];else{for(A=a;A>=g+1&&0!==m[A]&&(U=Math.max(Math.abs(m[A-1]),Math.abs(m[A])),V=Math.min(Math.abs(m[A-1]),Math.abs(m[A])),R=m[A-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[A-1]/R,V=m[A]/R,1!==U);A-=1)if(0===U)for(m[A-1]=V*R,S=1;a>=S;S+=1)R=e[S][A-1],e[S][A-1]=e[S][A],e[S][A]=R;else for(m[A-1]=R,$=V/(1+U),S=1;a>=S;S+=1)R=U*e[S][A-1]+V*e[S][A],e[S][A]=$*(e[S][A-1]+R)-e[S][A],e[S][A-1]=R;m[z]=m[g]}return 0}function w(){if(z=D+T*(T+1)/2+1,M=z+T,0===m[M])return 798;if(U=Math.max(Math.abs(m[M-1]),Math.abs(m[M])),V=Math.min(Math.abs(m[M-1]),Math.abs(m[M])),R=m[M-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[M-1]/R,V=m[M]/R,1===U)return 798;if(0===U){for(A=T+1;g>=A;A+=1)R=m[M-1],m[M-1]=m[M],m[M]=R,M+=A;for(A=1;a>=A;A+=1)R=e[A][T],e[A][T]=e[A][T+1],e[A][T+1]=R}else{for($=V/(1+U),A=T+1;g>=A;A+=1)R=U*m[M-1]+V*m[M],m[M]=$*(m[M-1]+R)-m[M],m[M-1]=R,M+=A;for(A=1;a>=A;A+=1)R=U*e[A][T]+V*e[A][T+1],e[A][T+1]=$*(e[A][T]+R)-e[A][T+1],e[A][T]=R}return 0}function _(){for(M=z-T,A=1;T>=A;A+=1)m[M]=m[z],z+=1,M+=1;return m[N+T]=m[N+T+1],p[T]=p[T+1],T+=1,g>T?797:0}function k(){return m[N+g]=m[N+g+1],m[N+g+1]=0,p[g]=0,g-=1,v[2]=v[2]+1,0}var A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G;F=Math.min(a,d),z=2*a+F*(F+5)/2+2*d+1,W=1e-60;do W+=W,X=1+.1*W,J=1+.2*W;while(1>=X||1>=J);for(A=1;a>=A;A+=1)m[A]=t[A];for(A=a+1;z>=A;A+=1)m[A]=0;for(A=1;d>=A;A+=1)p[A]=0;if(C=[],0===y[1]){if(o(e,n,a,C),0!==C[1])return void(y[1]=2);i(e,n,a,t),r(e,n,a)}else{for(S=1;a>=S;S+=1)for(s[S]=0,A=1;S>=A;A+=1)s[S]=s[S]+e[A][S]*t[A];for(S=1;a>=S;S+=1)for(t[S]=0,A=S;a>=A;A+=1)t[S]=t[S]+e[S][A]*s[A]}for(l[1]=0,S=1;a>=S;S+=1)for(s[S]=t[S],l[1]=l[1]+m[S]*s[S],m[S]=0,A=S+1;a>=A;A+=1)e[A][S]=0;for(l[1]=-l[1]/2,y[1]=0,E=a,j=E+a,N=j+F,D=N+F+1,O=D+F*(F+1)/2,I=O+d,A=1;d>=A;A+=1){for(L=0,S=1;a>=S;S+=1)L+=u[S][A]*u[S][A];m[I+A]=Math.sqrt(L)}for(g=0,v[1]=0,v[2]=0,G=0;;){if(G=x(),999===G)return;for(;G=b(),0!==G;){if(999===G)return;if(700===G)if(T===g)k();else{for(;w(),G=_(),797===G;);k()}}}}function s(e,r,i,o,s,l){e=t(e),r=t(r),i=t(i);var u,c,f,d,h,p,g=[],v=[],m=[],y=[],x=[];if(s=s||0,l=l?t(l):[void 0,0],o=o?t(o):[],c=e.length-1,f=i[1].length-1,!o)for(u=1;f>=u;u+=1)o[u]=0;for(u=1;f>=u;u+=1)v[u]=0;for(d=0,h=Math.min(c,f),u=1;c>=u;u+=1)m[u]=0;for(g[1]=0,u=1;2*c+h*(h+5)/2+2*f+1>=u;u+=1)y[u]=0;for(u=1;2>=u;u+=1)x[u]=0;return a(e,r,c,c,m,g,i,o,c,f,s,v,d,x,y,l),p="",1===l[1]&&(p="constraints are inconsistent, no solution!"),2===l[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:n(m),value:n(g),unconstrained_solution:n(r),iterations:n(x),iact:n(v),message:p}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,r=numeric.epsilon,i=1e-64/r,o=50,a=0,s=0,l=0,u=0,c=0,f=numeric.clone(e),d=f.length,h=f[0].length;if(h>d)throw"Need more rows than columns";var p=new Array(h),g=new Array(h);for(s=0;h>s;s++)p[s]=g[s]=0;var v=numeric.rep([h,h],0),m=0,y=0,x=0,b=0,w=0,_=0,k=0;for(s=0;h>s;s++){for(p[s]=y,k=0,c=s+1,l=s;d>l;l++)k+=f[l][s]*f[l][s];if(i>=k)y=0;else for(m=f[s][s],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s]=m-y,l=c;h>l;l++){for(k=0,u=s;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(g[s]=y,k=0,l=c;h>l;l++)k+=f[s][l]*f[s][l];if(i>=k)y=0;else{for(m=f[s][s+1],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s+1]=m-y,l=c;h>l;l++)p[l]=f[s][l]/x;for(l=c;d>l;l++){for(k=0,u=c;h>u;u++)k+=f[l][u]*f[s][u];for(u=c;h>u;u++)f[l][u]+=k*p[u]}}w=Math.abs(g[s])+Math.abs(p[s]),w>b&&(b=w)}for(s=h-1;-1!=s;s+=-1){if(0!=y){for(x=y*f[s][s+1],l=c;h>l;l++)v[l][s]=f[s][l]/x;for(l=c;h>l;l++){for(k=0,u=c;h>u;u++)k+=f[s][u]*v[u][l];for(u=c;h>u;u++)v[u][l]+=k*v[u][s]}}for(l=c;h>l;l++)v[s][l]=0,v[l][s]=0;v[s][s]=1,y=p[s],c=s}for(s=h-1;-1!=s;s+=-1){for(c=s+1,y=g[s],l=c;h>l;l++)f[s][l]=0;if(0!=y){for(x=f[s][s]*y,l=c;h>l;l++){for(k=0,u=c;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(l=s;d>l;l++)f[l][s]=f[l][s]/y}else for(l=s;d>l;l++)f[l][s]=0;f[s][s]+=1}for(r*=b,u=h-1;-1!=u;u+=-1)for(var A=0;o>A;A++){var S=!1;for(c=u;-1!=c;c+=-1){if(Math.abs(p[c])<=r){S=!0;break}if(Math.abs(g[c-1])<=r)break}if(!S){a=0,k=1;var z=c-1;for(s=c;u+1>s&&(m=k*p[s],p[s]=a*p[s],!(Math.abs(m)<=r));s++)for(y=g[s],x=t(m,y),g[s]=x,a=y/x,k=-m/x,l=0;d>l;l++)w=f[l][z],_=f[l][s],f[l][z]=w*a+_*k,f[l][s]=-w*k+_*a}if(_=g[u],c==u){if(0>_)for(g[u]=-_,l=0;h>l;l++)v[l][u]=-v[l][u];break}if(A>=o-1)throw"Error: no convergence.";for(b=g[c],w=g[u-1],y=p[u-1],x=p[u],m=((w-_)*(w+_)+(y-x)*(y+x))/(2*x*w),y=t(m,1),m=0>m?((b-_)*(b+_)+x*(w/(m-y)-x))/b:((b-_)*(b+_)+x*(w/(m+y)-x))/b,a=1,k=1,s=c+1;u+1>s;s++){for(y=p[s],w=g[s],x=k*y,y=a*y,_=t(m,x),p[s-1]=_,a=m/_,k=x/_,m=b*a+y*k,y=-b*k+y*a,x=w*k,w*=a,l=0;h>l;l++)b=v[l][s-1],_=v[l][s],v[l][s-1]=b*a+_*k,v[l][s]=-b*k+_*a;for(_=t(m,x),g[s-1]=_,a=m/_,k=x/_,m=a*y+k*w,b=-k*y+a*w,l=0;d>l;l++)w=f[l][s-1],_=f[l][s],f[l][s-1]=w*a+_*k,f[l][s]=-w*k+_*a}p[c]=0,p[u]=m,g[u]=b}for(s=0;s<g.length;s++)g[s]<r&&(g[s]=0);for(s=0;h>s;s++)for(l=s-1;l>=0;l--)if(g[l]<g[s]){for(a=g[l],g[l]=g[s],g[s]=a,u=0;u<f.length;u++)n=f[u][s],f[u][s]=f[u][l],f[u][l]=n;for(u=0;u<v.length;u++)n=v[u][s],v[u][s]=v[u][l],v[u][l]=n;s=l}return{U:f,S:g,V:v}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){!function(){"use strict";function e(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function n(e,t,n){var r=t.x,i=t.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((e.x-r)*o+(e.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=e.x-r,a=e.y-i,o*o+a*a}function r(t,n){for(var r,i=t[0],o=[i],a=1,s=t.length;s>a;a++)r=t[a],e(r,i)>n&&(o.push(r),i=r);return i!==r&&o.push(r),o}function i(e,t){var r,i,o,a,s=e.length,l="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new l(s),c=0,f=s-1,d=[],h=[];for(u[c]=u[f]=1;f;){for(i=0,r=c+1;f>r;r++)o=n(e[r],e[c],e[f]),o>i&&(a=r,i=o);i>t&&(u[a]=1,d.push(c,a,a,f)),f=d.pop(),c=d.pop()}for(r=0;s>r;r++)u[r]&&h.push(e[r]);return h}function o(e,t,n){var o=void 0!==t?t*t:1;return e=n?e:r(e,o),e=i(e,o)}"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof t?t.exports=o:"undefined"!=typeof self?self.simplify=o:window.simplify=o}()},{}],10:[function(e,t,n){"use strict";function r(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}function i(e){var t,n,i;if(Array.isArray(e)){if(t=e.length,0===t)return new r(null,null,0,0);n=e[0].length,i=a(f.mallocDouble(t*(n+1)),[t,n+1]),l(e,i.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var o=e.dtype;o="int8"===o||"int16"===o||"int32"===o?"int32":"uint8"===o||"uint8_clamped"===o||"buffer"===o||"uint16"===o||"uint32"===o?"uint32":"float32"===o?"float32":"float64",i=a(f.malloc(t*(n+1)),[t,n+1]),u.assign(i.hi(t,n),e)}for(var p=0;t>p;++p)i.set(p,n,p);for(var g=c.malloc([t,n],e.dtype),v=f.mallocInt32(t),m=0,y=g.data,x=i.data,b=(h.log2(h.nextPow2(t)),s.compile(i.order,!0,i.dtype)),w=[i];t>m;){var _=w.shift(),k=_,A=0|k.shape[0];if(A>1){var S,z=h.log2(m+1)%n,M=d.root(A);S=b(k,M,function(e,t){return e.get(z)-t.get(z)});for(var C=g.index(m,0),T=S.offset,p=0;n>p;++p)y[C++]=x[T++];v[m]=x[T],m+=1,w.push(k.hi(M)),A>2&&w.push(k.lo(M+1))}else{for(var T=k.offset,C=g.index(m,0),p=0;n>p;++p)y[C+p]=x[T++];v[m]=x[T],m+=1}}return f.free(i.data),new r(g,v,t,n)}function o(e){var t=e.p,n=e.i;if(t){for(var i=t.length,o=f.mallocFloat64(i),s=0;i>s;++s)o[s]=t[s];for(var l=n.length,u=f.mallocInt32(l),s=0;l>s;++s)u[s]=n[s];var c=i/l|0;return new r(a(o,[l,c]),u,l,c)}return new r(null,null,0,e.d)}t.exports=i,t.exports.deserialize=o;var a=e("ndarray"),s=e("ndarray-select"),l=e("ndarray-pack"),u=e("ndarray-ops"),c=e("ndarray-scratch"),f=e("typedarray-pool"),d=e("inorder-tree-layout"),h=e("bit-twiddle"),p=e("./lib/heap.js"),g=r.prototype;g.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},g.range=function(e,t,n){var r=this.length;if(!(1>r)){for(var i=this.dimension,o=0;i>o;++o)if(t[o]<e[o])return;var a,s=this.points,u=this.ids,d=c.malloc([r,2,i]),p=f.mallocInt32(r),g=d.data,v=s.data,m=1,y=0;for(p[0]=0,l(e,d.pick(0,0)),l(t,d.pick(0,1));m>y;){for(var x=p[y],b=h.log2(x+1)%i,w=d.index(y,0,0),_=d.index(y,1,0),k=s.index(x,0),A=!0,o=0;i>o;++o){var S=v[k+o];if(S<g[w+o]||g[_+o]<S){A=!1;break}}if(A&&(a=n(u[x]),void 0!==a))break;var z=v[k+b],M=g[_+b],C=g[w+b];if(z>=C){var T=2*x+1;if(r>T){p[m]=T;for(var E=d.index(m,0,0),o=0;i>o;++o)g[E+o]=g[w+o];for(var j=d.index(m,1,0),o=0;i>o;++o)g[j+o]=g[_+o];g[j+b]=Math.min(M,z),m+=1}}if(M>=z){var D=2*(x+1);if(r>D){p[m]=D;for(var E=d.index(m,0,0),o=0;i>o;++o)g[E+o]=g[w+o];for(var j=d.index(m,1,0),o=0;i>o;++o)g[j+o]=g[_+o];g[E+b]=Math.max(C,z),m+=1}}y+=1}return c.free(d),f.free(p),a}},g.rnn=function(e,t,n){if(!(0>t)){var r=this.length;if(!(1>r)){var i,o=this.dimension,a=this.points,s=this.ids,l=c.malloc([r,o]),u=f.mallocInt32(r),d=l.data,p=a.data,g=1,v=0,m=t*t;u[0]=0;for(var y=0;o>y;++y)l.set(0,y,0);for(;g>v;){for(var x=u[v],b=a.index(x,0),w=0,y=0;o>y;++y)w+=Math.pow(e[y]-p[b+y],2);if(m>=w&&(i=n(s[x]),void 0!==i))break;for(var _=h.log2(x+1)%o,k=0,A=l.index(v,0),y=0;o>y;++y)y!==_&&(k+=d[A+y]);var S=e[_],z=p[b+_],M=d[A+_],C=M,T=M;z>S?T=Math.max(M,Math.pow(z-S,2)):C=Math.max(M,Math.pow(z-S,2));var E=C+k,j=T+k;if(m>=E){var D=2*x+1;if(r>D){u[g]=D;for(var O=l.index(g,0),y=0;o>y;++y)d[O+y]=d[A+y];d[O+_]=C,g+=1}}if(m>=j){var N=2*(x+1);if(r>N){u[g]=N;for(var O=l.index(g,0),y=0;o>y;++y)d[O+y]=d[A+y];d[O+_]=T,g+=1}}v+=1}return c.free(l),f.free(u),i}}},g.nn=function(e,t){var n=this.length;if(1>n)return-1;if("number"==typeof t){if(0>t)return-1}else t=1/0;var r=this.dimension,i=this.points,o=i.data,a=f.mallocFloat64(r),s=new p(n,r+1),l=s.index,u=s.data;l[0]=0;for(var c=0;r>=c;++c)u[c]=0;s.count+=1;for(var d=-1,g=t;s.count>0&&!(u[0]>=g);){for(var v=l[0],m=i.index(v,0),y=0,c=0;r>c;++c)y+=Math.pow(e[c]-o[m+c],2);g>y&&(g=y,d=v);for(var x=h.log2(v+1)%r,b=0,c=0;r>c;++c){var w=u[c+1];c!==x&&(b+=w),a[c]=w}var _=e[x],k=o[m+x],A=a[x],S=A,z=A;k>_?z=Math.max(A,Math.pow(k-_,2)):S=Math.max(A,Math.pow(k-_,2));var M=S+b,C=z+b;if(s.pop(),g>M){var T=2*v+1;if(n>T){var E=s.count;l[E]=T;var j=E*(r+1);u[j]=M;for(var c=1;r>=c;++c)u[j+c]=a[c-1];u[j+x+1]=S,s.push()}}if(g>C){var D=2*(v+1);if(n>D){var E=s.count;l[E]=D;var j=E*(r+1);u[j]=C;for(var c=1;r>=c;++c)u[j+c]=a[c-1];u[j+x+1]=z,s.push()}}}return f.freeFloat64(a),s.dispose(),0>d?-1:this.ids[d]},g.knn=function(e,t,n){if("number"==typeof n){if(0>n)return[]}else n=1/0;var r=this.length;if(1>r)return[];if("number"==typeof t){if(0>=t)return[];t=0|Math.min(t,r)}else t=r;var i=this.ids,o=this.dimension,a=this.points,s=a.data,l=f.mallocFloat64(o),u=new p(t,1),c=u.index,d=u.data,g=new p(r,o+1),v=g.index,m=g.data;v[0]=0;for(var y=0;o>=y;++y)m[y]=0;g.count+=1;for(var x=n;g.count>0&&!(m[0]>=x);){for(var b=v[0],w=a.index(b,0),_=0,y=0;o>y;++y)_+=Math.pow(e[y]-s[w+y],2);if(x>_){u.count>=t&&u.pop();var k=u.count;c[k]=b,d[k]=-_,u.push(),u.count>=t&&(x=-d[0])}for(var A=h.log2(b+1)%o,S=0,y=0;o>y;++y){var z=m[y+1];y!==A&&(S+=z),l[y]=z}var M=e[A],C=s[w+A],T=l[A],E=T,j=T;C>M?j=Math.max(T,Math.pow(C-M,2)):E=Math.max(T,Math.pow(C-M,2));var D=E+S,O=j+S;if(g.pop(),x>D){var N=2*b+1;if(r>N){var P=g.count;v[P]=N;var F=P*(o+1);m[F]=D;for(var y=1;o>=y;++y)m[F+y]=l[y-1];m[F+A+1]=E,g.push()}}if(x>O){var I=2*(b+1);if(r>I){var P=g.count;v[P]=I;var F=P*(o+1);m[F]=O;for(var y=1;o>=y;++y)m[F+y]=l[y-1];m[F+A+1]=j,g.push()}}}f.freeFloat64(l),g.dispose();for(var R=new Array(u.count),i=this.ids,y=u.count-1;y>=0;--y)R[y]=i[c[0]],u.pop();return u.dispose(),R},g.dispose=function(){f.free(this.points.data),f.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":11,"bit-twiddle":12,"inorder-tree-layout":13,ndarray:28,"ndarray-ops":15,"ndarray-pack":20,"ndarray-scratch":26,"ndarray-select":27,"typedarray-pool":32}],11:[function(e,t,n){"use strict";function r(e){return 1&e?e-1>>1:(e>>1)-1}function i(e,t){this.count=0,this.dataSize=t,this.index=o.mallocInt32(e),this.data=o.mallocFloat64(e*t)}t.exports=i;var o=e("typedarray-pool"),a=i.prototype;a.heapSwap=function(e,t){var n=this.data,r=this.index,i=this.dataSize,o=r[e];r[e]=r[t],r[t]=o;for(var a=i*e,s=i*t,l=0;i>l;++l){var u=n[a];n[a]=n[s],n[s]=u,a+=1,s+=1}},a.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),i=n[t*e];e>0;){var o=r(e);if(o>=0){var a=n[t*o];if(a>i){this.heapSwap(e,o),e=o;continue}}break}},a.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,i=n[t*e];;){var o=i,a=2*e+1,s=2*(e+1),l=e;if(r>a){var u=n[t*a];o>u&&(l=a,o=u)}if(r>s){var c=n[t*s];o>c&&(l=s)}if(l===e)break;this.heapSwap(e,l),e=l}},a.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},a.push=function(){this.heapUp(this.count),this.count+=1},a.dispose=function(){o.freeInt32(this.index),o.freeFloat64(this.data)}},{"typedarray-pool":32}],12:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(0>e)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(t>e)},n.max=function(e,t){return e^(e^t)&-(t>e)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var o=new Array(256);!function(e){for(var t=0;256>t;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(o),n.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],13:[function(e,t,n){"use strict";function r(e){var t=(g.nextPow2(e+1)>>>1)-1,n=e-t;return g.nextPow2(n)-1>=t?t:(t>>>1)+n}function i(e){return 0}function o(e){return e-1}function a(e,t){if(0>=e)return 0;var n=r(e);return t>n?a(e-n-1,t-n-1):t===n?g.log2(e):a(n,t)}function s(e,t){return Math.max(t-1,0)}function l(e,t){return Math.min(t+1,e-1)}function u(e,t){if(0>=e)return-1;var n=r(e);if(t>n){var i=u(e-n-1,t-n-1);return 0>i?n:i+n+1}if(t===n)return-1;var i=u(n,t);return 0>i?n:i}function c(e,t){if(0>=e)return 0;var n=r(e);return t>n?c(e-n-1,t-n-1)+n+1:t===n?r(t):c(n,t)}function f(e,t){if(0>=e)return 0;var n=r(e);return t>n?f(e-n-1,t-n-1)+n+1:t===n?r(e-n-1)+n+1:f(n,t)}function d(e,t){return 0===a(e,t)}function h(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i)break;e=i}}return n}function p(e,t){e|=0,t|=0;for(var n=0;e>1;){var i=r(e);if(t>i)n+=i+1,e-=i+1,t-=i+1;else{if(t===i){n+=e-1;break}e=i}}return n}var g=e("bit-twiddle");n.root=r,n.begin=i,n.end=o,n.height=a,n.prev=s,n.next=l,n.parent=u,n.left=c,n.right=f,n.leaf=d,n.lo=h,n.hi=p},{"bit-twiddle":14}],14:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],15:[function(e,t,n){"use strict";function r(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return a({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(i(e))}var a=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in l){var t=l[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];n[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",
thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];n[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":16}],16:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var a=n[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===a){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}var o=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":18}],17:[function(e,t,n){"use strict";function r(e,t,n){var r,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;o>r;++r)u.push(["i",r,"=0"].join(""));for(i=0;a>i;++i)for(r=0;o>r;++r)f=c,c=e[r],0===r?u.push(["d",i,"s",r,"=t",i,"p",c].join("")):u.push(["d",i,"s",r,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.push("var "+u.join(",")),r=o-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;o>r;++r){for(f=c,c=e[r],i=0;a>i;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function i(e,t,n,i){for(var o=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;a>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;o>c;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;a>c;++c){for(var f=["offset"+c],d=e;o>d;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}u.push(r(t,n,i));for(var c=e;o>c;++c)u.push("}");return u.join("\n")}function o(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function a(e,t,n){for(var r=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),d=t.offsetArgs[f];c=d.array,u="+q"+f;case"array":u="p"+c+u;var h="l"+a,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),o.push([p,".set(",u,",",h,")"].join(""))):r=r.replace(l,[p,".get(",u,")"].join("")):r=r.replace(l,[p,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",p,".get(",u,")"].join("")),r=r.replace(l,h),s.lvalue&&o.push([p,".set(",u,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",u,"]"].join("")),r=r.replace(l,h),s.lvalue&&o.push([p,"[",u,"]=",h].join("")));else{for(var g=[s.name],v=[u],m=0;m<Math.abs(t.arrayBlockIndices[c]);m++)g.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(m+1)+"*t"+c+"b"+m);if(l=new RegExp(g.join(""),"g"),u=v.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[p,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+o:t[r]=i.charAt(0)+o,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function l(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)c[f]=t[2*f],l[f]=t[2*f+1];for(var d=[],h=[],p=[],g=[],v=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(p.push(0),g.push(n),d.push(n),h.push(n+e.arrayBlockIndices[f])):(p.push(e.arrayBlockIndices[f]),g.push(e.arrayBlockIndices[f]+n),d.push(0),h.push(e.arrayBlockIndices[f]));for(var m=[],y=0;y<l[f].length;y++)p[f]<=l[f][y]&&l[f][y]<g[f]&&m.push(l[f][y]-p[f]);v.push(m)}for(var x=["SS"],b=["'use strict'"],w=[],y=0;n>y;++y)w.push(["s",y,"=SS[",y,"]"].join(""));for(var f=0;f<e.arrayArgs.length;++f){x.push("a"+f),x.push("t"+f),x.push("p"+f);for(var y=0;n>y;++y)w.push(["t",f,"p",y,"=t",f,"[",p[f]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[f]);++y)w.push(["t",f,"b",y,"=t",f,"[",d[f]+y,"]"].join(""))}for(var f=0;f<e.scalarArgs.length;++f)x.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var _=new Array(n),f=0;n>f;++f)_[f]="0";w.push(["index=[",_.join(","),"]"].join(""))}for(var f=0;f<e.offsetArgs.length;++f){for(var k=e.offsetArgs[f],A=[],y=0;y<k.offset.length;++y)0!==k.offset[y]&&(1===k.offset[y]?A.push(["t",k.array,"p",y].join("")):A.push([k.offset[y],"*t",k.array,"p",y].join("")));0===A.length?w.push("q"+f+"=0"):w.push(["q",f,"=",A.join("+")].join(""))}var S=u([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(S),b.push("var "+w.join(","));for(var f=0;f<e.arrayArgs.length;++f)b.push("p"+f+"|=0");e.pre.body.length>3&&b.push(a(e.pre,e,c));var z=a(e.body,e,c),M=o(v);n>M?b.push(i(M,v[0],e,z)):b.push(r(v[0],e,z)),e.post.body.length>3&&b.push(a(e.post,e,c)),e.debug&&void 0;var C=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",M,s(c)].join(""),T=new Function(["function ",C,"(",x.join(","),"){",b.join("\n"),"} return ",C].join(""));return T()}var u=e("uniq");t.exports=l},{uniq:19}],18:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&void 0;var d=new Function("compile",t.join("\n"));return d(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":17}],19:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;r>a;++a)if(o=i,i=e[a],t(i,o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;n>o;++o,i=r)if(i=r,r=e[o],r!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}function o(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=o},{}],20:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],o=e,a=1;o instanceof Array;)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?r():(t||(t=r(new Float64Array(a),n)),i(t,e),t)}},{"./doConvert.js":21,ndarray:28}],21:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":22}],22:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/thunk.js":24,dup:16}],23:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{dup:17,uniq:25}],24:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{"./compile.js":23,dup:18}],25:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],26:[function(e,t,n){"use strict";function r(e){var t=e.dtype;("generic"===t||"array"===t)&&(t="double");var n=f.malloc(e.size,t),r=u(n,e.shape);return c.assign(r,e),r}function i(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];return u(f.malloc(n,t),e,r,0)}function o(e){"generic"!==e.dtype&&"array"!==e.dtype&&f.free(e.data)}function a(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var o=f.malloc(n,t),i=0;n>i;++i)o[i]=0;return u(o,e,r,0)}function s(e,t){t||(t="double");for(var n=1,r=new Array(e.length),i=e.length-1;i>=0;--i)r[i]=n,n*=e[i];for(var o=f.malloc(n,t),i=0;n>i;++i)o[i]=1;return u(o,e,r,0)}function l(e,t){var n,r;t||(t="double");var i=1,o=new Array(e.length);for(n=e.length-1;n>=0;--n)o[n]=i,i*=e[n];var a=f.malloc(i,t);for(n=0;i>n;++n)a[n]=0;var s=1/0,l=0;for(n=e.length-1;n>=0;n--)l+=o[n],s=Math.min(s,e[n]);for(n=0,r=0;s>n;n++,r+=l)a[r]=1;return u(a,e,o,0)}var u=e("ndarray"),c=e("ndarray-ops"),f=e("typedarray-pool");n.clone=r,n.malloc=i,n.free=o,n.zeros=a,n.ones=s,n.eye=l},{ndarray:28,"ndarray-ops":15,"typedarray-pool":32}],27:[function(e,t,n){"use strict";function r(e){return"s"+e}function i(e){return"t"+e}function o(e){return"u"+e}function a(e){return"v"+e}function s(e){return"i"+e}function l(e){return"p"+e}function u(e){return"x"+e}function c(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}function f(e,t,n){function f(n,o,c){if(t)z.push(l(0),".offset=",y,"+",i(e[0]),"*(",o,");",l(1),".offset=",y,"+",i(e[0]),"*(",c,");",n,"=",v,"(",l(0),",",l(1),");");else{z.push(u(0),"=",y,"+",i(0),"*(",o,");",u(1),"=",y,"+",i(0),"*(",c,");"),h>1&&z.push("_cmp:");for(var f=h-1;f>0;--f)z.push("for(",s(f),"=0;",s(f),"<",r(f),";",s(f),"++){");A?z.push(n,"=",m,".get(",u(0),")-",m,".get(",u(1),");"):z.push(n,"=",m,"[",u(0),"]-",m,"[",u(1),"];"),h>1&&z.push("if(",n,")break _cmp;");for(var f=1;h>f;++f)z.push(u(0),"+=",a(f),";",u(1),"+=",a(f),"}")}}function d(t,n){z.push(u(0),"=",y,"+",i(e[0]),"*(",t,");",u(1),"=",y,"+",i(e[0]),"*(",n,");");for(var a=h-1;a>0;--a)z.push("for(",s(e[a]),"=0;",s(e[a]),"<",r(e[a]),";",s(e[a]),"++){");A?z.push(b,"=",m,".get(",u(0),");",m,".set(",u(0),",",m,".get(",u(1),"));",m,".set(",u(1),",",b,");"):z.push(b,"=",m,"[",u(0),"];",m,"[",u(0),"]=",m,"[",u(1),"];",m,"[",u(1),"]=",b,";");for(var a=1;h>a;++a)z.push(u(0),"+=",o(e[a]),";",u(1),"+=",o(e[a]),"}")}e=c(e);var h=e.length,A="generic"===n,S="ndSelect"+n+e.join("_")+"_"+(t?"cmp":"lex"),z=[],M=[p,g];t&&M.push(v);for(var C=[m+"="+p+".data",y+"="+p+".offset|0",x+"=Math.random",b],T=0;2>T;++T)C.push(u(T)+"=0");for(var T=0;h>T;++T)C.push(r(T)+"="+p+".shape["+T+"]|0",i(T)+"="+p+".stride["+T+"]|0",s(T)+"=0");for(var T=1;h>T;++T)T>1?C.push(a(T)+"=("+i(T)+"-"+r(T-1)+"*"+i(T-1)+")|0",o(e[T])+"=("+i(e[T])+"-"+r(e[T-1])+"*"+i(e[T-1])+")|0"):C.push(a(T)+"="+i(T),o(e[T])+"="+i(e[T]));if(t)for(var T=0;2>T;++T)C.push(l(T)+"="+p+".pick(0)");C.push(k+"=0",w+"=0",_+"="+r(e[0])+"-1"),z.push("while(",w,"<",_,"){",k,"=(",x,"()*(",_,"-",w,"+1)+",w,")|0;"),d(k,_),z.push(k,"=",w,";","for(",s(0),"=",w,";",s(0),"<",_,";",s(0),"++){"),f(b,s(0),_),z.push("if(",b,"<0){"),d(k,s(0)),z.push(k,"++;"),z.push("}}"),d(k,_),z.push("if(",k,"===",g,"){",w,"=",k,";","break;","}else if(",g,"<",k,"){",_,"=",k,"-1;","}else{",w,"=",k,"+1;","}","}"),t?z.push(l(0),".offset=",y,"+",w,"*",i(0),";","return ",l(0),";"):z.push("return ",p,".pick(",w,");");var E=["'use strict';function ",S,"(",M,"){","var ",C.join(),";",z.join(""),"};return ",S].join(""),j=new Function(E);return j()}function d(e,t,n){var r=e.join()+t+n,i=A[r];return i?i:A[r]=f(e,t,n)}function h(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||0>t)return null;var r=!!n,i=d(e.order,r,e.dtype);return r?i(e,t,n):i(e,t)}t.exports=h,t.exports.compile=d;var p="a",g="K",v="C",m="d",y="o",x="R",b="T",w="L",_="H",k="X",A={}},{}],28:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function o(e,t){var n=["View",t,"d",e].join("");0>t&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(o);return a()}if(0===t){var o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",o);return a(f[e][0])}var o=["'use strict'"],s=l(t),u=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),d=s.map(function(e){return"b"+e}).join(","),h=s.map(function(e){return"c"+e}).join(",");o.push("function "+n+"(a,"+d+","+h+",d){this.data=a","this.shape=["+d+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>t?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),r?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),r?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");o.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");o.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var m=new Array(t),y=new Array(t),v=0;t>v;++v)m[v]="a[i"+v+"]",y[v]="b[i"+v+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var v=0;t>v;++v)o.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[e],i)}function a(e){if(u(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,n,r){if(void 0===e){var i=f.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var l=s-1,u=1;l>=0;--l)n[l]=u,u*=t[l]}if(void 0===r){r=0;for(var l=0;s>l;++l)n[l]<0&&(r-=(t[l]-1)*n[l])}for(var c=a(e),d=f[c];d.length<=s+1;)d.push(o(c,d.length-1));var i=d[s+1];return i(e,t,n,r)}var l=e("iota-array"),u=e("is-buffer"),c="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":29,"is-buffer":30}],29:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=n;return t}t.exports=r},{}],30:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],31:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(0>=i)return[];var o,a=new Array(i);if(n===e.length-1)for(o=0;i>o;++o)a[o]=t;else for(o=0;i>o;++o)a[o]=r(e,t,n+1);return a}function i(e,t){var n,r;for(n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function o(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=o},{}],32:[function(e,t,n){(function(t,r){"use strict";function i(e){if(e){var t=e.length||e.byteLength,n=y.log2(t);_[n].push(e)}}function o(e){i(e.buffer)}function a(e){var e=y.nextPow2(e),t=y.log2(e),n=_[t];return n.length>0?n.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(a(e),0,e)}function l(e){return new Uint16Array(a(2*e),0,e)}function u(e){return new Uint32Array(a(4*e),0,e)}function c(e){return new Int8Array(a(e),0,e)}function f(e){return new Int16Array(a(2*e),0,e)}function d(e){return new Int32Array(a(4*e),0,e)}function h(e){return new Float32Array(a(4*e),0,e)}function p(e){return new Float64Array(a(8*e),0,e)}function g(e){return b?new Uint8ClampedArray(a(e),0,e):s(e)}function v(e){return new DataView(a(e),0,e)}function m(e){e=y.nextPow2(e);var t=y.log2(e),n=k[t];return n.length>0?n.pop():new r(e)}var y=e("bit-twiddle"),x=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=x([32,0])),w.BUFFER||(w.BUFFER=x([32,0]));var _=w.DATA,k=w.BUFFER;n.free=function(e){if(r.isBuffer(e))k[y.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|y.log2(t);_[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=i,n.freeBuffer=function(e){k[y.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return s(e);case"uint16":return l(e);case"uint32":return u(e);case"int8":return c(e);case"int16":return f(e);case"int32":return d(e);case"float":case"float32":return h(e);case"double":case"float64":return p(e);case"uint8_clamped":return g(e);case"buffer":return m(e);case"data":case"dataview":return v(e);default:return null}return null},n.mallocArrayBuffer=a,n.mallocUint8=s,n.mallocUint16=l,n.mallocUint32=u,n.mallocInt8=c,n.mallocInt16=f,n.mallocInt32=d,n.mallocFloat32=n.mallocFloat=h,n.mallocFloat64=n.mallocDouble=p,n.mallocUint8Clamped=g,n.mallocDataView=v,n.mallocBuffer=m,n.clearCache=function(){for(var e=0;32>e;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,_[e].length=0,k[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":12,buffer:1,dup:31}],33:[function(e,t,n){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(e.topojson={})}(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+a,e[1]=(r+=e[1])*o+s}}function r(e){if(!e)return t;var n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var l=(e[0]-a)/i|0,u=(e[1]-s)/o|0;e[0]=l-n,e[1]=u-r,n=l,r=u}}function i(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function o(e,t){for(var n=0,r=e.length;r>n;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function a(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:l(e,t)};return null==t.id&&delete n.id,n}function l(e,t){function r(e,t){t.length&&t.pop();for(var n,r=f[0>e?~e:e],o=0,a=r.length;a>o;++o)t.push(n=r[o].slice()),c(n,o);0>e&&i(t,a)}function o(e){return e=e.slice(),c(e,0),e}function a(e){for(var t=[],n=0,i=e.length;i>n;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0].slice());return t}function l(e){return e.map(s)}function u(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(u)}:t in d?{type:t,
coordinates:d[t](e)}:null}var c=n(e.transform),f=e.arcs,d={Point:function(e){return o(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(o)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return u(t)}function u(e,t){function n(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],0>t?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[0>e?~e:e]=1}),s.push(r)}}var i={},o={},a={},s=[],l=-1;return t.forEach(function(n,r){var i,o=e.arcs[0>n?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++l],t[l]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],l=i[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=l,r=o[l]){delete o[r.start];var u=r===t?t:t.concat(r);o[u.start=t.start]=a[u.end=r.end]=u}else o[t.start]=a[t.end]=t;else if(t=o[l])if(delete o[t.start],t.unshift(e),t.start=s,r=a[s]){delete a[r.end];var c=r===t?t:r.concat(t);o[c.start=r.start]=a[c.end=t.end]=c}else o[t.start]=a[t.end]=t;else t=[e],o[t.start=s]=a[t.end=l]=t}),r(a,o),r(o,a),t.forEach(function(e){i[0>e?~e:e]||s.push([e])}),s}function c(e){return l(e,f.apply(this,arguments))}function f(e,t,n){function r(e){var t=0>e?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function i(e){e.forEach(r)}function o(e){e.forEach(i)}function a(e){"GeometryCollection"===e.type?e.geometries.forEach(a):e.type in f&&(l=e,f[e.type](e.arcs))}var s=[];if(arguments.length>1){var l,c=[],f={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};a(t),c.forEach(arguments.length<3?function(e){s.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&s.push(e[0].i)})}else for(var d=0,h=e.arcs.length;h>d;++d)s.push(d);return{type:"MultiLineString",arcs:u(e,s)}}function d(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function h(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return o/2}function p(e){return l(e,g.apply(this,arguments))}function g(e,t){function n(e){e.forEach(function(t){t.forEach(function(t){(i[t=0>t?~t:t]||(i[t]=[])).push(e)})}),o.push(e)}function r(t){return h(l(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var i={},o=[],a=[];return t.forEach(function(e){"Polygon"===e.type?n(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(n)}),o.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,a.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[0>e?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),o.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:a.map(function(t){var n,o=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[0>e?~e:e].length<2&&o.push(e)})})}),o=u(e,o),(n=o.length)>1)for(var a,s=r(t[0][0]),l=0;n>l;++l)if(s===r(o[l])){a=o[0],o[0]=o[l],o[l]=a;break}return o})}}function v(e){function t(e,t){e.forEach(function(e){0>e&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in s&&s[e.type](e.arcs,t)}var i={},a=e.map(function(){return[]}),s={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var l in i)for(var u=i[l],c=u.length,f=0;c>f;++f)for(var d=f+1;c>d;++d){var h,p=u[f],g=u[d];(h=a[p])[l=o(h,g)]!==g&&h.splice(l,0,g),(h=a[g])[l=o(h,p)]!==p&&h.splice(l,0,p)}return a}function m(e,t){return e[1][2]-t[1][2]}function y(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,i=r[n];if(m(e,i)>=0)break;r[i._=t]=i,r[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,o=n-1,a=t,s=r[a];if(i>o&&m(r[o],s)<0&&(s=r[a=o]),i>n&&m(r[n],s)<0&&(s=r[a=n]),a===t)break;r[s._=t]=s,r[e._=t=a]=e}}var n={},r=[],i=0;return n.push=function(t){return e(r[t._=i]=t,i++),i},n.pop=function(){if(!(0>=i)){var e,n=r[0];return--i>0&&(e=r[i],t(r[e._=0]=e,0)),n}},n.remove=function(n){var o,a=n._;if(r[a]===n)return a!==--i&&(o=r[i],(m(o,n)<0?e:t)(r[o._=a]=o,a)),a},n}function x(e,t){function i(e){s.remove(e),e[1][2]=t(e),s.push(e)}var o=n(e.transform),a=r(e.transform),s=y();return t||(t=d),e.arcs.forEach(function(e){var n,r,l,u,c=[],f=0;for(r=0,l=e.length;l>r;++r)u=e[r],o(e[r]=[u[0],u[1],1/0],r);for(r=1,l=e.length-1;l>r;++r)n=e.slice(r-1,r+2),n[1][2]=t(n),c.push(n),s.push(n);for(r=0,l=c.length;l>r;++r)n=c[r],n.previous=c[r-1],n.next=c[r+1];for(;n=s.pop();){var d=n.previous,h=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],d&&(d.next=h,d[2]=n[2],i(d)),h&&(h.previous=d,h[0]=n[0],i(h))}e.forEach(a)}),e}var b="1.6.24";e.version=b,e.mesh=c,e.meshArcs=f,e.merge=p,e.mergeArcs=g,e.feature=a,e.neighbors=v,e.presimplify=x})},{}],34:[function(e,t,n){var r;r=e("../color/sort.coffee"),t.exports=function(e,t,n,i,o,a,s){var l,u,c;for(i||(i="asc"),o instanceof Array||(o=[o]),n instanceof Array||(n=[n]),a&&void 0!==s&&"number"!=typeof s&&(s=a.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],e=a&&e.d3plus&&e.d3plus.sortKeys?e.d3plus.sortKeys[u]:e[u],t=a&&t.d3plus&&t.d3plus.sortKeys?t.d3plus.sortKeys[u]:t[u],c=a&&o.indexOf(u)>=0?r(e,t):t>e?-1:1,0===c&&l!==n.length-1);)l++;return"asc"===i?c:-c}},{"../color/sort.coffee":51}],35:[function(e,t,n){t.exports=function(e,t){var n;return e instanceof Array&&(n=void 0===t||null===t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(n)>=0)}},{}],36:[function(e,t,n){var r,i;r=e("./comparator.coffee"),i=e("../core/fetch/sort.coffee"),t.exports=function(e,t,n,o,a,s){var l,u,c,f;if(!e||e.length<=1)return e||[];if(a)for(t||(t=a.order.value||a.size.value||a.id.value),n||(n=a.order.sort.value),o||(o=a.color.value||[]),c=0,f=e.length;f>c;c++)l=e[c],l.d3plus||(l.d3plus={}),u="d3plus"in l&&"d3plus"in l.d3plus?l.d3plus:l,l.d3plus.sortKeys=i(a,u,t,o,s);return e.sort(function(e,i){return r(e,i,t,n,o,a,s)})}},{"../core/fetch/sort.coffee":67,"./comparator.coffee":34}],37:[function(e,t,n){t.exports=function(e,t){return void 0===t?e:t===!1?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}},{}],38:[function(e,t,n){var r;r=function(e){var t,n,i,o;if(o=r.tested,e in o)return o[e];for(n=0,i=!1;n<document.styleSheets.length;){if(t=document.styleSheets[n],t.href&&t.href.indexOf(e)>=0){i=!0;break}n++}return i},r.tested={},t.exports=r},{}],39:[function(e,t,n){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],40:[function(e,t,n){var r,i;r=e("./ie.js"),i=e("./touch.coffee"),i?t.exports={click:"click",down:"touchstart",up:"touchend",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}:t.exports={click:"click",down:"mousedown",up:"mouseup",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":39,"./touch.coffee":45}],41:[function(e,t,n){var r;r=function(){var e;return e="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",r=function(){return e},e},t.exports=r},{}],42:[function(e,t,n){t.exports="rtl"===d3.select("html").attr("dir")},{}],43:[function(e,t,n){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],44:[function(e,t,n){var r;r=function(){var e,t,n,i,o;return e=document.createElement("p"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="scroll",o=e.offsetWidth,i===o&&(o=t.clientWidth),document.body.removeChild(t),n=i-o,r=function(){return n},n},t.exports=r},{}],45:[function(e,t,n){t.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},{}],46:[function(e,t,n){t.exports=function(e){var t;return t=d3.hsl(e),t.l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.toString()}},{}],47:[function(e,t,n){t.exports=function(e,t){var n;return void 0===t&&(t=.5),n=d3.hsl(e),t=(1-n.l)*t,n.l+=t,n.s-=t,n.toString()}},{}],48:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a;return n||(n=1),r||(r=1),e=d3.rgb(e),t=d3.rgb(t),a=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),o=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),i=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(a,o,i).toString()}},{}],49:[function(e,t,n){var r;r=e("./scale.coffee"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}},{"./scale.coffee":50}],50:[function(e,t,n){t.exports=d3.scale.ordinal().range(["#b22200","#282F6B","#EACE3F","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])},{}],51:[function(e,t,n){t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),e=0===n.s?361:n.h,t=0===r.s?361:r.h,e===t?n.l-r.l:e-t}},{}],52:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;return i=d3.rgb(e),r=i.r,n=i.g,t=i.b,o=(299*r+587*n+114*t)/1e3,o>=128?"#444444":"#f7f7f7"}},{}],53:[function(e,t,n){t.exports=function(e){var t,n,r;return e+="",e=e.replace(RegExp(" ","g"),""),0===e.indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),n=d3.rgb(e).toString(),t=["black","#000","#000000","0%","0,0,0"],r=t.indexOf(e)>=0,"#000000"!==n||r}},{}],54:[function(e,t,n){var r,i,o;r=e("../../client/ie.js"),o=e("./wiki.coffee"),i=function(e,t,n){n=n||"",r||"undefined"!=typeof InstallTrigger?void 0:(0===e.indexOf("group"),void 0)},i.comment=function(e){this("log",e,"color:#aaa;")},i.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},i.group=function(e){this("group",e,"color:#888;")},i.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},i.groupEnd=function(){},i.log=function(e){this("log",e,"color:#444444;")},i.stack=function(){var e,t,n,i,o,a,s;r||(e=new Error,e.stack&&(a=e.stack.split("\n"),a=a.filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3plus.js:")<0&&e.indexOf("d3plus.min.js:")<0}),a.length&&a[0].length&&(o=window.chrome?"at ":"@",s=a[0],s.indexOf(o)>=0&&(s=s.split(o)[1]),a=s.split(":"),3===a.length&&a.pop(),t=a.pop(),i=a.join(":").split("/"),i=i[i.length-1],n="line "+t+" of "+i+": "+s,this("log",n,"color:#D74B03;"))))},i.time=function(e){},i.timeEnd=function(e){},i.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},i.wiki=function(e){e&&(e in o&&(e=d3plus.repo+"wiki/"+o[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=i},{"../../client/ie.js":39,"./wiki.coffee":55}],55:[function(e,t,n){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],56:[function(e,t,n){var r=e("../../util/buckets.coffee"),i=e("../fetch/value.coffee"),o=e("../console/print.coffee");t.exports=function(e){e.dev.value&&o.time("getting color data range");var t=[];if(e.data.pool.forEach(function(n){var r=parseFloat(i(e,n,e.color.value));"number"==typeof r&&!isNaN(r)&&t.indexOf(r)<0&&t.push(r)}),e.dev.value&&o.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&o.time("calculating color scale"),t=d3.extent(t),t[0]<0&&t[1]>0){var n=e.color.range;3==n.length&&(t.push(t[1]),t[1]=0)}else if(t[1]>0&&t[0]>=0){var n=e.color.heatmap;t=r(t,n.length)}else{var n=e.color.range.slice(0);t[0]<0?n.pop():n.shift()}e.color.valueScale=d3.scale.sqrt().domain(t).range(n).interpolate(d3.interpolateRgb),e.dev.value&&o.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.coffee":206,"../console/print.coffee":54,"../fetch/value.coffee":69}],57:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../console/print.coffee"),o=e("../../object/validate.coffee");t.exports=function(e,t){e.dev.value&&i.time("filtering data");var n=d3.keys(e.data.keys||{});"attrs"in e&&(n=n.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){var n=r(e,t,e.id.value);return null!==n});var a=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(i){n.indexOf(e[i].value)>=0&&a.indexOf(i)>=0&&(t=t.filter(function(t){var n=r(e,t,e[i].value);return"y"===i&&e.y2.value&&null===n?n=r(e,t,e.y2.value):"x"===i&&e.x2.value&&null===n&&(n=r(e,t,e.x2.value)),"size"===i?"number"==typeof n:null!==n}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].length?e.data[s].forEach(function(n){function a(t){var r=e[n][s].value,i=!1;return r.forEach(function(e){"function"==typeof e?i=e(t):e===t&&(i=!0)}),"solo"===s?i:!i}function l(t,i){if(!i&&e[n].nesting){var s=e[n].nesting;o(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=t.filter(function(t){return a(r(e,t,s[l]))});u.length&&(t=u)}}else t=t.filter(function(t){return a(r(e,t,e[n].value))});return t}t=l(t),"id"===n&&("nodes"in e&&e.nodes.value&&(e.dev.value&&i.time("filtering nodes"),e.nodes.restricted=l(e.nodes.value),e.dev.value&&i.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&i.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){var n=l([t[e.edges.source],t[e.edges.target]]);return 2===n.length}),e.dev.value&&i.timeEnd("filtering edges")))}):"nodes"in e&&(e.nodes.restricted=void 0,e.edges.restricted=void 0),e.dev.value&&i.timeEnd("filtering data"),t}},{"../../object/validate.coffee":174,"../console/print.coffee":54,"../fetch/value.coffee":69}],58:[function(e,t,n){var r=e("./nest.js"),i=e("../fetch/value.coffee"),o=e("../console/print.coffee"),a=e("../../util/uniques.coffee");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",o.time(t)),e.data.time.values=a(e.data.value,e.time.value,i,e),e.data.time.values.sort(function(e,t){return e-t});var n=[];e.data.time.values.forEach(function(t,r){if(0!==r){var i=e.data.time.values[r-1];n.push(t-i),r===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),n=d3.min(n),e.data.time.step=n;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];e.data.time.periods=s;var u=function(t,n,r){return e.data.time.stepDivider||(arr=l.slice(0,r),arr.length?e.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):e.data.time.stepDivider=1),Math.round(Math.floor(n-t)/e.data.time.stepDivider)},c=e.data.time.total;s.forEach(function(t,r){var i="Date"===t?28:l[r];if(!e.data.time.stepType&&(r===s.length-1||Math.round(n)<i)){e.data.time.stepType=t;var o=e.data.time.values[0],a=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=u(o,a,r)}!e.data.time.totalType&&(r===s.length-1||Math.round(c)<i)&&(e.data.time.totalType=t),n/=i,c/=i}),e.data.time.values.forEach(function(t,n){if(0!==n){var r=e.data.time.values[0];e.data.time.dataSteps.push(u(r,t,s.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var f=e.time.format.value,d=e.format.locale.value,h=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=h;var p=function(e,t,n){if(e===t)return n&&d.timeFormat[e+"Small"]?d.timeFormat[e+"Small"]:d.timeFormat[e];if(s.indexOf(e)>=4||s.indexOf(t)<=3)return d.timeFormat[t+"-"+e];var r;return r="Date"===t?d.timeFormat[t]:d.timeFormat[t+"-Date"],"Hours"===e?r+" "+d.timeFormat[e]:r+" "+d.timeFormat["Hours-"+e]};if(e.data.time.getFormat=p,f)"string"==typeof f?e.data.time.format=d3.locale(d.format).timeFormat(f):"function"==typeof f?e.data.time.format=f:f instanceof Array&&(e.data.time.format=d3.locale(d.format).timeFormat.multi(f)),e.data.time.multiFormat=e.data.time.format;else{for(var g=e.data.time.stepType,v=e.data.time.totalType,m=[],y=s.indexOf(g);y<=s.indexOf(v);y++){var x=y-1<s.indexOf(g)?s[y]:s[y-1],b=s[y]===x&&g!==v,w=p(x,s[y],b);m.push([w,h[y]])}e.data.time.format=d3.locale(d.format).timeFormat(p(g,v)),m.length>1?(m[m.length-1][1]=function(e){return!0},e.data.time.multiFormat=d3.locale(d.format).timeFormat.multi(m)):e.data.time.multiFormat=e.data.time.format}e.data.time.ticks=[];for(var _=d3.min(e.data.time.values),k=d3.max(e.data.time.values),A=0;A<=e.data.time.stepIntervals;A++){var S=new Date(_);S["set"+e.data.time.stepType](S["get"+e.data.time.stepType]()+A),k>=S&&e.data.time.ticks.push(S)}e.dev.value&&o.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",o.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,n){var i=e.id.nesting.slice(0,n+1);e.data.nested.all[t]=r(e,e.data.value,i)});else{var z=e.data.value.reduce(function(t,n){var r=i(e,n,e.time.value).getTime();return r in t||(t[r]=[]),t[r].push(n),t},{});e.data.time.values.forEach(function(t){var n=t.getTime();e.data.nested[n]={},e.id.nesting.forEach(function(t,i){var o=e.id.nesting.slice(0,i+1);e.data.nested[n][t]=r(e,z[n],o)})})}e.dev.value&&o.timeEnd(t)}},{"../../util/uniques.coffee":212,"../console/print.coffee":54,"../fetch/value.coffee":69,"./nest.js":62}],59:[function(e,t,n){var r;r=e("../fetch/value.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c,f,d,h;if(o=d3.nest(),e.id.grouping.value)for(void 0===n&&(n=e.id.nesting),a=s=0,u=n.length;u>s;a=++s)f=n[a],a<e.depth.value&&!function(t){return o.key(function(n){return r(e,n.d3plus,t)})}(f);for(d=[],l=0,c=t.length;c>l;l++)i=t[l],h=e.size.value?r(e,i,e.size.value):1,h&&"number"==typeof h&&h>0&&(delete i.d3plus.r,delete i.d3plus.x,delete i.d3plus.y,d.push({d3plus:i,id:i[e.id.value],value:h}));return o.entries(d)}},{"../fetch/value.coffee":69}],60:[function(e,t,n){var r,i,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t){var n,a,s,l,u,c,f,d,h;if(f=t+" key analysis",e.dev.value&&r.time(f),e[t].keys={},n=function(r){var a,s,l,u,c,f,d;if(r instanceof Array){for(c=[],s=0,u=r.length;u>s;s++)a=r[s],c.push(n(a));return c}if(i(r)){f=[];for(l in r)d=r[l],0===l.indexOf("d3plus")||o.call(e[t].keys,l)>=0||null===d?f.push(void 0):f.push(e[t].keys[l]=typeof d);return f}},i(e[t].value)){l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value;for(a in u)if(d=u[a],l&&e.id.nesting.indexOf(a)>=0&&i(d))for(s in d)h=d[s],n(h);else n(d)}else{c=e[t].value;for(a in c)d=c[a],n(d)}return e.dev.value?r.time(f):void 0}},{"../../object/validate.coffee":174,"../console/print.coffee":54}],61:[function(e,t,n){var r,i;r=e("../console/print.coffee"),i=e("../../object/validate.coffee"),t.exports=function(e,t,n){var o,a,s,l;return o=e.dev.value,o&&r.time("loading "+t),l=e[t].url,e[t].filetype.value?a=e[t].filetype.value:(a=l.slice(l.length-5).split("."),a=a.length>1&&a[1],a?("txt"===a&&(a="text"),e[t].filetype.accepted.indexOf(a)<0&&(a="json")):a="json"),(s="dsv"===a?d3.dsv(e[t].delimiter.value,"text/plain"):d3[a])(l,function(s,u){var c,f;if(!s&&u){if("function"==typeof e[t].callback){if(f=e[t].callback(u))if(i(f)&&t in f)for(c in f)c in e&&(e[c].value=f[c]);else e[t].value=f}else e[t].value=u;["json"].indexOf(a)<0&&e[t].value.forEach(function(e){var t;t=[];for(c in e)isNaN(e[c])?"false"===e[c].toLowerCase()?t.push(e[c]=!1):"true"===e[c].toLowerCase()?t.push(e[c]=!0):"null"===e[c].toLowerCase()?t.push(e[c]=null):"undefined"===e[c].toLowerCase()?t.push(e[c]=void 0):t.push(void 0):t.push(e[c]=parseFloat(e[c]));return t}),e[t].changed=!0,e[t].loaded=!0}else e.error.internal='Could not load data from: "'+l+'"';return o&&r.timeEnd("loading "+t),n()})}},{"../../object/validate.coffee":174,"../console/print.coffee":54}],62:[function(e,t,n){var r=e("../fetch/value.coffee"),i=e("../../object/validate.coffee"),o=e("../../util/uniques.coffee"),a=function(e,t,n,i){void 0===i&&(i=!0);var a=d3.nest(),c=[],f="temp"in e?["active","temp","total"]:[];n.length?n.forEach(function(t,n){a.key(function(n){return r(e,n,t)})}):a.key(function(e){return!0}),i&&e.axes&&e.axes.discrete&&(!e.time||e[e.axes.discrete].value!==e.time.value)&&a.key(function(t){return r(e,t,e[e.axes.discrete].value)});var d=n.length&&e.id.nesting.indexOf(n[n.length-1])>=0,h=n.length&&d?n.length-1:0;d?e.id.nesting[h]:e.depth.value,a.rollup(function(t){if(1===t.length&&"d3plus"in t[0])return c.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var i={d3plus:{data:{},depth:h}},a=d3.sum(t,function(e){return"d3plus"in e&&e.d3plus.merged?1:0});if(a===t.length)for(var u=0;u<t.length;u++){var d=t[u];i.d3plus.merged||(i.d3plus.merged=[]),i.d3plus.merged=i.d3plus.merged.concat(d.d3plus.merged),d.d3plus.text&&(i.d3plus.text=d.d3plus.text)}for(var p=0;p<f.length;p++){var g=f[p],v=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum";"d3plus"in t[0]&&g in t[0].d3plus?i.d3plus[g]=d3.sum(t,function(e){return e.d3plus[g]}):"function"==typeof v?i.d3plus[g]=v(t):i.d3plus[g]=d3[v](t,function(t){var n="total"===g?1:0;return e[g].value&&(n=r(e,t,e[g].value),"number"!=typeof n&&(n=n?1:0)),n})}for(var m in e.data.keys){if(m in i.d3plus.data)i[m]=i.d3plus[m];else{var y=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum",x=typeof y,b=e.data.keys[m],w=e.id.nesting.indexOf(m)>=0,_="time"in e&&m===e.time.value;if(m in i.d3plus.data)i[m]=i.d3plus[m];else if("function"===x)i[m]=e.aggs.value[m](t);else if(_)i[m]=l(o(t,m));else if(e.axes&&e.axes.discrete&&e[e.axes.discrete].value===m)i[m]=o(t,m);else if("number"!==b||"string"!==x||w){var k=s(t,m),A=1===k.length?k[0][m]:o(k,m);if(1===k.length)i[m]=A;else if(A&&A.length)A instanceof Array||(A=[A]),w&&e.id.nesting.indexOf(m)>h?i[m]=k:i[m]=A;else if(w){var S=e.id.nesting.indexOf(m)-1;S>=h&&(!("endPoint"in i.d3plus)||i.d3plus.endPoint>h)&&(i.d3plus.endPoint=h)}}else{var z=t.map(function(e){return e[m]});z=z.filter(function(e){return typeof e===b}),z.length&&(i[m]=d3[y](z))}}m in i&&i[m]instanceof Array&&1===i[m].length&&(i[m]=i[m][0])}for(var M=0;M<n.length;M++){var C=n[M];C in i||(i[C]=r(e,t[0],C))}return c.push(i),i});var p=function(t,r,i){if(t.children){"number"==e.data.keys[n[r]]&&(t.key=parseFloat(t.key)),i[n[r]]=t.key,delete t.key;for(var o in i)t[o]=i[o];r++,t.children.forEach(function(e){p(e,r,i)})}};return a=a.entries(t).map(u).map(function(e){return p(e,0,{}),e}),c},s=function(e,t){function n(e){e instanceof Array?e.forEach(n):i(e)&&t in e&&(e[t]instanceof Array?e[t].forEach(n):r.push(e))}var r=[];return n(e),r},l=function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];i&&(i.constructor===Array?t(i):n.push(i))}}var n=[];return t(e),o(n)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=a},{"../../object/validate.coffee":174,"../../util/uniques.coffee":212,"../fetch/value.coffee":69}],63:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("./nest.js"),o=e("../fetch/value.coffee"),a=(e("../fetch/color.coffee"),e("../fetch/text.js"));t.exports=function(e,t,n){var s;if(s=e.size.threshold.value===!1?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02,"number"==typeof s&&s>0){var l=[],u=0===e.depth.value?0:{},c=[],f=[],d=[],h={},p=d3.nest();n&&p.key(function(t){return o(e,t,n)}),p.rollup(function(t){var r=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?r=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(r=d3[e.aggs.value[e.size.value]](t,function(t){return o(e,t,e.size.value)})):r=d3.sum(t,function(t){return o(e,t,e.size.value)});var i=n?o(e,t[0],n):"all";return h[i]=r,r}).entries(t),t.forEach(function(t){var r=o(e,t,e.id.value),i=o(e,t,e.size.value),a=n?o(e,t,n):"all",u=i/h[a]>=s;if(u&&l.indexOf(r)<0&&(l.push(r),e.depth.value)){var c=o(e,t,e.id.nesting[e.depth.value-1]);f.indexOf(c)<0&&f.push(c)}});var g=t.filter(function(t){var n=o(e,t,e.id.value),r=l.indexOf(n)>=0,i=e.depth.value?o(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==i&&f.indexOf(i)<0&&d.indexOf(i)<0&&d.push(i),!r){var a=o(e,t,e.size.value);a>0&&(0===e.depth.value?a>u&&(u=a):(i in u||(u[i]=0),a>u[i]&&(u[i]=a)),c.push(t))}return r});if(c.length>1){c=r(c,e.size.value,"desc",[],e);var v=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&v.push(e[e.axes.discrete].value);var m=i(e,c,v);m.forEach(function(t){var n=e.id.nesting[e.depth.value-1],r=o(e,t,n);if(children=n?c.filter(function(t){return o(e,t,n)===r}):c,children.length>1){e.id.nesting.forEach(function(n,r){if(e.depth.value==r){var i=t[n];"string"==typeof i?t[n]="d3plus_other_"+i:t[n]="d3plus_other"}else r>e.depth.value&&delete t[n]}),e.color.value&&"string"===e.color.type&&(0===e.depth.value?t[e.color.value]=e.color.missing:t[e.color.value]=o(e,r,e.color.value,n)),e.icon.value&&(t[e.icon.value]=o(e,r,e.icon.value,n)),r&&(t.d3plus.depth=e.depth.value);var i;0===e.depth.value?(i=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),i+=" < "+e.format.value(u,{key:e.size.value,vars:e})):(i=a(e,t,e.depth.value-1),i=i.length?i[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),d.indexOf(r)<0&&(i+=" < "+e.format.value(u[r],{key:e.size.value,vars:e}))),d.indexOf(r)<0&&(i+=" ("+e.format.value(100*s,{key:"share",vars:e})+")"),t.d3plus.threshold=u,t.d3plus.merged=children,e.text.value&&(t[e.text.value]=i),t.d3plus.text=i}})}else m=c;return g.concat(m)}return t}},{"../../array/sort.coffee":36,"../fetch/color.coffee":65,"../fetch/text.js":68,"../fetch/value.coffee":69,"./nest.js":62}],64:[function(e,t,n){var r;r=e("../../font/sizes.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b;if(b=t.values||e.data.time.ticks,v=t.style||{},s=t.limit||e.width.value,m={},c=e.data.time.periods,g=e.data.time.stepType,y=e.data.time.totalType,o=e.data.time.functions,a=e.data.time.getFormat,l=e.format.locale.value.format,e.time.format.value)m.format=e.data.time.format,m.values=b,m.sizes=r(b.map(function(e){return m.format(e)}),v);else for(u=c.indexOf(g);u<=c.indexOf(y);){if(x=b.filter(function(e){var t,n;if(u===c.indexOf(g))return!0;if(t=!0,n=u-1,0>u)return!0;for(;n>=c.indexOf(g)&&t;)t=!o[n](e),n--;return t}),c[u]===y)i=d3.locale(l).timeFormat(a(c[u],y));else{for(f=u,i=[];f<=c.indexOf(y);)d=f-1<c.indexOf(g)?f:f-1,d=c[d],p=c[f]===d&&g!==y,n=a(d,c[f],p),i.push([n,o[f]]),f++;i[i.length-1][1]=function(){return!0},i=d3.locale(l).timeFormat.multi(i)}if(h=r(x.map(function(e){return i(e)}),v),d3.sum(h,function(e){return e.width})<s||u===c.indexOf(y)){m.format=i,m.values=x,m.sizes=h;break}u++}return m}},{"../../font/sizes.coffee":103}],65:[function(e,t,n){var r,i,o,a,s,l,u;r=e("./value.coffee"),a=e("../../color/random.coffee"),l=e("../../color/validate.coffee"),u=e("../../object/validate.coffee"),s=e("../../util/uniques.coffee"),t.exports=function(e,t,n){var a,l,c,f,d,h;if(d=u(t),d&&"d3plus"in t&&"color"in t.d3plus)return t.d3plus.color;if(void 0===n&&(n=e.id.value),"number"==typeof n&&(n=e.id.nesting[n]),e.color.value){for(c=[],f=e.id.nesting.indexOf(n);f>=0;){if(l=e.id.nesting[f],h=s(t,e.color.value,r,e,l),1===h.length&&(h=h[0]),!(h instanceof Array)&&void 0!==h&&null!==h){a=i(e,t,h,n),c.indexOf(a)<0&&c.push(a);break}f--}return 1===c.length?c[0]:e.color.missing}return o(e,t,n)},i=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):l(n)?n:o(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):o(e,t,r)},o=function(e,t,n){return u(t)&&(t=r(e,t,n)),t instanceof Array&&(t=t[0]),a(t,e.color.scale.value)}},{"../../color/random.coffee":49,"../../color/validate.coffee":53,"../../object/validate.coffee":174,"../../util/uniques.coffee":212,"./value.coffee":69}],66:[function(e,t,n){var r=e("../data/filter.js"),i=e("../data/nest.js"),o=e("../console/print.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e,t,n){if(!e.data.value)return[];void 0===n&&(n=e.depth.value);var l=e.id.nesting[n];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;if(c.length){t=[];for(var f=0;f<c.length;f++){var d=c[f];if("function"==typeof d)for(var h=0;h<e.data.time.values.length;h++){var p=e.data.time.values[h].getTime();d(p)&&t.push(p)}else if(d.constructor===Date)t.push(new Date(d).getTime());else{d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01");var g=new Date(d);"Invalid Date"!==g&&t.push(g.getTime())}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var v=0;v<t.length;v++)t[v]=t[v].getTime()}var m=[e.type.value,l,n].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",x=d3.keys(e.data.cache),b=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var w=0;w<e.data[y].length;w++){var _=e.data[y][w],k=e[_][y].value.slice(0);k.unshift(_),k.unshift(y),m=m.concat(k)}e.axes&&e.axes.discrete&&m.push(e.axes.discrete),m=m.join("_"),e.data.cacheID=m;for(var A=0;A<x.length;A++){var S=x[A].split("_").slice(1).join("_");if(S===m){m=(new Date).getTime()+"_"+m,e.data.cache[m]=e.data.cache[x[A]],delete e.data.cache[x[A]];break}}var z;if(e.data.cache[m])return e.dev.value&&o.comment("data already cached"),z=e.data.cache[m].data,"nodes"in e&&(e.nodes.restricted=e.data.cache[m].nodes,e.edges.restricted=e.data.cache[m].edges),"function"==typeof b&&(z=b(e,z)),z;var M=[];if(z=[],e.data.value&&e.data.value.length)for(var C=0;C<t.length;C++){var T=t[C];e.data.nested[T]?z=z.concat(e.data.nested[T][l]):M.push(T)}if(0===z.length&&M.length&&!e.error.internal){M.length>1&&(M=d3.extent(M)),M=M.map(function(t){return e.data.time.format(new Date(t));
}),M=M.join(" - ");var E=e.format.locale.value.error.dataYear,j=e.format.locale.value.ui.and;M=s(M,j),e.error.internal=a(E,M),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var D=!1;if(["x","y","x2","y2"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(D=!0)}),!D){var O=e.id.nesting.slice(0,n+1);z=i(e,z,O)}}z=z?r(e,z):[],20===x.length&&(x.sort(),delete e.data.cache[x[0]]),m=(new Date).getTime()+"_"+m,e.data.cache[m]={data:z},"nodes"in e&&(e.data.cache[m].nodes=e.nodes.restricted,e.data.cache[m].edges=e.edges.restricted),"function"==typeof b&&(z=b(e,z)),e.dev.value&&o.comment("storing data in cache")}return z}},{"../../string/format.js":175,"../../string/list.coffee":176,"../console/print.coffee":54,"../data/filter.js":57,"../data/nest.js":62}],67:[function(e,t,n){var r,i,o;o=e("./value.coffee"),r=e("./color.coffee"),i=e("./text.js"),t.exports=function(e,t,n,a,s){var l,u,c,f,d,h;for(n instanceof Array||(n=[n]),a instanceof Array||(a=[a]),e&&(void 0===s?s=e.id.value:"number"!=typeof s&&(s=e.id.nesting.indexOf(s))),d={},u=0,f=n.length;f>u;u++)c=n[u],h=e?a.indexOf(c)>=0?r(e,t,s):c===e.text.value?i(e,t,s):3===d3.keys(t).length&&t.d3plus&&t.key&&t.values?o(e,t.values.map(function(e){return e.d3plus}),c,s):o(e,t,c,s):t[c],[e.data.keys[c],e.attrs.keys[c]].indexOf("number")>=0?(l=e.order.agg.value||e.aggs.value[c]||"sum",h instanceof Array||(h=[h]),h=d3[l](h)):(h instanceof Array&&(h=h[0]),h="string"==typeof h?h.toLowerCase():h),d[c]=h;return d}},{"./color.coffee":65,"./text.js":68,"./value.coffee":69}],68:[function(e,t,n){var r=e("./value.coffee"),i=e("../../object/validate.coffee"),o=e("../../util/uniques.coffee");t.exports=function(e,t,n){"number"!=typeof n&&(n=e.depth.value);var a,s=e.id.nesting[n];e.text.nesting&&i(e.text.nesting)?a=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(a=[],e.text.value&&n===e.depth.value&&a.push(e.text.value),a.push(s)),a instanceof Array||(a=[a]);var l=[];if(i(t)&&"d3plus"in t&&t.d3plus.text)l.push(t.d3plus.text.toString()),l.push(e.format.value(t.d3plus.text.toString(),{vars:e,data:t}));else{var u=i(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),a.forEach(function(n){var i=o(t,n,r,e,s);i.length&&(i.length>1&&(i=i.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),i=i.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e}),t.map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:n})})):t?e.format.value(t.toString(),{vars:e,data:u,key:n}):void 0}),1===i.length&&(i=i[0]),l.push(i))})}return l}},{"../../object/validate.coffee":174,"../../util/uniques.coffee":212,"./value.coffee":69}],69:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d;f=e("../../object/validate.coffee"),c=e("../../util/uniques.coffee"),u=function(e,t,n,a){var s,l,u,d;if(l=f(t),"function"==typeof n&&l)return n(t,e);if(l){if(n in t)return t[n];if(s=e.data.cacheID+"_"+a,r(t,s,e),n in t.d3plus.data[s])return t.d3plus.data[s][n];if(a in t)t=t[a];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],a!==n&&(u=o(e,t,a,e.id.value)),(null===u||void 0===u)&&(u=i(e,t,a,e.id.value)),null===u||void 0===u)return null;if(a===n)return u;t=u}}return t instanceof Array&&!f(t[0])&&(t=c(t)),t instanceof Array&&f(t[0])&&(d=c(t,n),d.length)?d:(d=o(e,t,n,a))?d:d=i(e,t,n,a)},o=function(e,t,n,r){var i;return e.data.viz instanceof Array&&n in e.data.keys&&(i=c(l(e.data.viz,t,r),n)),i&&i.length?i:null},i=function(e,t,n,r){var i,o,a,s;if("attrs"in e&&e.attrs.value&&n in e.attrs.keys)if(i=f(e.attrs.value)&&r in e.attrs.value?e.attrs.value[r]:e.attrs.value,i instanceof Array){if(a=c(l(i,t,r),n),a.length)return a}else if(t instanceof Array){if(i=[function(){var e,n,r;if(o in i){for(r=[],e=0,n=t.length;n>e;e++)o=t[e],r.push(i[o]);return r}}()],i.length&&(s=c(i,n),s.length))return s}else if(t in i)return i[t][n];return null},l=function(e,t,n){return t instanceof Array?e.filter(function(e){return t.indexOf(e[n])>=0}):e.filter(function(e){return e[n]===t})},r=function(e,t,n){return"d3plus"in e||(e.d3plus={}),"data"in e.d3plus||(e.d3plus.data={}),(n.data.changed||n.attrs&&n.attrs.changed||!(t in e.d3plus.data))&&(e.d3plus.data[t]={}),e},d=function(e,t,n,r,i){var o,a,s,l,u,c,d;if(null===i)return i;c="time"in e&&e.time.value===r,i instanceof Array||(i=[i]);for(s=l=0,u=i.length;u>l;s=++l)d=i[s],c&&null!==d&&d.constructor!==Date&&(d+="",4===d.length&&parseInt(d)+""===d&&(d+="/01/01"),a=new Date(d),"Invalid Date"!==a&&(i[s]=a));return 1===i.length&&(i=i[0]),null===i||!f(t)||"string"!=typeof r||r in t||(o=e.data.cacheID+"_"+n,t.d3plus.data[o][r]=i),i},s=function(e,t,n,r){var i,o,a,s,l;for(l=[],o=0,a=t.length;a>o;o++)i=t[o],f(i)?(s=u(e,i,n,r),l.push(d(e,i,r,n,s))):l.push(i);return"number"!=typeof l[0]&&(l=c(l)),1===l.length?l[0]:l},a=function(e,t,n,r){var i,o;return n?"number"==typeof n?n:(i=f(t),r||(r=e.id.value),i&&t.values instanceof Array?o=s(e,t.values,n,r):i&&t[n]instanceof Array?o=s(e,t[n],n,r):t instanceof Array?o=s(e,t,n,r):(o=u(e,t,n,r),o=d(e,t,r,n,o)),o):null},t.exports=a},{"../../object/validate.coffee":174,"../../util/uniques.coffee":212}],70:[function(e,t,n){t.exports=function(e){var t,n,r;return["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},r=d3.select("body").selectAll(e+".d3plus_tester").data([0]),r.enter().append(e).attr("class","d3plus_tester").style(n).attr(t),r}},{}],71:[function(e,t,n){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],72:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el mtodo {0} ha sido eliminado, por favor, actualiza tu cdigo para utilizar {1}.",noChange:"{0} no se actualiza porque no cambi.",noContainer:"no se puede encontrar un contenedor en la pgina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vnculos no se pueden enlazar con si mismos. eliminando automticamente el vnculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",method:"{0} visualizaciones requieren establecer el mtodo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes mtodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"cono",id:"id",height:"alto",labels:"rtulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",mute:"ocultar",order:"orden",search:"bsqueda",shape:"forma",size:"tamao",solo:"aislar",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"lnea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"#ERROR!",mode:"modo"},time:["fecha","da","mes","hora","ao"],visualization:{bubbles:"Burbujas",chart:"Tabla",geo_map:"Mapa Geo",line:"Lnea Solar",network:"Red",rings:"Anillos",scatter:"Grfico De Dispersin",stacked:"rea Apilada",tree_map:"Mapa de rbol",bar:"Grfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Grfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrs",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} ms",moreInfo:"clic para ms informacin",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],73:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a t limin de la version courante, mettez  jour votre code source avec {1}.",noChange:"{0} n'a pas t mis  jour car inchang.",noContainer:"impossible de trouver un contenant correspondant  {0}.",of:"de",oldStyle:"les proprits de {0} ont t imbriques dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui mme. L'auto-rfrence est automatiquement limine {0}.",set:"{0} a t mis  jour.",setLong:"{0} a t mis  jour  {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donnes disponibles",dataYear:"Pas de donnes disponibles pour {0}.",lib:"La visualisation de {0} ncessite le chargement de la librairie {1}.",libs:"La visualisation de {0} ncessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la dfinition de {1}.",methods:"La visualisation du {0} exige les dfinitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","prs","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"cone",id:"id",height:"hauteur",labels:"labels",legend:"lgende",margin:"marge",messages:"messages",mute:"cacher",order:"ordre",search:"recherche",shape:"format",size:"taille",solo:"isoler",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode"},time:["anne","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"Rseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empiles",tree_map:"Arbre",bar:"Diagramme en barres",box:"Botes  Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour rduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de rsultat correspondant  {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou"},message:{data:"analyse des donnes",draw:"trac en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"rinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],74:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},dev:{accepted:"{0} {1},         : {2}.",deprecated:"{0}   ,    {1}.",noChange:"{0}     .",noContainer:"  {0}    .",of:"",oldStyle:"{0}       .{1}().",sameEdge:"     .     {0}   .",set:"{0}  .",setLong:"{0} {1}  .",setContainer:".container()    "},error:{accepted:"{0}   {1} {2}       : {3}.",connections:"{0}   .",data:" ",dataYear:"{0}   .",lib:"{0}  {1}   .",libs:"{0}       : {1}.",method:"{0}   {1}   .",methods:"{0}      : {1}."},lowercase:[],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:" ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:" ",total:" ",type:"",width:"",x:"X ",y:"Y ",zoom:"",mode:"",mute:"",solo:""},time:["","","","",""],visualization:{bubbles:" ",chart:"",geo_map:"",line:" ",network:" ",rings:"",scatter:"",stacked:" ",tree_map:" ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:" ",error:"",expand:" ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"   {0}.",primary:" ",share:"",total:"",values:"",including:"... ",or:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:" ",ui:"UI  "},uppercase:["CEO"," ","   (CFO)","CFO","CNC","COO","","CPU","CPU","  (GDP)","HVAC","ID","IT","R & D","TV","UI"]}},{}],75:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}   a   {1},    a   : {2}.",deprecated:"{0}   ,           {1}.",noChange:"{0}   ,   .",noContainer:" e           {0}.",of:"",oldStyle:"    {0}     . {1} ().",sameEdge:"        .       - {0}.",set:"{0}  .",setLong:"{0}    {1}.",setContainer:"    div  .container()"},error:{accepted:"{0}     {1} {2} ,      : {3}.",connections:"     {0}.",data:" ",dataYear:"    {0}.",lib:"{0}      {1} .",libs:"{0}     : {1}.",method:"{0}     {1} .",methods:"{0}      : {1}."},lowercase:["a","","","","","","","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"id",height:"",labels:"",legend:"",margin:"",messages:"  ",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:"x ",y:" y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:" ",tree_map:"    ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:"    ",error:"",expand:"    ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"     {0}.",primary:" ",share:"",total:"",values:"",including:"",or:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:"  ",ui:"   "},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],76:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} no  um valor vlido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} mtodo foi removido, por favor atualize seu cdigo para utilizar {1}.",noChange:"{0} no foi atualizado porque ele no mudou.",noContainer:"No foi possvel encontrar um local na pgina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j foi incorporado diretamente no. {1} ().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definido.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} no  um {1} reconhecido para visualizaes {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"No h conexes disponveis para {0}.",data:"No h dados disponveis",dataYear:"No h dados disponveis para {0}.",lib:"A visualizao {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualizao {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",mute:"ocultar",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",solo:"isolar",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"linha do tempo",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Grfico",geo_map:"Mapa",line:"Grfico de Linha",network:"Rede",rings:"Anis",scatter:"Disperso",stacked:"Evoluo",tree_map:"Tree Map",bar:"Grfico de Barras",box:"Box Plot",paths:"Caminhos",pie:"Pie Chart",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"conexes primrias",share:"participao",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"analisando dados",draw:"desenhando visualizao",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],77:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} no  um valor vlido para {1}, por favor escolha uma das seguintes opes: {2}.",deprecated:"o mtodo {0} foi removido, por favor atualize o seu cdigo para usar {1}.",noChange:"{0} no foi atualizado porque no houve modificaes.",noContainer:"No foi possvel encontrar um elemento na pgina correspondente a {0}.",of:"de",oldStyle:"as propriedades de {0} j foram includas em .{1}().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definido.",setLong:"{0} foi alterado para {1}.",setContainer:"por favor indique um elemento div atravs do mtodo .container()"},error:{accepted:"{0} no  uma {1} vlida para a visualizao {2}, por favor escolha uma das seguintes: {3}.",connections:"no existem ligaes disponveis para {0}.",data:"no existem dados disponveis",dataYear:"no existem dados disponveis para {0}.",lib:"a visualizao {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualizao {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos seguintes mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos no total",type:"tipo",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"#ERROR!",mute:"ocultar",solo:"isolar"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geo_map:"Mapa",line:"Grfico de Linha",network:"Grafo",rings:"Anis",scatter:"Grfico de Disperso",stacked:"Grfico de rea",tree_map:"Tree Map",bar:"Grfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"Caminhos",pie:"Grfico de Setores",table:"Tabela"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"ligaes principais",share:"proporo",total:"total",values:"valores",including:"Incluindo",or:"ou"},message:{data:"a analisar os dados",draw:"a desenhar a visualizao",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informao",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],78:[function(e,t,n){t.exports={format:{decimal:",",thousands:"",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}    {1}, ,    : {2}.",deprecated:" {0}  , ,   ,   {1}.",noChange:"{0}  ,    .",noContainer:"       {0}.",of:"",oldStyle:"   {0}        . {1} ().",sameEdge:"    .     {0}.",set:"{0}  .",setLong:"{0}   {1}.",setContainer:",   DIV   .container ()"},error:{accepted:"{0}   {1}  {2} , ,    : {3}.",connections:" ,   {0}.",data:" ",dataYear:"  {0}.",lib:"{0}    {1} .",libs:"{0}     : {1}.",method:"{0}    {1} .",methods:"{0}     : {1}."},lowercase:["","","","","",""," ","","","","","","","","","",""," ","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"ID",height:"",labels:"",legend:"",margin:"",messages:"  ",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:" ",y:" Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:"  ",tree_map:" ",bar:"",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:",  ",error:"",expand:",  ",loading:" ...",more:"{0} ",moreInfo:"     ",noResults:" ,  {0}.",primary:" ",share:"",total:"",values:"",including:"",or:""},message:{data:" ",draw:" ",initializing:" {0}",loading:" ",tooltipReset:" ",ui:"  "},uppercase:["ID"]}},{}],79:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},dev:{accepted:"{0}{1}, :{2}",deprecated:"{0}, {1}",noChange:"{0}, ",noContainer:"{0}",of:"",oldStyle:"{0}{1}",sameEdge:"{0}",set:"{0}",setLong:"{0}{1}",setContainer:"()div"},error:{accepted:"{0}{2}{1}, {3}.",connections:"{0}",data:"",dataYear:"{0}",lib:"{0}{1}",libs:"{0}{1}",method:"{0}{1}",methods:"{0}{1}"},lowercase:["","","","","...","","","","","..."],
method:{active:"",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"",mute:"",order:"",search:"",shape:"",size:"",solo:"",style:"",temp:"",text:"",time:"",timeline:"",total:"",type:"",width:"",x:"X",y:"Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:"",line:"",network:"",rings:"",scatter:"",stacked:"",tree_map:"",bar:"",box:"",paths:"",pie:"",table:""},ui:{and:"",back:"",collapse:"",error:"",expand:"",loading:"...",more:"{0}",moreInfo:"",noResults:"{0}",primary:"",share:"",total:"",values:"",including:"",or:""},message:{data:"",draw:"",initializing:"{0}",loading:"",tooltipReset:"",ui:"UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","","",""]}},{}],80:[function(e,t,n){t.exports={en_US:e("./languages/en_US.coffee"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/zh_CN.js")}},{"./languages/en_US.coffee":71,"./languages/es_ES.js":72,"./languages/fr_FR.js":73,"./languages/ko_KR.js":74,"./languages/mk_MK.js":75,"./languages/pt_BR.js":76,"./languages/pt_PT.js":77,"./languages/ru_RU.js":78,"./languages/zh_CN.js":79}],81:[function(e,t,n){var r,i,o,a,s,l,u,c,f;i=e("../../util/copy.coffee"),s=e("../console/print.coffee"),l=e("./process/detect.coffee"),u=e("./set.coffee"),c=e("../../string/format.js"),f=e("../../object/validate.coffee"),t.exports=function(e,t){var n,r,s;s=[];for(n in t)r=t[n],e[n]=i(r),e[n].initialized=a(e,e[n],n),s.push(e.self[n]=o(e,n));return s},a=function(e,t,n,r){var i,o,u,d,h;t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=l(e,t,t.value));for(h in t)if("deprecates"===h)for(o=t[h]instanceof Array?t[h]:[t[h]],u=0,d=o.length;d>u;u++)i=o[u],e.self[i]=function(t,n){return function(i){var o,a,l;return l=e.format.locale.value.dev.deprecated,t="."+t+"()",a=r?'"'+n+'" in .'+r+"()":"."+n+"()",o=r||n,s.error(c(l,t,a),o),e.self}}(i,n);else"global"===h?n in e||(e[n]=[]):"value"!==h&&f(t[h])&&a(e,t[h],h,n);return!0},o=function(e,t){return function(n,i){var o,a,l,u,d,h,p,g;if(o="accepted"in e[t]?e[t].accepted:null,"function"==typeof o&&(o=o(e)),o instanceof Array||(o=[o]),n===Object)return e[t];if(!arguments.length&&o.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof n){g=e.format.locale.value.dev.oldStyle;for(h in n)s.warning(c(g,'"'+h+'"',h),h),e.self[h](n[h])}if("font"===t){"string"==typeof n&&(n={family:n}),p=!0,l=function(e,t,n,r){f(e[n])&&t in e[n]&&(f(e[n][t])?e[n][t].process?e[n][t].value=e[n][t].process(r):e[n][t].value=r:e[n][t]=r)},a=function(e,t,n){var r;if(f(e)){if(p)for(r in e)l(e,t,r,n);else"font"in e&&l(e,t,"font",n);p=!1;for(r in e)a(e[r],t,n)}};for(u in n)d=n[u],"secondary"!==u&&(f(d)&&(d=d.value),d&&a(e,u,d))}return r(e,t,e,t,n),"function"==typeof i&&(e[t].callback=i),e[t].chainable===!1?e[t].value:e.self}},r=function(e,t,n,i,o){var a,s,l,c;if(["accepted","changed","initialized","previous","process"].indexOf(i)<0)if(c=f(o),l=f(n[i])&&"objectAccess"in n[i]&&n[i].objectAccess===!1,a=c&&(l||!("value"in o)&&(!f(n[i])||!(d3.keys(o)[0]in n[i]))),null===o||!c||a)u(e,t,n,i,o);else if(c)for(s in o)r(e,t,n[i],s,o[s])}},{"../../object/validate.coffee":174,"../../string/format.js":175,"../../util/copy.coffee":209,"../console/print.coffee":54,"./process/detect.coffee":89,"./set.coffee":95}],82:[function(e,t,n){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}},{}],83:[function(e,t,n){var r;r=e("../../../client/rtl.coffee"),t.exports=function(e){var t;return t=["left","center","right"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return r?"left"===e?"right":"right"===e?"left":e:e},value:e}}},{"../../../client/rtl.coffee":42}],84:[function(e,t,n){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],85:[function(e,t,n){var r,i;i=e("../../../font/validate.coffee"),r=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],t.exports=function(e){return void 0===e&&(e=r),{process:i,value:e}}},{"../../../font/validate.coffee":104}],86:[function(e,t,n){t.exports=function(e){var t;return t=["top","middle","bottom"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}},{}],87:[function(e,t,n){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],88:[function(e,t,n){t.exports=function(e,t,n){var r;return t.history&&t.history.reset(),e.constructor===String?e.indexOf("/")>=0?(n.url=e,[]):(r=d3.selectAll(e),r.size()?r:(e.indexOf(".")>=0&&(n.url=e),[])):e}},{}],89:[function(e,t,n){var r,i;r=e("../../../util/copy.coffee"),i=e("../../../array/update.coffee"),t.exports=function(e,t,n){return t.process===Array?i(r(t.value),n):"object"==typeof t.process&&"string"==typeof n?t.process[n]:"function"==typeof t.process?t.process(n,e,t):n}},{"../../../array/update.coffee":37,"../../../util/copy.coffee":209}],90:[function(e,t,n){var r;r=e("../../../client/css.coffee"),t.exports=function(e,t,n){return e===!1||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}},{"../../../client/css.coffee":38}],91:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p;if("string"==typeof e){for(e=e.split(" "),n=r=0,a=e.length;a>r;n=++r)p=e[n],e[n]=parseFloat(p,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(h=["top","right","bottom","left"],"number"==typeof e)for(i=0,s=h.length;s>i;i++)d=h[i],t[d]=e;else for(o=0,l=h.length;l>o;o++)d=h[o],t[d]=e[d];for(t.css="",f=[],n=c=0,u=h.length;u>c;n=++c)d=h[n],n&&(t.css+=" "),f.push(t.css+=t[d]+"px");return f}},{}],92:[function(e,t,n){var r,i,o,a;r=e("../../array/contains.coffee"),i=e("../../string/format.js"),o=e("../../string/list.coffee"),a=e("../console/print.coffee"),t.exports=function(e,t,n,s,l){var u,c,f,d,h,p,g,v;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),c=r(t,n),c===!1&&void 0!==n){for(p=[],v=JSON.stringify(n),"string"!=typeof n&&(v='"'+v+'"'),d=0,h=t.length;h>d;d++)u=t[d],"string"==typeof u?p.push('"'+u+'"'):"function"==typeof u?p.push(u.toString().split("()")[0].substring(9)):void 0===u?p.push("undefined"):p.push(JSON.stringify(u));p=o(p,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(g=e.format.locale.value.error.accepted,f=e.format.locale.value.visualization[e.type.value]||e.type.value,a.warning(i(g,v,s,f,p),s)):(g=e.format.locale.value.dev.accepted,a.warning(i(g,v,l,p),s))}return!c}},{"../../array/contains.coffee":35,"../../string/format.js":175,"../../string/list.coffee":176,"../console/print.coffee":54}],93:[function(e,t,n){t.exports=function(e){var t;return t=["auto","optimizeSpeed","crispEdges","geometricPrecision"],t.indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}},{}],94:[function(e,t,n){var r,i;i=e("../../object/validate.coffee"),r=function(e,t){var n;e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1);for(n in e)n.indexOf("d3plus")<0&&i(e[n])&&r(e[n],n)},t.exports=r},{"../../object/validate.coffee":174}],95:[function(e,t,n){var r,i,o,a,s,l,u,c,f;r=e("../../util/copy.coffee"),i=e("../../util/d3selection.coffee"),f=e("../../object/validate.coffee"),o=e("../../object/merge.coffee"),a=e("../console/print.coffee"),s=e("./process/detect.coffee"),l=e("./rejected.coffee"),u=e("../../string/format.js"),c=e("../../array/update.coffee"),t.exports=function(e,t,n,d,h){var p,g,v,m,y,x,b,w,_,k,A,S,z,M;if(S="value"!==d&&d&&d!==t?'"'+d+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",p="value"===d&&"accepted"in n?n.accepted:f(n[d])&&"accepted"in n[d]?n[d].accepted:[h],!l(e,p,h,t,S)){if(f(n[d])&&"value"in n[d]&&(k=d,n=n[d],d="value"),"value"===d&&"process"in n&&(h=s(e,n,h)),n[d]instanceof Array||n[d]!==h||void 0===h){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in e&&"draw"!==t&&(g=r(n),g.method=t,e.history.chain.push(g)),n.previous=n[d],"id"in e&&"value"===d&&"nesting"in n)if("id"!==t){if("object"!=typeof n.nesting&&(n.nesting={}),f(h)){for(x in h)"string"==typeof h[x]&&(h[x]=[h[x]]);n.nesting=o(n.nesting,h),e.id.value in n.nesting||(n.nesting[e.id.value]=h[d3.keys(h)[0]])}else h instanceof Array?n.nesting[e.id.value]=h:n.nesting[e.id.value]=[h];n[d]=n.nesting[e.id.value][0]}else h instanceof Array?(n.nesting=h,"depth"in e&&e.depth.value<h.length?n[d]=h[e.depth.value]:(n[d]=h[0],"depth"in e&&(e.depth.value=0))):(n[d]=h,n.nesting=[h],"depth"in e&&(e.depth.value=0));else"depth"===t?(h>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:0>h?e.depth.value=0:e.depth.value=h,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(_=e.text.nesting[e.id.value],_&&(e.text.nesting[e.id.value]="string"==typeof _?[_]:_,e.text.value=_ instanceof Array?_[0]:_))):f(n[d])&&f(h)?n[d]=o(n[d],h):n[d]=h;"value"===d&&n.global&&(y=n[d].length>0,b=k||d,b in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=c(e.data[b],t))),"value"===d&&n.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&n.changed&&void 0!==n[d]&&(w=n[d]instanceof Array&&n[d].length>10,m=i(n[d]),z="function"==typeof n[d],M=w||m||z?null:"string"==typeof n[d]?n[d]:JSON.stringify(n[d]),null!==M&&M.length<260?(A=e.format.locale.value.dev.setLong,a.log(u(A,S,'"'+M+'"'))):(A=e.format.locale.value.dev.set,a.log(u(A,S))))}else A=e.format.locale.value.dev.noChange,e.dev.value&&a.comment(u(A,S));"value"===d&&n.callback&&!n.url&&(v="function"==typeof n.callback?n.callback:n.callback.value,v&&v(h,e.self))}}},{"../../array/update.coffee":37,"../../object/merge.coffee":173,"../../object/validate.coffee":174,"../../string/format.js":175,"../../util/copy.coffee":209,"../../util/d3selection.coffee":210,"../console/print.coffee":54,"./process/detect.coffee":89,"./rejected.coffee":92}],96:[function(e,t,n){var r=e("../console/print.coffee"),i=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";r.time(t)}var n=e.types[e.type.value].requirements;n instanceof Array||(n=[n]);var o=n.indexOf("nodes")>=0&&!e.nodes.value;if(o){e.nodes.value=[];var a=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(n){var r=typeof t[e.edges[n]];if("object"!==r)if("number"!==r||o||"number"===e.data.keys[e.id.value])if(o&&a.indexOf(t[e.edges[n]])>=0)t[e.edges[n]]=e.nodes.value.filter(function(r){return r[e.id.value]===t[e.edges[n]]})[0];else{var i={};i[e.id.value]=t[e.edges[n]],t[e.edges[n]]=i}else t[e.edges[n]]=e.nodes.value[t[e.edges[n]]];var s=t[e.edges[n]];o&&a.indexOf(s[e.id.value])<0&&(a.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var n=t[e.edges.source][e.id.value],o=t[e.edges.target][e.id.value];if(n===o){var a=e.format.locale.value.dev.sameEdge;return r.warning(i(a,'"'+n+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&r.timeEnd(t)}},{"../../string/format.js":175,"../console/print.coffee":54}],97:[function(e,t,n){var r=e("./hideElement.js");t.exports=function(e){function t(e,t){[].forEach.call(t.attributes,function(t){if(/^data-/.test(t.name)){var n=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[n]=t.value}}),n.forEach(function(n){null!==t.getAttribute(n)&&(e[n]=t.getAttribute(n))})}var n=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];e.text.value||e.self.text("text"),n=n.concat(e.id.nesting),e.self.data({element:e.data.value});var i=e.data.element.value.node().tagName.toLowerCase(),o=e.data.element.value.attr("type"),a=[];if("select"===i){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(n,r){var i={};if(i.text=d3.select(this).text(),t(i,this),a.push(i),this.selected)for(var r=e.id.nesting.length-1;r>=0;r--){var o=e.id.nesting[r];if(o in i){e.self.focus(i[o]);break}}})}else if("input"===i&&"radio"===o){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(n,i){var o={};t(o,this);var s=o[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(o.text=l.html(),l.call(r))}a.push(o),this.checked&&e.self.focus(o[e.id.value])})}!e.focus.value.length&&a.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(a[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(r));var c=!!e.container.value&&e.container.value.node().tagName.toLowerCase();return(e.container.value===!1||"body"===c)&&(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(r),a}},{"./hideElement.js":98}],98:[function(e,t,n){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],99:[function(e,t,n){var r=e("../console/print.coffee");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";r.time(t)}var n=e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length;if(n===e.nodes.value.length)e.nodes.positions=!0;else{var i=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),o=e.edges.strength.value;o&&("string"==typeof o?i.linkStrength(function(e){return e[o]}):i.linkStrength(o));var a=50,s=.01;i.start();for(var l=a;l>0&&(i.tick(),!(i.alpha()<s));--l);i.stop(),e.nodes.positions=!0}e.dev.value&&r.timeEnd(t)}}},{"../console/print.coffee":54}],100:[function(e,t,n){var r;r=e("numeric"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),n=e.length,x=Number.MAX_VALUE,s=null,o=function(){var n,r,i;for(i=[],c=n=1,r=t.maxDegree+1;r>=1?r>n:n>r;c=r>=1?++n:--n)i.push(function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)y=e[n],r.push(Math.pow(y[0],c));return r}());return i}(),z=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)y=e[t],r.push(y[1]);return r}(),d=g=0,w=1<<t.maxDegree;w>=0?w>g:g>w;d=w>=0?++g:--g){for(a=[function(){var e,t,r;for(r=[],b=e=0,t=n;t>=0?t>e:e>t;b=t>=0?++e:--e)r.push(1);return r}()],f=[0],h=m=0,_=t.maxDegree;_>=0?_>m:m>_;h=_>=0?++m:--m)(d&1<<h)>0&&(a.push(o[h]),f.push(h+1));i=r.transpose(a),p=f.length,l=r.dot(r.dot(r.inv(r.dot(a,i)),a),z),M=r.dot(i,l),k=r.sub(z,M),S=r.dot(k,k),A=S/(n-p),v=-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(A)-S/(2*A),u=-2*v+p*(Math.log(n)-Math.log(2*Math.PI)),x>u&&(x=u,s=[f,l,M])}return s}},{numeric:8}],101:[function(e,t,n){var r;r=e("static-kdtree"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p;return null==t&&(t=10),p=r(e),u=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)c=e[n],i.push(p.knn(c,t+1).slice(1));return i}(),h=function(t,n){var r,i,o,a,s,l;for(r=e[t],i=e[n],a=0,t=s=0,l=r.length;l>=0?l>s:s>l;t=l>=0?++s:--s)o=r[t]-i[t],a+=o*o;return a},a=function(){var n,r,o;for(o=[],i=n=0,r=e.length;r>=0?r>n:n>r;i=r>=0?++n:--n)o.push(h(i,u[i][t-1]));return o}(),f=function(e,t){return Math.max(h(e,t),a[t])},s=function(e){var n,r,i,o,a;for(o=0,a=u[e],r=0,i=a.length;i>r;r++)n=a[r],o+=f(e,n);return t/o},l=function(){var t,n,r;for(r=[],i=t=0,n=e.length;n>=0?n>t:t>n;i=n>=0?++t:--t)r.push(s(i));return r}(),d=function(){var r,a,s,c,f,d;for(d=[],i=r=0,c=e.length;c>=0?c>r:r>c;i=c>=0?++r:--r){for(n=0,f=u[i],a=0,s=f.length;s>a;a++)o=f[a],n+=l[o];n/=t,d.push([i,n/l[i]])}return d}(),d.sort(function(e,t){return t[1]-e[1]})}},{"static-kdtree":10}],102:[function(e,t,n){t.exports=function(e){var t,n,r;return n=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-n)})),r=e.map(function(e,r){return[r,Math.abs(e-n)/t]}),r.sort(function(e,t){return t[1]-e[1]})}},{}],103:[function(e,t,n){var r;r=e("../core/font/tester.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c;return n||(n={}),t=t||{},u=n.parent||r("svg").append("text"),s=[],e instanceof Array||(e=[e]),c=u.selectAll("tspan").data(e),i={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in t&&(l=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),a=function(e){var t;return t=0,l&&(t=(d3.select(e).text().length-1)*l),e.getComputedTextLength()+t},o=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height},c.enter().append("tspan").text(String).style(t).attr(i).each(function(e){return"function"==typeof n.mod?n.mod(this):void 0}).each(function(e){var t,n,r;return t=d3.select(this).selectAll("tspan"),t.size()?(r=[],t.each(function(){return r.push(a(this))}),r=d3.max(r)):r=a(this),n=o(this),s.push({height:n,text:e,width:r})}),c.remove(),n.parent||u.remove(),s}},{"../core/font/tester.coffee":70}],104:[function(e,t,n){var r,i;r=e("../core/font/tester.coffee"),i=function(e){var t,n,o,a,s,l,u,c,f,d,h,p,g,v;for(e instanceof Array||(e=e.split(",")),s=0,u=e.length;u>s;s++)o=e[s],o.trim();if(a=e.join(", "),t=i.complete,a in t)return t[a];for(h=function(e){return g.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},p=function(e,t){var n,r,i;return n=h(e),r=n.node().offsetWidth,i=t.node().offsetWidth,n.remove(),r!==i},g=r("div"),f=h("monospace"),d=h("sans-serif"),l=0,c=e.length;c>l;l++)if(n=e[l],v=p(n+",monospace",f),v||(v=p(n+",sans-serif",d)),v){v=n;break}return v||(v="sans-serif"),f.remove(),d.remove(),t[a]=v,v},i.complete={},t.exports=i},{"../core/font/tester.coffee":70}],105:[function(e,t,n){var r=e("../array/sort.coffee"),i=e("../core/methods/attach.coffee"),o=e("../core/data/format.js"),a=e("../core/data/keys.coffee"),s=e("../core/data/load.coffee"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.coffee"),f=e("../core/console/print.coffee");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.coffee"),drop:e("./types/drop/drop.coffee"),toggle:e("./types/toggle.js")}};return t.self=function(e){var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&f.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},a(t,"data"),o(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&r(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),t.focus.value===!1&&["auto","button"].indexOf(t.type.value)<0){var i=t.data.element.value;if(i&&"select"===i.node().tagName.toLowerCase()){var d=i.property("selectedIndex");d=0>d?0:d;var h=i.selectAll("option")[0][d],p=h.getAttribute("data-"+t.id.value)||h.getAttribute(t.id.value);p&&(t.focus.value=p)}t.focus.value===!1&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&t.focus.value!==!1&&f.log('"value" set to "'+t.focus.value+'"')}var g=function(e,n){n="number"!=typeof n?1===t.id.nesting.length?0:t.id.nesting.length-1:n;var r=t.id.nesting[n];return n>0&&(!(r in e)||e[r]instanceof Array)?g(e,n-1):r};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&f.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&f.log("Search disabled.")):t.search.enabled=t.search.value;var v=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===v){var m=[];for(var y in t.data.nested.all)m=m.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(m,function(e){var t=!!e&&g(e);return!!(e&&t in e)&&e[t]}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var n=g(e),r=n===t.id.value?t.text.value||t.id.value:t.text.nesting!==!0&&n in t.text.nesting?t.text.nesting[n]:n;for(var i in e)"object"!=typeof e[i]&&(i===r&&d3.select(this).html(e[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,e[i]):d3.select(this).attr("data-"+i,e[i]));e[n]===t.focus.value?this.selected=!0:this.selected=!1})}}else if(t.focus.changed&&t.data.element.value){var x=t.data.element.value.node().tagName.toLowerCase();if("select"===x)t.data.element.value.selectAll("option").each(function(e){e[g(e)]===t.focus.value?this.selected=!0:this.selected=!1});else{var x=t.data.element.value.attr("type").toLowerCase();"radio"===x&&t.data.element.value.each(function(e){this.value===t.focus.value?this.checked=!0:this.checked=!1})}}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3plus_"+t.type.value+"_"+t.container.id).data(["container"]);var b=t.data.element.value?t.data.element.value[0][0]:null;if(b)if(b.id)b="#"+b.id;else{var w=b.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;b=b.getAttribute(w)?"["+w+"="+b.getAttribute(w)+"]":null}t.container.ui.enter().insert("div",b).attr("id","d3plus_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var _=t.container.ui.selectAll("div.d3plus_title").data(t.title.value?[t.title.value]:[]);_.enter().insert("div","#d3plus_"+t.type.value+"_"+t.container.id).attr("class","d3plus_title").style("display","inline-block"),_.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var k=t.format.locale.value.visualization[t.type.value];t.dev.value&&f.time("drawing "+k),t.types[t.type.value](t),t.dev.value&&f.timeEnd("drawing "+k)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&f.timeEnd("total draw time"),c(t)}},i(t,{active:e("./methods/active.coffee"),alt:e("./methods/alt.coffee"),color:e("./methods/color.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),data:e("./methods/data.js"),depth:e("./methods/depth.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),hover:e("./methods/hover.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),keywords:e("./methods/keywords.coffee"),margin:e("./methods/margin.coffee"),open:e("./methods/open.coffee"),order:e("./methods/order.coffee"),remove:e("./methods/remove.coffee"),search:e("./methods/search.coffee"),select:e("./methods/select.coffee"),selectAll:e("./methods/selectAll.coffee"),text:e("./methods/text.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee")}),t.self}},{"../array/sort.coffee":36,"../client/ie.js":39,"../core/console/print.coffee":54,"../core/data/format.js":58,"../core/data/keys.coffee":60,"../core/data/load.coffee":61,"../core/fetch/data.js":66,"../core/methods/attach.coffee":81,"../core/methods/reset.coffee":94,"./methods/active.coffee":106,"./methods/alt.coffee":107,"./methods/color.coffee":108,"./methods/config.coffee":109,"./methods/container.coffee":110,"./methods/data.js":111,"./methods/depth.coffee":112,"./methods/dev.coffee":113,"./methods/draw.js":114,"./methods/focus.coffee":115,"./methods/font.coffee":116,"./methods/format.coffee":117,"./methods/height.coffee":118,"./methods/history.coffee":119,"./methods/hover.coffee":120,"./methods/icon.coffee":121,"./methods/id.coffee":122,"./methods/keywords.coffee":123,"./methods/margin.coffee":124,"./methods/open.coffee":125,"./methods/order.coffee":126,"./methods/remove.coffee":127,"./methods/search.coffee":128,"./methods/select.coffee":129,"./methods/selectAll.coffee":130,"./methods/text.coffee":131,"./methods/timing.coffee":132,"./methods/title.coffee":133,"./methods/type.coffee":134,"./methods/ui.coffee":135,"./methods/width.coffee":136,"./types/auto.js":137,"./types/button/button.coffee":138,"./types/drop/drop.coffee":143,"./types/toggle.js":160}],106:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":82}],107:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"alt"}},{"../../core/methods/filter.coffee":82}],108:[function(e,t,n){t.exports={accepted:[String],value:"color"}},{}],109:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],110:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?d3.select("body"):r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e)},value:d3.select("body")}},{"../../util/d3selection.coffee":210}],111:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),i(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":88,"../../util/d3selection.coffee":210}],112:[function(e,t,n){t.exports={accepted:[Number],value:0}},{}],113:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],114:[function(e,t,n){var r=e("../../util/d3selection.coffee"),i=e("../../core/parse/hideElement.js"),o=e("../../core/parse/element.js"),a=e("../../core/console/print.coffee"),s=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!r(t.data.value)?t.data.element.value&&t.data.element.value.call(i):t.data.value=o(t),void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;a.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;a.warning(s(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&a.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var l={};changes.forEach(function(e){var t=e.method;delete e.method,l[t]=e}),e(l),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../core/parse/element.js":97,"../../core/parse/hideElement.js":98,"../../string/format.js":175,"../../util/d3selection.coffee":210}],115:[function(e,t,n){t.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(e,t){var n,r,i,o,a,s,l,u,c,f;if(r=t.data.element.value,r&&["string","number"].indexOf(typeof e)>=0)if(i=r.node().tagName.toLowerCase(),o=r.attr("type"),"select"===i)for(f=r.selectAll("option"),a=s=0,u=f.length;u>s;a=++s)n=f[a],n&&n[t.id.value]===e&&(r.node().selectedIndex=a);else if("input"===i&&"radio"===o)for(l=0,c=r.length;c>l;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}},{}],116:[function(e,t,n){var r,i,o,a;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:o(),secondary:{align:r(),color:"#444444",decoration:i(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":83,"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],117:[function(e,t,n){var r,i,o,a;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),o=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=o(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,o;return t||(t={}),o=t.vars||{},o.time&&o.time.value&&t.key===o.time.value?(i=e.constructor===Date?e:new Date(e),o.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":80,"../../number/format.coffee":172,"../../object/merge.coffee":173,"../../string/title.coffee":178}],118:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],119:[function(e,t,n){t.exports={back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}},{}],120:[function(e,t,n){t.exports={accepted:[Boolean,Number,String],value:!1}},{}],121:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:r,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:r,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":90}],122:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,mute:r(!0),nesting:["value"],solo:r(!0),value:"value"}},{"../../core/methods/filter.coffee":82}],123:[function(e,t,n){
var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"keywords"}},{"../../core/methods/filter.coffee":82}],124:[function(e,t,n){var r;r=e("../../core/methods/process/margin.coffee"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}},{"../../core/methods/process/margin.coffee":91}],125:[function(e,t,n){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],126:[function(e,t,n){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],127:[function(e,t,n){t.exports={accepted:void 0,process:function(e,t){this.initialized&&t.container.value.remove()},value:void 0}},{}],128:[function(e,t,n){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}},{}],129:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.select(e):e},value:void 0}},{}],130:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.selectAll(e):e},value:void 0}},{}],131:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,String],nesting:!0,mute:r(!0),solo:r(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":82}],132:[function(e,t,n){t.exports={mouseevents:60,ui:200}},{}],133:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),o=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:a(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=o(e).toLowerCase(),t.self.container({id:n})),e},value:!1}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87,"../../string/strip.js":177}],134:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}},{}],135:[function(e,t,n){var r,i,o,a,s;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/process/margin.coffee"),s=e("../../core/methods/font/transform.coffee"),t.exports={align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:r("center"),color:"#444",decoration:i(),family:o(),size:11,transform:s(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5}}},{"../../core/methods/font/align.coffee":83,"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87,"../../core/methods/process/margin.coffee":91}],136:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],137:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():5>t?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],138:[function(e,t,n){t.exports=function(t){var n,r,i,o,a,s,l,u;return s=e("../../../core/console/print.coffee"),i=e("./functions/color.coffee"),o=e("./functions/icons.js"),a=e("./functions/mouseevents.coffee"),l=e("./functions/style.js"),n=t.container.ui.selectAll("div.d3plus_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(i,t).call(l,t).call(o,t).call(a,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),n.order(),t.dev.value&&s.timeEnd("ordering"),u=n):(r=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=n.filter(function(e){return r.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),u.classed("d3plus_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?u.transition().duration(t.draw.timing).call(i,t).call(l,t):u.call(i,t).call(l,t),u.call(o,t).call(a,t),t.dev.value&&s.timeEnd("update"),n.exit().remove()}},{"../../../core/console/print.coffee":54,"./functions/color.coffee":139,"./functions/icons.js":140,"./functions/mouseevents.coffee":141,"./functions/style.js":142}],139:[function(e,t,n){t.exports=function(t,n){var r,i,o;return r=e("../../../../color/legible.coffee"),i=e("../../../../color/lighter.coffee"),o=e("../../../../color/text.coffee"),t.style("background-color",function(e){var t;return t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),t}).style("color",function(e){var t,i,a,s;return s=n.focus.value===e[n.id.value]?.75:1,a=e[n.icon.value]&&n.data.viz.length<n.data.large,!a&&e[n.color.value]?i=r(e[n.color.value]):(t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),i=o(t)),i=d3.rgb(i),"rgba("+i.r+","+i.g+","+i.b+","+s+")"}).style("border-color",n.ui.color.secondary.value)}},{"../../../../color/legible.coffee":46,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52}],140:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../client/rtl.coffee");t.exports=function(e,t){var n="right"===t.font.align.value&&!i||i&&"right"===t.font.align.value;e.each(function(e,o){var a=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&a.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,a.push("selected")):s&&e.d3plus.icon!==!1&&a.push("selected");var l=0,u=d3.select(this).selectAll("div.d3plus_button_element").data(a,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3plus_button_element d3plus_button_"+e+t}).html(function(n){if("label"===n){var r=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[r])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border,l+"px")}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)var n=t.font.size;else var n=l;return-n/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!n||"selected"===e&&n?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&n||"selected"===e&&!n?t.ui.padding.right+"px":"auto"}).style(r()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(r()+"transform",function(e){var n="selected"===e?t.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3plus_button_label");if(l>0){var f=t.ui.padding;f=3===a.length?f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+(2*f.left+l)+"px":a.indexOf("icon")>=0&&!i||a.indexOf("selected")>=0&&i?f.top+"px "+f.right+"px "+f.bottom+"px "+(2*f.left+l)+"px":f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+f.left+"px",c.style("padding",f)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var d=t.width.value;d-=parseFloat(c.style("padding-left"),10),d-=parseFloat(c.style("padding-right"),10),d-=2*t.ui.border,d+="px"}else var d="auto";c.style("width",d)})}},{"../../../../client/prefix.coffee":41,"../../../../client/rtl.coffee":42}],141:[function(e,t,n){t.exports=function(t,n,r){var i,o;return r=e("./color.coffee"),i=e("../../../../client/pointer.coffee"),o=e("../../../../client/ie.js"),t.on(i.over,function(e,t){return n.self.hover(e[n.id.value]),o||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.out,function(e){return n.self.hover(!1),o||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.click,function(e){return n.focus.value!==!1?n.self.focus(e[n.id.value]).draw():n.focus.callback?n.focus.callback(e,n.self):void 0})}},{"../../../../client/ie.js":39,"../../../../client/pointer.coffee":40,"./color.coffee":139}],142:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],143:[function(e,t,n){t.exports=function(t){var n,r,i,o,a,s,l,u,c,f,d;return i=e("./functions/element.coffee"),o=e("./functions/keyboard.coffee"),d=e("./functions/window.js"),f=e("./functions/width.js"),n=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),a=e("./functions/list.js"),r=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,i(t),o(t),d(t),f(t),n(t),l(t),u(t),s(t),a(t),r(t),c(t)}},{"./functions/button.js":146,"./functions/data.js":147,"./functions/element.coffee":148,"./functions/keyboard.coffee":151,"./functions/list.js":152,"./functions/search.js":154,"./functions/selector.js":155,"./functions/title.js":156,"./functions/update.js":157,"./functions/width.js":158,"./functions/window.js":159}],144:[function(e,t,n){t.exports=function(e,t,n){var r=[],n=n||e.active.value;if(n instanceof Array)for(var i=0;i<n.length;i++)r.push(this(e,t,n[i]));else{var o=typeof n;"number"===o?r.push(e.depth.value===n):"function"===o?r.push(n(t)):r.push(t===n)}return r.indexOf(!0)>=0}},{}],145:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else var n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":54}],146:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../client/pointer.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee");t.exports=function(e){if("button"in e.container||(e.dev.value&&a.time("creating main button"),e.container.button=o().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&a.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,n=r(e.data.value.filter(function(n){for(var r=!1,i=0;i<e.id.nesting.length;i++){var o=e.id.nesting[i];if(r=o in n&&n[o]===e.focus.value){t=i;break}}return r})[0]);n||(n=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([n]).id(e.id.nesting).depth(t)}var s=e.hover.value===!0&&e.focus.value;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).format(e.format).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({border:e.ui.border,color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(i.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.coffee":40,"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":209,"../../../form.js":105}],147:[function(e,t,n){var r=e("../../../../string/format.js"),i=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var n=i(e.search.term).split("_"),o=[e.id.value,e.text.value,e.alt.value,e.keywords.value];o=o.filter(function(e){return e}),n=n.filter(function(e){return""!==e});var a=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var r=!1;o.forEach(function(o){if(!r&&o in t&&"string"==typeof t[o]){var u=t[o].toLowerCase();if([e.text.value,e.id.value].indexOf(o)>=0&&0===u.indexOf(e.search.term))a.push(t),r=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),r=!0;else{var c=i(u).split("_");for(var f in c){if(r)break;for(var d in n)if(0===c[f].indexOf(n[d])){l.push(t),r=!0;break}}}}})}),e.data.filtered=d3.merge([a,s,l]),e.data.filtered.forEach(function(e,t){e.d3plus_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},f=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=r(f,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":175,"../../../../string/strip.js":177}],148:[function(e,t,n){t.exports=function(e){return e.data.element.value?(e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){var t;return t=!e.search.enabled||d3.event.relatedTarget!==e.container.value.select("input").node(),t?e.self.open(!1).hover(!1).draw():void 0}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){return 9!==d3.event.keyCode?d3.event.preventDefault():void 0})):void 0}},{}],149:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],150:[function(e,t,n){var r,i,o,a;r=e("./active.js"),i=e("../../../../util/copy.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,s;e.open.value&&(e.dev.value&&a.time("updating list items"),"items"in e.container||(e.container.items=o().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),n=e.draw.timing?e.data.large:1,s=i(e.order),s.value=e.search.term.length?"d3plus_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||e.container.items.focus()===!1)&&e.container.items.focus(e.focus.value,function(t){var n,i,o,a;i=e.data.filtered.filter(function(n){return n[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in i?(o=e.depth.value,a=e.id.solo.value,e.history.states.push(function(){return e.self.depth(o).id({solo:a}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),n=t!==e.focus.value,n&&e.active.value&&(n=r(e,t)),n&&e.self.focus(t).draw())}),e.container.items.active(e.active.value).data({large:n,sort:e.data.sort.value,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).format(e.format).hover(e.hover.value).id(e.id.value).icon({button:!t&&e.icon.next,select:!!t&&e.icon.select,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&a.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":209,"../../../form.js":105,"./active.js":144}],151:[function(e,t,n){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,n,r,i,o,a,s,l,u,c,f,d,h;if(u=d3.event.keyCode,e.open.value||e.hover.value===!0){for(f=e.hover.value===!0?"focus":"hover",s=!1,d=e.data.filtered,a=l=0,c=d.length;c>l;a=++l)if(t=d[a],t[e.id.value]===e[f].value){s=a;break}if(9===u&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(u)>=0)return s===!1?s=0:38===u?e.open.value&&(0>=s?s=e.data.filtered.length-1:s-=1):40===u&&e.open.value&&(s>=e.data.filtered.length-1?s=0:s+=1),o="boolean"!=typeof e.hover.value?e.data.filtered[s][e.id.value]:e.focus.value,e.self.hover(o).open(!0).draw();if(13===u)return"boolean"!=typeof e.hover.value?(n=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],r=e.depth.value,r<e.id.nesting.length-1&&e.id.nesting[r+1]in n?(h=e.id.solo.value,i=function(){return e.self.depth(r).id({solo:h}).draw()},e.history.states.push(i),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===u){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(e.hover.value===!0)return e.self.hover(!1).draw()}}})}},{}],152:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.coffee":54}],153:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){if(e.open.value){e.dev.value&&r.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))var t=!0;t&&e.container.selector.style("display","block");var n=e.container.selector.style("height"),i=e.container.selector.property("scrollTop"),o=e.container.list.style("max-height"),a=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",o).property("scrollTop",a),e.container.selector.style("height",n).property("scrollTop",i);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&r.timeEnd("calculating height"),s){e.dev.value&&r.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3plus_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,n){t[e.id.value]===c&&(u=this)});var t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var f=u.offsetTop,d=u.offsetHeight||u.getBoundingClientRect().height,h=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=f:(e.container.listScroll=h,h>f?e.container.listScroll=f:f+d>h+e.height.secondary-e.search.height&&(e.container.listScroll=f-(e.height.secondary-d-e.search.height))),e.dev.value&&r.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.coffee":54}],154:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),i=e("../../../../core/console/print.coffee");t.exports=function(t){function n(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).toString())}function o(e){var n=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(r()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.dev.value&&i.time("creating search");var a=e("./data.js"),s=e("./items.coffee"),l=e("./update.js");t.container.search=t.container.selector.selectAll("div.d3plus_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(n),t.container.search.select("input").transition().duration(t.draw.timing).call(o)):(t.container.search.call(n),t.container.search.select("input").call(o)),t.container.search.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+t.container.id).call(n).append("input").attr("id","d3plus_drop_input_"+t.container.id).style("-webkit-appearance","none").call(o),t.container.search.select("input").on("keyup."+t.container.id,function(e){var n=this.value;t.search.term!==n&&(t.search.term=n,a(t),s(t),l(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&i.timeEnd("creating search")}},{"../../../../client/prefix.coffee":41,"../../../../core/console/print.coffee":54,"./data.js":147,"./items.coffee":150,"./update.js":157}],155:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],156:[function(e,t,n){var r=e("../../../../client/pointer.coffee"),i=e("../../../../color/lighter.coffee"),o=e("../../../../core/console/print.coffee"),a=e("../../../../color/text.coffee");t.exports=function(e){function t(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",a(e.ui.color.secondary.value))}function n(t){if(!t.empty()){var n=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";n="d3plus_drop_back"+n;var r=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",n).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(r)}}function s(t){var n=u?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(n)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}if(e.open.value){e.dev.value&&o.time("creating title and back button");var l=1===e.id.solo.value.length&&e.depth.value>0,u=l,c=e.container.button.data(Object).viz[0];u=!0;for(var f=0;f<e.id.nesting.length;f++){var d=e.id.nesting[f];if(d in c&&c[d]===e.focus.value){u=!1;break}}e.container.title=e.container.selector.selectAll("div.d3plus_drop_title").data(l?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(t),e.container.title.select("div.d3plus_drop_title_text").transition().duration(e.draw.timing).call(s)):(e.container.title.call(t),e.container.title.select("div.d3plus_drop_title_text").call(s)),e.container.title.select("span.d3plus_drop_back").call(n);var h=e.container.title.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+e.container.id).call(t);h.append("span").attr("id","d3plus_drop_back_"+e.container.id).attr("class","d3plus_drop_back").call(n),h.append("div").attr("id","d3plus_drop_title_text_"+e.container.id).attr("class","d3plus_drop_title_text").call(s),e.container.title.on(r.over,function(t,n){var r=i(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",a(r))}).on(r.out,function(t){var n=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",a(n))}).on(r.click,function(t){e.history.back()}),e.container.title.exit().remove(),l&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&o.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":40,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52,"../../../../core/console/print.coffee":54}],157:[function(e,t,n){var r=e("./items.coffee"),i=e("./height.js"),o=e("../../../../core/console/print.coffee"),a=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var n=e.open.flipped.value;t.style("top",function(){return n?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return n?e.margin.top+e.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(n){n.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3plus_drop_search input").node().focus()}function u(e){return function(){var t=d3.interpolateNumber(this.scrollTop,e);return function(e){this.scrollTop=t(e)}}}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),r(e),i(e),a(e),s(e),e.dev.value&&o.time("drawing list");var c=e.open.value?e.height.secondary-e.margin.title:0;e.draw.timing?(e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",u(e.container.listScroll))):(e.container.selector.call(n).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll)),e.dev.value&&o.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":54,"./arrow.js":145,"./height.js":149,"./items.coffee":150,"./scroll.js":153}],158:[function(e,t,n){var r=e("../../../../util/copy.coffee"),i=e("../../../../core/font/tester.coffee"),o=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),s=e("../../../../object/validate.coffee");t.exports=function(e){function t(t){var r="primary"===t?"value":t,s="value"===r?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===r?e.text.value:e.text.secondary.value||e.text.value,u="value"===r?e.font:e.font.secondary;e.dev.value&&a.time("calculating "+t+" width");var c=o().container(i()).data({large:9999,value:n}).draw({update:!1}).font(u).format(e.format).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===t?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),f=[];c.selectAll("div.d3plus_node").each(function(e){f.push(this.offsetWidth+1)}).remove();var d={};d[r]=d3.max(f),e.self.width(d),e.dev.value&&a.timeEnd("calculating "+t+" width")}var n=[];for(var l in e.data.nested.all){var u=e.data.nested.all[l],c=s(e.text.nesting)&&l in e.text.nesting?e.text.nesting[l][0]:l;[e.id.value,e.text.value].indexOf(c)<0&&(u=r(u),u.forEach(function(t){t[e.text.value||e.id.value]=t[c]})),n=n.concat(u)}"number"!=typeof e.width.value&&t("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?t("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.coffee":54,"../../../../core/font/tester.coffee":70,"../../../../object/validate.coffee":174,"../../../../util/copy.coffee":209,"../../../form.js":105}],159:[function(e,t,n){var r=e("../../../../util/child.coffee"),i=function(e,t){if(void 0===t)var t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,n=t.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(t=n.parentNode),t&&n&&!r(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(o){var n=!1}n&&t.self!==window.top&&i(e,t.parent)};t.exports=i},{"../../../../util/child.coffee":207}],160:[function(e,t,n){var r=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=r().container(e.container.ui).type("button"));var t=e.data.viz.length,n=!!e.width.value&&e.width.value/t,i=e.container.ui.selectAll("div.d3plus_toggle").data(e.data.viz,function(t){return t[e.id.value]});i.exit().remove(),i.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),i.order().each(function(t){"form"in t.d3plus||(t.d3plus.form=r().container(d3.select(this)));var i=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;
t[i]instanceof Array?t.d3plus.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[i]).id(e.id.nesting.slice(1)).type("drop"):t.d3plus.form.data([t]).id(e.id.value).type("button"),t.d3plus.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(n).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":105}],161:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h;d=e("simplify-js"),t.exports=function(e,t){var n,i,a,l,u,f,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,fe,de,he,pe,ge,ve,me,ye,xe,be;if(e.length<3)return null;if(w=[],g=.5,u=5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?f=t.angle:"number"==typeof t.angle?f=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(f=[Number(t.angle)])),null==f&&(f=d3.range(-90,90+u,u)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?v=t.aspectRatio:"number"==typeof t.aspectRatio?v=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(v=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(J=t.origin[0]instanceof Array?t.origin:[t.origin]),p=Math.abs(d3.geom.polygon(e).area()),0===p)return null;if(ne=d3.extent(e,function(e){return e[0]}),$=ne[0],L=ne[1],re=d3.extent(e,function(e){return e[1]}),H=re[0],B=re[1],ve=Math.min(L-$,B-H)*t.tolerance,ge=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)G=e[t],r.push({x:G[0],y:G[1]});return r}(),ve>0&&(ge=d(ge,ve),e=function(){var e,t,n;for(n=[],e=0,t=ge.length;t>e;e++)G=ge[e],n.push([G.x,G.y]);return n}()),t.vdebug&&w.push({type:"simplify",poly:e}),ie=d3.extent(e,function(e){return e[0]}),$=ie[0],L=ie[1],oe=d3.extent(e,function(e){return e[1]}),H=oe[0],B=oe[1],m=[[$,H],[L,H],[L,B],[$,B]],ae=[L-$,B-H],x=ae[0],y=ae[1],ye=Math.min(x,y)/50,null==J)for(J=[],b=d3.geom.polygon(e).centroid(),o(b,e)&&J.push(b);J.length<t.nTries;)he=Math.random()*x+$,pe=Math.random()*y+H,de=[he,pe],o(de,e)&&J.push(de);for(t.vdebug&&w.push({type:"origins",points:J}),N=0,I=null,S=0,T=f.length;T>S;S++)for(a=f[S],l=-a*Math.PI/180,t.vdebug&&w.push({type:"angle",angle:a}),k=z=0,E=J.length;E>z;k=++z)for(W=J[k],se=r(e,W,l),Z=se[0],ee=se[1],le=r(e,W,l+Math.PI/2),Q=le[0],K=le[1],Y=[],null!=Z&&null!=ee&&Y.push([(Z[0]+ee[0])/2,(Z[1]+ee[1])/2]),null!=Q&&null!=K&&Y.push([(Q[0]+K[0])/2,(Q[1]+K[1])/2]),t.vdebug&&w.push({type:"modifOrigin",idx:k,p1W:Z,p2W:ee,p1H:Q,p2H:K,modifOrigins:Y}),M=0,j=Y.length;j>M;M++)if(X=Y[M],t.vdebug&&w.push({type:"origin",cx:X[0],cy:X[1]}),ue=r(e,X,l),Z=ue[0],ee=ue[1],null!==Z&&null!==ee&&(V=Math.min(h(X,Z),h(X,ee)),R=2*Math.sqrt(V),ce=r(e,X,l+Math.PI/2),Q=ce[0],K=ce[1],null!==Q&&null!==K&&(U=Math.min(h(X,Q),h(X,K)),F=2*Math.sqrt(U),!(N>R*F))))for(null!=v?i=v:(q=Math.max(1,t.minWidth/F,N/(F*F)),P=Math.min(t.maxAspectRatio,R/t.minHeight,R*R/N),i=d3.range(q,P+g,g)),O=0,D=i.length;D>O;O++)if(n=i[O],C=Math.max(t.minWidth,Math.sqrt(N*n)),fe=Math.min(R,F*n),!(N>fe*F))for(fe-C>=ye&&t.vdebug&&w.push({type:"aRatio",aRatio:n});fe-C>=ye;)me=(C+fe)/2,_=me/n,xe=X[0],be=X[1],te=[[xe-me/2,be-_/2],[xe+me/2,be-_/2],[xe+me/2,be+_/2],[xe-me/2,be+_/2]],te=c(te,l,X),s(te,e)?(A=!0,N=me*_,I={cx:xe,cy:be,width:me,height:_,angle:a},C=me):(A=!1,fe=me),t.vdebug&&w.push({type:"rectangle",cx:xe,cy:be,width:me,height:_,areaFraction:me*_/p,angle:a,insidePoly:A});return[I,N,w]},h=function(e,t){var n,r;return n=t[0]-e[0],r=t[1]-e[1],n*n+r*r},l=function(e,t,n){var r,i,o,a,s;return s=t[1]<n[1]?[t,n]:[n,t],r=s[0],i=s[1],(e[1]===i[1]||e[1]===r[1])&&(e[1]+=Number.MIN_VALUE),!(e[1]>i[1]||e[1]<r[1])&&(!(e[0]>r[0]&&e[0]>i[0])&&(e[0]<r[0]&&e[0]<i[0]||(o=(i[1]-r[1])/(i[0]-r[0]),a=(e[1]-r[1])/(e[0]-r[0]),a>o)))},o=function(e,t){var n,r,i,o,a;for(o=-1,a=t.length,r=t[a-1],i=0;++o<a;)n=r,r=t[o],l(e,n,r)&&i++;return i%2!==0},a=function(e,t,n){var r,i,o;return r=1e-9,i=e[0],o=e[1],!(i<Math.min(t[0],n[0])-r||i>Math.max(t[0],n[0])+r||o<Math.min(t[1],n[1])-r||o>Math.max(t[1],n[1])+r)},i=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h;return f=1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],c=n[1]-r[1],a=s*c-u*l,Math.abs(a)<f?null:(i=e[0]*t[1]-e[1]*t[0],o=n[0]*r[1]-n[1]*r[0],d=(i*l-o*s)/a,h=(i*c-o*u)/a,[d,h])},f=function(e,t,n,r){var o;return o=i(e,t,n,r),null!=o&&(a(o,e,t)&&a(o,n,r))},s=function(e,t){var n,r,i,a,s,l,u,c;for(s=-1,u=e.length,c=t.length,i=e[u-1];++s<u;)for(n=i,i=e[s],l=-1,a=t[c-1];++l<c;)if(r=a,a=t[l],f(n,i,r,a))return!1;return o(e[0],t)},u=function(e,t,n){var r,i,o,a;return null==n&&(n=[0,0]),o=e[0]-n[0],a=e[1]-n[1],r=Math.cos(t),i=Math.sin(t),[r*o-i*a+n[0],i*o+r*a+n[1]]},c=function(e,t,n){var r,i,o,a;for(a=[],r=0,i=e.length;i>r;r++)o=e[r],a.push(u(o,t,n));return a},r=function(e,t,n){var r,o,s,l,u,c,f,d,p,g,v,m,y,x,b;for(u=1e-9,t=[t[0]+u*Math.cos(n),t[1]+u*Math.sin(n)],x=t[0],b=t[1],m=[x+Math.cos(n),b+Math.sin(n)],f=0,Math.abs(m[0]-x)<u&&(f=1),c=-1,g=e.length,o=e[g-1],d=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++c<g;)r=o,o=e[c],v=i(t,m,r,o),null!=v&&a(v,r,o)&&(y=h(t,v),v[f]<t[f]?d>y&&(d=y,s=v):v[f]>t[f]&&p>y&&(p=y,l=v));return[s,l]}},{"simplify-js":9}],162:[function(e,t,n){t.exports=function(e,t,n){var r,i,o,a;return i={x:0,y:0},0>e&&(e=2*Math.PI+e),"square"===n?(o=45*(Math.PI/180),e<=Math.PI?e<Math.PI/2?o>e?(i.x+=t,a=Math.tan(e)*t,i.y+=a):(i.y+=t,r=t/Math.tan(e),i.x+=r):e<Math.PI-o?(i.y+=t,r=t/Math.tan(Math.PI-e),i.x-=r):(i.x-=t,a=Math.tan(Math.PI-e)*t,i.y+=a):e<3*Math.PI/2?e<o+Math.PI?(i.x-=t,a=Math.tan(e-Math.PI)*t,i.y-=a):(i.y-=t,r=t/Math.tan(e-Math.PI),i.x-=r):e<2*Math.PI-o?(i.y-=t,r=t/Math.tan(2*Math.PI-e),i.x+=r):(i.x+=t,a=Math.tan(2*Math.PI-e)*t,i.y-=a)):(i.x+=t*Math.cos(e),i.y+=t*Math.sin(e)),i}},{}],163:[function(e,t,n){var r;r=e("../geom/offset.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f,d,h,p,g,v,m;if(!e)return[];for(e=e.slice(1).slice(0,-1).split(/L|A/),f=[],i=0,a=e.length;a>i;i++)if(c=e[i],c=c.split(" "),1===c.length)f.push(c[0].split(",").map(function(e){return parseFloat(e)}));else{for(d=f[f.length-1],o=c.pop().split(",").map(function(e){return parseFloat(e)}),h=parseFloat(c.shift().split(",")[0]),m=Math.sqrt(Math.pow(o[0]-d[0],2)+Math.pow(o[1]-d[1],2)),t=Math.acos((h*h+h*h-m*m)/(2*h*h)),u="1"===c[1].split(",")[0],u&&(t=2*Math.PI-t),s=t/(2*Math.PI)*(h*Math.PI*2),p=s/5,g=Math.atan2(-d[1],-d[0])-Math.PI,v=t/p,n=v;t>n;)l=r(g+n,h),f.push([l.x,l.y]),n+=v;f.push(o)}return f}},{"../geom/offset.coffee":162}],164:[function(e,t,n){var r,i,o;r={},r.version="1.9.3 - Cornflower",r.repo="https://github.com/alexandersimoes/d3plus/",r.array={comparator:e("./array/comparator.coffee"),contains:e("./array/contains.coffee"),sort:e("./array/sort.coffee"),update:e("./array/update.coffee")},r.client={css:e("./client/css.coffee"),ie:e("./client/ie.js"),pointer:e("./client/pointer.coffee"),prefix:e("./client/prefix.coffee"),rtl:e("./client/rtl.coffee"),scroll:e("./client/scroll.js"),scrollbar:e("./client/scrollbar.coffee"),touch:e("./client/touch.coffee")},r.color={legible:e("./color/legible.coffee"),lighter:e("./color/lighter.coffee"),mix:e("./color/mix.coffee"),random:e("./color/random.coffee"),scale:e("./color/scale.coffee"),sort:e("./color/sort.coffee"),text:e("./color/text.coffee"),validate:e("./color/validate.coffee")},r.data={bestRegress:e("./data/bestRegress.coffee"),lof:e("./data/lof.coffee"),mad:e("./data/mad.coffee")},r.font={sizes:e("./font/sizes.coffee"),validate:e("./font/validate.coffee")},r.form=e("./form/form.js"),r.geom={largestRect:e("./geom/largestRect.coffee"),offset:e("./geom/offset.coffee"),path2poly:e("./geom/path2poly.coffee")},r.network={cluster:e("./network/cluster.coffee"),distance:e("./network/distance.coffee"),normalize:e("./network/normalize.coffee"),shortestPath:e("./network/shortestPath.coffee"),smallestGap:e("./network/smallestGap.coffee"),subgraph:e("./network/subgraph.coffee")},r.number={format:e("./number/format.coffee")},r.object={merge:e("./object/merge.coffee"),validate:e("./object/validate.coffee")},r.string={format:e("./string/format.js"),list:e("./string/list.coffee"),strip:e("./string/strip.js"),title:e("./string/title.coffee")},r.textwrap=e("./textwrap/textwrap.coffee"),r.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.coffee"),remove:e("./tooltip/remove.coffee")},r.util={buckets:e("./util/buckets.coffee"),child:e("./util/child.coffee"),closest:e("./util/closest.coffee"),copy:e("./util/copy.coffee"),d3selection:e("./util/d3selection.coffee"),dataurl:e("./util/dataURL.coffee"),uniques:e("./util/uniques.coffee")},r.viz=e("./viz/viz.coffee"),o=e("./client/css.coffee"),i=e("./core/console/print.coffee"),o("d3plus.css")&&i.warning("d3plus.css has been deprecated, you do not need to load this file.",r.repo+"releases/tag/v1.4.0"),"undefined"!=typeof window&&(window.d3plus=r),t.exports=r},{"./array/comparator.coffee":34,"./array/contains.coffee":35,"./array/sort.coffee":36,"./array/update.coffee":37,"./client/css.coffee":38,"./client/ie.js":39,"./client/pointer.coffee":40,"./client/prefix.coffee":41,"./client/rtl.coffee":42,"./client/scroll.js":43,"./client/scrollbar.coffee":44,"./client/touch.coffee":45,"./color/legible.coffee":46,"./color/lighter.coffee":47,"./color/mix.coffee":48,"./color/random.coffee":49,"./color/scale.coffee":50,"./color/sort.coffee":51,"./color/text.coffee":52,"./color/validate.coffee":53,"./core/console/print.coffee":54,"./data/bestRegress.coffee":100,"./data/lof.coffee":101,"./data/mad.coffee":102,"./font/sizes.coffee":103,"./font/validate.coffee":104,"./form/form.js":105,"./geom/largestRect.coffee":161,"./geom/offset.coffee":162,"./geom/path2poly.coffee":163,"./network/cluster.coffee":166,"./network/distance.coffee":167,"./network/normalize.coffee":168,"./network/shortestPath.coffee":169,"./network/smallestGap.coffee":170,"./network/subgraph.coffee":171,"./number/format.coffee":172,"./object/merge.coffee":173,"./object/validate.coffee":174,"./string/format.js":175,"./string/list.coffee":176,"./string/strip.js":177,"./string/title.coffee":178,"./textwrap/textwrap.coffee":202,"./tooltip/create.js":203,"./tooltip/move.coffee":204,"./tooltip/remove.coffee":205,"./util/buckets.coffee":206,"./util/child.coffee":207,"./util/closest.coffee":208,"./util/copy.coffee":209,"./util/d3selection.coffee":210,"./util/dataURL.coffee":211,"./util/uniques.coffee":212,"./viz/viz.coffee":335}],165:[function(e,t,n){window.d3=e("d3"),window.topojson=e("topojson")},{d3:5,topojson:33}],166:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N;if(g=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(j=r(e,t),e=j[0],t=j[1],null===t))return null;d=t.distance,C=t.nodeid,N=t.startpoint,p=t.endpoint,T=t.nodes,E={};for(m in T)E[m]={node:T[m].node,degree:0};for(A=0,k={},v=0,w=e.length;w>v;v++)h=e[v],i=C(N(h)),o=C(p(h)),i in k||(k[i]={}),o in k||(k[o]={}),o in k[i]||(k[i][o]=0,k[o][i]=0,A++,E[i].degree+=1,E[o].degree+=1);u={},n=0;for(m in E)M=E[m],u[m]={score:M.degree/(2*A),nodes:[m]};for(i in k)for(o in k[i])k[i][o]=1/(2*A)-E[i].degree*E[o].degree/(4*A*A);for(y=0;1e3>y;){f=-1,S=void 0,z=void 0;for(i in k)for(o in k[i])k[i][o]>f&&(f=k[i][o],S=i,z=o);if(0>f)break;for(b in k[S])b!==z&&(b in k[z]?k[z][b]+=k[S][b]:k[z][b]=k[S][b]-2*u[z].score*u[b].score,k[b][z]=k[z][b]),delete k[b][S];for(b in k[z])b in k[S]||b===z||(k[z][b]-=2*u[S].score*u[b].score,k[b][z]=k[z][b]);for(D=u[S].nodes,x=0,_=D.length;_>x;x++)M=D[x],u[z].nodes.push(M);u[z].score+=u[S].score,t.vdebug&&g.push({type:"merge",father:z,child:S,nodes:u[z].nodes}),delete u[S],delete k[S],n+=f,y++}return l=function(){var e;e=[];for(a in u)c=u[a],e.push([a,c.nodes.length]);return e}(),l.sort(function(e,t){return t[1]-e[1]}),O=function(){var e,t,n;for(n=[],e=0,t=l.length;t>e;e++)s=l[e],n.push(u[s[0]].nodes);return n}(),[O,g]}},{"./normalize.coffee":168}],167:[function(e,t,n){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}},{}],168:[function(e,t,n){var r;r=e("../core/console/print.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O;if(E=t.source,D=t.target,a=t.directed,s=t.distance,z=t.nodeid,j=t.startpoint,c=t.endpoint,n=t.K,O=t.vdebug,a||(a=!1),null==n&&(n=1),null==z?z=function(e){return e}:"string"==typeof z&&(z=function(e){return function(t){return t[e]}}(z)),null!=E&&"object"==typeof E&&(E=z(E)),null!=D&&"object"==typeof D&&(D=z(D)),null==j?j=function(e){return e.source}:"string"==typeof j&&(j=function(e){return function(t){return t[e]}}(j)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},d=m=0,b=e.length;b>m;d=++m)l=e[d],i=z(j(l)),o=z(c(l)),u[i+"_"+o]=s[d];s=function(e){return i=z(j(e)),o=z(c(e)),u[i+"_"+o]}}for(M={},y=0,w=e.length;w>y;y++){for(l=e[y],A=j(l),S=c(l),g=z(A),v=z(S),C=[A,S],x=0,_=C.length;_>x;x++)k=C[x],h=z(k),h in M||(M[h]={node:k,outedges:[]});M[g].outedges.push(l),a||M[v].outedges.push(l)}return f=null,0===e.length?f="The length of edges is 0":0>n?f="K can not have negative value":null==s(e[0])?f="Check the distance function/attribute":null==j(e[0])?f="Check the startpoint function/attribute":null==c(e[0])?f="Check the endpoint function/attribute":(p=z(j(e[0])),null==p||"string"!=(T=typeof p)&&"number"!==T?f="Check the nodeid function/attribute":null==E||E in M?null==D||D in M||(f="The target is not in the graph"):f="The source is not in the graph"),null!=f?(r.error(f),null):[e,{source:E,target:D,directed:a,distance:s,nodeid:z,startpoint:j,endpoint:c,K:n,nodes:M,vdebug:O}]}},{"../core/console/print.coffee":54}],169:[function(e,t,n){var r,i;r=e("heap"),i=e("./normalize.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O;if(null==n&&(n={}),n.source=t,(null==n.nodes||"object"!=typeof n.nodes)&&(S=i(e,n),e=S[0],n=S[1],null===n))return null;t=n.source,j=n.target,u=n.directed,c=n.distance,_=n.nodeid,E=n.startpoint,d=n.endpoint,o=n.K,k=n.nodes;for(v in k)w=k[v],w.count=0;for(p=new r(function(e,t){return e.distance-t.distance}),O={},null==j&&(O[t]=!0),p.push({edge:null,target:t,distance:0}),b=0,T=[];!p.empty()&&(b=Math.max(b,p.size()),A=p.pop(),D=A.target,k[D].count++,null==j?T.push(A):D===j&&T.push(A),T.length!==o);)if(k[D].count<=o)for(z=k[D].outedges,g=0,y=z.length;y>g;g++){if(f=z[g],a=_(E(f)),l=_(d(f)),u||l!==D||(M=[l,a],a=M[0],l=M[1]),null==j){if(O[l])continue;O[l]=!0}s=A.distance+c(f),p.push({edge:f,previous:A,target:l,distance:s})}for(h=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},m=0,x=T.length;x>m;m++)C=T[m],null!=j&&(delete C.target,C.edges=h(C)),delete C.edge,delete C.previous;return T}},{"./normalize.coffee":168,heap:6}],170:[function(e,t,n){var r;r=e("./distance.coffee"),t.exports=function(e,t){var n,i;return t||(t={}),n=[],i=d3.geom.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}),i(e).visit(function(e){var i,o,a,s,l,u,c,f;if(!e.leaf)for(c=e.nodes,i=0,a=c.length;a>i;i++)if(l=c[i],l&&l.point)if(t.origin)n.push(r(l,t));else for(f=e.nodes,o=0,s=f.length;s>o;o++)u=f[o],u&&u.point&&u.point!==l.point&&n.push(r(l,u));return!1}),t.all?n.sort(function(e,t){return e-t}):d3.min(n)}},{"./distance.coffee":167}],171:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t,n){var i,o,a,s,l,u,c,f,d,h,p,g;return null==n&&(n={}),n.source=t,null!=n.nodes&&"object"==typeof n.nodes||(h=r(e,n),e=h[0],n=h[1],null!==n)?(t=n.source,a=n.directed,s=n.distance,f=n.nodeid,p=n.startpoint,u=n.endpoint,i=n.K,d=n.nodes,g={},g[t]=!0,o=function(e,t){var n,r,l,c,h,v,m,y,x;for(m=d[e].outedges,x=[],c=0,h=m.length;h>c;c++)l=m[c],n=f(p(l)),r=f(u(l)),a||r!==e||(y=[r,n],n=y[0],r=y[1]),r in g?x.push(void 0):(v=t+s(l),i>=v?(g[r]=!0,x.push(o(r,v))):x.push(void 0));return x},o(t,0),{nodes:function(){var e;e=[];for(c in g)e.push(d[c].node);return e}(),edges:function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)l=e[t],f(p(l))in g&&f(u(l))in g&&r.push(l);return r}()}):null}},{"./normalize.coffee":168}],172:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p;return void 0===e||null===e||e===!1?"":(t||(t={}),l="locale"in t?t.locale:r,d=l.time.slice(),i=d3.locale(l.format),t||(t={}),h=t.vars||{},o=t.key,a=!("labels"in t)||t.labels,s=e.toString().split(".")[0].length,h.time&&h.time.value&&d.push(h.time.value),"string"==typeof o&&d.indexOf(o.toLowerCase())>=0?u=e:"share"===o?(u=0===e?0:e>=100?i.numberFormat(",f")(e):e>99?i.numberFormat(".3g")(e):i.numberFormat(".2g")(e),u+="%"):10>e&&e>-10?(s=e.toString().split("."),c=1,s.length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),e>-1&&1>e||(p=s[1].length-parseFloat(s[1]).toString().length,c+=1+p)),u=i.numberFormat("."+c+"g")(e)):s>3?(f=d3.formatPrefix(e).symbol,f=f.replace("G","B"),e=d3.formatPrefix(e).scale(e),e=i.numberFormat(".3g")(e),e=e.replace(l.format.decimal,"."),e=parseFloat(e)+"",e=e.replace(".",l.format.decimal),u=e+f):u=3===s?i.numberFormat(",f")(e):0===e?0:e===parseInt(e,10)?i.numberFormat(".2")(e):i.numberFormat(".3g")(e),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),a&&o&&"format"in h&&o in h.format.affixes.value?(n=h.format.affixes.value[o],n[0]+u+n[1]):u)}},{"../core/locale/languages/en_US.coffee":71}],173:[function(e,t,n){var r,i;r=e("../util/d3selection.coffee"),i=e("./validate.coffee"),t.exports=function(e,t){var n,o;return n=function(e,t,o){var a,s,l;s=[];for(a in e)l=e[a],"undefined"!=typeof l?!o&&i(l)?("object"!=typeof t[a]&&(t[a]={}),s.push(n(l,t[a],0===a.indexOf("d3plus")))):!r(l)&&l instanceof Array?s.push(t[a]=l.slice(0)):s.push(t[a]=l):s.push(void 0);return s},o={},e&&n(e,o),t&&n(t,o),o}},{"../util/d3selection.coffee":210,"./validate.coffee":174}],174:[function(e,t,n){t.exports=function(e){return e&&e.constructor===Object}},{}],175:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=t.unkeyed_index,t.unkeyed_index++),r==+r)return"undefined"!==e[r]?e[r]:n;for(var i=0;i<e.length;i++)if("object"==typeof e[i]&&"undefined"!=typeof e[i][r])return e[i][r];return n}.bind(t))}},{}],176:[function(e,t,n){var r,i;r=e("./format.js"),i=e("../core/locale/languages/en_US.coffee").ui,t.exports=function(e,t,n,o){var a;return e instanceof Array?(e=e.slice(0),t||(t=i.and),o||(o=i.moreText),2===e.length?e.join(" "+t+" "):(n&&e.length>n&&(a=e.length-n+1,e=e.slice(0,n-1),e[n-1]=r(o,a)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}},{"../core/locale/languages/en_US.coffee":71,"./format.js":175}],177:[function(e,t,n){t.exports=function(e){var t=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return e+="",""+e.replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"_";if(t.indexOf(e)>=0)return"";for(var r=e,i=0;i<n.length;i++)if(new RegExp(n[i][0]).test(e)){r=n[i][1];break}return r})}},{}],178:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,i,o,a,s;return e?(t||(t={}),o=t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(a="locale"in this?this.locale.value:r,s=a.lowercase.map(function(e){return e.toLowerCase()}),i=a.uppercase,i=i.concat(i.map(function(e){return e+"s"})),n=i.map(function(e){return e.toLowerCase()}),e.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(t,r){var o,a;return t?(o=n.indexOf(t.toLowerCase()),a=o>=0?i[o]:s.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()):""}))):""}},{"../core/locale/languages/en_US.coffee":71}],179:[function(e,t,n){var r,i;r=e("./foreign.coffee"),i=e("./tspan.coffee"),t.exports=function(e){e.text.html.value?r(e):i(e)}},{"./foreign.coffee":180,"./tspan.coffee":183}],180:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;o=e.container.value,r=o.attr("font-family")||o.style("font-family"),t=e.align.value||o.attr("text-anchor")||o.style("text-anchor"),n=o.attr("fill")||o.style("fill"),i=o.attr("opacity")||o.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(o.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",i).text(e.text.current)}},{}],181:[function(e,t,n){t.exports=function(e){var t,n,r,i,o,a,s,l,u,c;return n=e.container.value,i=n.node().previousElementSibling,a=i?i.tagName.toLowerCase():"",i&&(i=d3.select(i)),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),i&&(e.shape.accepted.indexOf(a)>=0&&e.self.shape(a),"rect"===a?(u=parseFloat(i.attr("x"),10)||0,c=parseFloat(i.attr("y"),10)||0,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(i.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(i.attr("height")),e.self.height(r))):"circle"===a?(o=parseFloat(i.attr("r"),10),u=parseFloat(i.attr("cx"),10)||0,u-=o,c=parseFloat(i.attr("cy"),10)||0,c-=o,e.padding.value===!1&&(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*o,10),e.height.value||e.self.height(2*o,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),e.size.value?void 0:e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}},{}],182:[function(e,t,n){t.exports=function(e){var t;return e.text.value||(t=e.container.value.text(),t&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/^\s+|\s+$/g,""),e.self.text(t))),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):e.text.phrases=[e.text.value+""],e.align.value?void 0:e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}},{}],183:[function(e,t,n){var r;r=e("../../client/rtl.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D;return d=function(t){var r;return r=!g||t?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan"),r.attr("x",T+"px").attr("dy",n+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},f=-90===e.rotate.value||90===e.rotate.value,z=f?e.height.inner:e.width.inner,s=f?e.width.inner:e.height.inner,t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start",E="end"===t||"start"===t&&r?z:"middle"===t?z/2:0,S=e.valign.value||"top",T=e.container.x+E,o=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],n=e.container.dy||1.1*o,_=null,p=null,M=null,g=!1,D=0,"circle"===e.shape.value&&("middle"===S?D=s/n%1*n/2:"end"===S&&(D=s/n%1*n)),e.container.value.attr("text-anchor",t).attr("font-size",o+"px").style("font-size",o+"px").attr("x",e.container.x).attr("y",e.container.y),A=function(){return _.remove(),g?(l++,_=e.container.value.select("tspan")):(l--,_=d3.select(e.container.value.node().lastChild)),_.empty()?void 0:(M=_.text().match(/[^\s-]+-?/g),i())},u=function(){var t;return"circle"===e.shape.value?(t=(l-1)*n+D,t>s/2&&(t+=n),2*Math.sqrt(t*(2*(z/2)-t))):z},i=function(){var t,n;return M&&M.length?(n=M.pop(),t=n.charAt(n.length-1),1===n.length&&e.text.split.value.indexOf(n)>=0?i():(e.text.split.value.indexOf(t)>=0&&(n=n.substr(0,n.length-1)),_.text(M.join(" ")+" "+n+"..."),_.node().getComputedTextLength()>u()?i():void 0)):A()},h=function(t){var n,r,i,o;if(n=_.text(),o="",g){if(o=e.text.current.charAt(e.text.current.length-p.length-1)," "===o)for(i="",r=2;" "===o;)i+=" ",o=e.text.current.charAt(e.text.current.length-p.length-r),r++;else i="";p=t+i+p,_.text(t+i+n)}else{if(o=e.text.current.charAt(p.length)," "===o)for(i="",r=1;" "===o;)i+=" ",o=e.text.current.charAt(p.length+r),r++;else i="";p+=i+t,_.text(n+i+t)}return Math.floor(_.node().getComputedTextLength())>u()||"\n"===o?(_.text(n),n.length&&(_=d()),_.text(t),g?l--:l++):void 0},w=1,l=null,c=null,C=function(){var t,r,i,o,a,u;for(e.container.value.text("").html(""),M=e.text.words.slice(),g&&M.reverse(),p="",_=d(!0),l=w,r=0,i=M.length;i>r;r++){if(u=M[r],l*n>s){A();break}for(h(u),a=!0;a;){for(o=e.text.current.charAt(p.length),t=1;" "===o;)o=e.text.current.charAt(p.length+t),t++;a=e.text.split.value.indexOf(o)>=0,a&&h(o)}}return l*n>s&&A(),c=Math.abs(l-w)+1},C(),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"circle"===e.shape.value&&(b=s-c*n,b>n&&("middle"===S?(w=(b/n/2>>0)+1,C()):"bottom"===S&&(g=!0,w=s/n>>0,C()))),c=0,e.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?c++:void 0}),"top"===S?j=0:(a=c*n,j="middle"===S?s/2-a/2:s-a),j-=.2*n,k="translate(0,"+j+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+z/2,x=e.container.y+s/2):(v=e.rotate.value<0?z:s,y=e.container.x+v/2,x=e.container.y+v/2),m="rotate("+e.rotate.value+", "+y+", "+x+")",e.container.value.attr("transform",m+k)}},{"../../client/rtl.coffee":42}],184:[function(e,t,n){var r,i,o,a;r=e("./flow.coffee"),i=e("../../font/sizes.coffee"),a=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text["break"]),t=e.text.current.charAt(0),t!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?o(e):r(e))},t.exports=a,o=function(e){var t,n,o,s,l,u,c,f,d,h,p,g,v,m,y,x,b;for(b=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",b.push(e.text.words[c]+t),c++;h=-90===e.rotate.value||90===e.rotate.value,y=h?e.height.inner:e.width.inner,l=h?e.width.inner:e.height.inner,p=Math.floor(e.size.value[1]),f="circle"===e.shape.value?.75*y:y,v=i(b,{"font-size":p+"px"},{parent:e.container.value}),d=d3.max(v,function(e){return e.width}),n=1.165+y/l*.11,m=d3.sum(v,function(t){var n;return n=e.container.dy||1.2*p,t.width*n})*n,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):f*l,(d>f||m>s)&&(o=Math.sqrt(s/m),x=f/d,g=d3.min([o,x]),p=d3.max([e.size.value[0],Math.floor(p*g)])),u=Math.floor(.8*l),p>u&&(p=u),d*(p/e.size.value[1])<=f?(p!==e.size.value[1]&&e.self.size([e.size.value[0],p]),r(e)):a(e)}},{"../../font/sizes.coffee":103,"./flow.coffee":179}],185:[function(e,t,n){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t+1]),e},value:!1}},{}],186:[function(e,t,n){arguments[4][109][0].apply(n,arguments)},{dup:109}],187:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e!==!1&&(r(e)?e:e instanceof Array?d3.select(e[0][0]):d3.select(e))},value:!1}},{"../../util/d3selection.coffee":210}],188:[function(e,t,n){arguments[4][113][0].apply(n,arguments)},{dup:113}],189:[function(e,t,n){var r,i;r=e("../../core/console/print.coffee"),i=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var n;return this.initialized===!1?e:(t.container.value===!1?(n=t.format.locale.value.dev.setContainer,r.warning(n,"container")):t.container.value.empty()?(n=t.format.locale.value.dev.noContainer,r.warning(i(n,'"'+t.container.value+'"'),"container")):(t.dev.value&&r.time("total draw time"),t.container.value.call(t.self)),e)},value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":175}],190:[function(e,t,n){var r,i;r=e("../../core/locale/locale.coffee"),i=e("../../object/merge.coffee"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(r)},process:function(e){var t,n;return t="en_US",n=r[t],e!==t&&(n=i(n,r[e])),this.language=e,n},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":80,"../../object/merge.coffee":173}],191:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],192:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{dup:191}],193:[function(e,t,n){arguments[4][113][0].apply(n,arguments)},{dup:113}],194:[function(e,t,n){t.exports={accepted:[-180,-90,0,90,180],value:0}},{}],195:[function(e,t,n){t.exports={accepted:["circle","square"],value:!1}},{}],196:[function(e,t,n){t.exports={accepted:[Array,!1],value:!1}},{}],197:[function(e,t,n){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this["break"]=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this["break"]=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}},{}],198:[function(e,t,n){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],199:[function(e,t,n){arguments[4][191][0].apply(n,arguments);
},{dup:191}],200:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{dup:191}],201:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{dup:191}],202:[function(e,t,n){var r,i,o,a,s;r=e("../core/methods/attach.coffee"),o=e("./helpers/parseSize.coffee"),i=e("../core/console/print.coffee"),a=e("./helpers/parseText.coffee"),s=e("./helpers/wrap.coffee"),t.exports=function(){var t;return t={self:function(e){return e.each(function(){o(t),t.size.value[0]<=t.height.inner?(a(t),s(t)):t.container.value.html(""),t.dev.value&&i.timeEnd("total draw time")}),t.self}},r(t,{align:e("./methods/align.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),padding:e("./methods/padding.coffee"),resize:e("./methods/resize.coffee"),rotate:e("./methods/rotate.coffee"),text:e("./methods/text.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),valign:e("./methods/valign.coffee"),width:e("./methods/width.coffee"),x:e("./methods/x.coffee"),y:e("./methods/y.coffee")}),t.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":81,"./helpers/parseSize.coffee":181,"./helpers/parseText.coffee":182,"./helpers/wrap.coffee":184,"./methods/align.coffee":185,"./methods/config.coffee":186,"./methods/container.coffee":187,"./methods/dev.coffee":188,"./methods/draw.coffee":189,"./methods/format.coffee":190,"./methods/height.coffee":191,"./methods/padding.coffee":192,"./methods/resize.coffee":193,"./methods/rotate.coffee":194,"./methods/shape.coffee":195,"./methods/size.coffee":196,"./methods/text.coffee":197,"./methods/valign.coffee":198,"./methods/width.coffee":199,"./methods/x.coffee":200,"./methods/y.coffee":201}],203:[function(e,t,n){function r(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var i=e("../core/locale/languages/en_US.coffee"),o=e("../client/pointer.coffee"),a=e("../color/legible.coffee"),s=e("./move.coffee"),l=e("../client/prefix.coffee"),u=e("../client/rtl.coffee"),c=e("./remove.coffee"),f=e("../client/scroll.js"),d=e("../string/list.coffee"),h=e("../color/text.coffee");t.exports=function(e){var t=e.fullscreen?250:200,n=l();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||i,e.stacked=e.stacked||!1;var p=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.parent.node()===document.body?e.limit=[window.innerWidth+f.x(),window.innerHeight+f.y()]:e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)],e.title instanceof Array){var g=e.locale.ui.and,v=e.locale.ui.more;e.title=d(e.title,g,3,v)}if(c(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?p/2:window.innerHeight/2;else if(e.align){var m=e.align.split(" ");e.anchor.y=m[0],m[1]?e.anchor.x=m[1]:e.anchor.x="center"}else e.anchor.x="center",e.anchor.y="top";var y=e.width-30;e.fullscreen&&e.parent.append("div").attr("id","d3plus_tooltip_curtain_"+e.id).attr("class","d3plus_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(o.click,function(){c(e.id)});var x=e.parent.append("div").datum(e).attr("id","d3plus_tooltip_id_"+e.id).attr("class","d3plus_tooltip d3plus_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(o.out,r);e.max_height&&x.style("max-height",e.max_height+"px"),e.fixed?(x.style("z-index",500),e.mouseevents=!0):x.style("z-index",2e3);var b=x.append("div").datum(e).attr("class","d3plus_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html&&!e.stacked){_=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,P=e.parent?.75*p:.75*window.innerHeight,b.style("width",_+"px").style("height",P+"px");var w=b.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var _="auto";b.style("max-width",e.max_width+"px")}else var _=e.width-14+"px";var w=b.style("width",_)}if(e.title||e.icon)var k=w.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen&&(x.append("div").attr("class","d3plus_tooltip_close").style("background-color",e.color).style("color",h(e.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(o.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(o.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(o.click,function(){c(e.id)}),d3.select("body").on("keydown.esc_"+e.id,function(){27===d3.event.keyCode&&(c(e.id),d3.select("body").on("keydown.esc_"+e.id,null))})),e.mouseevents){if(e.mouseevents!==!0){var A=d3.select(e.mouseevents).on(o.out),S=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var n="string"==typeof t.className?t.className:t.className.baseVal,i=0==n.indexOf("d3plus_tooltip");else var i=!1;t&&(z(x.node(),t)||z(e.mouseevents,t)||i)||(A(d3.select(e.mouseevents).datum()),r(),d3.select(e.mouseevents).on(o.out,A))},z=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(e.mouseevents).on(o.out,S),x.on(o.out,S);var M=d3.select(e.mouseevents).on(o.move);M&&x.on(o.move,M)}}else x.style("pointer-events","none");if(e.arrow&&x.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",e.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1),e.icon){var C=k.append("div").attr("class","d3plus_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&C.style("background-color",e.color),y-=C.node().offsetWidth}if(e.title){var T=e.max_width-6;e.icon&&(T-=e.iconsize+6),T+="px",k.append("div").attr("class","d3plus_tooltip_title").style("max-width",T).style("color",e.icon?e.fontcolor:a(e.color)).style("vertical-align","top").style("width",y+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}if(e.description&&w.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description),e.data||e.html&&!e.fullscreen)var E=w.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var j=0,D={},O=null;e.data.forEach(function(t,i){t.group&&O!=t.group&&(O=t.group,E.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var s=E.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);t.highlight===!0?s.style("color",a(e.color)):(t.allColors||t.highlight!==e.color)&&s.style("color",a(t.highlight));var c=s.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(t.name).on(o.out,function(){d3.event.stopPropagation()});if(t.link&&c.style("cursor","pointer").on(o.click,t.link),t.value instanceof Array){var f=e.locale.ui.and,d=e.locale.ui.more;t.value=list(t.value,f,3,d)}var h=s.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(o.out,function(){d3.event.stopPropagation()});if(u?h.style("left","6px"):h.style("right","6px"),e.mouseevents&&t.desc){var p=s.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(t.desc).on(o.out,function(){d3.event.stopPropagation()}),g=p.node().offsetHeight||p.node().getBoundingClientRect().height;p.style("height","0px");var v=c.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(l+"transition","background-color 0.5s").text("?").on(o.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),p.style("height",g+"px")}).on(o.out,function(){d3.event.stopPropagation()});c.style("cursor","pointer").on(o.over,function(){r();var e=d3.select(this.parentNode).style("color");v.style("background-color",e),p.style("height",g+"px")}),s.on(o.out,function(){d3.event.stopPropagation(),r()})}var m=parseFloat(h.style("width"),10);m>e.width/2&&(m=e.width/2),m>j&&(j=m),i!=e.data.length-1&&(t.group&&t.group==e.data[i+1].group||!t.group&&!e.data[i+1].group)&&E.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),E.selectAll(".d3plus_tooltip_data_name").style("width",function(){var e=parseFloat(d3.select(this.parentNode).style("width"),10);return e-j-30+"px"}),E.selectAll(".d3plus_tooltip_data_value").style("width",j+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);D[e.name]=t}),E.selectAll(".d3plus_tooltip_data_name").style("min-height",function(e){return D[e.name]+"px"})}!e.html||e.fullscreen&&!e.stacked||(E.append("div").html(e.html),e.js&&e.js(b));var N=w.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&N.html(e.footer),e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,e.html&&e.fullscreen&&!e.stacked){var P=e.height-12,_=x.node().offsetWidth-e.width-44;b.append("div").attr("class","d3plus_tooltip_html").style("width",_+"px").style("height",P+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html),e.js&&e.js(b)}if(e.width=x.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||(!e.fullscreen||e.stacked)&&e.html){if(!e.fullscreen||e.stacked)var F=e.fixed?p-e.y-10:p-10,P=e.height<F?e.height:F;else var P=e.height;P-=parseFloat(b.style("padding-top"),10),P-=parseFloat(b.style("padding-bottom"),10),k&&(P-=k.node().offsetHeight||k.node().getBoundingClientRect().height,P-=parseFloat(k.style("padding-top"),10),P-=parseFloat(k.style("padding-bottom"),10)),N&&(P-=N.node().offsetHeight||N.node().getBoundingClientRect().height,P-=parseFloat(N.style("padding-top"),10),P-=parseFloat(N.style("padding-bottom"),10)),E.style("max-height",P+"px")}e.height=x.node().offsetHeight||x.node().getBoundingClientRect().height,s(e.x,e.y,e.id)}},{"../client/pointer.coffee":40,"../client/prefix.coffee":41,"../client/rtl.coffee":42,"../client/scroll.js":43,"../color/legible.coffee":46,"../color/text.coffee":52,"../core/locale/languages/en_US.coffee":71,"../string/list.coffee":176,"./move.coffee":204,"./remove.coffee":205}],204:[function(e,t,n){var r,i;i=e("../client/scroll.js"),t.exports=function(e,t,n){var o,a,s;return n||(n="default"),s=d3.select("div#d3plus_tooltip_id_"+n),s.node()&&(o=s.datum(),o.cx=e,o.cy=t,o.fixed||(a="body"===o.parent.node().tagName.toLowerCase()?[i.x(),i.y()]:[0,0],"center"!==o.anchor.y?("right"===o.anchor.x?o.x=o.cx-o.arrow_offset-4:"center"===o.anchor.x?o.x=o.cx-o.width/2:"left"===o.anchor.x&&(o.x=o.cx-o.width+o.arrow_offset+2),"bottom"===o.anchor.y?o.flip=o.cy+o.height+o.offset<=o.limit[1]:"top"===o.anchor.y&&(o.flip=o.cy-o.height-o.offset<a[1]),o.flip?o.y=o.cy+o.offset+o.arrow_offset:o.y=o.cy-o.height-o.offset-o.arrow_offset):(o.y=o.cy-o.height/2,"right"===o.anchor.x?o.flip=o.cx+o.width+o.offset<=o.limit[0]:"left"===o.anchor.x&&(o.flip=o.cx-o.width-o.offset<a[0]),"center"===o.anchor.x?(o.flip=!1,o.x=o.cx-o.width/2):o.flip?o.x=o.cx+o.offset+o.arrow_offset:o.x=o.cx-o.width-o.offset),o.x<a[0]?o.x=a[0]:o.x+o.width>o.limit[0]&&(o.x=o.limit[0]-o.width),o.y<a[1]?o.y=a[1]:o.y+o.height>o.limit[1]&&(o.y=o.limit[1]-o.height)),s.style("top",o.y+"px").style("left",o.x+"px"),o.arrow&&s.selectAll(".d3plus_tooltip_arrow").call(r)),s},r=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5,t<2-e.width/2&&(t=2-e.width/2)):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5),t>e.width/2-11&&(t=e.width/2-11)),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset,t<4-e.height/2&&(t=4-e.height/2)):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset),t>e.height/2-22&&(t=e.height/2-22)),t+"px")})}},{"../client/scroll.js":43}],205:[function(e,t,n){t.exports=function(e){return e?(d3.selectAll("div#d3plus_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3plus_tooltip_id_"+e).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],206:[function(e,t,n){t.exports=function(e,t){var n,r;return n=[],r=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+r,r)}},{}],207:[function(e,t,n){var r;r=e("./d3selection.coffee"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{"./d3selection.coffee":210}],208:[function(e,t,n){t.exports=function(e,t){var n,r;return t.constructor===String?(r=e.indexOf(t),r>-1?e[r]:e[0]):(n=e[0],e.forEach(function(e){return Math.abs(t-e)<Math.abs(t-n)?n=e:void 0}),n)}},{}],209:[function(e,t,n){var r,i,o;i=e("../object/merge.coffee"),o=e("../object/validate.coffee"),r=function(e){var t;return o(e)?i(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(r(e))}),t):e},t.exports=r},{"../object/merge.coffee":173,"../object/validate.coffee":174}],210:[function(e,t,n){var r;r=e("../client/ie.js"),t.exports=function(e){return r?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}},{"../client/ie.js":39}],211:[function(e,t,n){t.exports=function(e,t){var n;n=new Image,n.src=e,n.crossOrigin="Anonymous",n.onload=function(){var e,n;e=document.createElement("canvas"),e.width=this.width,e.height=this.height,n=e.getContext("2d"),n.drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}},{}],212:[function(e,t,n){var r,i;r=e("../object/validate.coffee"),i=function(e,t,n,o,a,s){var l,u,c,f,d,h,p,g,v,m,y,x,b,w;if(void 0===e)return[];if(o&&void 0===a&&(a=o.id.value),s=!0===s&&void 0===s,e instanceof Array||(e=[e]),m=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),m.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),m.push(n)),e},[]);if(w=[],l=function(e){var t;return void 0!==e&&null!==e&&(t=JSON.stringify(e),m.indexOf(t)<0)?(w.push(e),m.push(t)):void 0},"function"==typeof n&&o)for(c=0,h=e.length;h>c;c++)for(u=e[c],b=i(n(o,u,t,a)),f=0,p=b.length;p>f;f++)x=b[f],l(x);else if("function"==typeof t)for(d=0,g=e.length;g>d;d++)u=e[d],b=t(u),l(b);else for(y=0,v=e.length;v>y;y++)u=e[y],r(u)&&(b=u[t],l(b));return s?w.sort(function(e,t){return e-t}):w},t.exports=i},{"../object/validate.coffee":174}],213:[function(e,t,n){t.exports=function(e){var t,n,r,i,o;for(e.container.value.style("position",function(){var e,t;return e=d3.select(this).style("position"),t=["absolute","fixed"].indexOf(e)>=0,t?e:"relative"}),e.container.changed&&e.container.value.html(""),i=["width","height"],n=0,r=i.length;r>n;n++)o=i[n],e[o].value||(t=function(n){var r,i;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(i=window["inner"+o.charAt(0).toUpperCase()+o.slice(1)],r=document!==n&&d3.select(n),r&&("width"===o?(i-=parseFloat(r.style("margin-left"),10),i-=parseFloat(r.style("margin-right"),10),i-=parseFloat(r.style("padding-left"),10),i-=parseFloat(r.style("padding-right"),10)):(i-=parseFloat(r.style("margin-top"),10),i-=parseFloat(r.style("margin-bottom"),10),i-=parseFloat(r.style("padding-top"),10),i-=parseFloat(r.style("padding-bottom"),10))),e[o].value=20>=i?e[o].small:i):(i=parseFloat(d3.select(n).style(o),10),"number"==typeof i&&i>0?e[o].value=i:"BODY"!==n.tagName?t(n.parentNode):void 0)},t(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}},{}],214:[function(e,t,n){var r=e("../../core/data/format.js"),i=e("../../core/data/color.js"),o=e("../../core/data/keys.coffee"),a=e("../../core/data/load.coffee"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.coffee"),c=e("./errorCheck.js"),f=e("../../core/fetch/data.js"),d=e("./finish.js"),h=e("./focus/tooltip.coffee"),p=e("./ui/history.coffee"),g=e("../../core/parse/edges.js"),v=e("../../core/parse/nodes.js"),m=e("../../core/console/print.coffee"),y=e("../../tooltip/remove.coffee"),x=e("./types/run.coffee"),b=e("./shapes/draw.js"),w=e("../../string/format.js"),_=e("./svg/enter.js"),k=e("./svg/update.js"),A=e("./ui/titles.js"),S=e("../../object/validate.coffee");t.exports=function(e){var t=[],n=e.type.value,z=e.format.locale.value,M=z.message.ui,C=z.message.draw,T=["data","attrs","coords","nodes","edges"];if(T.forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({"function":function(e,t){a(e,n,t)},message:z.message.loading,wait:!0})}),e.draw.update){var E=z.visualization[n]||n,j=e.types[n].setup||!1,D=e.types[n].requirements||[],O=w(z.message.initializing,E),N=z.message.data;D instanceof Array||(D=[D]),E=E.toLowerCase(),e.error.value||"function"!=typeof j||t.push({"function":function(e){if(e.dev.value){var t="running "+E+" setup";m.time(t)}j(e),e.dev.value&&m.timeEnd(t)},message:O}),e.container.changed&&t.push({"function":_,message:O}),n in e.g.apps||t.push({"function":function(e){if(e.dev.value){var t="creating "+E+" group";m.time(t)}e.g.apps[n]=e.g.app.append("g").attr("id",n).attr("opacity",0),e.dev.value&&m.timeEnd(t)},message:O}),e.data.changed&&t.push({"function":function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,o(e,"data")},message:N}),e.attrs.changed&&t.push({"function":function(e){o(e,"attrs")},message:N}),t.push({"function":function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";m.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;S(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&m.timeEnd(t)}},message:N}),D.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)&&t.push({"function":g,message:N}),D.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({"function":v,message:N}),(e.data.changed||e.time.changed||e.time.format.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({"function":r,message:N}),e.error.value||t.push({"function":function(e){var t=e.time.fixed.value?null:["all"];if(e.dev.value){var n=t?"fetching pool data":"fetching data";m.time(n)}e.data.pool=f(e,t),e.dev.value&&m.timeEnd(n),t?(e.dev.value&&m.time("fetching data for current year"),e.data.viz=f(e),e.dev.value&&m.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:N}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&e.color.valueScale===!1},"function":i,message:N})}return t.push({"function":function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;m.time(t)}e.type.previous&&n!==e.type.previous&&y(e.type.previous),y(n),e.dev.value&&m.timeEnd(t)},message:M}),e.error.value||t.push({"function":c,message:M}),t.push({"function":function(e){if(e.margin.process(),A(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&m.time("calculating margins");var t=e.container.value.select("div#d3plus_drawer").node().offsetHeight||e.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&m.timeEnd("calculating margins")}p(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:M}),e.error.value||t.push({"function":h,message:M}),t.push({"function":k,message:C}),!e.error.value&&e.draw.update&&t.push({"function":[x,b],message:C}),t.push({"function":d,message:C}),t}},{"../../core/console/print.coffee":54,"../../core/data/color.js":56,"../../core/data/format.js":58,"../../core/data/keys.coffee":60,"../../core/data/load.coffee":61,"../../core/fetch/data.js":66,"../../core/parse/edges.js":96,"../../core/parse/nodes.js":99,"../../object/validate.coffee":174,"../../string/format.js":175,"../../tooltip/remove.coffee":205,"./errorCheck.js":215,"./finish.js":216,"./focus/tooltip.coffee":217,"./shapes/draw.js":227,"./svg/enter.js":240,"./svg/update.js":241,"./types/run.coffee":244,"./ui/drawer.js":245,"./ui/history.coffee":246,"./ui/legend.js":247,"./ui/timeline.coffee":249,"./ui/titles.js":250}],215:[function(e,t,n){var r=e("../../core/fetch/text.js"),i=e("../../core/console/print.coffee"),o=e("../../core/methods/rejected.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e){e.dev.value&&i.time("checking for errors");var t=["id"],n=e.types[e.type.value].requirements;n&&(n instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(n));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value||l.push('"'+t+'"');else if("function"==typeof t){var n=t(e);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=a(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0){var d=e.edges.connections(e.focus.value[0],e.id.value);if(0==d.length){var h=r(e,e.focus.value[0],e.depth.value),u=e.format.locale.value.error.connections;e.error.internal=a(u,'"'+h+'"')}}var t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));var l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){var u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=a(u,c,l[0])}var p=e.shape.accepted(e);p instanceof Array||(p=[p]);var g=e.shape.value;if((!g||o(e,p,g,"shape"))&&e.self.shape(p[0]),"modes"in e.types[e.type.value]){var v=e.types[e.type.value].modes;v instanceof Array||(v=[v]);var m=e.type.mode.value;(!m||o(e,v,m,"mode"))&&e.self.type({mode:v[0]})}e.dev.value&&i.timeEnd("checking for errors")}},{"../../core/console/print.coffee":54,"../../core/fetch/text.js":68,"../../core/methods/rejected.coffee":92,"../../string/format.js":175,"../../string/list.coffee":176}],216:[function(e,t,n){var r=e("./shapes/edges.js"),i=e("./shapes/paths.js"),o=e("./ui/message.js"),a=e("./focus/viz.js"),s=e("../../core/methods/reset.coffee"),l=e("../../core/console/print.coffee"),u=e("./shapes/labels.js"),c=e("../../string/title.coffee"),f=e("./zoom/bounds.coffee"),d=e("./zoom/labels.coffee"),h=e("./zoom/mouse.coffee");t.exports=function(e){if(e.draw.first?setTimeout(function(){a(e)},e.draw.timing):a(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&l.time("calculating zoom"),e.draw.first||e.zoom.reset?f(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&f(e,t),e.dev.value&&l.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,f(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,p=e.zoom.size?e.zoom.size.height:e.height.viz,g=e.zoom.bounds?e.zoom.bounds[0][0]:0,v=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",p).attr("x",g).attr("y",v),e.error.value||(e.draw.update?(e.edges.path?i(e):r(e),u(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){u(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){d(e)},e.draw.timing)),!e.error.value){var m=e.types[e.type.value].requirements||[];m instanceof Array||(m=[m]);var y=m.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!y||(e.error.internal=e.format.locale.value.error.data)}var x=e.type.previous;if(x&&e.type.value!=x&&e.g.apps[x]&&(e.dev.value&&l.time('hiding "'+x+'"'),e.draw.timing?e.g.apps[x].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[x].attr("opacity",0),e.dev.value&&l.timeEnd()),!e.error.value){var b=y&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,w=e.draw.timing;e.group.transition().duration(w).attr("opacity",b),e.g.data.transition().duration(w).attr("opacity",b),e.g.edges.transition().duration(w).attr("opacity",b)}e.error.value?o(e,e.error.value):e.error.internal?(e.error.internal=c(e.error.internal),l.warning(e.error.internal),o(e,e.error.internal),e.error.internal=null):o(e),setTimeout(function(){s(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",h)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.coffee":54,"../../core/methods/reset.coffee":94,"../../string/title.coffee":178,"./focus/viz.js":218,"./shapes/edges.js":228,"./shapes/labels.js":230,"./shapes/paths.js":232,"./ui/message.js":248,"./zoom/bounds.coffee":251,"./zoom/labels.coffee":253,"./zoom/mouse.coffee":254}],217:[function(e,t,n){var r,i,o,a;r=e("../tooltip/create.js"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../tooltip/remove.coffee"),t.exports=function(e){var t,n,s;n=e.focus,!e.error.internal&&1===n.value.length&&n.value.length&&!e.small&&n.tooltip.value?(e.dev.value&&o.time("drawing focus tooltip"),t=e.data.pool.filter(function(t){return i(e,t,e.id.value)===n.value[0]}),t.length>=1?t=t[0]:(t={},t[e.id.value]=n.value[0]),s=e.labels.padding,r({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&o.timeEnd("drawing focus tooltip")):a("visualization_focus")}},{"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../tooltip/remove.coffee":205,"../tooltip/create.js":242}],218:[function(t,n,r){var i=t("../../../client/pointer.coffee"),o=t("../../../client/ie.js"),a=t("../../../core/fetch/value.coffee"),s=t("../../../core/console/print.coffee"),l=t("../../../util/uniques.coffee");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||r==t.focus.value[0]){var i=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(i).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return o&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";return"source"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var i="_"+e.d3plus.bucket;else var i="";
return"target"==n&&r?"url(#d3plus_edge_marker_focus"+i+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,a,t);u.push(t.focus.value[0]);var c=[],f=[],d=[0],h=[0];if(t.g.data.selectAll("g").each(function(n){if(u.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0)),r=d3.select(r).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&c.push(n.d3plus.x),"y"in n.d3plus&&f.push(n.d3plus.y),"r"in n.d3plus?(d.push(n.d3plus.r),h.push(n.d3plus.r)):("width"in n.d3plus&&d.push(n.d3plus.width/2),"height"in n.d3plus&&h.push(n.d3plus.height/2)));for(e in i){var o=d3.select(this).on(i[e]);o&&r.on(i[e],o)}}}),c.length&&f.length){var p=d3.extent(c),g=d3.extent(f),v=d3.max(d),m=d3.max(h);t.zoom.viewport=[[p[0]-v,g[0]-m],[p[1]+v,g[1]+m]]}t.g.data_focus.selectAll("path").style("stroke-width",o&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":39,"../../../client/pointer.coffee":40,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../util/uniques.coffee":212}],219:[function(e,t,n){var r,i,o,a;a=e("./style.coffee"),i=e("../../../geom/largestRect.coffee"),o=e("../../../geom/path2poly.coffee"),r={start:{},end:{}},t.exports=function(e,t,n,s){var l,u,c,f;l=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return e.d3plus.startAngle}).endAngle(function(e){return e.d3plus.endAngle}),c=function(t){var n,r;return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:(n=o(l(t)),r=i(n,{angle:0}),r[0]?t.d3plus_label={w:r[0].width,h:r[0].height,x:r[0].cx,y:r[0].cy}:delete t.d3plus_label)),[t]},e.draw.timing?(f=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return void 0===r.start[e.d3plus.id]&&(r.start[e.d3plus.id]=0),isNaN(r.start[e.d3plus.id])&&(r.start[e.d3plus.id]=e.d3plus.startAngle),r.start[e.d3plus.id]}).endAngle(function(e){return void 0===r.end[e.d3plus.id]&&(r.end[e.d3plus.id]=0),isNaN(r.end[e.d3plus.id])&&(r.end[e.d3plus.id]=e.d3plus.endAngle),r.end[e.d3plus.id]}),u=function(e,t){return e.attrTween("d",function(e){var n,i,o,a;return void 0===t?(a=e.d3plus.startAngle,n=e.d3plus.endAngle):0===t&&(a=0,n=0),o=d3.interpolate(r.start[e.d3plus.id],a),i=d3.interpolate(r.end[e.d3plus.id],n),function(t){return r.start[e.d3plus.id]=o(t),r.end[e.d3plus.id]=i(t),f(e)}})},n.append("path").attr("class","d3plus_data").call(a,e).attr("d",f),t.selectAll("path.d3plus_data").data(c).transition().duration(e.draw.timing).call(a,e).call(u),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(u,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(c).call(a,e).attr("d",l))}},{"../../../geom/largestRect.coffee":161,"../../../geom/path2poly.coffee":163,"./style.coffee":236}],220:[function(e,t,n){var r=e("../../../core/fetch/text.js"),i=e("../../../font/sizes.coffee"),o=e("../../../geom/largestRect.coffee"),a=e("./style.coffee");t.exports=function(e,t,n,s){var l=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),u=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y0}).interpolate(e.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(e){return u(e.values)}).call(a,e);var c={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};t.selectAll("path.d3plus_data").data(function(t){if(e.labels.value&&t.values.length>1){var n=d3.max(t.values,function(e){return e.d3plus.y0-e.d3plus.y}),a=!1;if(n>e.labels.font.size){var s=[],l=[],u=r(e,t);t.values.forEach(function(e){s.push([e.d3plus.x,e.d3plus.y]),l.push([e.d3plus.x,e.d3plus.y0])}),s=s.concat(l.reverse());var f=null;if(u.length){var d=i(u[0],c);f=d[0].width/d[0].height}a=o(s,{angle:d3.range(-70,71,1),aspectRatio:f,tolerance:0})}if(a&&a[0]){var h={w:~~a[0].width,h:~~a[0].height,x:~~a[0].cx,y:~~a[0].cy,angle:-1*a[0].angle,padding:2,names:u};0!==a[0].angle?h.translate={x:h.x,y:h.y}:h.translate=!1,h.w>=10&&h.h>=10&&(t.d3plus_label=h)}}return[t]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).attr("d",function(e){return l(e.values)}).call(a,e):t.selectAll("path.d3plus_data").attr("d",function(e){return l(e.values)}).call(a,e)}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":103,"../../../geom/largestRect.coffee":161,"./style.coffee":236}],221:[function(e,t,n){var r=(e("../../../core/fetch/text.js"),e("../../../geom/largestRect.coffee"),e("./style.coffee"));t.exports=function(e,t,n,i){function o(e){e.attr("transform","scale(1)")}function a(e){e.attr("transform",function(e){var t=Math.min(e.d3plus.width,e.d3plus.height),n=Math.floor(t/16);return"scale("+n+")"})}n.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"../../../core/fetch/text.js":68,"../../../geom/largestRect.coffee":161,"./style.coffee":236}],222:[function(e,t,n){var r,i,o,a;i=e("../../../core/fetch/value.coffee"),r=e("../../../core/fetch/color.coffee"),o=e("../../../color/lighter.coffee"),a=e("./segments.coffee"),t.exports=function(e,t,n){var i,s,l,u;return s=e.d3plus.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?r(t,e):"temp"===s?n?r(t,e):"url(#d3plus_hatch_"+e.d3plus.id+")":e.d3plus["static"]?o(r(t,e),.75):(i=a(t,e,"active"),l=a(t,e,"temp"),u=a(t,e,"total"),!t.active.value&&!t.temp.value||i===!0||i&&u&&i>=u&&!l||i&&!u?r(t,e):t.active.spotlight.value?t.color.missing:o(r(t,e),.75))}},{"../../../color/lighter.coffee":47,"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"./segments.coffee":235}],223:[function(e,t,n){var r,i,o,a,s,l,u,c;r=e("../../../util/copy.coffee"),i=e("../../../network/distance.coffee"),o=e("../../../core/fetch/text.js"),a=e("../../../font/sizes.coffee"),l=e("../../../geom/largestRect.coffee"),u=e("../../../geom/path2poly.coffee"),c=e("./style.coffee"),s={},t.exports=function(e,t,n,f){var d,h;return d=d3.geo[e.coords.projection.value](),d.center&&d.center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geo.path().projection(d),e.draw.timing?t.selectAll("path.d3plus_data").attr("d",e.path).transition().duration(e.draw.timing).call(c,e):t.selectAll("path.d3plus_data").attr("d",e.path).call(c,e),n.append("path").attr("id",function(e){return e.id}).attr("class","d3plus_data").attr("d",e.path).call(c,e),h=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||h||e.coords.mute.changed||e.coords.solo.changed||e.type.changed||e.text.changed||e.coords.projection.changed||e.labels.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var n,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T;if(e.coords.simplify.value&&t.geometry.coordinates.length>1){for(m=[],c=[],n=0,b=r(t),z=r(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,r){var i;return z.geometry.coordinates=[t],i=e.path.area(z),i>0&&(c.push(i),i>n&&(b.geometry.coordinates=[t],n=i),!0)}),h=e.path.centroid(b),M=t.geometry.coordinates,y=x=0,w=M.length;w>x;y=++x)d=M[y],z.geometry.coordinates=[d],m.push(i(e.path.centroid(z),h));v=m.reduce(function(e,t,n){return t&&e.push(c[n]/t),e},[]),g=d3.quantile(v,e.coords.threshold.value),z.geometry.coordinates=t.geometry.coordinates.filter(function(e,t){var n,r;return r=m[t],n=c[t],0===r||n/r>=g}),p=b.geometry.coordinates[0],p&&"MultiPolygon"===b.geometry.type&&(p=p[0],b.geometry.coordinates[0]=p,b.geometry.type="Polygon")}else z=t,b=t,p=t.geometry.coordinates[0];return e.zoom.coords[t.d3plus.id]=z,delete t.d3plus_label,e.labels.value&&(_=o(e,t),p&&_.length&&(k=u(e.path(b)),T={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},A=null,1===_[0].split(" ").length&&(C=a(_[0],T)[0],A=C.width/C.height),S=l(k,{angle:0,aspectRatio:A}),S&&(S=S[0],t.d3plus_label={anchor:"middle",valign:"center",h:S.height,w:S.width,x:S.cx,y:S.cy,names:_}))),s[t.id]=t.d3plus_label,f=e.path.bounds(z),e.zoom.bounds?(e.zoom.bounds[0][0]>f[0][0]&&(e.zoom.bounds[0][0]=f[0][0]),e.zoom.bounds[0][1]>f[0][1]&&(e.zoom.bounds[0][1]=f[0][1]),e.zoom.bounds[1][0]<f[1][0]&&(e.zoom.bounds[1][0]=f[1][0]),e.zoom.bounds[1][1]<f[1][1]?e.zoom.bounds[1][1]=f[1][1]:void 0):e.zoom.bounds=f})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3plus_label=s[e.id]}))}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":103,"../../../geom/largestRect.coffee":161,"../../../geom/path2poly.coffee":163,"../../../network/distance.coffee":167,"../../../util/copy.coffee":209,"./style.coffee":236}],224:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("cross").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("cross").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":236}],225:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("diamond").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("diamond").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":236}],226:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(t,n,r,i){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof i)var i=void 0;t.attrTween("d",function(t){if(void 0==r)var o=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var o=r;if(void 0==i)var a=t.d3plus.segments[t.d3plus.shape];else var a=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,o+n),u=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=l(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=u(n),s(t)}})}function a(e){return e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var s=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"])return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3plus.shape][t.d3plus.id].r});e.draw.timing?(i.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(o,0,0).each("end",function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),t.selectAll("path.d3plus_data").data(a).transition().duration(e.draw.timing).call(o).call(r,e),n.append("path").attr("class","d3plus_data").transition().duration(0).call(o,0,0).call(r,e).transition().duration(e.draw.timing).call(o).call(r,e)):(i.selectAll("path.d3plus_data").each(function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(a).call(o).call(r,e))}},{"./style.coffee":236}],227:[function(e,t,n){var r=e("../../../util/child.coffee"),i=e("../../../util/closest.coffee"),o=e("../tooltip/create.js"),a=e("../../../client/pointer.coffee"),s=e("../../../core/fetch/value.coffee"),l=e("../../../core/fetch/color.coffee"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.coffee"),f=e("../../../core/console/print.coffee"),d=e("../../../tooltip/remove.coffee"),h=e("./segments.coffee"),p=e("./fill.js"),g=e("../../../string/strip.js"),v=e("../../../client/touch.coffee"),m=e("../zoom/propagation.coffee"),y=e("../../../util/uniques.coffee"),x=e("../../../object/validate.coffee"),b=e("../zoom/direction.coffee"),w={arc:e("./arc.coffee"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.coffee"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),radial:e("./radial.coffee"),rect:e("./rect.coffee"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.coffee")};t.exports=function(e){function t(t){if(!t.d3plus.id){t.d3plus.id="";for(var n=0;n<=e.depth.value;n++)t.d3plus.id+=s(e,t,e.id.nesting[n])+"_";t.d3plus.id+=E,["x","y","x2","y2"].forEach(function(n){if("discrete"==e[n].scale.value){var r=s(e,t,e[n].value);r.constructor===Date&&(r=r.getTime()),t.d3plus.id+="_"+r}}),t.d3plus.suffix&&(t.d3plus.id+="_"+t.d3plus.suffix),t.d3plus.id=g(t.d3plus.id)}return t}function n(t,n){var r=e.types[e.type.value].scale,i=1;r&&(x[r]&&e.shape.value in r?i=r[e.shape.value]:"function"==typeof r?i=r(e,e.shape.value):"number"==typeof r&&(i=r)),i=n?i:1,t.attr("transform",function(e){if(["line","area","coordinates"].indexOf(E)<0){var t=e.d3plus.x||0,n=e.d3plus.y||0;return"translate("+t+","+n+")scale("+i+")"}return"scale("+i+")"})}function _(t){t.attr("class",function(t){var n=e["class"].value?" "+s(e,t,e["class"].value):"";return"d3plus_"+E+n})}function k(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(n){var r=t[e.id.value],i=n[e.edges.source][e.id.value],o=n[e.edges.target][e.id.value];if(i==r||i=="left_"+r||i=="right_"+r||o==r||o=="left_"+r||o=="right_"+r){var a=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(a).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(t){return e.edges.path&&t.dy?Math.max(1,t.dy):e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_highlight"+i+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}var A=e.returned.nodes||[],S=e.returned.edges||[];e.draw.timing=A.length<e.data.large&&S.length<e.edges.large?e.timing.transitions:0;var z={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},M={};A.forEach(function(t){var n=t.d3plus&&t.d3plus.shape?t.d3plus.shape:e.shape.value;n in z&&(t.d3plus&&(t.d3plus.shape=n),n=z[n],M[n]||(M[n]=[]),M[n].push(t))});for(var C in z)if(!(z[C]in M)||0===d3.keys(M).length){var T=e.g.data.selectAll("g.d3plus_"+z[C]);e.draw.timing?T.transition().duration(e.draw.timing).attr("opacity",0).remove():T.remove()}for(var E in M){var j=e.g.data.selectAll("g.d3plus_"+E).data(M[E],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===E)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(e){e=t(e),e.d3plus.shape="circle"}),n.d3plus.id=n.key;else if(n=t(n),!n.d3plus.segments){n.d3plus.segments={donut:2*Math.PI};var r=h(e,n,"active"),i=h(e,n,"temp"),o=h(e,n,"total");o&&(r?n.d3plus.segments.active=r/o*(2*Math.PI):n.d3plus.segments.active=0,i?n.d3plus.segments.temp=i/o*(2*Math.PI)+n.d3plus.segments.active:n.d3plus.segments.temp=0)}return!!n.d3plus&&n.d3plus.id});if(e.draw.timing)var D=j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else var D=j.exit().remove();e.draw.timing?j.transition().duration(e.draw.timing).call(n).call(_):j.call(n).call(_);var O=e.draw.timing?0:1,N=j.enter().append("g").attr("opacity",O).call(n).call(_);e.draw.timing&&N.transition().duration(e.draw.timing).attr("opacity",1),j.order(),e.dev.value&&f.time('drawing "'+E+'" shapes'),w[E](e,j,N,D,n),e.dev.value&&f.timeEnd('drawing "'+E+'" shapes'),["rect","donut"].indexOf(E)>=0&&e.types[e.type.value].fill&&(e.dev.value&&f.time('filling "'+E+'" shapes'),p(e,j,N,D,n),e.dev.value&&f.timeEnd('filling "'+E+'" shapes'))}if(k(),e.tooltip.value)e.g.data.selectAll("g").on(a.over,function(t){if(v&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.over.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])d(e.type.value);else if("function"==typeof e.mouse.over.value)e.mouse.over.value(t,e.self);else{var r=b(t.d3plus_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[a.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===r||-1===r&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",s?"pointer":"auto").transition().duration(e.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),f=i(c,u);t.d3plus_data=t.values[c.indexOf(f)],t.d3plus=t.values[c.indexOf(f)].d3plus}var h=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:h}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.over]&&e.mouse.viz[a.over](t.d3plus_data||t,e),k(t)}}).on(a.move,function(t){if(v&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.move.value||e.draw.frozen||t.d3plus&&t.d3plus["static"])d(e.type.value);else if("function"==typeof e.mouse.move.value)e.mouse.move.value(t,e.self);else{var n=b(t.d3plus_data||t,e),r="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[a.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3plus.threshold&&t.d3plus.merged||1===n||-1===n&&e.history.states.length&&!e.tooltip.value["long"]);if(d3.select(this).style("cursor",r?"pointer":"auto"),e.types[e.type.value].tooltip||"follow",t.values&&e.axes.discrete){var s="x"===e.axes.discrete?0:1,l=d3.mouse(e.container.value.node())[s],u=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),c=i(u,l);t.d3plus_data=t.values[u.indexOf(c)],t.d3plus=t.values[u.indexOf(c)].d3plus}var f=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:f}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.move]&&e.mouse.viz[a.move](t.d3plus_data||t,e)}}).on(a.out,function(t){if(v&&m(e,d3.event),!d3.event.buttons&&e.mouse.value&&e.mouse.out.value)if("function"==typeof e.mouse.out.value)e.mouse.out.value(t,e.self);else{var i=r(this,d3.event.toElement);i||e.draw.frozen||t.d3plus&&t.d3plus["static"]||(d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||d(e.type.value),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.out]&&e.mouse.viz[a.out](t.d3plus_data||t,e),k())}else d(e.type.value)});else{var P=function(){m(e,d3.event)};e.g.data.selectAll("g").on(a.over,P).on(a.move,P).on(a.out,P)}d3.select(window).on("scroll.d3plus",function(){d(e.type.value)}),e.g.data.selectAll("g").on(a.click,function(t){if((!e.mouse.viz||e.mouse.viz.click!==!1)&&e.mouse.value&&e.mouse.click.value&&!d3.event.defaultPrevented&&!e.draw.frozen&&(!t.d3plus||!t.d3plus["static"]))if("function"==typeof e.mouse.click.value)e.mouse.click.value(t,e.self);else{if(t.values&&e.axes.discrete){var r="x"===e.axes.discrete?0:1,f=d3.mouse(e.container.value.node())[r],h=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),p=i(h,f);t.d3plus_data=t.values[h.indexOf(p)],t.d3plus=t.values[h.indexOf(p)].d3plus}"function"==typeof e.mouse.viz?e.mouse.viz(t.d3plus_data||t,e):e.mouse.viz[a.out]?e.mouse.viz[a.out](t.d3plus_data||t,e):e.mouse.viz[a.click]&&e.mouse.viz[a.click](t.d3plus_data||t,e);var g=b(t.d3plus_data||t,e),v=e.id.solo.value,m=u(e,t)[0],x=c(l(e,t)),w=e.title.sub.value||!1,_=e.title.sub.font.color,A=e.title.total.font.color;if(t.d3plus.threshold&&t.d3plus.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:v}).title({sub:{font:{color:_},value:w},total:{font:{color:A}}}).draw()}),e.self.id({solo:v.concat(y(t.d3plus.merged,e.id.value,s,e))}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw();else if(1===g&&e.zoom.value){var S=s(e,t.d3plus_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:v}).title({sub:{font:{color:_},value:w},total:{font:{color:A}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:v.concat(S)}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw()}else if(-1===g&&e.zoom.value&&e.history.states.length&&!e.tooltip.value["long"])e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)k(),d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),d(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){k();var z=t.d3plus_data?t.d3plus_data:t;o({vars:e,data:z})}}})}},{"../../../client/pointer.coffee":40,"../../../client/touch.coffee":45,"../../../color/legible.coffee":46,"../../../core/console/print.coffee":54,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":174,"../../../string/strip.js":177,"../../../tooltip/remove.coffee":205,"../../../util/child.coffee":207,"../../../util/closest.coffee":208,"../../../util/uniques.coffee":212,"../tooltip/create.js":242,"../zoom/direction.coffee":252,"../zoom/propagation.coffee":255,"./arc.coffee":219,"./area.js":220,"./check.js":221,"./coordinates.coffee":223,"./cross.js":224,"./diamond.js":225,"./donut.js":226,"./fill.js":229,"./line.js":231,"./radial.coffee":233,"./rect.coffee":234,"./segments.coffee":235,"./triangle_down.js":237,"./triangle_up.js":238,"./whisker.coffee":239}],228:[function(e,t,n){var r=e("../../../util/buckets.coffee"),i=e("../../../geom/offset.coffee");t.exports=function(e){function t(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function n(t){var n=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===p?h:"function"===p?h(t,e):e.edges.opacity.scale.value(t[h])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"source"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var i="_"+t.d3plus.bucket;else var i="";return"target"==r&&n?"url(#d3plus_edge_marker_default"+i+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function o(t){t.attr("x1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].y})}function a(e){e.attr("d",function(e){return g(e.d3plus.spline)})}function s(t){if(delete t.d3plus_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3plus)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),i=this.getPointAtLength(n/2-.1*n),o=this.getPointAtLength(n/2+.1*n),a=Math.atan2(o.y-i.y,o.x-i.x),s=a*(180/Math.PI),l=(this.parentNode.getBBox(),.8*n),u=r.x,c=r.y;else var f=(this.getBBox(),t[e.edges.source]),d=t[e.edges.target],h={x:f.d3plus.edges[d[e.id.value]].x,y:f.d3plus.edges[d[e.id.value]].y},p={x:d.d3plus.edges[f[e.id.value]].x,y:d.d3plus.edges[f[e.id.value]].y},g=p.x-h.x,v=p.y-h.y,r={x:p.x-g/2,y:p.y-v/2},a=Math.atan2(v,g),s=a*(180/Math.PI),n=Math.sqrt(g*g+v*v),l=n,u=r.x,c=r.y;l+=2*e.labels.padding;var m=0;e.edges.arrows.value&&(m="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,m/=e.zoom.behavior.scaleExtent()[1],l-=2*m),(-90>s||s>90)&&(s-=180),l*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3plus_label={x:u,y:c,translate:{x:u,y:c},w:l,h:15+2*e.labels.padding,angle:s,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var l=e.returned.edges||[],u=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var c=d3.extent(l,function(t){return t[e.edges.size.value]}),f=d3.min(e.returned.nodes||[],function(e){return e.d3plus.r})*(2*e.edges.size.scale);e.edges.scale=d3.scale.sqrt().domain(c).range([e.edges.size.min,f*u])}else{var d="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return d}}var h=e.edges.opacity.value,p=typeof h;e.edges.opacity.changed&&"string"===p&&e.edges.opacity.scale.value.domain(d3.extent(l,function(e){return e[h]})).range([e.edges.opacity.min.value,1]);var g=d3.svg.line().interpolate(e.edges.interpolate.value),v=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var m=r(e.edges.scale.range(),4),y=[],x=0;3>x;x++)y.push(m[x+1]+(m[1]-m[0])*(x+2)*2);else var b="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,y="number"==typeof e.edges.size.value?e.edges.size.value/b:b;var w=e.defs.selectAll(".d3plus_edge_marker").data(v,String),_=function(t){t.attr("d",function(t){var n=t.split("_");if(2==n.length&&e.edges.scale){n=parseInt(n[1]);var r=y[n]}else var r=y;return"target"==e.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(t){var n=t.split("_")[0];return"default"==n?e.edges.color:"focus"==n?e.color.focus:e.color.primary}).attr("transform","scale("+1/u+")")};e.draw.timing?(w.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),w.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(_)):(w.exit().remove(),w.select("path").attr("opacity",1).call(_));var k=e.draw.timing?0:1,A=w.enter().append("marker").attr("id",function(e){return"d3plus_edge_marker_"+e}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",k).attr("vector-effect","non-scaling-stroke").call(_);e.draw.timing&&A.transition().duration(e.draw.timing).attr("opacity",1);var S="string"==typeof e.edges.size.value?r(e.edges.scale.domain(),4):null,z=e.edges.arrows.direction.value,M=l.filter(function(t){if(t.d3plus||(t.d3plus={}),t.d3plus.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.spline!==!0){if(S){var n=t[e.edges.size.value];t.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var o=t[e.edges.source],a=t[e.edges.target];if(!o.d3plus||!a.d3plus)return!1;var s=Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x),l=Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x),c="source"==z&&e.edges.arrows.value?o.d3plus.r+r:o.d3plus.r,f="target"==z&&e.edges.arrows.value?a.d3plus.r+r:a.d3plus.r,d=i(s,c,e.shape.value),h=i(l,f,e.shape.value);return"edges"in o.d3plus||(o.d3plus.edges={}),o.d3plus.edges[a[e.id.value]]={x:o.d3plus.x-d.x,y:o.d3plus.y-d.y},"edges"in a.d3plus||(a.d3plus.edges={}),a.d3plus.edges[o[e.id.value]]={x:a.d3plus.x-h.x,y:a.d3plus.y-h.y},!0}return!1}),C=e.g.edges.selectAll("g.d3plus_edge_line").data(M,function(e){return e.d3plus.id}),T=l.filter(function(t){if(t.d3plus.spline){if(S){var n=t[e.edges.size.value];t.d3plus.bucket=n<S[1]?0:n<S[2]?1:2;var r=.85*y[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*y/u}var o=t[e.edges.source],a=t[e.edges.target],s=o.d3plus.edges?o.d3plus.edges[a[e.id.value]]||{}:{},l=a.d3plus.edges?a.d3plus.edges[o[e.id.value]]||{}:{},c=e.edges.arrows.value&&"source"==z?r:0,f=e.edges.arrows.value&&"target"==z?r:0,d=.1,h=o.d3plus.x>a.d3plus.x?1-d:1+d,p=o.d3plus.x>a.d3plus.x?1+d:1-d,g="number"==typeof s.angle?s.angle:Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)*h,v=i(g,o.d3plus.r+c,e.shape.value),m="number"==typeof l.angle?l.angle:Math.atan2(a.d3plus.y-o.d3plus.y,a.d3plus.x-o.d3plus.x)*p,x=i(m,a.d3plus.r+f,e.shape.value),b=[o.d3plus.x-v.x,o.d3plus.y-v.y],w=!!s.offset&&i(g,s.offset),_=w?[b[0]-w.x,b[1]-w.y]:b,k=[a.d3plus.x-x.x,a.d3plus.y-x.y],A=!!l.offset&&i(m,l.offset),M=A?[k[0]-A.x,k[1]-A.y]:k,C=M[0]-_[0],T=M[1]-_[1],E="number"==typeof s.radius?s.radius:Math.sqrt(C*C+T*T)/4,j="number"==typeof l.radius?l.radius:Math.sqrt(C*C+T*T)/4,D=i(g,E-o.d3plus.r-2*c),O=i(m,j-a.d3plus.r-2*f);t.d3plus.spline=[b,k];var N=Math.abs(Math.atan2(o.d3plus.y-a.d3plus.y,o.d3plus.x-a.d3plus.x)).toFixed(5),P=Math.abs(g).toFixed(5),F=Math.abs(m-Math.PI).toFixed(5);return(P!==F||[P,F].indexOf(N)<0)&&(t.d3plus.spline.splice(1,0,[_[0]-D.x,_[1]-D.y],[M[0]-O.x,M[1]-O.y]),w&&t.d3plus.spline.splice(1,0,_),A&&t.d3plus.spline.splice(t.d3plus.spline.length-1,0,M)),!0}return!1}),E=e.g.edges.selectAll("g.d3plus_edge_path").data(T,function(e){return e.d3plus.id});e.draw.timing?(C.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),C.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(o).call(n).each("end",s),E.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(a).call(n).each("end",s),
C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(t).transition().duration(e.draw.timing).call(n).each("end",s),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).transition().duration(e.draw.timing).call(n).each("end",s)):(C.exit().remove(),E.exit().remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),C.selectAll("line").data(function(e){return[e]}).call(o).call(n).call(s),E.selectAll("path").data(function(e){return[e]}).call(a).call(n).call(s),C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(o).call(t).call(n).call(s),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).call(n).call(s))}},{"../../../geom/offset.coffee":162,"../../../util/buckets.coffee":206}],229:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/color.coffee"),o=(e("../../../core/fetch/value.coffee"),e("./segments.coffee")),a=e("./style.coffee");t.exports=function(e,t,n,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,n){n||(n=0),t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2-n/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2-n/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t+n}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t+n}).attr("rx",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("ry",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,i=["circle","donut"].indexOf(e.shape.value)>=0;return i?(r+n)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}function c(t,n,r,i){n||(n=0),"number"!=typeof r&&(r=void 0),"number"!=typeof i&&(i=void 0),t.attrTween("d",function(t){if(void 0===r)var o=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var o=r;if(void 0===i)var a=t.d3plus.segments[t.d3plus.shape];else var a=i;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a="donut"===t.d3plus.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,o+n),l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=s(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=l(n),f(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var f=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"]||"donut"!==e.shape.value)return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return"donut"===e.shape.value?n:2*n});t.each(function(t){function n(t){t.attr("stroke",p).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var s=o(e,t,"active"),f=o(e,t,"temp"),d=o(e,t,"total"),h=d3.select(this),p=i(e,t),g=[],v=[];if(d&&e.types[e.type.value].fill){if(f){var m=r(t);m.d3plus.shape="temp",g.push(m),v=["temp"]}if(s&&(d>s||f)){var m=r(t);m.d3plus.shape="active",g.push(m)}}var y=e.defs.selectAll("pattern#d3plus_hatch_"+t.d3plus.id).data(v);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",p),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",p)):(y.selectAll("rect").style("fill",p),y.selectAll("line").style("stroke",p));var x=y.enter().append("pattern").attr("id","d3plus_hatch_"+t.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");x.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",p).attr("fill-opacity",.25),x.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(n),x.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(n),x.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(n);var b=g.length?[t]:[],w=h.selectAll("#d3plus_clip_"+t.d3plus.id).data(b);w.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+t.d3plus.id).append("rect").attr("class","d3plus_clipping").call(l),e.draw.timing?(w.selectAll("rect").transition().duration(e.draw.timing).call(u),w.exit().transition().delay(e.draw.timing).remove()):(w.selectAll("rect").call(u),w.exit().remove());var _=h.selectAll("path.d3plus_fill").data(g);_.transition().duration(e.draw.timing).call(a,e).call(c),_.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+t.d3plus.id+")").transition().duration(0).call(a,e).call(c,0,void 0,0).transition().duration(e.draw.timing).call(c).call(a,e),_.exit().transition().duration(e.draw.timing).call(c,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"../../../util/copy.coffee":209,"./segments.coffee":235,"./style.coffee":236}],230:[function(e,t,n){var r=(e("../../../util/copy.coffee"),e("../../../core/fetch/text.js")),i=e("../../../core/fetch/value.coffee"),o=e("../../../color/mix.coffee"),a=e("../../../core/console/print.coffee"),s=(e("../../../client/rtl.coffee"),e("./segments.coffee")),l=e("./color.coffee"),u=e("../../../string/list.coffee"),c=e("../../../color/text.coffee"),f=e("../../../textwrap/textwrap.coffee");t.exports=function(e,t){var n=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],d=e.g[t].selectAll("g"),h=function(t){t.attr("opacity",function(t){var r=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},p=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},g=function(t){var r="bottom"===e.labels.valign.value?"top":"bottom";t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var n=l(t.parent,e),r=c(n),i=t.text?.15:1;return o(n,r,.2,i)}).each(function(t){t.resize instanceof Array&&(t.resize[0],t.resize[1]);var i=t.resize,o=!0;if(t.text){i instanceof Array||(i=[9,50],o=t.resize);var a=t.y-t.h*n[1]/2+t.padding/2;"bottom"===r&&(a+=t.h*n[1]/2),f().align("center").container(d3.select(this)).height(t.h*n[1]/2).padding(t.padding/2).resize(o).size(i).text(e.format.value(100*t.text,{key:"share",vars:e})).width(t.w*n[1]).valign(r).x(t.x-t.w*n[1]/2+t.padding/2).y(a).draw()}else{t.resize instanceof Array||(i=[7,40*(n[1]/n[0])],o=t.resize);var s="bottom"===e.labels.valign.value?t.share:0;f().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(o).size(i).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+s).draw()}}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",r=e.angle||0,i=e.translate&&e.translate.x?e.translate.x:0,o=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+r+","+i+","+o+")scale("+1/n[1]+")translate("+(e.x*n[1]-e.x)+","+(e.y*n[1]-e.y)+")"+t})};if("edges"===t||e.labels.value){if(e.dev.value){var v="drawing "+t+" labels";a.time(v)}d.each(function(t){function o(t){var n="string"==typeof l.background?l.background:"none"===e.background.value?"#ffffff":e.background.value,r="string"==typeof l.background?l.background:n,i=_.attr("transform").split(")");i.pop(),i.pop(),i.push(""),i=i.join(")"),t.attr("fill",r).attr(T).attr("transform",i)}var a=t.d3plus&&"label"in t.d3plus&&!t.d3plus.label,l=t.d3plus_label||null,c=t.d3plus_share,f=t.d3plus.text?t.d3plus.text:l&&l.names?l.names:e.labels.text.value?i(e,t,e.labels.text.value):r(e,t),d=l&&"group"in l?l.group:d3.select(this),v=0,m=e.types[e.type.value].fill;if(f instanceof Array||(f=[f]),l)if(["line","area"].indexOf(e.shape.value)>=0)var y=!0;else if(t&&"d3plus"in t)var x=s(e,t,"active"),b=s(e,t,"temp"),w=s(e,t,"total"),y=!b&&!x||x>=w||!x&&b>=w;if(a||!(l&&l.force||y)&&m)delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(c&&t.d3plus.share&&c.w-2*e.labels.padding>=10&&c.h-2*e.labels.padding>=10&&"middle"!=e.labels.valign.value){c.resize=e.labels.resize.value!==!1&&(!(c&&"resize"in c)||c.resize),c.padding=e.labels.padding,c.text=t.d3plus.share,c.parent=t;var _=d.selectAll("text#d3plus_share_"+t.d3plus.id).data([c],function(e){return e.w+""+e.h+e.text});e.draw.timing&&1===e.zoom.scale?(_.transition().duration(e.draw.timing/2).call(g),_.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).attr("opacity",1)):(_.attr("opacity",1).call(g),_.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(g)),v=_.node().getBBox().height+e.labels.padding,_.exit().call(p)}else d.selectAll("text.d3plus_share").call(p);if(l&&(l.resize=e.labels.resize.value!==!1&&(!(l&&"resize"in l)||l.resize),l.padding="number"==typeof l.padding?l.padding:e.labels.padding),l&&l.w*n[1]-l.padding>=20&&l.h*n[1]-l.padding>=10&&f.length){for(var k=e.format.locale.value.ui.and,A=e.format.locale.value.ui.more,S=0;S<f.length;S++)f[S]instanceof Array&&(f[S]=u(f[S],k,3,A));l.names=f,l.share=v,l.parent=t;var _=d.selectAll("text#d3plus_label_"+t.d3plus.id).data([l],function(e){return!!e&&e.w+"_"+e.h+"_"+e.x+"_"+e.y+"_"+e.names.join("_")}),z=l.resize?void 0:e.labels.font.size*n[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(_.transition().duration(e.draw.timing/2).call(g).call(h),_.enter().append("text").attr("font-size",z).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(g).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(h)):(_.attr("opacity",1).call(g).call(h),_.enter().append("text").attr("font-size",z).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").call(g).call(h)),_.exit().call(p),0===_.size()||0===_.selectAll("tspan").size())delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p);else{if(l.background){var M=["background"],C=_.node().getBBox(),T={height:C.height,width:C.width,x:C.x,y:C.y};T.width+=e.labels.padding*n[0],T.height+=e.labels.padding*n[0],T.x-=e.labels.padding*n[0]/2,T.y-=e.labels.padding*n[0]/2;var E=_.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];E=E.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),E=E.split(","),E.length>1&&(E=E[E.length-1],E=E.substring(0,E.length-1),T.y+=E)}else var M=[],T={};var j=d.selectAll("rect#d3plus_label_bg_"+t.d3plus.id).data(M),D="number"==typeof l.background?l.background:"string"==typeof l.background?1:.6;e.draw.timing?(j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j.transition().duration(e.draw.timing).attr("opacity",D).call(o),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(o).transition().duration(e.draw.timing).attr("opacity",D)):(j.exit().remove(),j.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg"),j.attr("opacity",D).call(o))}}else delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(p)}}),e.dev.value&&a.timeEnd(v)}else{if(e.dev.value){var v="removing "+t+" labels";a.time(v)}d.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(p),e.dev.value&&a.timeEnd(v)}}},{"../../../client/rtl.coffee":42,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../string/list.coffee":176,"../../../textwrap/textwrap.coffee":202,"../../../util/copy.coffee":209,"./color.coffee":222,"./segments.coffee":235}],231:[function(e,t,n){function r(e){e.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y}).attr("width",0).attr("height",0)}function i(e,t){void 0===t&&(t=0),e.attr("x",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return e.d3plus.x-(n/2+t/2)}).attr("y",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return e.d3plus.y-(n/2+t/2)}).attr("width",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return n+t}).attr("height",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return n+t}).attr("rx",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return(n+t)/2}).attr("ry",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return(n+t)/2})}function o(e,t,n,r){var o=e.draw.timing?e.timing.mouseevents:0;void 0===r&&(r=0),o?(d3.select(t.parentNode).selectAll("path.d3plus_line").transition().duration(o).style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var o=c(e,t,n);i=o&&o.length?d3.max(o):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").transition().duration(o).style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r)):(d3.select(t.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var o=c(e,t,n);i=o&&o.length?d3.max(o):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=c(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(i,r))}var a=e("../../../util/copy.coffee"),s=e("../../../util/closest.coffee"),l=e("../../../client/pointer.coffee"),u=e("./style.coffee"),c=e("../../../core/fetch/value.coffee");t.exports=function(e,t,n,f){var d=d3.svg.line().x(function(e){return e.d3plus.x}).y(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),h=e.size.value||2*e.data.stroke.width,p=e[e.axes.discrete],g=function(t){var n=h;if(n.constructor!==Number){var r=c(e,t,h);n=r&&r.length?d3.max(r):e.data.stroke.width}return 15>n?15:n},v=p.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var n=!1,f=[],m=[],y=a(t),x=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(r,i,o){var l=c(e,r,p.value);l.constructor===Date&&(l=l.getTime());var u=v.indexOf(s(v,l));n===!1||n===u-1?(y.values.push(r),y.segment_key+="_"+u):(y.values.length>1?f.push(y):m.push(y.values[0]),y=a(t),y.values=[r]),i===o.length-1&&(y.values.length>1?f.push(y):m.push(y.values[0])),n=u});var b=x.selectAll("path.d3plus_line").data(f,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.shape="line",e.segment_key}),w=x.selectAll("rect.d3plus_anchor").data(m,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.r=2*e.data.stroke.width,t.d3plus.id});e.draw.timing?(b.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).call(u,e),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(e){return d(e.values)}).call(u,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}).call(r).call(u,e),w.transition().duration(e.draw.timing).call(i).call(u,e),w.exit().transition().duration(e.draw.timing).call(r).remove()):(b.exit().remove(),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),b.attr("d",function(e){return d(e.values)}).call(u,e),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}),w.exit().remove(),w.call(i).call(u,e));var _=x.selectAll("path.d3plus_mouse").data(f,function(e){return e.segment_key});_.enter().append("path").attr("class","d3plus_mouse").attr("d",function(e){return d(e.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),_.on(l.over,function(t){e.draw.frozen||o(e,this,h,2)}).on(l.out,function(t){e.draw.frozen||o(e,this,h,0)}),e.draw.timing?_.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).style("stroke-width",g):_.attr("d",function(e){return d(e.values)}).style("stroke-width",g),_.exit().remove()})}},{"../../../client/pointer.coffee":40,"../../../core/fetch/value.coffee":69,"../../../util/closest.coffee":208,"../../../util/copy.coffee":209,"./style.coffee":236}],232:[function(e,t,n){t.exports=function(e){function t(t){t.attr("d",e.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3plus.x+","+e.d3plus.y+")"})}var n=e.returned.edges||[],r=e.g.edges.selectAll("g.d3plus_edge_path").data(n,function(t){return t.d3plus.id="path_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.id});e.draw.timing?(r.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),r.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(e.draw.timing).call(t)):(r.exit().remove(),r.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),r.selectAll("path").data(function(e){return[e]}).call(t),r.enter().append("g").attr("class","d3plus_edge_path").append("path").call(t))}},{}],233:[function(e,t,n){var r,i,o,a;a=e("./style.coffee"),o={},r={},i={r:{},a:{}},t.exports=function(e,t,n,s){var l,u,c,f,d;c=e.id.nesting[e.depth.value+1],f=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return e.d3plus.r}).angle(function(e){return e.d3plus.a}),l=function(t){return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label),[t]},e.draw.timing?(t.each(function(t){var n,r,i,o,a;for(o=t[c],a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(n.d3plus.id=n[e.id.value]+"_"+n[c]);return a}),u=d3.svg.line.radial().interpolate("linear-closed").radius(function(e,t){return void 0===o[e.d3plus.id]&&(o[e.d3plus.id]=0),isNaN(o[e.d3plus.id])&&(o[e.d3plus.id]=e.d3plus.r),o[e.d3plus.id]}).angle(function(e,t){return void 0===r[e.d3plus.id]&&(r[e.d3plus.id]=e.d3plus.a),isNaN(r[e.d3plus.id])&&(r[e.d3plus.id]=e.d3plus.a),r[e.d3plus.id]}),d=function(e,t){return e.attrTween("d",function(e){var n,a,s,l,f,d,h;for(h=e[c],s=l=0,f=h.length;f>l;s=++l)a=h[s],n=a.d3plus.a,void 0===t?d=a.d3plus.r:0===t&&(d=0),i.a[a.d3plus.id]=d3.interpolate(r[a.d3plus.id],n),i.r[a.d3plus.id]=d3.interpolate(o[a.d3plus.id],d);return function(t){var n,l,f;for(f=e[c],s=n=0,l=f.length;l>n;s=++n)a=f[s],r[a.d3plus.id]=i.a[a.d3plus.id](t),o[a.d3plus.id]=i.r[a.d3plus.id](t);return u(e[c])}})},n.append("path").attr("class","d3plus_data").call(a,e).attr("d",function(e){return u(e[c])}),t.selectAll("path.d3plus_data").data(l).transition().duration(e.draw.timing).call(a,e).call(d),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(d,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(l).call(a,e).attr("d",function(e){return f(e[c])}))}},{"./style.coffee":236}],234:[function(e,t,n){var r;r=e("./style.coffee"),t.exports=function(e,t,n,i){var o,a,s;return o=function(t){var n,r;return e.labels.value&&!t.d3plus.label?(r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,t.d3plus_label={w:r,h:n,x:0,y:0},t.d3plus_share={w:r,h:n,x:0,y:0},t.d3plus_label.shape="circle"===t.d3plus.shape?"circle":"square"):t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]},a=function(e){return e.attr("x",function(e){return e.d3plus.init&&"x"in e.d3plus.init?e.d3plus.init.x:e.d3plus.init&&"width"in e.d3plus.init?-e.d3plus.width/2:0}).attr("y",function(e){return e.d3plus.init&&"y"in e.d3plus.init?e.d3plus.init.y:e.d3plus.init&&"height"in e.d3plus.init?-e.d3plus.height/2:0}).attr("width",function(e){return e.d3plus.init&&"width"in e.d3plus.init?e.d3plus.init.width:0}).attr("height",function(e){return e.d3plus.init&&"height"in e.d3plus.init?e.d3plus.init.height:0})},s=function(t){return t.attr("x",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,-t/2}).attr("y",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,-t/2}).attr("width",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.width}).attr("height",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3plus.shape,n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3plus.shape,t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3plus?"rotate("+e.d3plus.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3plus.shape||"rotate"in t.d3plus?"auto":e.shape.rendering.value})},e.draw.timing?(n.append("rect").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("rect.d3plus_data").data(o).transition().duration(e.draw.timing).call(s).call(r,e),i.selectAll("rect.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("rect").attr("class","d3plus_data"),t.selectAll("rect.d3plus_data").data(o).call(s).call(r,e))}},{"./style.coffee":236}],235:[function(e,t,n){var r;r=e("../../../core/fetch/value.coffee"),t.exports=function(e,t,n){var i;return i=e[n].value,i?n in t.d3plus?t.d3plus[n]:r(e,t,i):t.d3plus[n]}},{"../../../core/fetch/value.coffee":69}],236:[function(e,t,n){var r,i,o;r=e("./color.coffee"),i=e("../../../client/ie.js"),o=e("../../../core/fetch/value.coffee"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3plus&&e.d3plus.spline?"none":r(e,t)}).style("stroke",function(e){var n;return e.d3plus&&e.d3plus.stroke?e.d3plus.stroke:(n=e.values?r(e.values[0],t):r(e,t,!0),d3.rgb(n).darker(.6))}).style("stroke-width",function(e){var n;if(i&&t.types[t.type.value].zoom)return 0;if("line"===e.d3plus.shape&&t.size.value){if(t.size.value.constructor===Number)return t.size.value;if(n=o(t,e,t.size.value),n&&n.length)return d3.max(n)}return t.data.stroke.width}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":39,"../../../core/fetch/value.coffee":69,"./color.coffee":222}],237:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":236}],238:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,i){function o(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(o).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":236}],239:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a,s,l,u,c,f,d;o=function(e){return e.d3plus.text?e.d3plus_label={w:f,h:f,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3plus.position)>=0?90:0}:e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]},d=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},a=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n,r;return["top","bottom"].indexOf(e.d3plus.position)>=0?0:(t=e.d3plus.offset||0,n=e.d3plus.width||0,r=0>t?-n:n,r+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("y1",function(e){var t,n,r;return["left","right"].indexOf(e.d3plus.position)>=0?0:(n=e.d3plus.offset||0,t=e.d3plus.height||0,r=0>n?-t:t,r+n)}).attr("y2",function(e){return["left","right"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},s=e.defs.selectAll("#d3plus_whisker_marker").data([0]),s.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),i=t.datum(),i?(u=i.d3plus.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",f="horizontal"===l?i.d3plus.width:i.d3plus.height):(l="horizontal",f=0),s.select("line").attr("x1","horizontal"===l?-f/2:0).attr("x2","horizontal"===l?f/2:0).attr("y1","vertical"===l?-f/2:0).attr("y2","vertical"===l?f/2:0).call(d).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(n.append("line").attr("class","d3plus_data").call(d).call(a),t.selectAll("line.d3plus_data").data(o).transition().duration(e.draw.timing).call(d).call(c),r.selectAll("line.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("line").attr("class","d3plus_data"),t.selectAll("line.d3plus_data").data(o).call(d).call(c))}},{}],240:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../client/prefix.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/touch.coffee"),s=e("../zoom/propagation.coffee");t.exports=function(e){e.dev.value&&o.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3plus").data([0]),e.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("stroke","none").attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),e.g.viz.enter().append("g").attr("id","d3plus_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),e.g.overlay.on(r.move,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(t){a&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grabbing"):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),e.g.labels.enter().append("g").attr("id","d3plus_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&o.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../client/touch.coffee":45,"../../../core/console/print.coffee":54,"../zoom/propagation.coffee":255}],241:[function(e,t,n){var r=e("../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":54}],242:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../tooltip/create.js"),o=e("../../../core/data/nest.js"),a=e("./data.js"),s=e("../../../core/fetch/color.coffee"),l=e("../../../core/fetch/text.js"),u=e("../../../core/fetch/value.coffee"),c=e("../../../object/merge.coffee"),f=e("../../../tooltip/remove.coffee"),d=e("../shapes/segments.coffee"),h=e("../../../client/scroll.js"),p=e("../../../util/uniques.coffee"),g=e("../../../object/validate.coffee"),v=e("../zoom/direction.coffee");
t.exports=function(e){function t(t){function h(e){return"string"==typeof n[e].value?n[e].value:n.format.locale.value.method[e]}var v,w="depth"in e?e.depth:y,z={},M=n.id.nesting[w+1]in m?w+1:w,C=n.id.nesting[M],O="merged"in m.d3plus?m.d3plus.merged:m[C];O instanceof Array||(O=[O]);var N=u(n,m,n.size.value);if(n.tooltip.children.value){if(O=O.slice(0),O.length>1&&g(O[0])&&(O=o(n,O,[C])),n.size.value&&g(O[0])){var P=[],F=O.filter(function(e){var t=u(n,e,n.size.value);return!(null===t||"d3plus"in e&&e.d3plus.merged)||void P.push(e)});r(F,n.size.value,"desc",[],n),O=F.concat(P)}var I="short"===S?3:n.data.large,R=O.length,L=d3.min([R,I]);v={values:[]};for(var B=0;L>B&&O.length;B++){var q=O.shift(),U=l(n,q,M)[0],V=g(q)?u(n,q,C,M):q;if(V!==m[n.id.nesting[w]]&&U&&!v[U]){var $=g(q)?u(n,q,n.size.value,C):null,H=s(n,q,C);v[U]=!$||$ instanceof Array?"":n.format.value($,{key:n.size.value,vars:n,data:q});var Y={};Y[U]=v[U],v.values.push(Y),H&&(v.d3plus_colors||(v.d3plus_colors={}),v.d3plus_colors[U]=H)}else B--}R>L&&(v.d3plusMore=R-L)}m.d3plus.tooltip&&(z=c(z,m.d3plus.tooltip)),n.tooltip.size.value&&(N&&"number"!=typeof n.size.value&&(z[h("size")]=N),n.axes.opposite&&n[n.axes.opposite].value!==n.size.value&&(z[h(n.axes.opposite)]=u(n,m,n[n.axes.opposite].value)),n.axes.opposite&&n[n.axes.opposite+"2"].value!==n.size.value&&(z[h(n.axes.opposite+"2")]=u(n,m,n[n.axes.opposite+"2"].value)),n.color.valueScale&&(z[h("color")]=u(n,m,n.color.value)));var W=d(n,m,"active"),X=d(n,m,"temp"),J=d(n,m,"total");"number"==typeof W&&W>0&&J&&(z[h("active")]=W+"/"+J+" ("+n.format.value(W/J*100,{key:"share",vars:n,data:m})+")"),"number"==typeof X&&X>0&&J&&(z[h("temp")]=X+"/"+J+" ("+n.format.value(X/J*100,{key:"share",vars:n,data:m})+")"),n.tooltip.share.value&&m.d3plus.share&&(z.share=n.format.value(100*m.d3plus.share,{key:"share",vars:n,data:m}));var M="depth"in e?e.depth:y,G=e.title||l(n,m,M)[0],Q=p(m,n.icon.value,u,n,n.id.nesting[M]),Z=a(n,m,S,z,v,M);if(Q=1===Q.length&&"string"==typeof Q[0]&&Q[0],Z.length>0||T||!m.d3plus_label&&"short"==S&&G||m.d3plus_label&&(!("visible"in m.d3plus_label)||"visible"in m.d3plus_label&&m.d3plus_label.visible===!1)){G||(G=n.format.value(V,{key:n.id.value,vars:n}));var M="d3plus"in m&&"merged"in m.d3plus?y-1:"depth"in e?e.depth:y;if(0>M&&(M=0),M=n.id.nesting[M],"string"==typeof n.icon.style.value)var K=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[M])var K=n.icon.style.value[M];else var K="default";var ee=n.tooltip.small;e.width?ee=e.width:k&&(ee=n.tooltip.large);var te=!k&&"long"!==e.length||k&&n.tooltip.fullscreen.value?d3.select("body"):n.container.value;!e.description&&m&&n.tooltip.sub.value&&(e.description=u(n,m,n.tooltip.sub.value)),i({align:A,arrow:b,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:Z,color:s(n,m),allColors:!0,footer:e.footer===!1?e.footer:T,fullscreen:k,html:t,js:e.js,icon:Q,id:_,max_height:e.maxheight,max_width:ee,mouseevents:x,offset:D,parent:te,stacked:n.tooltip.stacked.value,style:K,title:G,description:e.description,width:e.width||k||0!=Z.length?ee:"auto",x:E,y:j})}else f(_)}"d3plus"in e.data||(e.data.d3plus={});var n=e.vars,m=e.data,y="d3plus"in m&&"depth"in m.d3plus?m.d3plus.depth:n.depth.value,x=(e.ex,!!e.mouseevents&&e.mouseevents),b=!("arrow"in e)||e.arrow,w=u(n,m,n.id.value),_=e.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value["long"]||"fullscreen"in e){var k=!1,A=e.anchor||n.tooltip.anchor,S=e.length||"short",z=v(m,n);if(-1===z){var M=n.id.nesting[y-1];u(n,w,M)}var C="";if(n.mouse.click.value&&(!n.mouse.viz||n.mouse.viz.click!==!1))if(1===z&&n.zoom.value)var C=n.format.value(n.format.locale.value.ui.expand);else if(-1===z&&n.zoom.value&&n.history.states.length&&!n.tooltip.value["long"])var C=n.format.value(n.format.locale.value.ui.collapse);else if(n.small||"short"!=S||!n.tooltip.html.value&&!n.tooltip.value["long"]||1===n.focus.value.length&&n.focus.value[0]==w){if("long"==S)var C=n.footer.value||""}else var C=n.format.locale.value.ui.moreInfo;var T=!!C.length&&n.format.value(C,{key:"footer",vars:n})}else{var k=!0,b=!1,x=!0,S="long",T=n.footer.value;n.covered=!0}if("x"in e)var E=e.x;else if("static"===n.types[n.type.value].tooltip){var E=m.d3plus.x;n.zoom.translate&&n.zoom.scale&&(E=n.zoom.translate[0]+E*n.zoom.scale),E+=n.margin.left,"long"!==e.length&&(j+=h.x(),E+=n.container.value.node().getBoundingClientRect().left,E+=parseFloat(n.container.value.style("padding-left"),10))}else var E=d3.mouse(d3.select("html").node())[0];if("y"in e)var j=e.y;else if("static"==n.types[n.type.value].tooltip){var j=m.d3plus.y;n.zoom.translate&&n.zoom.scale&&(j=n.zoom.translate[1]+j*n.zoom.scale),j+=n.margin.top,"long"!==e.length&&(j+=h.y(),j+=n.container.value.node().getBoundingClientRect().top,j+=parseFloat(n.container.value.style("padding-top"),10))}else var j=d3.mouse(d3.select("html").node())[1];if("offset"in e)var D=e.offset;else if("static"==n.types[n.type.value].tooltip){var D=m.d3plus.r?m.d3plus.r:m.d3plus.height/2;n.zoom.scale&&(D*=n.zoom.scale)}else var D=3;if(k||"long"===e.length)if("string"==typeof n.tooltip.html.value)t(n.tooltip.html.value);else if("function"==typeof n.tooltip.html.value)t(n.tooltip.html.value(w));else if(n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url){var O=n.tooltip.html.value.url;"function"==typeof O&&(O=O(w)),d3.json(O,function(e){var r=n.tooltip.html.value.callback?n.tooltip.html.value.callback(e):e;t(r)})}else t(e.html);else t(e.html)}},{"../../../array/sort.coffee":36,"../../../client/scroll.js":43,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":173,"../../../object/validate.coffee":174,"../../../tooltip/create.js":203,"../../../tooltip/remove.coffee":205,"../../../util/uniques.coffee":212,"../shapes/segments.coffee":235,"../zoom/direction.coffee":252,"./data.js":243}],243:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/fetch/color.coffee"),a=e("../../../core/fetch/text.js"),s=e("../../../color/legible.coffee"),l=e("../../../object/merge.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../string/format.js"),f=e("../../../object/validate.coffee");t.exports=function(e,t,n,d,h,p){function g(n,r){if(e.attrs.value[r])var o=r;else var o=null;r&&(r=e.format.value(r));var a=m[n]||i(e,t,n,o);if(f(a))w.push({name:e.format.value(n),value:e.format.value(a.value,{key:a.key,vars:e}),group:r});else if(null!=a&&"undefined"!=a&&!(a instanceof Array)&&("string"==typeof a&&a.indexOf("d3plus_other")<0||"string"!=typeof a)){var s=e.format.locale.value.ui[n]?e.format.value(e.format.locale.value.ui[n]):e.format.value(n),l=x.indexOf(n)>=0;a instanceof Array?a.forEach(function(r){r=e.format.value(r,{key:n,vars:e,data:t})}):a=e.format.value(a,{key:n,vars:e,data:t});var u={name:s,value:a,highlight:l,group:r};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in e.descs.value&&(u.desc=e.descs.value[n]);w.push(u)}}if(e.small)return[];if(!n)var n="long";if("long"==n)var v="short";else var v="long";var m={};if(d&&"string"==typeof d)d=[d];else if(d&&"object"==typeof d){m=l(m,d);var d=[];for(var y in m)d.push(y)}else if(!d)var d=[];var x=[];if(e.tooltip.value instanceof Array)var b=e.tooltip.value;else if("string"==typeof e.tooltip.value)var b=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[p]])var b=e.tooltip.value[e.id.nesting[p]];else var b=e.tooltip.value;b instanceof Array||(b=b[n]?b[n]:b[v]?[]:l({"":[]},b)),"string"==typeof b?b=[b]:b instanceof Array||(b=l({"":[]},b))}var w=[];if(b.constructor===Array&&(b={"":b}),e.id.nesting.length&&p<e.id.nesting.length-1){var b=r(b);e.id.nesting.forEach(function(e,t){t>p&&b[e]&&delete b[e]})}for(var _ in b){b[_].constructor!==Array&&(b[_]=[b[_]]);for(var k=d.length;k>0;k--)b[_].indexOf(d[k-1])>=0&&d.splice(k-1,1)}if(e.tooltip.value["long"]&&"object"==typeof e.tooltip.value["long"])for(var _ in e.tooltip.value["long"])for(var k=d.length;k>0;k--){var A=d[k-1];e.tooltip.value["long"][_].indexOf(A)>=0&&(b[_]||(b[_]=[]),b[_].push(A),d.splice(k-1,1))}d.length&&(b[""]||(b[""]=[]),b[""]=b[""].concat(d));for(var _ in b)b[_].forEach(function(e){g(e,_)});if(h){var S=e.format.locale.value.ui.including,z=h.d3plus_colors;h.values.forEach(function(t){var n=d3.keys(t)[0];w.push({group:e.format.value(S),highlight:!(!z||!z[n])&&z[n],name:n,value:t[n]})}),h.d3plusMore&&w.push({group:e.format.value(S),highlight:!0,name:c(e.format.locale.value.ui.more,h.d3plusMore),value:""})}if(e.tooltip.connections.value&&"long"===n){var M=e.edges.connections(t[e.id.value],e.id.value,!0);M.length&&M.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]===t[e.id.value]}),n=n.length?n[0]:t,r=a(e,n)[0],i=o(e,n),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+i,"border-color: "+s(i),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";var f=function(){e.self.focus([n[e.id.value]]).draw()};w.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:f,name:"<div id='d3plustooltipfocuslink_"+n[e.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+r+"</div>"})})}return w}},{"../../../client/prefix.coffee":41,"../../../color/legible.coffee":46,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":173,"../../../object/validate.coffee":174,"../../../string/format.js":175,"../../../util/copy.coffee":209}],244:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n,i,o,a,s,l,u,c,f;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,f=e.types[e.type.value],u=f.requirements||[],i=u.indexOf("data")>=0,o=!i||i&&e.data.viz.length,!e.error.internal&&o){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&r.time("running "+t),l=e.data.viz,a=0,s=l.length;s>a;a++)n=l[a],n.d3plus&&(delete n.d3plus.shape,delete n.d3plus.label,delete n.d3plus.rotate,delete n.d3plus.share);c=f(e),e.dev.value&&r.timeEnd("running "+t)}else c=null;e.returned={nodes:[],edges:null},c instanceof Array?e.returned.nodes=c:c&&(c.nodes&&(e.returned.nodes=c.nodes),c.edges&&(e.returned.edges=c.edges))}},{"../../../core/console/print.coffee":54}],245:[function(e,t,n){var r=e("../../../util/copy.coffee"),i=e("../../../form/form.js"),o=e("../../../core/console/print.coffee"),a=e("../../../object/validate.coffee");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,n=e.ui.position.value;e.dev.value&&t&&o.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);s.enter().append("div").attr("id","d3plus_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==n?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3plus_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block"),u.style("padding",e.ui.padding+"px").each(function(t){t.form||(t.form=i().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var n,o;"string"==typeof t.method&&t.method in e?(n=e[t.method].value,o=function(n){n!==e[t.method].value&&e.self[t.method](n).draw()}):(n=t.value[0],a(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(o=function(n){t.method(n,e.self)}));var s,l=[];t.label?s=t.label:"string"==typeof t.method&&t.method in e&&(s=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var n={};a(t)?(n.id=t[d3.keys(t)[0]],n.text=e.format.value(d3.keys(t)[0])):(n.id=t,n.text=e.format.value(t)),l.push(n)});var u=r(e.ui.font);u.align=r(e.font.align),u.secondary=r(u),t.form.data(l).font(u).focus(t.value.length>1&&n).focus({callback:o}).format(e.format.locale.language).format({number:e.format.number.value,text:e.format.text.value}).title(e.format.value(s)).type(t.type||"auto").ui({align:e.ui.align.value,border:e.ui.border,color:{primary:e.ui.color.primary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding,margin:0}).width(t.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[n]+=c),e.dev.value&&t&&o.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":54,"../../../form/form.js":105,"../../../object/validate.coffee":174,"../../../util/copy.coffee":209}],246:[function(e,t,n){var r,i,o,a;r=e("../../../client/pointer.coffee"),i=e("../../../color/lighter.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/css.coffee"),t.exports=function(e){var t,n,s,l,u,c,f,d,h,p,g,v,m,y,x;return!e.small&&e.history.states.length>0?(e.dev.value&&o.time("drawing back button"),t=e.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),h=e.title.sub.font.size,n=e.title.sub.font.color,u=e.title.sub.font.family.value,x=e.title.sub.font.weight,d=e.title.sub.padding,v=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?v="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?v="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(v="title"),v?(p=function(e){var t;return t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0],t=t.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),t=t.split(","),t=t[t.length-1],parseFloat(t.substring(0,t.length-1))},m=e.svg.select(".d3plus_title."+v),y=p(m)+p(m.select("text"))):(y=e.margin.top-e.title.padding,f=h+2*d,e.margin.top+=f),s=parseFloat(e.container.value.style("padding-top"),10),y+=s,s=parseFloat(e.container.value.style("padding-left"),10),c=e.margin.left+h/2+s,g=function(e){return e.style("position","absolute").style("left",c+"px").style("top",y+"px").style("color",n).style("font-family",u).style("font-weight",x).style("font-size",h+"px")},l=t.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(g).html(function(){var t;return a("font-awesome")&&0===e.icon.back.value.indexOf("fa-")?(t="<i class='fa "+e.icon.back.value,t+="' style='margin-top:2px;margin-right:4px;'></i>"):t=e.icon.back.value+" ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(r.over,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",i(n,.25)):void 0}).on(r.out,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",n):void 0}).on(r.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(g),e.dev.value?o.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3plus_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../color/lighter.coffee":47,"../../../core/console/print.coffee":54}],247:[function(e,t,n){var r=e("../../../array/sort.coffee"),i=e("../../../util/buckets.coffee"),o=e("../../../util/copy.coffee"),a=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataURL.coffee"),u=e("../../../client/pointer.coffee"),c=e("../../../core/fetch/value.coffee"),f=e("../../../core/fetch/color.coffee"),d=e("../../../core/fetch/text.js"),h=e("../../../core/console/print.coffee"),p=e("../../../tooltip/remove.coffee"),g=e("../../../color/text.coffee"),v=e("../../../util/uniques.coffee"),m=e("../../../client/scroll.js"),y=e("../../../string/strip.js"),x=e("../../../textwrap/textwrap.coffee"),b=(e("../../../client/touch.coffee"),e("../../../object/validate.coffee"));t.exports=function(e){function t(t){t.attr("transform",function(t,n){var r=D+n*(e.ui.padding+_);return"translate("+r+","+e.ui.padding+")"})}function n(t){t.attr("width",_).attr("height",_).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var n=v(t,e.icon.value,c,e,L),r=f(e,t,L);if(e.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var i,o=y(n+"_"+r),a=e.icon.style.value,s=e.defs.selectAll("pattern#"+o).data([o]);i="string"==typeof a?e.icon.style.value:b(a)&&a[L]?a[L]:"default",r="knockout"==i?r:"none",s.select("rect").transition().duration(e.draw.timing).attr("fill",r).attr("width",_).attr("height",_),s.select("image").transition().duration(e.draw.timing).attr("width",_).attr("height",_);var u=s.enter().append("pattern").attr("id",o).attr("width",_).attr("height",_);return u.append("rect").attr("fill",r).attr("width",_).attr("height",_),u.append("image").attr("xlink:href",n).attr("width",_).attr("height",_).each(function(e){0===n.indexOf("/")||n.indexOf(window.location.hostname)>=0?l(n,function(e){s.select("image").attr("xlink:href",e)}):s.select("image").attr("xlink:href",n)}),"url(#"+o+")"}if(e.legend.labels.value){var h;if(h=e.legend.text.value?[c(e,t,e.legend.text.value,R)]:d(e,t,R),1===h.length&&!(h[0]instanceof Array)&&h[0].length){var p=d3.select(this.parentNode).append("text"),m=e.legend.font.size;m instanceof Array||(m=[m]),p.attr("font-size",m[m.length-1]+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("stroke","none").attr("fill",g(r)).attr("x",0).attr("y",0).each(function(t){x().align("middle").container(d3.select(this)).height(_).padding(e.ui.padding).resize(m.length>1).size(m).text(h[0]).width(_).valign("middle").draw()}),p.select("tspan").empty()&&p.remove()}}return r})}var w=!0,_=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&h.time("drawing color scale"),e.g.legend.selectAll("g.d3plus_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var k=e.color.valueScale.domain(),A=e.color.valueScale.range();k.length<=2&&(k=i(k,6));var S=e.g.legend.selectAll("g.d3plus_scale").data(["scale"]);S.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var z=S.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);z.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var M=z.selectAll("stop").data(d3.range(0,A.length));M.enter().append("stop").attr("stop-opacity",1),M.attr("offset",function(e){return Math.round(e/(A.length-1)*100)+"%"}).attr("stop-color",function(e){return A[e]}),M.exit().remove();var C=S.selectAll("rect#gradient").data(["gradient"]);C.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var T=S.selectAll("text.d3plus_tick").data(d3.range(0,k.length));T.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var E=0;T.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(k[t],{key:e.color.value,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);t>E&&(E=t)}),E+=2*e.labels.padding;var j=E*(k.length-1);if(j+E<e.width.value){j+E<e.width.value/2&&(j=e.width.value/2,E=j/k.length,j-=E);var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-j:e.width.value/2-j/2,T.transition().duration(e.draw.timing).attr("x",function(e){return D+E*e}),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var O=S.selectAll("rect.d3plus_tick").data(d3.range(0,k.length));O.enter().append("rect").attr("class","d3plus_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.transition().duration(e.draw.timing).attr("x",function(e){var t=0===e?1:0;return D+E*e-t}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.exit().transition().duration(e.draw.timing).attr("width",0).remove(),C.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-j/2:"end"==e.legend.align?e.width.value-j-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",j).attr("height",e.legend.gradient.height),S.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&h.timeEnd("drawing color scale")}else w=!1}else w=!1;else{e.dev.value&&h.time("grouping data by colors");var N;if(e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(N=o(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var P=0;P<N.length;P++){var F=e.data.viz.filter(function(t){return t[e.id.value]===N[P][e.id.value]});F.length&&(N[P]=F[0])}}else N=e.data.viz;N.length&&"key"in N[0]&&"values"in N[0]&&(N=d3.merge(N.map(function(e){return e.values})));var I=function(t){return f(e,t,R)},R=0,L=e.id.value,B=e.id.nesting.indexOf(e.color.value);if(B>=0)R=B,L=e.id.nesting[B];else for(var q=0;q<=e.depth.value;q++){R=q,L=e.id.nesting[q];var U=v(N,function(t){return c(e,t,L)}),V=v(N,I);if(U.length>=V.length&&V.length>1)break}var $=[e.color.value],A=s(e,N,$,!1);e.dev.value&&h.timeEnd("grouping data by color");var H=e.width.value;_=e.legend.size;var j=_*A.length+e.ui.padding*(A.length+1);if(_ instanceof Array){e.dev.value&&h.time("calculating legend size");for(var P=_[1];P>=_[0];P--)if(j=P*A.length+e.ui.padding*(A.length+1),H>=j){_=P;break}e.dev.value&&h.timeEnd("calculating legend size")}else"number"!=typeof _&&_!==!1&&(_=30);if(j>H||1==A.length)w=!1;else{j-=2*e.ui.padding,e.dev.value&&h.time("sorting legend");var Y=e[e.legend.order.value].value,W=e.color.value;Y?"color"!==e.legend.order.value&&(W=[]):Y=e[e.color.value].value,r(A,Y,e.legend.order.sort.value,W,e,R),e.dev.value&&h.timeEnd("sorting legend"),e.dev.value&&h.time("drawing legend");var D;D="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?H-e.ui.padding-j:H/2-j/2,e.g.legend.selectAll("g.d3plus_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var X={},J=e.g.legend.selectAll("g.d3plus_color").data(A,function(t){var n=f(e,t,L);return n in X||(X[n]=-1),X[n]++,X[n]+"_"+n});J.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(t).append("rect").attr("class","d3plus_color").call(n),J.order().transition().duration(e.draw.timing).call(t).attr("opacity",1).selectAll("rect.d3plus_color").call(n),J.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.legend.tooltip.value&&J.on(u.over,function(t,n){d3.select(this).style("cursor","pointer");var r,i,o=this.getBoundingClientRect(),s=o.left+_/2+m.x(),l=o.top+_/2+m.y()+5,f=c(e,t,L),h=e.id.nesting.indexOf(L),p=h>=0?d(e,t,h)[0]:e.format.value(c(e,t,e.color.value,L),{key:e.color.value,vars:e,data:t});if(e.legend.filters.value&&!(f instanceof Array)){r="<div style='text-align:center;'>";var g=e.format.locale.value;r+="<div class='mute'>"+e.format.value(g.method.mute)+"</div>",r+="<div class='solo'>"+e.format.value(g.method.solo)+"</div>",r+="</div>",i=function(t){var n={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};t.select(".mute").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.mute.value;e.history.states.push(function(){e.self.id({mute:t}).draw()}),e.self.id({mute:f}).draw()}),t.select(".solo").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.solo.value;e.history.states.push(function(){e.self.id({solo:t}).draw()}),e.self.id({solo:f}).draw()})}}a({data:t,html:r,js:i,depth:R,footer:!1,vars:e,x:s,y:l,mouseevents:this,title:p,offset:.4*_})}).on(u.out,function(t){p(e.type.value)}),e.dev.value&&h.timeEnd("drawing legend")}}else w=!1;if(e.legend.value&&key&&w){if(e.dev.value&&h.time("positioning legend"),_)var G=_+e.ui.padding;else var Q=e.g.legend.node().getBBox(),G=Q.height+Q.y;0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=G,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&h.timeEnd("positioning legend")}else e.dev.value&&h.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&h.timeEnd("hiding legend")}},{"../../../array/sort.coffee":36,"../../../client/pointer.coffee":40,"../../../client/scroll.js":43,"../../../client/touch.coffee":45,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":174,"../../../string/strip.js":177,"../../../textwrap/textwrap.coffee":202,"../../../tooltip/remove.coffee":205,"../../../util/buckets.coffee":206,"../../../util/copy.coffee":209,"../../../util/dataURL.coffee":211,"../../../util/uniques.coffee":212,"../tooltip/create.js":242}],248:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../color/text.coffee");t.exports=function(e,t){function n(t){t.style(a).style("position","absolute").style("background-color",l).style("text-align","center").style("left",function(){return"center"==s?"50%":"0px"}).style("width",function(){return"center"==s?"auto":e.width.value+"px"}).style("margin-left",function(){return"center"==s?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==s?"50%":"top"==s?"0px":"auto"}).style("bottom",function(){return"bottom"==s?"0px":"auto"}).style("margin-top",function(){if("large"==o){var e=this.offsetHeight||this.getBoundingClientRect().height;return-e/2+"px"}return"0px"})}t=e.messages.value?t:null;var o=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===o)var a=e.messages,s="center";else{if(e.footer.value)var a=e.footer;else if(e.title.value)var a=e.title;else if(e.title.sub.value)var a=e.title.sub;else if(e.title.total.value)var a=e.title.total;else var a=e.title.sub;var s=a.position}var a={color:a.font.color,"font-family":a.font.family.value,"font-weight":a.font.weight,"font-size":a.font.size+"px",padding:a.padding+"px"},l=e.messages.background.value;l||(l=e.background.value,("none"===l||"transparent"===l)&&(l=i(a.color))),e.g.message=e.container.value.selectAll("div#d3plus_message").data(["message"]);var u=e.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);u.append("div").attr("class","d3plus_message_text").style("display","block"),e.g.message.select(".d3plus_message_text").text(t?t:e.g.message.text());var c=navigator.onLine,f=75,d=e.g.message.selectAll(".d3plus_message_branding").data(e.messages.branding.value&&"center"===s?[0]:[]);d.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size","11px").style("background-size",f+"px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(r.click,function(){window.open("http://www.d3plus.org/","_blank")});var h=d3.hsl(l).l<.5?e.messages.branding.image.dark:e.messages.branding.image.light;d.text(c?"Powered by:":"Powered by D3plus").style("background-color",c?l:"transparent").style("background-image",c?"url('"+h+"')":"none").style("min-width",c?f+"px":"auto").style("height",c?f+"px":"auto"),d.exit().remove(),e.g.message.style("display",t?"inline-block":"none").call(n).style("opacity",t?1:0)}},{"../../../client/pointer.coffee":40,"../../../color/text.coffee":52}],249:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d;r=e("../../../util/closest.coffee"),i=e("../../../client/css.coffee"),a=e("../../../font/sizes.coffee"),o=e("../../../client/pointer.coffee"),s=e("../../../color/mix.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../core/console/print.coffee"),f=e("../../../color/text.coffee"),d=e("../../../core/data/time.coffee"),l=!1,t.exports=function(e){var t,n,a,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&c.time("drawing timeline"),H={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},ae=e.data.time.ticks.map(function(e){return new Date(e)}),G=d(e,{values:ae,style:H}),te=G.values.map(Number),J=G.format,e.time.solo.value.length)for(w=d3.extent(e.time.solo.value),b=_=0,S=w.length;S>_;b=++_)m=w[b],m.constructor!==Date&&(m+="",4===m.length&&parseInt(m)+""===m&&(m+="/01/01"),m=new Date(m),w[b]=m);else w=d3.extent(ae);if(oe=ae.slice(),re=d3.max(G.sizes.map(function(e){return e.height})),k=~~d3.max(G.sizes.map(function(e){return e.width}))+1,k+=2*e.ui.padding,Z=e.timeline.height.value||re+2*e.ui.padding,ee=k*ae.length,F=Z,U=Z-2*e.ui.padding>=re,t=e.width.value-2*e.ui.padding,U&&e.timeline.play.value&&(t-=F+e.ui.padding),!U||te.length<ae.length||t<k*te.length){for(T=k,k=(t-k)/ae.length,ee=k*ae.length,K=1,W=~~(T/(ee/te.length))+1;W<te.length-1&&(te.length-1)%W!==0;)W++;te=te.filter(function(e,t){return t%W===0})}else K=0,M=new Date(ae[0]),B=e.data.time.stepType,M["set"+B](M["get"+B]()+ae.length),oe.push(M);return R=new Date(w[0]),R=r(oe,R),y=new Date(w[1]),K||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=r(oe,y),ie=oe.map(Number),C=ie.indexOf(+R),z=ie.indexOf(+y),h=[R,y],L="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-ee:e.width.value/2-ee/2,U&&e.timeline.play.value&&(L+=(F+e.ui.padding)/2),q=function(){return clearInterval(l),l=!1,j.call(D,"icon")},g=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(l&&q(),h=a.extent(),n=r(oe,h[0]),t=r(oe,h[1]),n===t&&(C=ie.indexOf(+n),n<h[0]||0===C?t=oe[C+1]:n=oe[C-1]),C=ie.indexOf(+n),z=ie.indexOf(+t),z-C>=1)e=[n,t];else if(C+1<=ae.length)e=[n,oe[C+1]];else{for(e=[n],b=1;1>=b;)C+b<=ae.length?e.push(oe[C+b]):e.unshift(oe[C-(C+b-ae.length)]),b++;e=[e[0],e[e.length-1]]}return h=e,V.attr("fill",$),d3.select(this).call(a.extent(e))}},I=function(){var t;return z-C===ae.length-K?t=[]:(t=ie.filter(function(e,t){return t>=C&&z+K>t}),t=t.map(function(e){return new Date(e)})),P(),e.self.time({solo:t}).draw()},v=function(){var t,n,i,o;return null!==d3.event.sourceEvent&&(e.time.solo.value.length?(o=d3.extent(e.time.solo.value),i=ie.indexOf(+r(oe,o[0])),
n=ie.indexOf(+r(oe,o[1])),t=i!==C||n!==z):t=z-C!==ae.length-K,t)?I():void 0},E=e.g.timeline.selectAll("rect.d3plus_timeline_play").data(U&&e.timeline.play.value?[0]:[]),N=function(t){return t.attr("width",F+1).attr("height",Z+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",L-F-1-e.ui.padding).attr("y",e.ui.padding)},E.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(N),E.transition().duration(e.draw.timing).call(N),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=e.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(U&&e.timeline.play.value?[0]:[]),D=function(t,n){var r;return n=e.timeline.play[n],i("font-awesome")?(n=n.awesome,r="FontAwesome"):(n=n.fallback,r="inherit"),t.style("font-family",r).text(n)},O=function(t){var n;return n=Z/2+e.ui.padding+1,t.attr("fill",f(e.ui.color.primary.value)).attr("stroke","none").attr(H).attr("x",L-(F-1)/2-e.ui.padding).attr("y",n).attr("dy","0.5ex").call(D,l?"pause":"icon")},j.enter().append("text").attr("class","d3plus_timeline_playIcon").call(O).style("pointer-events","none").attr("opacity",0),j.call(O).transition().duration(e.draw.timing).attr("opacity",1),j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),P=function(){return z-C===ae.length-K?(E.on(o.hover,null).on(o.click,null).transition().duration(e.draw.timing).attr("opacity",.3),j.transition().duration(e.draw.timing).attr("opacity",.3)):(E.on(o.over,function(){return d3.select(this).style("cursor","pointer")}).on(o.out,function(){return d3.select(this).style("cursor","auto")}).on(o.click,function(){return l?q():(j.call(D,"pause"),z===ae.length?(z-=C,C=0):(C++,z++),I(),l=setInterval(function(){return z===ae.length-K?q():(C++,z++,I())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),j.transition().duration(e.draw.timing).attr("opacity",1))},P(),$=function(t){var n,r,i;return r=K?t<=h[1]:t<h[1],t>=h[0]&&r?(i=1,n=f(e.ui.color.secondary.value)):(i=.5,n=f(e.ui.color.primary.value)),K&&e.background.value&&"none"!==e.background.value&&(n=d3.rgb(f(e.background.value))),n=d3.rgb(n),"rgba("+n.r+","+n.g+","+n.b+","+i+")"},n=e.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),n.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",L-1).attr("y",e.ui.padding),n.transition().duration(e.draw.timing).attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",L-1).attr("y",e.ui.padding),X=e.g.timeline.selectAll("g#ticks").data(["ticks"]),X.enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),p=e.g.timeline.selectAll("g#brush").data(["brush"]),p.enter().append("g").attr("id","brush"),A=e.g.timeline.selectAll("g#labels").data(["labels"]),A.enter().append("g").attr("id","labels"),V=A.selectAll("text").data(ae,function(e,t){return t}),V.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),ne=d3.time.scale().domain(d3.extent(oe)).rangeRound([0,ee]),V.order().attr(H).text(function(e,t){return te.indexOf(+e)>=0?J(e):""}).attr("opacity",function(t,n){return e.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",$).attr("transform",function(t,n){var r,i;return r=L+ne(t),K||(r+=k/2),i=Z/2+e.ui.padding+1,K&&(i+=Z/2+re),"translate("+Math.round(r)+","+Math.round(i)+")"}),V.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),a=d3.svg.brush().x(ne).extent(h).on("brush",g).on("brushend",v),Y=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,X.attr("transform","translate("+L+","+(e.ui.padding+1)+")").transition().duration(e.draw.timing).call(d3.svg.axis().scale(ne).orient("top").ticks(function(){return oe}).tickFormat("").tickSize(-Z).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return te.indexOf(+t)>=0?Y:s(Y,e.background.value,.4,1)}),X.selectAll("path").attr("fill","none"),p.attr("transform","translate("+L+","+(e.ui.padding+1)+")").attr("opacity",1).call(a),V.attr("pointer-events","none"),p.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",Z).attr("shape-rendering","crispEdges").on(o.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),p.selectAll("rect.extent").attr("opacity",.75).attr("height",Z).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(o.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?(x=p.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),x.enter().insert("rect","rect").attr("class","d3plus_handle"),x.attr("fill",e.timeline.handles.color).attr("transform",function(t){var n;return n="resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0,"translate("+n+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),p.selectAll("g.resize").selectAll("rect").attr("height",Z)):p.selectAll("g.resize").remove(),Q=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=Q.height+Q.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?c.time("drawing timeline"):void 0}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/time.coffee":64,"../../../font/sizes.coffee":103,"../../../util/closest.coffee":208}],250:[function(e,t,n){var r=e("../../../client/pointer.coffee"),i=e("../../../core/fetch/value.coffee"),o=e("../../../core/console/print.coffee"),a=e("../../../client/rtl.coffee"),s=e("../../../textwrap/textwrap.coffee");t.exports=function(e){function t(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}function n(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!a||"right"==t&&a?"start":"left"==t&&a||"right"==t&&!a?"end":t}var l=e.size.value?e.size.value:"number"===e.color.type&&e.color.value;if(e.data.viz&&e.title.total.value&&!e.small)if(l){e.dev.value&&o.time("calculating total value");var u=e.data.pool;e.focus.value.length&&(u=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]}));var c,f=e.aggs.value[l]||"sum";if(f.constructor===Function?c=f(u):(u=u.reduce(function(t,n){var r=i(e,n,l);return r instanceof Array?t=t.concat(r):t.push(r),t},[]),c=d3[f](u)),(0===c||null===c||void 0===c)&&(c=!1),"number"==typeof c){var d="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var h=d3.sum(e.data.value,function(t){if(e.time.solo.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))>=0;else if(e.time.mute.value.length>0)var n=e.time.solo.value.indexOf(i(e,t,e.time.value))<0;else var n=!0;return n?i(e,t,l):void 0});if(h>c){var d=c/h*100,p=e.format.value(h,{key:e.size.value,vars:e});d=" ("+e.format.value(d,{key:"share",vars:e})+" of "+p+")"}}c=e.format.value(c,{key:e.size.value,vars:e});var g=e.title.total.value,v=g.prefix||e.format.value(e.format.locale.value.ui.total)+": ";c=v+c,g.suffix?c+=g.suffix:null,c+=d}e.dev.value&&o.timeEnd("calculating total value")}else var c=!1;else var c=!1;var m=[];if(e.footer.value&&m.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){if(e.title.value){var y=e.title.value;"function"==typeof y&&(y=y(e.self)),m.push({link:e.title.link,style:e.title,type:"title",value:y})}if(e.title.sub.value){var y=e.title.sub.value;"function"==typeof y&&(y=y(e.self)),m.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:y})}e.title.total.value&&c&&m.push({link:e.title.total.link,style:e.title.total,type:"total",value:c})}e.dev.value&&o.time("drawing titles");var x=e.svg.selectAll("g.d3plus_title").data(m,function(e){return e.type}),b=e.title.width||e.width.value-e.margin.left-e.margin.right;x.enter().append("g").attr("class",function(e){return"d3plus_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(t),x.each(function(r){var i=d3.select(this).select("text").call(t),o=n(r);s().align(o).container(i).height(e.height.value/2).size(!1).text(r.value).width(b).draw(),r.y=e.margin[r.style.position],e.margin[r.style.position]+=this.getBBox().height+2*r.style.padding}).on(r.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(r.out,function(n){n.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(t)}).on(r.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var r=t.style.position,i="top"==r?0+t.y:e.height.value-t.y;"bottom"==r?i-=this.getBBox().height+t.style.padding:i+=t.style.padding;var o=n(t);if("start"===o)var a=e.margin.left+e.title.padding;else d3.select(this).select("text").node().getBBox().width,a="middle"===o?e.width.value/2-b/2:e.width.value-b-e.margin.right-e.title.padding;return"translate("+a+","+i+")"}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var w=e.title.height;w&&e.margin[e.title.position]<w&&(e.margin[e.title.position]=w),e.dev.value&&o.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":40,"../../../client/rtl.coffee":42,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../textwrap/textwrap.coffee":202}],251:[function(e,t,n){var r,i;r=e("./labels.coffee"),i=e("./transform.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h;return t||(t=e.zoom.bounds),"number"!=typeof n&&(n=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},h=e.types[e.type.value],s=e.coords.fit.value,o="auto"===s||h.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],u=d3.min([e.width.viz,e.height.viz]),c=h.zoom?2*e.coords.padding:0,f=(u-c)/u/o,a=e.zoom.behavior.scaleExtent(),(a[0]===a[1]||t===e.zoom.bounds)&&e.zoom.behavior.scaleExtent([f,16*f]),l=e.zoom.behavior.scaleExtent()[1],f>l&&(f=l),e.zoom.scale=f,d=[e.width.viz/2-e.zoom.size.width*f/2-t[0][0]*f,e.height.viz/2-e.zoom.size.height*f/2-t[0][1]*f],e.zoom.translate=d,e.zoom.behavior.translate(d).scale(f),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&r(e),i(e,n)}},{"./labels.coffee":253,"./transform.coffee":256}],252:[function(e,t,n){t.exports=function(e,t){var n,r,i;return r=t.id.nesting.length-1,n=t.depth.value,i=t.id.nesting[n+1],t.types[t.type.value].nesting===!1?0:(e.d3plus.merged||i in e&&r>n)&&(!e||i in e)?1:!(n===r&&n>0||e&&i&&!(i in e))||!t.small&&t.tooltip.html.value?0:-1}},{}],253:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n;return e.dev.value&&r.time("determining label visibility"),n=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var r;return t||(t={}),r=parseFloat(d3.select(this).attr("font-size"),10),t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3plus_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3plus_label").call(t),e.dev.value?r.timeEnd("determining label visibility"):void 0}},{"../../../core/console/print.coffee":54}],254:[function(e,t,n){var r,i,o;r=e("./labels.coffee"),i=e("../../../tooltip/remove.coffee"),o=e("./transform.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,a=e.zoom.bounds,f=(e.width.viz-e.zoom.size.width*s)/2,c=f>0?f:0,u=f>0?e.width.viz-f:e.width.viz,p=(e.height.viz-e.zoom.size.height*s)/2,h=p>0?p:0,d=p>0?e.height.viz-p:e.height.viz,l[0]+a[0][0]*s>c?l[0]=-a[0][0]*s+c:l[0]+a[1][0]*s<u&&(l[0]=u-a[1][0]*s),l[1]+a[0][1]*s>h?l[1]=-a[0][1]*s+h:l[1]+a[1][1]*s<d&&(l[1]=d-a[1][1]*s),e.zoom.behavior.translate(l).scale(s),e.zoom.translate=l,e.zoom.scale=s,"wheel"===n&&i(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===n?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return r(e)},t)):r(e)),"dblclick"===n?o(e,e.timing.transitions):o(e,0)}},{"../../../tooltip/remove.coffee":205,"./labels.coffee":253,"./transform.coffee":256}],255:[function(e,t,n){t.exports=function(e,t){var n,r,i,o;r=e.zoom,t||(t=d3.event),o=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,i=t.touches&&t.touches.length>1&&n,i||o||t.stopPropagation()}},{}],256:[function(e,t,n){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}},{}],257:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:r(!0),solo:r(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":82}],258:[function(e,t,n){t.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],259:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:r,value:!1}},{"../../core/methods/process/data.coffee":88}],260:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/rendering.coffee":93}],261:[function(e,t,n){t.exports={accepted:[String],value:"#ffffff"}},{}],262:[function(e,t,n){t.exports={accepted:[Function,String],value:!1}},{}],263:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../color/scale.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:r(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(e){return e instanceof Array?d3.scale.ordinal().range(e):"d3plus"===e?i:"string"==typeof e?d3.scale[e]():e},value:"d3plus"},solo:r(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":50,"../../core/methods/filter.coffee":82}],264:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],265:[function(e,t,n){arguments[4][109][0].apply(n,arguments)},{dup:109}],266:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return e!==!1&&("default"===t.container.id&&t.self.container({id:"d3plus_"+ +new Date}),r(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):d3.select(e).append("div"))},value:!1}},{"../../util/d3selection.coffee":210}],267:[function(e,t,n){var r,i;r=e("../../core/methods/filter.coffee"),i=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:r(!1),padding:20,process:i,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:r(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":82,"../../core/methods/process/data.coffee":88}],268:[function(e,t,n){var r,i,o;r=e("../../core/fetch/value.coffee"),i=e("../../client/ie.js"),o=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var n,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B;if(void 0===t.returned)return[];if(e=e||t.cols.value,e instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],L=[],t.title.value?(R=t.title.value,"function"==typeof R&&(R=R(t.self)),R=o(R),C=250,R=R.substr(0,C)):R="D3plus Visualization Data",e===!0)for(l=d3.keys(t.data.keys),c.push(l),N=t.data.value,g=0,y=N.length;y>g;g++){for(f=N[g],I=[],v=0,x=l.length;x>v;v++)a=l[v],B=f[a],"string"===t.data.keys[a]&&(B='"'+B+'"'),I.push(B);c.push(I)}else{for(l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),m=0,b=l.length;b>m;m++)a=l[m],L.push(t.format.value(a));for(c.push(L),P=t.returned.nodes,M=0,w=P.length;w>M;M++)if(E=P[M],null!=E.values&&E.values instanceof Array)for(F=E.values,T=0,_=F.length;_>T;T++){for(B=F[T],I=[],j=0,k=l.length;k>j;j++)s=l[j],B=r(t,B,s),"string"==typeof B&&(B='"'+B+'"'),I.push(B);c.push(I)}else{for(I=[],D=0,A=l.length;A>D;D++)s=l[D],I.push(r(t,E,s));c.push(I)}}for(u="data:text/csv;charset=utf-8,",p=O=0,S=c.length;S>O;p=++O)a=c[p],d=a.join(","),u+=p<c.length?d+"\n":d;return i?(n=new Blob([u],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(n,R+".csv")):(h=encodeURI(u),z=document.createElement("a"),z.setAttribute("href",h),z.setAttribute("download",R+".csv"),z.click()),this.data=c,l},value:void 0}},{"../../client/ie.js":39,"../../core/fetch/value.coffee":69,"../../string/strip.js":177}],269:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return r(e,t,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":88}],270:[function(e,t,n){t.exports={accepted:[Function,Number],value:0}},{}],271:[function(e,t,n){t.exports={accepted:[!1,Function,Object],value:!1}},{}],272:[function(e,t,n){arguments[4][113][0].apply(n,arguments)},{dup:113}],273:[function(e,t,n){var r=e("../../core/console/print.coffee"),i=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;r.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;r.warning(i(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&r.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var o={};changes.forEach(function(e){var t=e.method;delete e.method,o[t]=e}),e(o),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":175}],274:[function(e,t,n){var r=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,n){var r=this;if(!r.value)return[];if(!t)var t="id";var i=r.restricted||r.value,o=[];if(!e)return i;var a=i.filter(function(i){var a=!1;return i[r.source][t]==e?(a=!0,n&&o.push(i[r.target])):i[r.target][t]==e&&(a=!0,n&&o.push(i[r.source])),a});return n?o:a},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":88}],275:[function(e,t,n){t.exports={accepted:[Boolean,String],value:!1}},{}],276:[function(e,t,n){t.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(e){return e===!1?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],277:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:i(),family:o(),secondary:{align:r(),color:"#444444",decoration:i(),family:o(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":83,"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],278:[function(e,t,n){var r,i,o;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:r(),family:i(),size:11,transform:o(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],279:[function(e,t,n){var r,i,o,a;r=e("../../number/format.coffee"),i=e("../../core/locale/locale.coffee"),o=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(i)},process:function(e){var t,n;return t="en_US",n=i[t],e!==t&&(n=o(n,i[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,i,o;return t||(t={}),t.locale||(t.locale=this.locale.value),o=t.vars||{},o.time&&o.time.value&&t.key===o.time.value?(i=e.constructor===Date?e:new Date(e),o.data.time.format(i)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":80,"../../number/format.coffee":172,"../../object/merge.coffee":173,"../../string/title.coffee":178}],280:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],281:[function(e,t,n){var r,i,o,a,s,l,u,c;r=e("../../../core/methods/font/align.coffee"),i=e("../../../core/methods/font/decoration.coffee"),o=e("../../../core/methods/font/family.coffee"),a=e("../../../core/methods/filter.coffee"),l=e("../../../core/methods/font/position.coffee"),u=e("../../../core/methods/rendering.coffee"),c=e("../../../core/methods/font/transform.coffee"),s={x:"bottom",x2:"top",y:"left",y2:"right"},t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:i(!1),family:o(""),size:!1,spacing:0,transform:c(!1),weight:!1},rendering:u(),value:!0},dataFilter:!0,deprecates:[e+"axis",e+"axis_val",e+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:u(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return this.value===!0?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:i(),family:o(),size:12,spacing:0,transform:c(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:r("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:i(),family:o(),padding:{accepted:[Number],value:10},position:l("middle"),size:12,transform:c(),weight:200},process:Array,rendering:u(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"none"},rendering:u(),width:2,value:!0},mute:a(!0),orient:{accepted:["top","right","bottom","left"],value:s[e]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",e+"axis_scale"],process:function(t,n){var r,i,o,a;for(o=["log","discrete","share"],r=0,i=o.length;i>r;r++)a=o[r],a===t?n.axes[a]=e:n.axes[a]===e&&(n.axes[a]=!1);return"discrete"===t&&(n.axes.opposite=0===e.indexOf("x")?"y":"x"),t},value:"linear"},solo:a(!0),stacked:{accepted:[Boolean],process:function(t,n){return t||n.axes.stacked!==e?t&&(n.axes.stacked=e):n.axes.stacked=!1,t},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:i(),family:o(),size:10,spacing:0,transform:c(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:u(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":82,"../../../core/methods/font/align.coffee":83,"../../../core/methods/font/decoration.coffee":84,"../../../core/methods/font/family.coffee":85,"../../../core/methods/font/position.coffee":86,"../../../core/methods/font/transform.coffee":87,"../../../core/methods/rendering.coffee":93}],282:[function(e,t,n){t.exports={accepted:[Boolean],back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}},{}],283:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":90}],284:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:r(!0),nesting:["id"],solo:r(!0),value:"id"}},{"../../core/methods/filter.coffee":82}],285:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:r(),family:i(),size:11,transform:o(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],286:[function(e,t,n){var r;r=e("../../core/methods/font/family.coffee"),t.exports={accepted:[Boolean],align:"middle",filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:r(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":85}],287:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={font:{color:"#444444",decoration:r(),family:i(),transform:o(),weight:200},hover:{color:"#444444",decoration:r(),family:i(),transform:o(),weight:200}}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],288:[function(e,t,n){arguments[4][124][0].apply(n,arguments)},{"../../core/methods/process/margin.coffee":91,dup:124}],289:[function(e,t,n){var r,i,o;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",decoration:r(),family:i(),size:16,transform:o(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],290:[function(e,t,n){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},{}],291:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:r,value:!1}},{"../../core/methods/process/data.coffee":88}],292:[function(e,t,n){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],
value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],293:[function(e,t,n){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,t){var n,r;return!!e&&(n=null,r=function(){var e,n,r;return n=t.container.value.node().parentNode.getBoundingClientRect(),r=n.width,e=n.height,t.width.value=r,t.height.value=e,t.self(t.container.value)},d3.select(window).on("resize."+t.container.id,function(e){return function(t){return clearTimeout(n),n=setTimeout(r,e.timeout)}}(this)),e)}}},{}],294:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={accepted:function(e){var t;return t=e.types[e.type.value].shapes,!t||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:r(),value:!1}},{"../../core/methods/rendering.coffee":93}],295:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:r(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:r(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":82}],296:[function(e,t,n){t.exports={value:!1}},{}],297:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":82}],298:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":82}],299:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:r(!1),solo:r(!1),value:!1}},{"../../core/methods/filter.coffee":82}],300:[function(e,t,n){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:""},pause:{accepted:[!1,String],awesome:"",fallback:""},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],301:[function(e,t,n){t.exports={mouseevents:60,transitions:600,ui:200}},{}],302:[function(e,t,n){var r,i,o,a;r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),o=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:i(),size:16,transform:a(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=o(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:a(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:r(),family:i(),size:12,transform:a(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87,"../../string/strip.js":177}],303:[function(e,t,n){var r,i;r=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:r(),size:12,transform:i(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],304:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":82}],305:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],306:[function(e,t,n){var r,i,o,a;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),i=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Array,Boolean],align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:i(),family:o(),size:11,transform:a(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":83,"../../core/methods/font/decoration.coffee":84,"../../core/methods/font/family.coffee":85,"../../core/methods/font/transform.coffee":87}],307:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],308:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],309:[function(e,t,n){var r,i,o,a,s,l,u,c;i=e("../../util/closest.coffee"),o=e("../../core/fetch/value.coffee"),a=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("../../array/sort.coffee"),u=e("./helpers/graph/stack.coffee"),c=e("../../core/data/threshold.js"),r=function(e){var t,n,r,i,s,c,f,d,h,p,g;if(a(e,{buffer:e.axes.opposite,zero:!0}),i=e.x.domain.viz.concat(e.y.domain.viz),i.indexOf(void 0)>=0)return[];for(n=l(e.data.viz,null,null,null,e),r=e[e.axes.discrete],h=e[e.axes.opposite],s=0,f=n.length;f>s;s++)for(p=n[s],p.d3plus||(p.d3plus={}),g=p.values,c=0,d=g.length;d>c;c++)t=g[c],t.d3plus||(t.d3plus={}),t.d3plus.x=r.scale.viz(o(e,t,r.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=h.scale.viz(o(e,t,h.value)),t.d3plus.y+=e.axes.margin.top,t.d3plus.merged instanceof Array&&(p.d3plus.merged||(p.d3plus.merged=[]),p.d3plus.merged=p.d3plus.merged.concat(t.d3plus.merged)),t.d3plus.text&&!p.d3plus.text&&(p.d3plus.text=t.d3plus.text);return u(e,n)},r.filter=function(e,t){return s(e,c(e,t,e[e.axes.discrete].value))},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["area"],r.threshold=function(e){return 20/e.height.viz},r.tooltip="static",t.exports=r},{"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/value.coffee":69,"../../util/closest.coffee":208,"./helpers/graph/draw.coffee":316,"./helpers/graph/nest.coffee":322,"./helpers/graph/stack.coffee":323}],310:[function(e,t,n){var r,i,o,a,s,l,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../util/buckets.coffee"),o=e("../../core/fetch/value.coffee"),a=e("./helpers/graph/draw.coffee"),s=e("./helpers/graph/nest.coffee"),l=e("./helpers/graph/stack.coffee"),u=e("../../util/uniques.coffee"),r=function(e){var t,n,r,s,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H;if(d=e.axes.discrete,v="x"===d?"height":"width",V="x"===d?"width":"height",P=e.axes.opposite,r="x"===d?"left":"top",j="x"===d?"top":"left",a(e,{buffer:!0,zero:P}),g=e.x.domain.viz.concat(e.y.domain.viz),g.indexOf(void 0)>=0)return[];if(T=e.data.viz,e.axes.stacked)for(x=0,_=T.length;_>x;x++)R=T[x],l(e,R.values);for(q=e.axes[V]/e[e.axes.discrete].ticks.values.length,I=e[e.axes.discrete].padding.value,1>I&&(I*=q),2*I>q&&(I=.1*q),M=q-2*I,e.axes.stacked||(e[d].persist.position.value?(L=e[d].value,p=c.call(e.id.nesting,L)>=0?d3.max(T,function(e){return e.values.length}):u(T,e.id.value,o,e).length,M/=p,D=q/2-M/2-I,$=d3.scale.ordinal(),1===p?$.domain([0]).range([0]):$.domain([0,p-1]).range([-D,D])):$=d3.scale.linear()),f=[],H=0,e[d].persist.position.value&&!e.axes.stacked&&(y=u(d3.merge(T.map(function(e){return e.values})),e.id.value,o,e,e.id.value,!1),$.domain(y),1===y.length?$.range([0]):$.range(i($.range(),y.length))),z=d3.max(T,function(e){return e.values.length}),b=0,k=T.length;k>b;b++)for(F=T[b],e.axes.stacked?(t=1,E=M):e[d].persist.position.value?(t=p,E=M):(t=F.values.length,e[d].persist.size.value?(E=M/z,D=q/2-(z-t)*(E/2)-E/2-I):(E=M/t,D=q/2-E/2-I),$.domain([0,t-1]),$.range([-D,D])),B=F.values,m=w=0,A=B.length;A>w;m=++w){if(s=B[m],C=e.axes.stacked?0:$(e[d].persist.position.value?o(e,s,e.id.value):m%t),O=e[P],e.axes.stacked)U=s.d3plus[P],n=s.d3plus[P+"0"];else{if(N=o(e,s,O.value),null===N&&(O=e[P+"2"],N=o(e,s,O.value)),0===N)continue;"log"===O.scale.value&&(H=0>N?-1:1),U=O.scale.viz(N),n=O.scale.viz(H)}h=o(e,s,e[d].value),s.d3plus[d]=e[d].scale.viz(h),s.d3plus[d]+=e.axes.margin[r]+C,S=n-U,s.d3plus[P]=n-S/2,e.axes.stacked||(s.d3plus[P]+=e.axes.margin[j]),delete s.d3plus.r,s.d3plus[V]=E,s.d3plus[v]=Math.abs(S),s.d3plus.init={},s.d3plus.init[P]=O.scale.viz(H),s.d3plus.init[P]-=s.d3plus[P],s.d3plus.init[P]+=e.axes.margin[j],s.d3plus.init[V]=s.d3plus[V],e.text.value?delete s.d3plus.label:s.d3plus.label=!1,f.push(s)}return f},r.filter=function(e,t){return s(e,t,e[e.axes.discrete].value)},r.requirements=["data","x","y"],r.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},r.shapes=["square"],t.exports=r},{"../../core/fetch/value.coffee":69,"../../util/buckets.coffee":206,"../../util/uniques.coffee":212,"./helpers/graph/draw.coffee":316,"./helpers/graph/nest.coffee":322,"./helpers/graph/stack.coffee":323}],311:[function(e,t,n){var r,i,o,a,s;i=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),a=e("../../string/strip.js"),s=e("../../util/uniques.coffee"),r=function(e){var t,n,r,l,u,c,f,d,h,p,g,v,m,y;return o(e,{buffer:!0}),r=e.x.domain.viz.concat(e.y.domain.viz),r.indexOf(void 0)>=0?[]:(n=e.axes.discrete,p=e.axes.opposite,t="x"===n?e.axes.margin.left:e.axes.margin.top,h="x"===p?e.axes.margin.left:e.axes.margin.top,l="x"===n?"height":"width",y="x"===n?"width":"height",m=e.axes[y]/e[n].ticks.values.length,v=e.size.value,v="number"==typeof v?v:100,m=d3.min([m-2*e.labels.padding,v]),f=e.type.mode.value,f instanceof Array||(f=[f,f]),c=function(t){var n,r,o;r={};for(n in e.data.keys)o=s(t,n,i,e),r[n]=1===o.length?o[0]:o;return r},d=!1,u=[],g=[],d3.nest().key(function(t){return i(e,t,e[n].value)}).rollup(function(r){var o,v,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X;for(R=e[p].scale.viz,Y=r.map(function(t){return i(e,t,e[p].value)}),Y.sort(function(e,t){return e-t}),$=s(Y),A=d3.quantile(Y,.25),D=d3.quantile(Y,.5),L=d3.quantile(Y,.75),B={},"tukey"===f[1]?(z=A-L,q=L-1.5*z,U="top tukey"):"extent"===f[1]?(q=d3.max(Y),U="maximum"):"number"==typeof f[1]&&(q=d3.quantile(Y,(100-f[1])/100),U=f[1]+" percentile"),q=d3.min([d3.max(Y),q]),e.tooltip.extent.value&&(B[U]={key:e[p].value,value:q}),e.tooltip.iqr.value&&(B["third quartile"]={key:e[p].value,value:L},B.median={key:e[p].value,value:D},B["first quartile"]={key:e[p].value,value:A}),"tukey"===f[0]?(z=A-L,o=A+1.5*z,v="bottom tukey"):"extent"===f[0]?(o=d3.min(Y),v="minimum"):"number"==typeof f[0]&&(o=d3.quantile(Y,f[0]/100),v=f[0]+" percentile"),o=d3.max([d3.min(Y),o]),e.tooltip.extent.value&&(B[v]={key:e[p].value,value:o}),b=[],x=[],V=[],I=[],S=0,E=r.length;E>S;S++)w=r[S],H=i(e,w,e[p].value),H>=A&&L>=H?b.push(w):H>=o&&A>H?x.push(w):q>=H&&H>L?V.push(w):I.push(w);for(C=i(e,r[0],e[n].value),W=e[n].scale.viz(C),W+=t,T=e.format.value(C,{key:e[n].value,vars:e}),C.constructor===Date&&(C=C.getTime()),C=a(C),b=c(b),b.d3plus={color:"white",id:"box_"+C,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+T},b.d3plus[y]=m,b.d3plus.init[y]=m,b.d3plus[l]=Math.abs(R(A)-R(L)),b.d3plus[n]=W,X=d3.min([R(A),R(L)])+b.d3plus[l]/2,X+=h,b.d3plus[p]=X,b.d3plus.tooltip=B,g.push(b),N={d3plus:{id:"median_line_"+C,position:"height"===l?"top":"right",shape:"whisker","static":!0}},F=e.format.value(D,{key:e[p].value,vars:e}),T={background:"#fff",names:[F],padding:0,resize:!1,x:0,y:0},_=Math.abs(R(D)-R(A)),k=Math.abs(R(D)-R(L)),P=2*d3.min([_,k]),O=2*e.data.stroke.width+2*e.labels.padding,T["width"===y?"w":"h"]=m-O,T["width"===l?"w":"h"]=P-O,N.d3plus.label=T,N.d3plus[y]=m,N.d3plus[n]=W,N.d3plus[p]=R(D)+h,g.push(N),x=c(x),x.d3plus={id:"bottom_whisker_line_"+C,offset:b.d3plus[l]/2,position:"height"===l?"bottom":"left",shape:"whisker","static":!0},"x"===p&&(x.d3plus.offset*=-1),x.d3plus[l]=Math.abs(R(o)-R(A)),x.d3plus[y]=m,x.d3plus[n]=W,x.d3plus[p]=X,g.push(x),V=c(V),V.d3plus={id:"top_whisker_line_"+C,offset:b.d3plus[l]/2,position:"height"===l?"top":"right",shape:"whisker","static":!0},"y"===p&&(V.d3plus.offset*=-1),V.d3plus[l]=Math.abs(R(q)-R(L)),V.d3plus[y]=m,V.d3plus[n]=W,V.d3plus[p]=X,g.push(V),M=0,j=I.length;j>M;M++)w=I[M],w.d3plus[n]=W,w.d3plus[p]=R(i(e,w,e.y.value)),w.d3plus[p]+=h,w.d3plus.r=4,w.d3plus.shape=e.shape.value;return d=!I.length&&q-o===0,u.push(D),g=g.concat(I),r}).entries(e.data.viz),d&&1===s(u).length?[]:g)},r.modes=["tukey","extent",Array,Number],r.requirements=["data","x","y"],r.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],r.setup=function(e){var t;return e.axes.discrete?void 0:(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},t.exports=r},{"../../core/fetch/value.coffee":69,"../../string/strip.js":177,"../../util/uniques.coffee":212,"./helpers/graph/draw.coffee":316}],312:[function(e,t,n){var r,i,o,a,s,l,u;r=e("../../array/sort.coffee"),s=e("../../core/fetch/value.coffee"),o=e("../../core/fetch/color.coffee"),a=e("../../core/fetch/text.js"),u=e("../../color/legible.coffee"),l=e("../../core/data/group.coffee"),i=function(e){var t,n,i,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q;if(m=l(e,e.data.viz),m=r(m,null,null,null,e),d=m.length,4>d?(i=d,E=1):(j=e.width.viz/e.height.viz,i=Math.ceil(Math.sqrt(d*j)),E=Math.ceil(Math.sqrt(d/j))),d>0)for(;(E-1)*i>=d;)E--;for(n=e.width.viz/i,t=e.height.viz/E,e.size.value?(g=d3.min(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value,"min")}),p=d3.max(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value)}),h=[g,p]):h=[0,0],C=5,O=d3.min([n,t])/2-2*C,_=e.labels.value&&!e.small&&O>=40?d3.max([20,d3.min([.25*O,50])]):0,O-=_,N=d3.min([O,e.size.scale.min.value]),D=e.size.scale.value.domain(h).rangeRound([N,O]),M=d3.layout.pack().children(function(e){return e.values}).padding(C).radius(function(e){return D(e)}).size([n-2*C,t-2*C-_]).value(function(e){return e.value}),f=[],T=0,y=x=0,k=m.length;k>x;y=++x){for(c=m[y],F=M.nodes(c),R=n*y%e.width.viz,q=t*T,b=0,A=F.length;A>b;b++)P=F[b],P.children?(z={d3plus:{}},z[e.id.value]=P.key):z=P.d3plus,z.d3plus.depth=e.id.grouping.value?P.depth:e.depth.value,z.d3plus.x=P.x,z.d3plus.xOffset=R,z.d3plus.y=P.y,z.d3plus.yOffset=q+_,z.d3plus.r=P.r,f.push(z);(y+1)%i===0&&T++}for(v=O/d3.max(f,function(e){return e.d3plus.r}),I=M.size()[0]/2,B=M.size()[1]/2,w=0,S=f.length;S>w;w++)c=f[w],c.d3plus.x=(c.d3plus.x-I)*v+I+c.d3plus.xOffset,c.d3plus.y=(c.d3plus.y-B)*v+B+c.d3plus.yOffset,c.d3plus.r=c.d3plus.r*v,delete c.d3plus.xOffset,delete c.d3plus.yOffset,c.d3plus["static"]=c.d3plus.depth<e.depth.value&&e.id.grouping.value,!_||0!==c.d3plus.depth&&e.id.grouping.value!==!1?delete c.d3plus.label:(c.d3plus.text=a(e,c[e.id.value],c.d3plus.depth),L=_>3*e.labels.padding?e.labels.padding:0,c.d3plus.label={x:0,y:-(O+L+_/2),w:2*O,h:_-L,padding:0,resize:!0,color:u(o(e,c,c.d3plus.depth)),force:!0});return f.sort(function(e,t){return e.d3plus.depth-t.d3plus.depth})},i.fill=!0,i.requirements=["data"],i.scale=1.05,i.shapes=["circle","donut"],t.exports=i},{"../../array/sort.coffee":36,"../../color/legible.coffee":46,"../../core/data/group.coffee":59,"../../core/fetch/color.coffee":65,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69}],313:[function(e,t,n){var r,i;i=e("../../../core/console/print.coffee"),r=function(e){var t,n;n={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},t=n[e.shape.value],i.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+t+'" visualization type.'),e.self.type(t).draw()},r.shapes=["circle","donut","line","square","area"],t.exports=r},{"../../../core/console/print.coffee":54}],314:[function(e,t,n){var r;r=function(e){var t,n,r,i,o,a;return t=e.coords.value,r=e.coords.key||d3.keys(t.objects)[0],a=topojson.feature(t,t.objects[r]),n=a.features,o=e.coords.solo.value,i=e.coords.mute.value,n=n.filter(function(t){return t[e.id.value]=t.id,o.length?o.indexOf(t.id)>=0:!i.length||i.indexOf(t.id)<0})},r.libs=["topojson"],r.nesting=!1,r.requirements=["coords"],r.scale=1,r.shapes=["coordinates"],r.zoom=!0,t.exports=r},{}],315:[function(e,t,n){var r,i,o;r=e("../../../../core/fetch/color.coffee"),i=e("../../../../color/legible.coffee"),o=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p;for(t=e.axes,s=t.stacked||!t.ticks.value?[]:e.data.viz,p=2*s.length>e.data.large?0:e.draw.timing,f=function(n,o){return 0===o.indexOf("y")?n.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3plus.y-t.margin.top}).attr("y2",function(e){return e.d3plus.y-t.margin.top}):n.attr("x1",function(e){return e.d3plus.x-t.margin.left}).attr("x2",function(e){return e.d3plus.x-t.margin.left}).attr("y1",t.height+2).attr("y2",t.height+8),n.style("stroke",function(t){return i(r(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&o.time("creating axis tick groups"),h=e.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(s,function(n){var r;return r=t.discrete?"_"+n.d3plus[t.discrete]:"","tick_"+n[e.id.value]+"_"+n.d3plus.depth+r}),h.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),e.dev.value&&o.timeEnd("creating axis tick groups"),c=["x","y"],l=0,u=c.length;u>l;l++)n=c[l],e.dev.value&&p&&o.time("creating "+n+" ticks"),a=p&&n!==t.discrete?s:[],d=h.selectAll("line.d3plus_data_"+n).data(a,function(t){return"tick_"+t[e.id.value]+"_"+t.d3plus.depth}),e.dev.value&&p&&o.timeEnd("creating "+n+" ticks"),e.dev.value&&p&&o.time("styling "+n+" ticks"),p>0?d.transition().duration(p).call(f,n):d.call(f,n),d.enter().append("line").attr("class","d3plus_data_"+n).call(f,n),e.dev.value&&p&&o.timeEnd("styling "+n+" ticks");p>0?(h.transition().duration(p).attr("opacity",1),h.exit().transition().duration(p).attr("opacity",0).remove()):(h.attr("opacity",1),h.exit().remove())}},{"../../../../color/legible.coffee":46,"../../../../core/console/print.coffee":54,"../../../../core/fetch/color.coffee":65}],316:[function(e,t,n){var r,i,o,a;r=e("./includes/axes.coffee"),i=e("./includes/svg.coffee"),o=e("./includes/mouse.coffee"),a=e("./includes/plot.coffee"),t.exports=function(e,t){void 0===t&&(t={}),r(e,t),a(e,t),i(e,t),e.mouse.viz=t.mouse===!0&&o}},{"./includes/axes.coffee":317,"./includes/mouse.coffee":319,"./includes/plot.coffee":320,"./includes/svg.coffee":321}],317:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p;r=e("../../../../../array/sort.coffee"),a=e("./buffer.coffee"),o=e("../../../../../util/buckets.coffee"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.coffee"),d=e("../../../../../core/console/print.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,o,l,g,v,m,y,x,b,w,_;for(o=s(e),(o||!e.axes.dataset)&&(e.axes.dataset=c(e)),e.axes.scale=!(!t.buffer||t.buffer===!0)&&h(e,t.buffer),n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],g=0,m=n.length;m>g;g++)r=n[g],x=0===r.indexOf("x")?"y":"x",w=e.order.changed||e.order.sort.changed||e.order.value===!0&&e[x].changed,e[r].value&&(!e[r].ticks.values||o||w)&&(e.dev.value&&d.time("calculating "+r+" axis"),e[r].reset=!0,e[r].ticks.values=!1,r===e.axes.discrete&&e[r].value!==e.time.value&&(e[r].ticks.values=p(e.axes.dataset,e[r].value,u,e)),_=t.zero===!0||0===r.indexOf(t.zero),b=i(e,r,_),0===r.indexOf("y")&&(b=b.reverse()),e[r].scale.viz=f(e,r,b),e[r].domain.viz=b,e.dev.value&&d.timeEnd("calculating "+r+" axis"));if(e.axes.mirror.value&&(l=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=l,e.x.scale.viz.domain(l),l=l.slice().reverse(),e.y.domain.viz=l,e.y.scale.viz.domain(l)),t.buffer)for(v=0,y=n.length;y>v;v++)r=n[v],r!==e.axes.discrete&&a(e,r,t.buffer)},s=function(e){var t,n,r,i,o,a,s,l,u,c,f,d,h;if(n=e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed),n||(n=e.id.solo.changed||e.id.mute.changed),n)return n;for(r=["data","time","id","depth","type","x","y","x2","y2"],i=0,l=r.length;l>i;i++)if(a=r[i],e[a].changed){n=!0;break}if(n)return n;for(h=["mute","range","scale","solo","stacked","zerofill"],f=["x","y","x2","y2"],o=0,u=f.length;u>o;o++)for(t=f[o],s=0,c=h.length;c>s;s++)if(d=h[s],e[t][d].changed){n=!0;break}return n},c=function(e){var t,n;return e.time.fixed.value?e.data.viz:(n=d3.range(0,e.id.nesting.length),d3.merge([function(){var r,i,o;for(o=[],r=0,i=n.length;i>r;r++)t=n[r],o.push(l(e,"all",t));return o}()]))},i=function(e,t,n,i){var o,a,s,l,c,f,d,h,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P;if(S=0===t.indexOf("x")?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(D=[],z=e.axes.dataset,g=0,x=z.length;x>g;g++)d=z[g],d.values?D=D.concat(d.values):D.push(d);return c=d3.nest().key(function(t){return u(e,t,e[S].value)}).rollup(function(n){var r,i;return i=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),r>0?r:0}),r=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),0>r?r:0}),[r,i]}).entries(D),P=d3.merge(c.map(function(e){return e.values})),d3.extent(P)}if(e[t].value===e.time.value)return e.time.solo.value.length?d3.extent(e.time.solo.value).map(function(e){return e.constructor!==Date?(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(e.data.time.ticks);for(P=[],M=e.axes.dataset,v=0,b=M.length;b>v;v++)d=M[v],N=u(e,d,e[t].value),N instanceof Array?P=P.concat(N):P.push(N);if(P=P.filter(function(e){return null!==e}),t===e.axes.discrete){if(j=e.order.value===!0?e[S].value:e.order.value){for(E=e.order.sort.value,o=e.order.agg.value||e.aggs.value[j]||"max",a=typeof o,f=P.reduce(function(e,t){return e[t]=[],e},{}),C=e.axes.dataset,y=0,w=C.length;w>y;y++)if(d=C[y],d.values)for(T=d.values,k=0,_=T.length;_>k;k++)O=T[k],h=u(e,O,e[t].value),f[h].push(u(e,O,j));else h=u(e,d,e[t].value),f[h].push(u(e,d,j));for(m in f)O=f[m],"string"===a?f[m]=d3[o](O):"function"===a&&(f[m]=o(O,j));return f=r(d3.entries(f),"value",E),f=f.reduce(function(e,t){return e.push(t.key),e},[])}return p(P).sort()}return P.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===P[0]&&(P[0]=1),0===P[P.length-1]&&(P[P.length-1]=-1)),n&&(l=P.every(function(e){return e>0}),s=P.every(function(e){return 0>e}),(l||s)&&(A=l?1:-1,P.push("log"===e[t].scale.value?A:0))),d3.extent(P)},f=function(e,t,n){var r,i,a,s;return i=0===t.indexOf("x")?e.width.viz:e.height.viz,a=e[t].scale.value,["discrete","share"].indexOf(a)>=0&&(a="linear"),s=10,"string"==typeof n[0]?(a="ordinal",r=o([0,i],n.length)):(r=[0,i],"linear"===e[t].scale.value&&(s=Math.floor(i/(4*e[t].ticks.font.size)))),e[t].scale.ticks=s,d3.scale[a]().domain(n).range(r)},h=function(e,t){var n,r,i;return t===!0&&(t="size"),t in e&&(t=e[t].value),i=e.size.scale.min.value,"function"==typeof i&&(i=i(e)),r=e.size.scale.max.value,"function"==typeof r&&(r=r(e)),t===!1?e.size.scale.value.rangeRound([r,r]):"number"==typeof t?e.size.scale.value.rangeRound([t,t]):t?(e.dev.value&&d.time("calculating buffer scale"),n=d3.extent(e.axes.dataset,function(n){var r;return r=u(e,n,t),r?r:0}),n[0]===n[1]&&(i=r),e.dev.value&&d.timeEnd("calculating buffer scale"),e.size.scale.value.domain(n).rangeRound([i,r])):void 0}},{"../../../../../array/sort.coffee":36,"../../../../../core/console/print.coffee":54,"../../../../../core/fetch/data.js":66,"../../../../../core/fetch/value.coffee":69,"../../../../../util/buckets.coffee":206,"../../../../../util/uniques.coffee":212,"./buffer.coffee":318}],318:[function(e,t,n){var r,i;r=e("../../../../../util/buckets.coffee"),i=e("../../../../../util/closest.coffee"),t.exports=function(e,t,n){var o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if(t===e.axes.discrete){if(p=e[t].scale.viz.domain(),"string"==typeof p[0]){for(y=p.length;y>=0;)p.splice(y,0,"d3plus_buffer_"+y),y--;return z=e[t].scale.viz.range(),z=r(d3.extent(z),p.length),e[t].scale.viz.domain(p).range(z)}if(0===t.indexOf("y")&&(p=p.slice().reverse()),1===e[t].ticks.values.length)e[t].value===e.time.value&&1!==e.data.time.ticks.length?(u=i(e.data.time.ticks,p[0]),E=e.data.time.ticks.indexOf(u),E>0?p[0]=e.data.time.ticks[E-1]:(d=e.data.time.ticks[E+1]-u,p[0]=new Date(u.getTime()-d)),E<e.data.time.ticks.length-1?p[1]=e.data.time.ticks[E+1]:(d=u-e.data.time.ticks[E-1],p[1]=new Date(u.getTime()+d))):(p[0]-=1,p[1]+=1);else if(e.axes.scale)h=Math.abs(p[1]-p[0]),a=h/(e[t].ticks.values.length-1),a/=2,M=e[t].scale.viz.range()[1],k=1.5*e.axes.scale.range()[1],m=e[t].scale.viz.invert(-k),v=e[t].scale.viz.invert(M+k),p[0]-a<m?(p[0]=p[0]-a,p[1]=p[1]+a):(p=[m,v],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1));else if(e[t].value===e.time.value)h=Math.abs(p[1]-p[0]),a=h/(e[t].ticks.values.length-1),a/=2,p[0]=p[0]-a,p[1]=p[1]+a;else{for(h=Math.abs(p[1]-p[0]),o=h/2,y=p.length,S=p.slice();y>=0;)f=y?S[y-1]+o:S[y]-o,p.splice(y,0,f),y--;z=e[t].scale.viz.range(),z=r(d3.extent(z),p.length),e[t].scale.viz.domain(p).range(z)}return 0===t.indexOf("y")&&(p=p.reverse()),e[t].scale.viz.domain(p)}if("x"===n&&0===t.indexOf("x")||"y"===n&&0===t.indexOf("y")||n===!0)return p=e[t].scale.viz.domain(),l=p[0]>=0&&p[1]>=0,s=p[0]<=0&&p[1]<=0,"log"===e[t].scale.value?(P=l?1:-1,l&&0===t.indexOf("y")&&(p=p.slice().reverse()),w=Math.pow(10,parseInt(Math.abs(p[0])).toString().length-1)*P,b=p[0]%w,x=b,b&&.1>=x/w&&(x+=w*P),_=0===b?w:x,p[0]-=_,0===p[0]&&(p[0]=P),O=Math.pow(10,parseInt(Math.abs(p[1])).toString().length-1)*P,D=p[1]%O,j=Math.abs(O-D),D&&.1>=j/O&&(j+=O*P),N=0===D?O:j,p[1]+=N,0===p[1]&&(p[1]=P),l&&0===t.indexOf("y")&&(p=p.reverse())):(P=0,0===t.indexOf("y")&&(p=p.slice().reverse()),T=p.filter(function(e){return e.constructor===String}),a=.05*Math.abs(p[1]-p[0])||1,T.length||(p[0]=p[0]-a,p[1]=p[1]+a,(l&&p[0]<P||s&&p[0]>P)&&(p[0]=P),(l&&p[1]<P||s&&p[1]>P)&&(p[1]=P)),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p);if(e.axes.scale)return c=!1,e.axes.mirror.value&&(A=0===t.indexOf("y")?"x":"y",c=e[A].scale.viz,C=e.width.viz>e.height.viz?"x":"y"),t===C&&c?p=c.domain().slice().reverse():(M=e[t].scale.viz.range()[1],k=e.axes.scale.range()[1],m=e[t].scale.viz.invert(1.5*-k),v=e[t].scale.viz.invert(M+1.5*k),p=[m,v],0===t.indexOf("y")&&(p=p.reverse()),g=e[t].scale.viz.domain(),g=g[1]-g[0],g||(p[0]-=1,p[1]+=1),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p)}}},{"../../../../../util/buckets.coffee":206,"../../../../../util/closest.coffee":208}],319:[function(e,t,n){var r,i,o,a,s,l;r=e("../../../../../util/copy.coffee"),i=e("../../../../../client/pointer.coffee"),o=e("../../../../../core/fetch/color.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../color/legible.coffee"),l=e("../../../../../color/text.coffee"),t.exports=function(e,t){var n,r,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A;return n=d3.event.type===i.click&&(t.tooltip.value["long"]||t.tooltip.html.value),u=[i.over,i.move].indexOf(d3.event.type)>=0,k=e.d3plus.x,A=e.d3plus.y,v=e.d3plus.r||0,x=t.types[t.type.value].scale||1,v*=x,c=t.axes,_=t.draw.timing?t.timing.mouseevents:0,!n&&u?(r=s(o(t,e)),f=["x","y","x2","y2"].filter(function(n){var r;return r=a(t,e,t[n].value),r&&!(r instanceof Array)&&n!==t.axes.stacked&&t[n].mouse.value&&n!==t.axes.discrete})):f=[],d=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?k:k-v}).attr("y1",function(e){return 0===e.indexOf("y")?A:A+v}).attr("x2",function(e){return 0===e.indexOf("x")?k:k-v}).attr("y2",function(e){return 0===e.indexOf("y")?A:A+v}).attr("opacity",0)},h=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":r}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},p=function(n){return n.attr("x1",function(e){return 0===e.indexOf("x")?k:k-v}).attr("y1",function(e){return 0===e.indexOf("y")?A:A+v}).attr("x2",function(n){return 0===n.indexOf("x")?k:e.d3plus.x0?e.d3plus.x0:"y"===n?c.margin.left-t[n].ticks.size:c.margin.left+c.width+t[n].ticks.size}).attr("y2",function(n){return 0===n.indexOf("y")?A:e.d3plus.y0?e.d3plus.y0:"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size}).style("opacity",1)},g=t.g.labels.selectAll("line.d3plus_mouse_axis_label").data(f),_?(g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(h),g.transition().duration(_).call(p).call(h),g.exit().transition().duration(_).call(d).remove()):(g.call(p).call(h),g.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(d).call(h),g.exit().remove()),b=function(n){return n.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?k:"y"===e?c.margin.left-5-t[e].ticks.size:c.margin.left+c.width+5+t[e].ticks.size}).attr("y",function(n){return 0===n.indexOf("y")?A:e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-6:"x"===n?c.height+c.margin.top+5+t[n].ticks.size:c.margin.top-5-t[n].ticks.size-1.35*t[n].ticks.font.size}).attr("fill","area"===t.shape.value?"white":l(r));
},w=t.g.labels.selectAll("text.d3plus_mouse_axis_label").data(f),w.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(e){return e+"_d3plusmouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(b),w.text(function(n){var r,i;return r=t.axes.stacked||n,i=a(t,e,t[r].value),t.format.value(i,{key:t[r].value,vars:t,labels:t[r].affixes.value})}),_?(w.transition().duration(_).delay(_).attr("opacity",1).call(b),w.exit().transition().duration(_).attr("opacity",0).remove()):(w.attr("opacity",1).call(b),w.exit().remove()),m=function(n){var i;return i=function(e){var t;return t=d3.select("text#"+e+"_d3plusmouseaxislabel"),t.size()?t.node().getBBox():{width:0,height:0}},n.attr("x",function(e){var n;return n=i(e).width,0===e.indexOf("x")?k-n/2-5:"y"===e?c.margin.left-t[e].ticks.size-n-10:c.margin.left+c.width+t[e].ticks.size}).attr("y",function(n){var r;return r=i(n).height,0===n.indexOf("y")?A-(r/2+5):e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+c.margin.top-(r/2+5):"x"===n?c.height+c.margin.top+t[n].ticks.size:c.margin.top-t[n].ticks.size-r-10}).attr("width",function(e){return i(e).width+10}).attr("height",function(e){return i(e).height+10}).style("stroke","area"===t.shape.value?"transparent":r).attr("fill",r).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},y=t.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(f),_?(y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(m),y.transition().duration(_).delay(_).attr("opacity",1).call(m),y.exit().transition().duration(_).attr("opacity",0).remove()):(y.attr("opacity",1).call(m),y.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(m),y.exit().remove())}},{"../../../../../client/pointer.coffee":40,"../../../../../color/legible.coffee":46,"../../../../../color/text.coffee":52,"../../../../../core/fetch/color.coffee":65,"../../../../../core/fetch/value.coffee":69,"../../../../../util/copy.coffee":209}],320:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p;r=e("../../../../../util/buckets.coffee"),i=e("./buffer.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../font/sizes.coffee"),d=e("../../../../../textwrap/textwrap.coffee"),h=e("../../../../../core/data/time.coffee"),p=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,s,l,f,d,p,g,v,m,y,x,b,w,_,k,A,S;for(e.axes.margin=c(e),e.axes.height=e.height.viz,e.axes.width=e.width.viz,n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],f=0,p=n.length;p>f;f++)if(r=n[f],e[r].value){if(e[r].ticks.values===!1)if(e[r].value===e.time.value){for(k=e.time.solo.value,k=k.length?k.map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,l=d3.extent(k),b=e.data.time.stepType,k=[l[0]],_=l[0];_<l[1];)v=new Date(_),_=new Date(v["set"+b](v["get"+b]()+1)),k.push(_);e[r].ticks.values=k}else 1===r.indexOf("2")?(y=e[r.slice(0,1)].scale.viz,x=e[r].scale.viz,k=e[r.slice(0,1)].scale.ticks,e[r].ticks.values=y.ticks(k).map(function(e){return parseFloat(d3.format(".5f")(x.invert(y(e))))})):e[r].ticks.values=e[r].scale.viz.ticks(e[r].scale.ticks);e[r].ticks.values.length||(S=a(e,e.data.viz,e[r].value),S instanceof Array||(S=[S]),e[r].ticks.values=S),m=0===r.indexOf("x")?"y":"x",(1===e[r].ticks.values.length||t.buffer&&t.buffer!==m&&r===e.axes.discrete&&e[r].reset===!0)&&i(e,r,t.buffer),e[r].reset=!1,e[r].value===e.time.value?(s={"font-family":e[r].ticks.font.family.value,"font-weight":e[r].ticks.font.weight,"font-size":e[r].ticks.font.size+"px","text-transform":e[r].ticks.font.transform.value,"letter-spacing":e[r].ticks.font.spacing+"px"},A=h(e,{values:e[r].ticks.values,limit:e.width.viz,style:s}),e[r].ticks.value?e[r].ticks.visible=e[r].ticks.value.map(Number):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value.map(Number):e[r].ticks.visible=A.values.map(Number),e[r].ticks.format=A.format):e[r].ticks.value?(e[r].ticks.values=e[r].ticks.value,e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:e[r].ticks.visible=e[r].ticks.value):e[r].ticks.labels.value.constructor===Array?e[r].ticks.visible=e[r].ticks.labels.value:"log"===e[r].scale.value?(k=e[r].ticks.values,w=k.filter(function(e){return"1"===Math.abs(e).toString().charAt(0)}),w.length<3?e[r].ticks.visible=k:e[r].ticks.visible=w):e[r].ticks.visible=e[r].ticks.values}for(e.small||u(e),d=0,g=n.length;g>d;d++)r=n[d],e[r].axis.svg=o(e,r)},c=function(e){return e.small?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}},u=function(e){var t,n,i,o,a,u,c,f,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N;for(b=e.x.scale.viz.domain(),E=e.y.scale.viz.domain(),e.x2.value&&(v=e.x2.scale.viz.domain()),e.y2.value&&(M=e.y2.scale.viz.domain()),f=["y","y2"],n=0,a=f.length;a>n;n++)t=f[n],e[t].value&&(c="y"===t?"left":"right",C={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},N=e[t].ticks.visible,"log"===e[t].scale.value?O=N.map(function(e){return l(e)}):"share"===e[t].scale.value?O=N.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?O=N.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof N[0]&&(N=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),O=N.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),e[t].ticks.labels.value?(e[t].ticks.hidden=!1,T=d3.max(s(O,C),function(e){return e.width}),T=Math.ceil(T+e.labels.padding),e.axes.margin[c]+=T):e[t].ticks.hidden=!0,j=e[t].label.fetch(e),j?(D={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([j],D)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));for(e.axes.width-=e.axes.margin.left+e.axes.margin.right,e.x.scale.viz.range(r([0,e.axes.width],b.length)),v&&e.x2.scale.viz.range(r([0,e.axes.width],v.length)),h=["x","x2"],i=0,u=h.length;u>i;i++)t=h[i],e[t].value&&(c="x"===t?"bottom":"top",e[t].ticks.labels.value?(e[t].ticks.hidden=!1,m={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},z=e[t].ticks.visible,"log"===e[t].scale.value?S=z.map(function(e){return l(e)}):"share"===e[t].scale.value?S=z.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?S=z.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof z[0]&&(z=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),S=z.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),A=s(S,m),x=d3.max(A,function(e){return e.width}),y=d3.max(A,function(e){return e.height}),1===z.length?k=e.axes.width:(k=e[t].scale.viz(z[1])-e[t].scale.viz(z[0]),k=Math.abs(k)),x>k&&S.join("").indexOf(" ")>0?(e[t].ticks.wrap=!0,A=s(S,m,{mod:function(t){return d().container(d3.select(t)).height(e.axes.height/2).width(k).draw()}}),x=d3.max(A,function(e){return e.width}),y=d3.max(A,function(e){return e.height})):e[t].ticks.wrap=!1,e[t].ticks.baseline="auto",k>=x?e[t].ticks.rotate=0:x<e.axes.height/2?(A=s(S,m,{mod:function(t){return d().container(d3.select(t)).width(e.axes.height/2).height(k).draw()}}),y=d3.max(A,function(e){return e.width}),x=d3.max(A,function(e){return e.height}),e[t].ticks.rotate=-90):(x=0,y=0),x&&y||(e[t].ticks.hidden=!0,e[t].ticks.rotate=0),x=Math.ceil(x),y=Math.ceil(y),e[t].ticks.maxHeight=y,e[t].ticks.maxWidth=x,e.axes.margin[c]+=y+e.labels.padding,o=e[t].ticks.visible[e[t].ticks.visible.length-1],p=e[t].scale.viz(o),p+=x/2+e.axes.margin.left,p>e.width.value&&(g=p-e.width.value+e.axes.margin.right,e.axes.width-=g,e.axes.margin.right+=g)):e[t].ticks.hidden=!0,w=e[t].label.fetch(e),w?(_={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=s([w],_)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin[c]+=e[t].label.height,e.axes.margin[c]+=2*e[t].label.padding));return e.axes.height-=e.axes.margin.top+e.axes.margin.bottom,e.x.scale.viz.range(r([0,e.axes.width],b.length)),v&&e.x2.scale.viz.range(r([0,e.axes.width],v.length)),e.y.scale.viz.range(r([0,e.axes.height],E.length)),M?e.y2.scale.viz.range(r([0,e.axes.height],M.length)):void 0},o=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient(e[t].orient.value).scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(n,r){var i,o;return e[t].ticks.hidden?null:(o=e[t].scale.value,i=n.constructor===Date?+n:n,e[t].ticks.visible.indexOf(i)>=0?"share"===o?e.format.value(100*n,{key:"share",vars:e,labels:e[t].affixes.value,output:t}):n.constructor===Date?e[t].ticks.format(n):"log"===o?l(n):e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t}):null)})},f="",l=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return f[e]}).join(""),"1"!==r&&(t=r+" x "+t),0>e?"-"+t:t}},{"../../../../../core/data/time.coffee":64,"../../../../../core/fetch/value.coffee":69,"../../../../../font/sizes.coffee":103,"../../../../../textwrap/textwrap.coffee":202,"../../../../../util/buckets.coffee":206,"../../../../../util/uniques.coffee":212,"./buffer.coffee":318}],321:[function(e,t,n){var r,i,o;r=e("../../../../../color/mix.coffee"),i=e("../../../../../textwrap/textwrap.coffee"),o=e("../../../../../object/validate.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce;if(p=e.x.domain.viz.concat(e.y.domain.viz),p.indexOf(void 0)>=0)return null;for(f={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},n={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],oe=function(t,n){return t.attr("x1",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):0}).attr("x2",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):0}).attr("y2",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):e.axes.height})},ae=function(t,n,i){var o,a;return o=i?e[n].grid.color:e[n].ticks.color,a="log"===e[n].scale.value,t.attr("stroke",function(t){var s;return 0===t?e[n].axis.color:(t.constructor===Date&&(t=+t),s=e[n].ticks.visible.indexOf(t)>=0,!s||a&&"1"!==Math.abs(t).toString().charAt(0)?i&&"transparent"!==e.axes.background.color?r(o,e.axes.background.color,.4,1):"transparent"!==e.background.value?r(o,e.background.value,.4,1):r(o,"white",.4,1):o)}).attr("stroke-width",e[n].ticks.width).attr("shape-rendering",e[n].ticks.rendering.value)},g=function(t,n,r){var i;return i=0===n?"axis":"ticks",n=e[t][i].font[r],n&&(n.length||"number"==typeof n)?n:e[t].ticks.font[r]},ie=function(t,n){var i;return i="log"===e[n].scale.value,t.attr("font-size",function(e){return g(n,e,"size")+"px"}).attr("stroke","none").attr("fill",function(t){var o;return o=g(n,t,"color"),i&&"1"!==Math.abs(t).toString().charAt(0)?r(o,e.background.value,.4,1):o}).attr("font-family",function(e){return g(n,e,"family").value}).attr("font-weight",function(e){return g(n,e,"weight")}).style("text-transform",function(e){return g(n,e,"transform").value}).style("letter-spacing",function(e){return g(n,e,"spacing")+"px"})},P=function(t,n){var r,i;return r=0===n.indexOf("x")?"height":"width",i=0===n.indexOf("x")?"y":"x",t.attr(i+"1",0).attr(i+"2",e.axes[r]).attr(n+"1",function(e){return e.coords.line}).attr(n+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[n].lines.color}).attr("stroke-width",e[n].lines.width).attr("shape-rendering",e[n].lines.rendering.value).attr("stroke-dasharray",e[n].lines.dasharray.value)},D=function(t,r){var i;return i=0===r.indexOf("x")?"y":"x",t.attr(i,function(e){return e.coords.text[i]+"px"}).attr(r,function(e){return e.coords.text[r]+"px"}).attr("dy",e[r].lines.font.position.value).attr("text-anchor",n[e[r].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[r].lines.font.size+"px").attr("fill",function(t){return t.color||e[r].lines.color}).attr("font-family",e[r].lines.font.family.value).attr("font-weight",e[r].lines.font.weight)},V="translate("+e.axes.margin.left+","+e.axes.margin.top+")",U=e.group.selectAll("g#d3plus_graph_plane").data([0]),U.transition().duration(e.draw.timing).attr("transform",V),U.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",V),c=U.selectAll("rect#d3plus_graph_background").data([0]),c.transition().duration(e.draw.timing).attr(f),c.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(f),L=U.selectAll("path#d3plus_graph_mirror").data([0]),L.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),L.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return t=f.width,e=f.height,"M "+t+" "+e+" L 0 "+e+" L "+t+" 0 Z"}),Z=0!==e.x.ticks.rotate,ue=function(t,n){var r,o;return o="x"===n?e.axes.height:0,r=t.attr("transform","translate(0,"+o+")").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var r;return t.constructor===Date&&(t=+t),r=d3.select(this).attr("y2"),e[n].ticks.visible.indexOf(t)>=0?r:r/2}),r.select("text").style("text-anchor",Z&&"x"===n?"end":Z?"start":"middle").call(ie,n).each(function(t){return d3.select(this).attr("dy","0px").attr("font-size",function(e){return g(n,e,"size")+"px"}),t.constructor===Date&&(t=+t),!e[n].ticks.hidden&&e[n].ticks.visible.indexOf(t)>=0?i().container(d3.select(this)).rotate(e[n].ticks.rotate).align(Z?"end":"center").valign(Z?"middle":"x"===n?"top":"bottom").width(e[n].ticks.maxWidth).height(e[n].ticks.maxHeight).padding(0).x(-e[n].ticks.maxWidth/2).y("x2"===n?-(e[n].ticks.maxHeight+2*e.labels.padding):0).draw():void 0})},ce=function(t,n){var r,i;return i="y2"===n?e.axes.width:0,r=t.attr("transform","translate("+i+", 0)").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick"),r.selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),r.select("text").call(ie,n)},X=["x","x2","y","y2"],x=0,S=X.length;S>x;x++)a=X[x],ee=0===a.indexOf("x")?ue:ce,H=s.length&&e[a].value?[0]:[],l=U.selectAll("g#d3plus_graph_"+a+"ticks").data(H),l.transition().duration(e.draw.timing).call(ee,a),l.selectAll("line").transition().duration(e.draw.timing).call(ae,a),y=l.enter().append("g").attr("id","d3plus_graph_"+a+"ticks").call(ee,a),y.selectAll("path").attr("fill","none").attr("stroke","none"),y.selectAll("line").call(ae,a),l.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(A=function(t,n){return t.attr("x",0===n.indexOf("x")?e.width.viz/2:-(e.axes.height/2+e.axes.margin.top)).attr("y","x"===n?e.height.viz-e[n].label.height/2-e[n].label.padding:"y2"===n?e.width.viz-e[n].label.height/2-e[n].label.padding:e[n].label.height/2+e[n].label.padding).attr("transform",0===n.indexOf("y")?"rotate(-90)":null).attr("font-family",e[n].label.font.family.value).attr("font-weight",e[n].label.font.weight).attr("font-size",e[n].label.font.size+"px").attr("fill",e[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",e[n].label.font.transform.value).style("letter-spacing",e[n].label.font.spacing+"px")},J=["x","y"],b=0,z=J.length;z>b;b++)a=J[b],e[a].grid.value?m=e[a].ticks.value?e[a].ticks.value:e[a].ticks.values:(m=[],q="x"===a?"y":"x",e[a].ticks.values.indexOf(0)>=0&&e[q].axis.value&&(m=[0])),v=U.selectAll("g#d3plus_graph_"+a+"grid").data([0]),v.enter().append("g").attr("id","d3plus_graph_"+a+"grid"),F=v.selectAll("line").data(m,function(e,t){return e.constructor===Date?e.getTime():e}),F.transition().duration(e.draw.timing).call(oe,a).call(ae,a,!0),F.enter().append("line").style("opacity",0).call(oe,a).call(ae,a,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),F.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove();for(G=["x","x2","y","y2"],w=0,M=G.length;M>w;w++)a=G[w],e[a].value?(u=e[a].label.fetch(e),k=s&&u?[0]:[],t=e.format.affixes.value[e[a].value],u&&!e[a].affixes.value&&t&&(K=e[a].affixes.separator.value,K===!0?K=["[","]"]:K===!1&&(K=["",""]),u+=" "+K[0]+t[0]+" "+t[1]+K[1])):(u="",k=[]),_=e.group.selectAll("text#d3plus_graph_"+a+"label").data(k),_.text(u).transition().duration(e.draw.timing).call(A,a),_.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+a+"label").text(u).call(A,a),_.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(Q=["x","y","x2","y2"],R=0,C=Q.length;C>R;R++)if(a=Q[R],e[a].value){for(O=U.selectAll("g#d3plus_graph_"+a+"_userlines").data([0]),O.enter().append("g").attr("id","d3plus_graph_"+a+"_userlines"),h=e[a].scale.viz.domain(),0===a.indexOf("y")&&(h=h.slice().reverse()),te=[],j=[],se=e[a].lines.value||[],B=0,T=se.length;T>B;B++)E=se[B],d=o(E)?E.position:E,le=a===e.axes.discrete?h.indexOf(d)>=0:d>=h[0]&&d<=h[1],le&&(d=o(E)?E:{position:d},d.coords={line:e[a].scale.viz(d.position)},j.push(d),d.text&&(d.axis=a,d.padding=.5*e[a].lines.font.padding.value,d.align=e[a].lines.font.align.value,$=e[a].lines.font.position.text,ne="middle"===$?0:2*d.padding,"top"===$&&(ne=-ne),0===a.indexOf("x")?(re="left"===d.align?e.axes.height:"center"===d.align?e.axes.height/2:0,"left"===d.align&&(re-=2*d.padding),"right"===d.align&&(re+=2*d.padding)):(re="left"===d.align?0:"center"===d.align?e.axes.width/2:e.axes.width,"right"===d.align&&(re-=2*d.padding),"left"===d.align&&(re+=2*d.padding)),d.coords.text={},d.coords.text[0===a.indexOf("x")?"y":"x"]=re,d.coords.text[a]=e[a].scale.viz(d.position)+ne,d.transform=0===a.indexOf("x")?"rotate(-90,"+d.coords.text.x+","+d.coords.text.y+")":null,te.push(d)));F=O.selectAll("line.d3plus_graph_"+a+"line").data(j,function(e){return e.position}),F.enter().append("line").attr("class","d3plus_graph_"+a+"line").attr("opacity",0).call(P,a),F.transition().duration(e.draw.timing).attr("opacity",1).call(P,a),F.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),I=O.selectAll("text.d3plus_graph_"+a+"line_text").data(te,function(e){return e.position}),I.enter().append("text").attr("class","d3plus_graph_"+a+"line_text").attr("id",function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),"d3plus_graph_"+a+"line_text_"+t}).attr("opacity",0).call(D,a),I.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(D,a),I.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),W=function(t){var n;return n=function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),U.select("text#d3plus_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return n(e).x-e.padding}).attr("y",function(e){return n(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return n(e).width+2*e.padding}).attr("height",function(e){return n(e).height+2*e.padding}).attr("fill","transparent"!==e.axes.background.color?e.axes.background.color:"white")},Y=e[a].lines.font.background.value?te:[],N=O.selectAll("rect.d3plus_graph_"+a+"line_rect").data(Y,function(e){return e.position}),N.enter().insert("rect","text.d3plus_graph_"+a+"line_text").attr("class","d3plus_graph_"+a+"line_rect").attr("pointer-events","none").attr("opacity",0).call(W),N.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(W)}),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":48,"../../../../../object/validate.coffee":174,"../../../../../textwrap/textwrap.coffee":202}],322:[function(e,t,n){var r,i,o;r=e("../../../../core/fetch/value.coffee"),i=e("../../../../string/strip.js"),o=e("../../../../util/uniques.coffee"),t.exports=function(e,t,n){var a,s,l,u,c,f,d;return void 0===n?n=e.id.nesting.slice(0,e.depth.value+1):n.constructor!==Array&&(n=[n]),void 0===s&&(s=[]),t||(t=e.data.viz),a=e[e.axes.discrete],u=e[e.axes.opposite],d=a.value===e.time.value,d?(f=e.data.time.ticks,l=e.time.solo.value.length?"solo":"mute",e.time[l].value.length&&(c=e.time[l].value.slice().map(function(e){return e.constructor!==Date&&(e+="",4===e.length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),f=f.filter(function(e){return"solo"===l?c.indexOf(+e)>=0:c.indexOf(+e)<0}))):f=a.ticks.values?a.ticks.values:o(t,a.value,r,e),d3.nest().key(function(t){var o,a,s,l,u;for(l="nesting",a=0,s=n.length;s>a;a++)o=n[a],u=r(e,t,o),u instanceof Array&&(u=u.join("_")),l+="_"+i(u);return l}).rollup(function(t){var n,i,s,c,h,p,g,v,m,y,x,b;if(n=o(t,a.value,r,e),b=n.length&&n[0].constructor===Date,b&&(n=n.map(Number)),a.zerofill.value)for(i="log"===a.scale.value?u.scale.viz.domain().every(function(e){return 0>e})?-1:1:0,s=c=0,p=f.length;p>c;s=++c)if(x=f[s],y=d?+x:x,n.indexOf(y)<0){for(v={d3plus:{}},m=e.id.nesting,h=0,g=m.length;g>h;h++)l=m[h],l in t[0]&&(v[l]=t[0][l]);v[a.value]=x,v[u.value]=0,v[u.value]=i,t.splice(s,0,v)}return"string"==typeof t[0][a.value]?t:t.sort(function(t,n){var i,o,s,l,c;return i=r(e,t,a.value),s=r(e,n,a.value),(c=i-s)?c:(o=r(e,t,u.value),l=r(e,n,u.value),o-l)})}).entries(t)}},{"../../../../core/fetch/value.coffee":69,"../../../../string/strip.js":177,"../../../../util/uniques.coffee":212}],323:[function(e,t,n){var r;r=e("../../../../core/fetch/value.coffee"),t.exports=function(e,t){var n,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x;for(m=e.axes.stacked||e.axes.opposite,i=e[m].scale.viz(0),g=e[m].scale.value,h="x"===m?"y":"x",u="y"===m?e.axes.margin.top:e.axes.margin.left,d="share"===g?"expand":"zero",v=d3.layout.stack().values(function(e){return e.values||[e]}).offset(d).x(function(e){return e.d3plus[h]}).y(function(t){return i-e[m].scale.viz(r(e,t,e[m].value))}).out(function(t,n,o){var a,s;return s=r(e,t,e[m].value),a=0>s,"share"===g?(t.d3plus[m+"0"]=(1-n)*i,t.d3plus[m]=t.d3plus[m+"0"]-o*i):(t.d3plus[m+"0"]=i,e.axes.stacked&&(t.d3plus[m+"0"]-=n),t.d3plus[m]=t.d3plus[m+"0"]-o),t.d3plus[m]+=u,t.d3plus[m+"0"]+=u}),p=[],f=[],o=0,s=t.length;s>o;o++)if(n=t[o],x=r(e,n,e[m].value),x instanceof Array){for(c=!0,a=0,l=x.length;l>a;a++)if(y=x[a],y>=0){c=!1;break}c?f.push(n):p.push(n)}else x>=0&&p.push(n),0>x&&f.push(n);return 0===p.length||0===f.length?v(t):(p.length&&(p=v(p)),f.length&&(f=v(f)),p.concat(f))}},{"../../../../core/fetch/value.coffee":69}],324:[function(e,t,n){var r,i,o,a,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("./helpers/graph/nest.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/stack.coffee"),o=function(e){var t,n,o,a,u,c,f,d,h,p,g;if(i(e,{buffer:e.axes.opposite,mouse:!0}),o=e.x.domain.viz.concat(e.y.domain.viz),o.indexOf(void 0)>=0)return[];for(n=s(e.data.viz,null,null,null,e),a=0,c=n.length;c>a;a++)for(d=n[a],h=d.values,u=0,f=h.length;f>u;u++)t=h[u],p=r(e,t,e.x.value),null!==p?(t.d3plus.x2=!1,t.d3plus.x=e.x.scale.viz(p)):(t.d3plus.x2=!0,t.d3plus.x=e.x2.scale.viz(r(e,t,e.x2.value))),t.d3plus.x+=e.axes.margin.left,g=r(e,t,e.y.value),null!==g?(t.d3plus.y2=!1,t.d3plus.y=e.y.scale.viz(g)):(t.d3plus.y2=!0,t.d3plus.y=e.y2.scale.viz(r(e,t,e.y2.value))),t.d3plus.y+=e.axes.margin.top;return e.axes.stacked?l(e,n):n},o.filter=function(e,t){return a(e,t)},o.requirements=["data","x","y"],o.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},o.shapes=["line"],o.tooltip="static",t.exports=o},{"../../array/sort.coffee":36,"../../core/fetch/value.coffee":69,"./helpers/graph/draw.coffee":316,"./helpers/graph/nest.coffee":322,"./helpers/graph/stack.coffee":323}],325:[function(e,t,n){var r=e("../../network/smallestGap.coffee"),i=e("../../core/fetch/value.coffee"),o=function(e){var t=e.nodes.restricted||e.nodes.value,n=e.edges.restricted||e.edges.value,o=d3.extent(t,function(e){return e.x}),a=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var n=i(e,t,e.size.value);return 0===n?null:n})),"undefined"==typeof s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var l=r(t,{accessor:function(e){return[e.x,e.y]}}),c=l/2,f=e.size.value?e.nodes.overlap:.4;if(l*=f,e.edges.arrows.value&&(l=.5*l),s[0]===s[1]){var u=c;l=c}else{var d=o[1]+1.1*l-(o[0]-1.1*l),h=a[1]+1.1*l-(a[0]-1.1*l),p=d/h,g=e.width.viz/e.height.viz;if(g>p)var v=e.height.viz/h;else var v=e.width.viz/d;var u=.25*l;2>u*v&&(u=2/v)}}var m=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[o[0]-1.1*l,a[0]-1.1*l],[o[1]+1.1*l,a[1]+1.1*l]];var y=[],x={};return t.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]==t[e.id.value]})[0],r=n||{};r[e.id.value]=t[e.id.value],r.d3plus={},r.d3plus.x=t.x,r.d3plus.y=t.y;var o=i(e,r,e.size.value);r.d3plus.r=o?m(o):m.range()[0],x[r[e.id.value]]={x:r.d3plus.x,y:r.d3plus.y,r:r.d3plus.r},y.push(r)}),y.sort(function(e,t){return t.d3plus.r-e.d3plus.r}),n.forEach(function(t,n){t.d3plus&&delete t.d3plus.spline,t[e.edges.source].d3plus={};var r=x[t[e.edges.source][e.id.value]];t[e.edges.source].d3plus.r=r.r,t[e.edges.source].d3plus.x=r.x,t[e.edges.source].d3plus.y=r.y,t[e.edges.target].d3plus={};var i=x[t[e.edges.target][e.id.value]];t[e.edges.target].d3plus.r=i.r,t[e.edges.target].d3plus.x=i.x,t[e.edges.target].d3plus.y=i.y}),{nodes:y,edges:n}};o.nesting=!1,o.requirements=["nodes","edges"],o.scale=1.05,o.shapes=["circle","square","donut"],o.tooltip="static",o.zoom=!0,t.exports=o},{"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":170}],326:[function(e,t,n){var r,i,o,a,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("../../network/shortestPath.coffee"),r=e("../../core/fetch/value.coffee"),o=e("../../util/uniques.coffee"),a=function(e){var t,n,i,o,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,fe,de;for(p=[],H={},H[e.focus.value[0]]=0,H[e.focus.value[1]]=0,Y={all:[[e.focus.value[0]],[e.focus.value[1]]]},G=a.paths,$=m=0,k=G.length;k>m;$=++m)for(V=G[$],p=p.concat(V.edges),_=e.focus.value[0],Y[$]=[_],Q=V.edges,h=y=0,A=Q.length;A>y;h=++y)d=Q[h],d[e.edges.source]=e.data.viz.filter(function(t){return d[e.edges.source][e.id.value]===t[e.id.value]})[0],d[e.edges.target]=e.data.viz.filter(function(t){return d[e.edges.target][e.id.value]===t[e.id.value]})[0],I=d[e.edges.source][e.id.value]===_?"target":"source",R=d[e.edges[I]][e.id.value],void 0===H[R]&&(H[R]=$),Y[$].push(R),_=R;oe=0;for($ in Y)if(V=Y[$],"all"!==$){for(P=0,g=x=0,S=V.length;S>x;g=++x)if(v=V[g],0!==g&&g!==V.length-1&&H[v]===parseFloat($)){for(P=1,W=V[g-1],F=V[g+1],X=null,L=null,Z=Y.all,u=j=0,z=Z.length;z>j;u=++j)l=Z[u],s.call(l,W)>=0&&(X=u),s.call(l,F)>=0&&(L=u);null!==X&&null===L?X+1===Y.all.length-1?Y.all.splice(X+1,0,[v]):Y.all[X+1].push(v):L-X===1?Y.all.splice(L,0,[v]):L-X>1&&Y.all[L-1].push(v)}oe+=P}for(ie=Math.floor(e.height.viz/oe),de=[],g=0;oe>g;)g%2===0?de.push(g):de.unshift(g),g++;for(b=e.size.value&&!e.small?30:0,fe=d3.scale.ordinal().domain(de).range(d3.range(ie/2-b,e.height.viz+ie/2-b,(e.height.viz-ie)/(oe-1))),f=Y.all.length,c=Math.floor(e.width.viz/f),ue=d3.scale.linear().domain([0,f-1]).rangeRound([c/2,e.width.viz-c/2]),O=5,D=.4*d3.min([c,ie-b]),se=d3.extent(e.data.viz,function(t){var n;return n=r(e,t,e.size.value),n||0}),ae=e.size.scale.value.domain(se).rangeRound([O,D]),K=e.data.viz,N=0,M=K.length;M>N;N++){for(B=K[N],null==B.d3plus&&(B.d3plus={}),ee=Y.all,u=q=0,C=ee.length;C>q;u=++q)l=ee[u],te=B[e.id.value],s.call(l,te)>=0&&(B.d3plus.x=ue(u));B.d3plus.y=fe(H[B[e.id.value]]),e.size.value?(le=r(e,B,e.size.value),B.d3plus.r=le?ae(le):O):B.d3plus.r=D,B.d3plus.r<.1*c&&!e.small?B.d3plus.label={x:0,y:B.d3plus.r+2*e.labels.padding,w:.6*c,h:b+D-B.d3plus.r,resize:!1}:delete B.d3plus.label}for(ne=a.paths,$=U=0,T=ne.length;T>U;$=++U)for(V=ne[$],_=e.focus.value[0],re=V.edges,h=J=0,E=re.length;E>J;h=++J)d=re[h],I=d[e.edges.source][e.id.value]===_?"target":"source",w="target"===I?"source":"target",R=d[e.edges[I]][e.id.value],H[_]!==H[R]?(d.d3plus={spline:!0},null==(t=d[e.edges.source]).d3plus&&(t.d3plus={}),null==(n=d[e.edges.source].d3plus).edges&&(n.edges={}),null==(i=d[e.edges.target]).d3plus&&(i.d3plus={}),null==(o=d[e.edges.target].d3plus).edges&&(o.edges={}),ce=d[I].d3plus.x-d[w].d3plus.x,d[w].d3plus.edges[d[I][e.id.value]]={angle:Math.PI,radius:c/2},d[I].d3plus.edges[d[w][e.id.value]]={angle:0,radius:c/2,offset:ce-c}):delete d.d3plus,_=R;return{nodes:e.data.viz,edges:p}},a.filter=function(e,t){var n,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A;for(u=e.edges.filtered||e.edges.value,a.paths=i(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),a.nodes=[],n=[],b=a.paths,d=0,g=b.length;g>d;d++)for(x=b[d],w=x.edges,h=0,v=w.length;v>h;h++)l=w[h],k=l[e.edges.source],A=l[e.edges.target],n.indexOf(k[e.id.value])<0&&(a.nodes.push(k),n.push(k[e.id.value])),n.indexOf(A[e.id.value])<0&&(a.nodes.push(A),n.push(A[e.id.value]));for(f=o(a.nodes,e.id.value,r,e),_=[],p=0,m=f.length;m>p;p++)c=f[p],s=t.filter(function(t){return t[e.id.value]===c}),s[0]?_.push(s[0]):(y={d3plus:{}},y[e.id.value]=c,_.push(y));return _},a.nesting=!1,a.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],a.scale=1,a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../core/fetch/value.coffee":69,"../../network/shortestPath.coffee":169,"../../util/uniques.coffee":212}],327:[function(e,t,n){var r,i,o,a;r=e("../../array/comparator.coffee"),i=e("../../core/data/threshold.js"),o=e("../../core/data/group.coffee"),a=function(e){var t,n,i,a,s,l,u,c,f;for(u=d3.layout.pie().value(function(e){return e.value}).sort(function(t,n){return e.order.value?r(t.d3plus,n.d3plus,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3plus,n.d3plus,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3plus,n.d3plus,[e.size.value],"desc",[],e)}),n=o(e,e.data.viz,[]),l=u(n),f=[],c=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,i=0,s=l.length;s>i;i++)t=l[i],a=t.data.d3plus,a.d3plus.startAngle=t.startAngle,a.d3plus.endAngle=t.endAngle,a.d3plus.r=c,a.d3plus.x=e.width.viz/2,a.d3plus.y=e.height.viz/2,a.d3plus.share=(t.endAngle-t.startAngle)/(2*Math.PI),
f.push(a);return f},a.filter=i,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a},{"../../array/comparator.coffee":34,"../../core/data/group.coffee":59,"../../core/data/threshold.js":63}],328:[function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h;i=e("../../array/comparator.coffee"),f=e("../../array/sort.coffee"),o=e("../../core/data/threshold.js"),a=e("../../core/fetch/text.js"),s=e("../../core/fetch/value.coffee"),l=e("../../font/sizes.coffee"),u=e("../../geom/offset.coffee"),d=e("../../textwrap/textwrap.coffee"),r=e("../../util/buckets.coffee"),h=e("../../util/uniques.coffee"),c=function(e){var t,n,i,o,c,f,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J,G,Q,Z,K,ee,te,ne,re,ie,oe,ae,se;for(m=e.data.viz,V=e.depth.value+1,$=e.id.nesting[V],g=function(){var e,t,n;for(n=[],e=0,t=m.length;t>e;e++)v=m[e],n.push(v[$]);return n}(),oe=function(){var t,n,r;for(r=[],t=0,n=m.length;n>t;t++)v=m[t],r.push(h(m,$,s,e,V));return r}(),oe=h(d3.merge(oe)).length,o=2*Math.PI/oe,q=d3.min([e.width.viz,e.height.viz])/2,E=0,O=0,N=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(a(e,f,V)[0]);return r}(),N=h(d3.merge(N)),e.labels.value&&(y=u(Math.PI/2,q),ee=u(o+Math.PI/2,q),E=y.x-ee.x-2*e.labels.padding,re={fill:e.x.ticks.font.color,"font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight,"font-size":e.x.ticks.font.size+"px"},te=l(N,re,{mod:function(t){return d().container(d3.select(t)).width(e.height.viz/8).height(E).draw()}}),O=d3.max(te,function(e){return e.width}),q-=O,q-=2*e.labels.padding),B=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(function(){var t,n,r;for(r=[],t=0,n=f.length;n>t;t++)v=f[t],r.push(s(e,v,e.size.value));return r}());return r}(),B=d3.max(d3.merge(B)),W=d3.scale.linear().domain([0,B]).range([0,q]),k=function(){var t,n,r;for(r=[],t=0,n=g.length;n>t;t++)f=g[t],r.push(s(e,f,$));return r}(),k=h(d3.merge(k)),_=d3.scale.ordinal().domain(k).range(d3.range(0,k.length)),S=0,P=m.length;P>S;S++)for(v=m[S],v.d3plus.x=e.width.viz/2+e.margin.top,v.d3plus.y=e.height.viz/2+e.margin.left,X=v[$],w=z=0,F=X.length;F>z;w=++z)t=X[w],t.d3plus||(t.d3plus={}),t.d3plus.r=W(s(e,t,e.size.value)),t.d3plus.a=_(s(e,t,$))*o;for(A=1,J=[10,5,4,2],L=0,I=J.length;I>L;L++)if(w=J[L],q/w>=20){A=w;break}for(Q=r([q/A,q],A-1).reverse(),Q.length===A&&Q.shift(),K=e.group.selectAll(".d3plus_radar_rings").data(Q,function(e,t){return t}),Z=function(t){return t.attr("fill",function(t,n){return 0===n?e.axes.background.color:"transparent"}).attr("cx",e.width.viz/2+e.margin.top).attr("cy",e.height.viz/2+e.margin.left).attr("stroke",e.x.grid.value?e.x.grid.color:"transparent")},K.enter().append("circle").attr("class","d3plus_radar_rings").call(Z).attr("r",0),K.transition().duration(e.draw.timing).call(Z).attr("r",function(e){return e}),K.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j=d3.scale.ordinal().domain(N).range(d3.range(0,N.length)),C=[],U=0,R=N.length;R>U;U++)M=N[U],n=o*j(M)-Math.PI/2,t=n*(180/Math.PI),-90>t||t>90?(t-=180,c=-(q+2*e.labels.padding+O),i="end"):(c=q+2*e.labels.padding,i="start"),ie=0>n||n>Math.PI,G=n<Math.PI/2,Y=q,e.labels.value&&(Y+=e.labels.padding),H=u(n,Y),ae=H.x,se=H.y,G||(ae-=O),ie&&(se-=E),p=[0,Math.PI].indexOf(o*j(M))>=0,p&&(ae-=O/2),C.push({text:M,angle:t,x:c,anchor:i,offset:H});return T=e.group.selectAll("g.d3plus_radar_label_group").data([0]),T.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),T.transition().duration(e.draw.timing).attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),ne=T.selectAll(".d3plus_radar_labels").data(e.labels.value?C:[],function(e,t){return t}),D=function(e){return e.attr(re).each(function(e,t){return d().container(d3.select(this)).height(E).width(O).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-E/2).draw()}).attr("transform",function(e){var t;return t=d3.select(this).attr("transform")||"",t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},ne.call(D),ne.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(D).transition().duration(e.draw.timing).attr("opacity",1),ne.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),x=e.group.selectAll(".d3plus_radar_lines").data(C,function(e,t){return t}),b=function(t){return t.attr("stroke",e.x.grid.color).attr("x1",e.width.viz/2+e.margin.left).attr("y1",e.height.viz/2+e.margin.top)},x.enter().append("line").attr("class","d3plus_radar_lines").call(b).attr("x2",e.width.viz/2+e.margin.left).attr("y2",e.height.viz/2+e.margin.top),x.transition().duration(e.draw.timing).call(b).attr("x2",function(t){return e.width.viz/2+e.margin.left+t.offset.x}).attr("y2",function(t){return e.height.viz/2+e.margin.top+t.offset.y}),x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.mouse.viz={click:!1},m},c.requirements=["data","size"],c.shapes=["radial"],t.exports=c},{"../../array/comparator.coffee":34,"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69,"../../font/sizes.coffee":103,"../../geom/offset.coffee":162,"../../textwrap/textwrap.coffee":202,"../../util/buckets.coffee":206,"../../util/uniques.coffee":212}],329:[function(e,t,n){var r=e("../../array/sort.coffee"),i=e("../../client/pointer.coffee"),o=e("../../core/fetch/value.coffee"),s=e("../../core/fetch/color.coffee"),l=e("../../color/legible.coffee"),u=e("../../tooltip/remove.coffee"),c=e("../../network/smallestGap.coffee"),f=e("../../color/text.coffee"),d=e("../../util/uniques.coffee"),h=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,h=e.small||!e.labels.value?1.4*n:n,p=2*n,g=[],v=[],m=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];m||(m={d3plus:{}},m[e.id.value]=e.focus.value[0]),m.d3plus.x=e.width.viz/2,m.d3plus.y=e.height.viz/2,m.d3plus.r=.65*h;var y=[],x=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var n=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],r=e.data.viz.filter(function(t){return t[e.id.value]===n[e.id.value]})[0];r||(r={d3plus:{}},r[e.id.value]=n[e.id.value]),r.d3plus.edges=e.edges.connections(r[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),r.d3plus.edge=t,x.push(r[e.id.value]),y.push(r)});var b=e.order.value||e.color.value||e.size.value||e.id.value;y.sort(function(t,n){var i=t.d3plus.edges.length-n.d3plus.edges.length;return i?i:r([t,n],b,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?y=y.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(y=e.edges.limit.value(y));var w=[],_=0;y.forEach(function(t){var n=t[e.id.value];t.d3plus.edges=t.d3plus.edges.filter(function(t){var r=t[e.edges.source][e.id.value],i=t[e.edges.target][e.id.value];return x.indexOf(r)<0&&i==n||x.indexOf(i)<0&&r==n}),_+=t.d3plus.edges.length||1,t.d3plus.edges.forEach(function(t){var r=t[e.edges.source],i=t[e.edges.target],o=i[e.id.value]==n?r:i;x.push(o[e.id.value])})}),r(y,b,e.order.sort.value,e.color.value||[],e);var k=0,A=2*Math.PI,S=0;y.forEach(function(t,n){var i=t.d3plus.edges.length||1,o=A/_*i;0==n&&(S=s,k-=o/2);var s=k+o/2;s-=A/4,t.d3plus.radians=s,t.d3plus.x=e.width.viz/2+h*Math.cos(s),t.d3plus.y=e.height.viz/2+h*Math.sin(s),k+=o,t.d3plus.edges.sort(function(n,i){var n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],i=i[e.edges.source][e.id.value]==t[e.id.value]?i[e.edges.target]:i[e.edges.source];return r([n,i],b,e.order.sort.value,e.color.value||[],e)}),t.d3plus.edges.forEach(function(n,r){var o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],l=A/_,u=e.data.viz.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];u||(u={d3plus:{}},u[e.id.value]=o[e.id.value]),a=s-l*i/2+l/2+l*r,u.d3plus.radians=a,u.d3plus.x=e.width.viz/2+p*Math.cos(a),u.d3plus.y=e.height.viz/2+p*Math.sin(a),w.push(u)})});var z=c(y,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}}),M=c(w,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}});if(z||(z=n/2),M||(M=n/4),8>z/2-4)var C=d3.min([z/2,8]);else var C=z/2-4;if(4>M/2-4)var T=d3.min([M/2,4]);else var T=M/2-4;T>n/10&&(T=n/10),T>C&&T>10&&(T=.75*C),C>1.5*T&&(C=1.5*T),C=Math.floor(C),T=Math.floor(T);var E=d(y,e.id.value,o,e);E=E.concat(d(w,e.id.value,o,e)),E.push(e.focus.value[0]);var j=e.data.viz.filter(function(t){return E.indexOf(t[e.id.value])>=0});if(e.size.value){var D=d3.extent(j,function(t){return o(e,t,e.size.value)});D[0]==D[1]&&(D[0]=0);var t=d3.scale.linear().domain(D).rangeRound([3,d3.min([C,T])]),O=o(e,m,e.size.value);m.d3plus.r=t(O)}else{var t=d3.scale.linear().domain([1,2]).rangeRound([C,T]);e.edges.label&&(m.d3plus.r=1.5*t(1))}w.forEach(function(n){n.d3plus.ring=2;var r=e.size.value?o(e,n,e.size.value):2;n.d3plus.r=t(r)}),y.forEach(function(n){n.d3plus.ring=1;var r=e.size.value?o(e,n,e.size.value):1;n.d3plus.r=t(r)}),v=[m].concat(y).concat(w),y.forEach(function(t,r){var i=[e.edges.source,e.edges.target],o=t.d3plus.edge;i.forEach(function(t){o[t]=v.filter(function(n){return n[e.id.value]==o[t][e.id.value]})[0]}),delete o.d3plus,g.push(o),e.edges.connections(t[e.id.value],e.id.value).forEach(function(r){var i=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source];if(i[e.id.value]!=m[e.id.value]){var o=w.filter(function(t){return t[e.id.value]==i[e.id.value]})[0];if(o||(o=y.filter(function(t){return t[e.id.value]==i[e.id.value]})[0]),o){r.d3plus={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}};var a=[e.edges.source,e.edges.target];a.forEach(function(i,a){r[i]=v.filter(function(t){return t[e.id.value]==r[i][e.id.value]})[0],void 0===r[i].d3plus.edges&&(r[i].d3plus.edges={});var s=0===a?r[e.edges.target][e.id.value]:r[e.edges.source][e.id.value];r[i][e.id.value]==t[e.id.value]?r[i].d3plus.edges[s]={angle:t.d3plus.radians+Math.PI,radius:n/2}:r[i].d3plus.edges[s]={angle:o.d3plus.radians,radius:n/2}}),g.push(r)}}})});var N=!1;return e.background.value&&["transparent","none"].indexOf(e.background.value)<0&&d3.hsl(e.background.value).l<.5&&(N=f(e.background.value)),v.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3plus.rotate=t.d3plus.radians*(180/Math.PI);var r=t.d3plus.rotate,i=n-3*e.labels.padding-t.d3plus.r;if(-90>r||r>90){r-=180;var o=-(t.d3plus.r+i/2+e.labels.padding),a="end"}else var o=t.d3plus.r+i/2+e.labels.padding,a="start";var u=y.indexOf(t)>=0,c=1==t.d3plus.ring?z:M;t.d3plus.label={x:o,y:0,w:i,h:c,angle:r,anchor:a,valign:"center",color:N||l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){var c=h-2*t.d3plus.r-2*e.labels.padding;t.d3plus.label={x:0,y:t.d3plus.r+c/2,w:h,h:c,color:N||l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3plus.rotate,delete t.d3plus.label;else delete t.d3plus.rotate,delete t.d3plus.label}),e.mouse.viz={},e.mouse.viz[i.click]=function(t){if(t[e.id.value]!=e.focus.value[0]){u(e.type.value);var n=e.focus.value[0];e.history.states.push(function(){e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()}},{edges:g,nodes:v,data:j}};h.filter=function(e,t){var n=e.edges.connections(e.focus.value[0],e.id.value,!0),r=[];n.forEach(function(t){r=r.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var i=n.concat(r),a=d(i,e.id.value,o,e),s=[];return a.forEach(function(n){var r=t.filter(function(t){return t[e.id.value]==n})[0];if(r)s.push(r);else{var i={d3plus:{}};i[e.id.value]=n,s.push(i)}}),s},h.nesting=!1,h.scale=1,h.shapes=["circle","square","donut"],h.requirements=["edges","focus"],h.tooltip="static",t.exports=h},{"../../array/sort.coffee":36,"../../client/pointer.coffee":40,"../../color/legible.coffee":46,"../../color/text.coffee":52,"../../core/fetch/color.coffee":65,"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":170,"../../tooltip/remove.coffee":205,"../../util/uniques.coffee":212}],330:[function(e,t,n){var r,i,o,a,s;r=e("./sankey.js"),i=e("../../client/pointer.coffee"),o=e("../../tooltip/remove.coffee"),s=e("../../util/uniques.coffee"),a=function(e){var t,n,a,s,l,u,c,f,d,h,p,g,v,m,y;for(s=e.focus.value[0],g=2*e.data.stroke.width,y=e.size.value.constructor===Number?e.size.value:20,a=e.edges.connections(s,e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!==s||t[e.edges.target][e.id.value]!==s}),p=[],v=[],a=a.map(function(t){var n,r;return t[e.edges.target][e.id.value]===s?(n={id:"left_"+t[e.edges.source][e.id.value],dupe:"left",data:t[e.edges.source],value:t[e.edges.strength.value]},r=t[e.edges.target]):(n=t[e.edges.source],r={id:"right_"+t[e.edges.target][e.id.value],dupe:"right",data:t[e.edges.target],value:t[e.edges.strength.value]}),v.indexOf(n.id)<0&&p.push(n),v.indexOf(r.id)<0&&p.push(r),v.push(n.id),v.push(r.id),{source:n,target:r,value:t[e.edges.strength.value]||1}}),c=r().nodeWidth(y).nodePadding(e.data.padding.value).size([e.width.viz-2*g,e.height.viz-2*g]).nodes(p).links(a).layout(2),m=[],l=0,f=p.length;f>l;l++)h=p[l],t=h.data||h,t={id:t[e.id.value]},t.d3plus={x:h.x+h.dx/2+g,y:h.y+h.dy/2+g,width:h.dx,height:h.dy,suffix:h.dupe},t.id!==s&&(t[e.edges.strength.value]=h.value),m.push(t);for(e.edges.path=c.link(),u=0,d=a.length;d>u;u++)n=a[u],n.d3plus={x:g,y:g};return e.mouse.viz={},e.mouse.viz[i.click]=function(t){var n;return t[e.id.value]!==e.focus.value[0]?(o(e.type.value),n=e.focus.value[0],e.history.states.push(function(){return e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()):void 0},{nodes:m,edges:a}},a.requirements=["edges","focus","nodes"],a.shapes=["square"],t.exports=a},{"../../client/pointer.coffee":40,"../../tooltip/remove.coffee":205,"../../util/uniques.coffee":212,"./sankey.js":331}],331:[function(e,t,n){t.exports=function(){function e(){h.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),p.forEach(function(e){var t=e.source,n=e.target;"number"==typeof t&&(t=e.source=h[e.source]),"number"==typeof n&&(n=e.target=h[e.target]),t.sourceLinks.push(e),n.targetLinks.push(e)})}function t(){h.forEach(function(e){e.value=Math.max(d3.sum(e.sourceLinks,l),d3.sum(e.targetLinks,l))})}function n(){for(var e,t=h,n=0;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=c,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;r(n),i((d[0]-c)/(n-1))}function r(e){h.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}function i(e){h.forEach(function(t){t.x*=e})}function o(e){function t(){var e=d3.min(a,function(e){return(d[1]-(e.length-1)*f)/d3.sum(e,l)});a.forEach(function(t){t.forEach(function(t,n){t.y=n,t.dy=t.value*e})}),p.forEach(function(t){t.dy=t.value*e})}function n(e){function t(e){return s(e.source)*e.value}a.forEach(function(n,r){n.forEach(function(n){if(n.targetLinks.length){var r=d3.sum(n.targetLinks,t)/d3.sum(n.targetLinks,l);n.y+=(r-s(n))*e}})})}function r(e){function t(e){return s(e.target)*e.value}a.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=d3.sum(n.sourceLinks,t)/d3.sum(n.sourceLinks,l);n.y+=(r-s(n))*e}})})}function i(){a.forEach(function(e){var t,n,r,i=0,a=e.length;for(e.sort(o),r=0;a>r;++r)t=e[r],n=i-t.y,n>0&&(t.y+=n),i=t.y+t.dy+f;if(n=i-f-d[1],n>0)for(i=t.y-=n,r=a-2;r>=0;--r)t=e[r],n=t.y+t.dy+f-i,n>0&&(t.y-=n),i=t.y})}function o(e,t){return e.y-t.y}var a=d3.nest().key(function(e){return e.x}).sortKeys(d3.ascending).entries(h).map(function(e){return e.values});t(),i();for(var u=1;e>0;--e)r(u*=.99),i(),n(u),i()}function a(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}h.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),h.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}function s(e){return e.y+e.dy/2}function l(e){return e.value}var u={},c=24,f=8,d=[1,1],h=[],p=[];return u.nodeWidth=function(e){return arguments.length?(c=+e,u):c},u.nodePadding=function(e){return arguments.length?(f=+e,u):f},u.nodes=function(e){return arguments.length?(h=e,u):h},u.links=function(e){return arguments.length?(p=e,u):p},u.size=function(e){return arguments.length?(d=e,u):d},u.layout=function(r){return e(),t(),n(),o(r),a(),u},u.relayout=function(){return a(),u},u.link=function(){function e(e){var n=e.source.x+e.source.dx,r=e.target.x,i=d3.interpolateNumber(n,r),o=i(t),a=i(1-t),s=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l}var t=.5;return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},u}},{}],332:[function(e,t,n){var r,i,o,a,s,l;r=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),o=e("../../core/console/print.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/dataTicks.coffee"),a=function(e){var t,n,o,a,u;if(i(e,{buffer:"size",mouse:!0}),n=e.x.domain.viz.concat(e.y.domain.viz),n.indexOf(void 0)>=0)return[];for(u=e.data.viz,o=0,a=u.length;a>o;o++)t=u[o],t.d3plus.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3plus.y+=e.axes.margin.top,"number"!=typeof e.size.value&&e.size.value?t.d3plus.r=e.axes.scale(r(e,t,e.size.value)):t.d3plus.r=e.axes.scale(0);return l(e),s(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)},a.fill=!0,a.requirements=["data","x","y"],a.scale=1.1,a.setup=function(e){return e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value)?e.self.y({scale:"discrete"}):void 0},a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../array/sort.coffee":36,"../../core/console/print.coffee":54,"../../core/fetch/value.coffee":69,"./helpers/graph/dataTicks.coffee":315,"./helpers/graph/draw.coffee":316}],333:[function(e,t,n){var r=e("../../core/fetch/value.coffee"),i=e("../../util/uniques.coffee"),o=e("../../util/copy.coffee"),a=e("../../color/random.coffee"),s=function(e){var t=i(e.data.viz,e.id.value,r,e),n=i(e.cols.value);n.indexOf("label")<0&&e.cols.index.value&&n.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/n.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var f=[],d={};return n.forEach(function(t,n){var r={d3plus:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:e.format.value(t)}};if(t==e.id.value&&(r.d3plus.color="#fff"),"label"==t&&(r.d3plus.label=!1,r.d3plus.color="#fff",r.d3plus.stroke="#fff"),f.push(r),"number"==e.data.keys[t]){var i=d3.extent(e.data.viz,function(e){return e[t]});i[0]==i[1]&&(i=[i[0]-1,i[1]]),d[t]=d3.scale.linear().domain(i).range([e.color.missing,a(t)])}else"boolean"==e.data.keys[t]&&(d[t]=function(n){return n?a(t):e.color.missing})}),e.data.viz.forEach(function(t,r){r+=1,n.forEach(function(n,i){var a=o(t);a.d3plus.id="d3p_"+a[e.id.value].toString().replace(/ /g,"_")+"_"+n,a.d3plus.x=l*i+l/2,a.d3plus.y=s*r+s/2,a.d3plus.width=l,a.d3plus.height=s,"label"==n&&(a.d3plus.shape="square",a.d3plus.color="#fff",f.push(a)),d3.keys(t).indexOf(n)>=0&&n in t&&(d[n]&&(a.d3plus.color=d[n](a[n])),a.d3plus.text=e.format.value(a[n]),"boolean"==e.data.keys[n]?a.d3plus.label=!1:"string"==e.data.keys[n]&&(a.d3plus.color=e.color.missing,a.d3plus.stroke="#fff",a.d3plus.shape="square"),f.push(a))})}),f};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.coffee":49,"../../core/fetch/value.coffee":69,"../../util/copy.coffee":209,"../../util/uniques.coffee":212}],334:[function(e,t,n){var r,i,o,a;r=e("../../core/data/threshold.js"),i=e("../../core/data/group.coffee"),o=e("../../object/merge.coffee"),a=function(e){var t,n,r,a,s,l,u;if(r=i(e,e.data.viz),n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return n=e.value-t.value,0===n?e.id<t.id:n}).nodes({name:"root",values:r}).filter(function(e){return!e.values&&e.area}),n.length){for(u=n[0];u.parent;)u=u.parent;for(l=[],a=0,s=n.length;s>a;a++)t=n[a],t.d3plus.d3plus=o(t.d3plus.d3plus,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3plus)}return l},a.filter=r,a.modes=["squarify","slice","dice","slice-dice"],a.requirements=["data","size"],a.shapes=["square"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a},{"../../core/data/group.coffee":59,"../../core/data/threshold.js":63,"../../object/merge.coffee":173}],335:[function(e,t,n){var r,i,o,a,s,l,u;r=e("../core/methods/attach.coffee"),i=e("./methods/helpers/axis.coffee"),a=e("./helpers/ui/message.js"),s=e("./helpers/drawSteps.js"),l=e("../core/console/print.coffee"),o=e("./helpers/container.coffee"),u=e("../object/validate.coffee"),t.exports=function(){var t;return t={g:{apps:{}},types:{area:e("./types/area.coffee"),bar:e("./types/bar.coffee"),bubbles:e("./types/bubbles.coffee"),box:e("./types/box.coffee"),chart:e("./types/deprecated/chart.coffee"),geo_map:e("./types/geo_map.coffee"),line:e("./types/line.coffee"),network:e("./types/network.js"),paths:e("./types/paths.coffee"),pie:e("./types/pie.coffee"),radar:e("./types/radar.coffee"),rings:e("./types/rings.js"),sankey:e("./types/sankey.coffee"),scatter:e("./types/scatter.coffee"),stacked:e("./types/area.coffee"),table:e("./types/table.js"),tree_map:e("./types/tree_map.coffee")}},t.self=function(e){return e.each(function(){var e,n,r,i,u,c,f;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),o(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,n=function(){f.length?i():t.dev.value&&(l.groupEnd(),l.timeEnd("total draw time"),l.log("\n"))},r=function(e,r){r=r||"function",e[r]instanceof Array?e[r].forEach(function(e){e(t,n)}):"function"==typeof e[r]&&e[r](t,n),e.wait||n()},i=function(){var i,o,s,u;u=f.shift(),s=t.g.message&&e===u.message,o=!("check"in u)||u.check,"function"==typeof o&&(o=o(t)),o?s?r(u):(t.dev.value&&(e!==!1&&l.groupEnd(),l.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,i=t.messages.value):(e=u.message,i=t.format.value(u.message)),t.draw.update?(a(t,i),t.error.value?r(u):setTimeout(function(){return r(u)},10)):r(u)):"otherwise"in u?t.error.value?r(u,"otherwise"):setTimeout(function(){return r(u,"otherwise")},10):n()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",f=s(t),i()}),t.self},r(t,{active:e("./methods/active.coffee"),aggs:e("./methods/aggs.coffee"),attrs:e("./methods/attrs.coffee"),axes:e("./methods/axes.coffee"),background:e("./methods/background.coffee"),"class":e("./methods/class.coffee"),color:e("./methods/color.coffee"),cols:e("./methods/cols.js"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),coords:e("./methods/coords.coffee"),csv:e("./methods/csv.coffee"),data:e("./methods/data.coffee"),depth:e("./methods/depth.coffee"),descs:e("./methods/descs.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.coffee"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),footer:e("./methods/footer.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),labels:e("./methods/labels.coffee"),legend:e("./methods/legend.coffee"),links:e("./methods/links.coffee"),margin:e("./methods/margin.coffee"),messages:e("./methods/messages.coffee"),mouse:e("./methods/mouse.coffee"),nodes:e("./methods/nodes.coffee"),order:e("./methods/order.coffee"),resize:e("./methods/resize.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),style:e("./methods/style.coffee"),temp:e("./methods/temp.coffee"),text:e("./methods/text.coffee"),time:e("./methods/time.coffee"),timeline:e("./methods/timeline.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),tooltip:e("./methods/tooltip.coffee"),total:e("./methods/total.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee"),x:i("x"),x2:i("x2"),y:i("y"),y2:i("y2"),zoom:e("./methods/zoom.js")}),t.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":81,"../object/validate.coffee":174,"./helpers/container.coffee":213,"./helpers/drawSteps.js":214,"./helpers/ui/message.js":248,"./methods/active.coffee":257,"./methods/aggs.coffee":258,"./methods/attrs.coffee":259,"./methods/axes.coffee":260,"./methods/background.coffee":261,"./methods/class.coffee":262,"./methods/color.coffee":263,"./methods/cols.js":264,"./methods/config.coffee":265,"./methods/container.coffee":266,"./methods/coords.coffee":267,"./methods/csv.coffee":268,"./methods/data.coffee":269,"./methods/depth.coffee":270,"./methods/descs.coffee":271,"./methods/dev.coffee":272,"./methods/draw.js":273,"./methods/edges.js":274,"./methods/error.coffee":275,"./methods/focus.coffee":276,"./methods/font.coffee":277,"./methods/footer.coffee":278,"./methods/format.coffee":279,"./methods/height.coffee":280,"./methods/helpers/axis.coffee":281,"./methods/history.coffee":282,"./methods/icon.coffee":283,"./methods/id.coffee":284,"./methods/labels.coffee":285,"./methods/legend.coffee":286,"./methods/links.coffee":287,"./methods/margin.coffee":288,"./methods/messages.coffee":289,"./methods/mouse.coffee":290,"./methods/nodes.coffee":291,"./methods/order.coffee":292,"./methods/resize.coffee":293,"./methods/shape.coffee":294,"./methods/size.coffee":295,"./methods/style.coffee":296,"./methods/temp.coffee":297,"./methods/text.coffee":298,"./methods/time.coffee":299,"./methods/timeline.coffee":300,"./methods/timing.coffee":301,"./methods/title.coffee":302,"./methods/tooltip.coffee":303,"./methods/total.coffee":304,"./methods/type.coffee":305,"./methods/ui.coffee":306,"./methods/width.coffee":307,"./methods/zoom.js":308,"./types/area.coffee":309,"./types/bar.coffee":310,"./types/box.coffee":311,"./types/bubbles.coffee":312,"./types/deprecated/chart.coffee":313,"./types/geo_map.coffee":314,"./types/line.coffee":324,"./types/network.js":325,"./types/paths.coffee":326,"./types/pie.coffee":327,"./types/radar.coffee":328,"./types/rings.js":329,"./types/sankey.coffee":330,"./types/scatter.coffee":332,"./types/table.js":333,"./types/tree_map.coffee":334}]},{},[165,164]),function(){"use strict";var e=this,t=e.Chart,n=function(e){this.canvas=e.canvas,this.ctx=e;var t=function(e,t){return e["offset"+t]?e["offset"+t]:document.defaultView.getComputedStyle(e).getPropertyValue(t)},n=this.width=t(e.canvas,"Width"),i=this.height=t(e.canvas,"Height");e.canvas.width=n,e.canvas.height=i;var n=this.width=e.canvas.width,i=this.height=e.canvas.height;return this.aspectRatio=this.width/this.height,r.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var r=n.helpers={},i=r.each=function(e,t,n){var r=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var i;for(i=0;i<e.length;i++)t.apply(n,[e[i],i].concat(r))}else for(var o in e)t.apply(n,[e[o],o].concat(r))},o=r.clone=function(e){var t={};return i(e,function(n,r){e.hasOwnProperty(r)&&(t[r]=n)}),t},a=r.extend=function(e){return i(Array.prototype.slice.call(arguments,1),function(t){i(t,function(n,r){t.hasOwnProperty(r)&&(e[r]=n)})}),e},s=r.merge=function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift({}),a.apply(null,e)},l=r.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},u=(r.where=function(e,t){var n=[];return r.each(e,function(e){t(e)&&n.push(e)}),n},r.findNextWhere=function(e,t,n){n||(n=-1);for(var r=n+1;r<e.length;r++){var i=e[r];if(t(i))return i}},r.findPreviousWhere=function(e,t,n){n||(n=e.length);for(var r=n-1;r>=0;r--){var i=e[r];if(t(i))return i}},r.inherits=function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.extend=u,e&&a(n.prototype,e),n.__super__=t.prototype,n}),c=r.noop=function(){},f=r.uid=function(){var e=0;return function(){return"chart-"+e++}}(),d=r.warn=function(e){window.console&&"function"==typeof window.console.warn&&void 0},h=r.amd="function"==typeof define&&define.amd,p=r.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},g=r.max=function(e){return Math.max.apply(Math,e)},v=r.min=function(e){return Math.min.apply(Math,e)},m=(r.cap=function(e,t,n){if(p(t)){if(e>t)return t}else if(p(n)&&n>e)return n;return e},r.getDecimalPlaces=function(e){return e%1!==0&&p(e)?e.toString().split(".")[1].length:0}),y=r.radians=function(e){return e*(Math.PI/180)},x=(r.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),o=2*Math.PI+Math.atan2(r,n);return 0>n&&0>r&&(o+=2*Math.PI),{angle:o,distance:i}},r.aliasPixel=function(e){return e%2===0?0:.5}),b=(r.splineCurve=function(e,t,n,r){var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),a=r*i/(i+o),s=r*o/(i+o);return{inner:{x:t.x-a*(n.x-e.x),y:t.y-a*(n.y-e.y)},outer:{x:t.x+s*(n.x-e.x),y:t.y+s*(n.y-e.y)}}},r.calculateOrderOfMagnitude=function(e){return Math.floor(Math.log(e)/Math.LN10)}),w=(r.calculateScaleRange=function(e,t,n,r,i){var o=2,a=Math.floor(t/(1.5*n)),s=o>=a,l=g(e),u=v(e);l===u&&(l+=.5,u>=.5&&!r?u-=.5:l+=.5);for(var c=Math.abs(l-u),f=b(c),d=Math.ceil(l/(1*Math.pow(10,f)))*Math.pow(10,f),h=r?0:Math.floor(u/(1*Math.pow(10,f)))*Math.pow(10,f),p=d-h,m=Math.pow(10,f),y=Math.round(p/m);(y>a||a>2*y)&&!s;)if(y>a)m*=2,
y=Math.round(p/m),y%1!==0&&(s=!0);else if(i&&f>=0){if(m/2%1!==0)break;m/=2,y=Math.round(p/m)}else m/=2,y=Math.round(p/m);return s&&(y=o,m=p/y),{steps:y,stepValue:m,min:h,max:h+y*m}},r.template=function(e,t){function n(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):r[e]=r[e];return t?n(t):n}if(e instanceof Function)return e(t);var r={};return n(e,t)}),_=(r.generateLabels=function(e,t,n,r){var o=new Array(t);return labelTemplateString&&i(o,function(t,i){o[i]=w(e,{value:n+r*(i+1)})}),o},r.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n)))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin(2*(1*e-t)*Math.PI/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.3*1.5),r<Math.abs(1)?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n):r*Math.pow(2,-10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-_.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*_.easeInBounce(2*e):.5*_.easeOutBounce(2*e-1)+.5}}),k=r.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),A=r.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),S=(r.animationLoop=function(e,t,n,r,i,o){var a=0,s=_[n]||_.linear,l=function(){a++;var n=a/t,u=s(n);e.call(o,u,n,a),r.call(o,u,n),t>a?o.animationFrame=k(l):i.apply(o)};k(l)},r.getRelativePosition=function(e){var t,n,r=e.originalEvent||e,i=e.currentTarget||e.srcElement,o=i.getBoundingClientRect();return r.touches?(t=r.touches[0].clientX-o.left,n=r.touches[0].clientY-o.top):(t=r.clientX-o.left,n=r.clientY-o.top),{x:t,y:n}},r.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}),z=r.removeEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=c},M=(r.bindEvents=function(e,t,n){e.events||(e.events={}),i(t,function(t){e.events[t]=function(){n.apply(e,arguments)},S(e.chart.canvas,t,e.events[t])})},r.unbindEvents=function(e,t){i(t,function(t,n){z(e.chart.canvas,n,t)})}),C=r.getMaximumWidth=function(e){var t=e.parentNode;return t.clientWidth},T=r.getMaximumHeight=function(e){var t=e.parentNode;return t.clientHeight},E=(r.getMaximumSize=r.getMaximumWidth,r.retinaScale=function(e){var t=e.ctx,n=e.canvas.width,r=e.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=n+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=n*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),j=r.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},D=r.fontString=function(e,t,n){return t+" "+e+"px "+n},O=r.longestText=function(e,t,n){e.font=t;var r=0;return i(n,function(t){var n=e.measureText(t).width;r=n>r?n:r}),r},N=r.drawRoundedRectangle=function(e,t,n,r,i,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath()};n.instances={},n.Type=function(e,t,r){this.options=t,this.chart=r,this.id=f(),n.instances[this.id]=this,t.responsive&&this.resize(),this.initialize.call(this,e)},a(n.Type.prototype,{initialize:function(){return this},clear:function(){return j(this.chart),this},stop:function(){return A(this.animationFrame),this},resize:function(e){this.stop();var t=this.chart.canvas,n=C(this.chart.canvas),r=this.options.maintainAspectRatio?n/this.chart.aspectRatio:T(this.chart.canvas);return t.width=this.chart.width=n,t.height=this.chart.height=r,E(this.chart),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(e){return e&&this.reflow(),this.options.animation&&!e?r.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),M(this,this.events);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,e.style.removeProperty?(e.style.removeProperty("width"),e.style.removeProperty("height")):(e.style.removeAttribute("width"),e.style.removeAttribute("height")),delete n.instances[this.id]},showTooltip:function(e,t){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(e){var t=!1;return e.length!==this.activeElements.length?t=!0:(i(e,function(e,n){e!==this.activeElements[n]&&(t=!0)},this),t)}.call(this,e);if(o||t){if(this.activeElements=e,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),e.length>0)if(this.datasets&&this.datasets.length>1){for(var a,s,u=this.datasets.length-1;u>=0&&(a=this.datasets[u].points||this.datasets[u].bars||this.datasets[u].segments,s=l(a,e[0]),-1===s);u--);var c=[],f=[],d=function(){var e,t,n,i,o,a=[],l=[],u=[];return r.each(this.datasets,function(t){e=t.points||t.bars||t.segments,e[s]&&e[s].hasValue()&&a.push(e[s])}),r.each(a,function(e){l.push(e.x),u.push(e.y),c.push(r.template(this.options.multiTooltipTemplate,e)),f.push({fill:e._saved.fillColor||e.fillColor,stroke:e._saved.strokeColor||e.strokeColor})},this),o=v(u),n=g(u),i=v(l),t=g(l),{x:i>this.chart.width/2?i:t,y:(o+n)/2}}.call(this,s);new n.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:f,legendColorBackground:this.options.multiTooltipKeyBackground,title:e[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else i(e,function(e){var t=e.tooltipPosition();new n.Tooltip({x:Math.round(t.x),y:Math.round(t.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,e),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(e){var t=this,r=function(){return t.apply(this,arguments)};if(r.prototype=o(t.prototype),a(r.prototype,e),r.extend=n.Type.extend,e.name||t.prototype.name){var i=e.name||t.prototype.name,l=n.defaults[t.prototype.name]?o(n.defaults[t.prototype.name]):{};n.defaults[i]=a(l,e.defaults),n.types[i]=r,n.prototype[i]=function(e,t){var o=s(n.defaults.global,n.defaults[i],t||{});return new r(e,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return t},n.Element=function(e){a(this,e),this.initialize.apply(this,arguments),this.save()},a(n.Element.prototype,{initialize:function(){},restore:function(e){return e?i(e,function(e){this[e]=this._saved[e]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(e){return i(e,function(e,t){this._saved[t]=this[t],this[t]=e},this),this},transition:function(e,t){return i(e,function(e,n){this[n]=(e-this._saved[n])*t+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),n.Element.extend=u,n.Point=n.Element.extend({display:!0,inRange:function(e,t){var n=this.hitDetectionRadius+this.radius;return Math.pow(e-this.x,2)+Math.pow(t-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.stroke()}}}),n.Arc=n.Element.extend({inRange:function(e,t){var n=r.getAngleFromPoint(this,{x:e,y:t}),i=n.angle>=this.startAngle&&n.angle<=this.endAngle,o=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return i&&o},tooltipPosition:function(){var e=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(e)*t,y:this.y+Math.sin(e)*t}},draw:function(e){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var e=this.ctx,t=this.width/2,n=this.x-t,r=this.x+t,i=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(n+=o,r-=o,i+=o),e.beginPath(),e.fillStyle=this.fillColor,e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.moveTo(n,this.base),e.lineTo(n,i),e.lineTo(r,i),e.lineTo(r,this.base),e.fill(),this.showStroke&&e.stroke()},height:function(){return this.base-this.y},inRange:function(e,t){return e>=this.x-this.width/2&&e<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var e=this.chart.ctx;e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,n=e.measureText(this.text).width+2*this.xPadding,r=this.fontSize+2*this.yPadding,i=r+this.caretHeight+t;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-i<0&&(this.yAlign="below");var o=this.x-n/2,a=this.y-i;if(e.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-t),e.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),e.closePath(),e.fill();break;case"below":a=this.y+t+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+t),e.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":o=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}N(e,o,a,n,r,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,o+n/2,a+r/2)}}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var e=this.ctx.measureText(this.title).width,t=O(this.ctx,this.font,this.labels)+this.fontSize+3,n=g([t,e]);this.width=n+2*this.xPadding;var r=this.height/2;this.y-r<0?this.y=r:this.y+r>this.chart.height&&(this.y=this.chart.height-r),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(e){var t=this.y-this.height/2+this.yPadding,n=e-1;return 0===e?t+this.titleFontSize/2:t+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{N(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var e=this.ctx;e.fillStyle=this.fillColor,e.fill(),e.closePath(),e.textAlign="left",e.textBaseline="middle",e.fillStyle=this.titleTextColor,e.font=this.titleFont,e.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),e.font=this.font,r.each(this.labels,function(t,n){e.fillStyle=this.textColor,e.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),e.fillStyle=this.legendColorBackground,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),e.fillStyle=this.legendColors[n].fill,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var e=m(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(w(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}));this.yLabelWidth=this.display&&this.showLabels?O(this.ctx,this.font,this.yLabels):0},addXLabel:function(e){this.xLabels.push(e),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var e,t=this.endPoint-this.startPoint;for(this.calculateYRange(t),this.buildYLabels(),this.calculateXLabelRotation();t>this.endPoint-this.startPoint;)t=this.endPoint-this.startPoint,e=this.yLabelWidth,this.calculateYRange(t),this.buildYLabels(),e<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t,n=this.ctx.measureText(this.xLabels[0]).width,r=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=r/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var i,o=O(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)i=Math.cos(y(this.xLabelRotation)),e=i*n,t=i*r,e+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=i*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(e){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(e-this.min)},calculateX:function(e){var t=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=t/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),r=n*e+this.xScalePaddingLeft;return this.offsetGridLines&&(r+=n/2),Math.round(r)},update:function(e){r.extend(this,e),this.fit()},draw:function(){var e=this.ctx,t=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(e.fillStyle=this.textColor,e.font=this.font,i(this.yLabels,function(i,o){var a=this.endPoint-t*o,s=Math.round(a),l=this.showHorizontalLines;e.textAlign="right",e.textBaseline="middle",this.showLabels&&e.fillText(i,n-10,a),0!==o||l||(l=!0),l&&e.beginPath(),o>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),s+=r.aliasPixel(e.lineWidth),l&&(e.moveTo(n,s),e.lineTo(this.width,s),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(n-5,s),e.lineTo(n,s),e.stroke(),e.closePath()},this),i(this.xLabels,function(t,n){var r=this.calculateX(n)+x(this.lineWidth),i=this.calculateX(n-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==n||a||(a=!0),a&&e.beginPath(),n>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),a&&(e.moveTo(i,this.endPoint),e.lineTo(i,this.startPoint-3),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(i,this.endPoint),e.lineTo(i,this.endPoint+5),e.stroke(),e.closePath(),e.save(),e.translate(r,o?this.endPoint+12:this.endPoint+8),e.rotate(-1*y(this.xLabelRotation)),e.font=this.font,e.textAlign=o?"right":"center",e.textBaseline=o?"middle":"top",e.fillText(t,0,0),e.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=v([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(e){var t=this.drawingArea/(this.max-this.min);return(e-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var e=m(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(w(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var e,t,n,r,i,o,a,s,l,u,c,f,d=v([this.height/2-this.pointLabelFontSize-5,this.width/2]),h=this.width,g=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t=0;t<this.valuesCount;t++)e=this.getPointPosition(t,d),n=this.ctx.measureText(w(this.templateString,{value:this.labels[t]})).width+5,0===t||t===this.valuesCount/2?(r=n/2,e.x+r>h&&(h=e.x+r,i=t),e.x-r<g&&(g=e.x-r,a=t)):t<this.valuesCount/2?e.x+n>h&&(h=e.x+n,i=t):t>this.valuesCount/2&&e.x-n<g&&(g=e.x-n,a=t);l=g,u=Math.ceil(h-this.width),o=this.getIndexAngle(i),s=this.getIndexAngle(a),c=u/Math.sin(o+Math.PI/2),f=l/Math.sin(s+Math.PI/2),c=p(c)?c:0,f=p(f)?f:0,this.drawingArea=d-(f+c)/2,this.setCenterPoint(f,c)},setCenterPoint:function(e,t){var n=this.width-t-this.drawingArea,r=e+this.drawingArea;this.xCenter=(r+n)/2,this.yCenter=this.height/2},getIndexAngle:function(e){var t=2*Math.PI/this.valuesCount;return e*t-Math.PI/2},getPointPosition:function(e,t){var n=this.getIndexAngle(e);return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},draw:function(){if(this.display){var e=this.ctx;if(i(this.yLabels,function(t,n){if(n>0){var r,i=n*(this.drawingArea/this.steps),o=this.yCenter-i;if(this.lineWidth>0)if(e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,this.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,i,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var a=0;a<this.valuesCount;a++)r=this.getPointPosition(a,this.calculateCenterOffset(this.min+n*this.stepValue)),0===a?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y);e.closePath(),e.stroke()}if(this.showLabels){if(e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=e.measureText(t).width;e.fillStyle=this.backdropColor,e.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.fontColor,e.fillText(t,this.xCenter,o)}}},this),!this.lineArc){e.lineWidth=this.angleLineWidth,e.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){if(this.angleLineWidth>0){var n=this.getPointPosition(t,this.calculateCenterOffset(this.max));e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(n.x,n.y),e.stroke(),e.closePath()}var r=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);e.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,s=a/2,l=s>t||t>o-s,u=t===s||t===o-s;e.textAlign=0===t?"center":t===a?"center":a>t?"left":"right",e.textBaseline=u?"middle":l?"bottom":"top",e.fillText(this.labels[t],r.x,r.y)}}}}}),r.addEvent(window,"resize",function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){i(n.instances,function(e){e.options.responsive&&e.resize(e.render,!0)})},50)}}()),h?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),e.Chart=n,n.noConflict=function(){return e.Chart=t,n}}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,r={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Bar",defaults:r,initialize:function(e){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(e,t,n){var i=this.calculateBaseWidth(),o=this.calculateX(n)-i/2,a=this.calculateBarWidth(e);return o+a*t+t*r.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(e){var t=this.calculateBaseWidth()-(e-1)*r.barDatasetSpacing;return t/e}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getBarsAtEvent(e):[];this.eachBars(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(e.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(r),n.each(t.data,function(n,i){r.bars.push(new this.BarClass({value:n,label:e.labels[i],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(e.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(e,t,r){n.extend(e,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.endPoint}),e.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachBars(function(e){e.save()}),this.render()},eachBars:function(e){n.each(this.datasets,function(t,r){n.each(t.bars,e,this,r)},this)},getBarsAtEvent:function(e){for(var t,r=[],i=n.getRelativePosition(e),o=function(e){r.push(e.bars[t])},a=0;a<this.datasets.length;a++)for(t=0;t<this.datasets[a].bars.length;t++)if(this.datasets[a].bars[t].inRange(i.x,i.y))return n.each(this.datasets,o),r;return r},buildScale:function(e){var t=this,r=function(){var e=[];return t.eachBars(function(t){e.push(t.value)}),e},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=n.calculateScaleRange(r(),e,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,t)},xLabels:e,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(i)},addData:function(e,t){n.each(e,function(e,n){this.datasets[n].bars.push(new this.BarClass({value:e,label:t,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(e){e.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var e=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear(),this.chart.ctx,this.scale.draw(t),n.each(this.datasets,function(e,r){n.each(e.bars,function(e,n){e.hasValue()&&(e.base=this.scale.endPoint,e.transition({x:this.scale.calculateBarX(this.datasets.length,r,n),y:this.scale.calculateY(e.value),width:this.scale.calculateBarWidth(this.datasets.length)},t).draw())},this)},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,r={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:r,initialize:function(e){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];n.each(this.segments,function(e){e.restore(["fillColor"])}),n.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.calculateTotal(e),n.each(e,function(e,t){this.addData(e,t,!0)},this),this.render()},getSegmentsAtEvent:function(e){var t=[],r=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(r.x,r.y)&&t.push(e)},this),t},addData:function(e,t,n){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),label:e.label})),n||(this.reflow(),this.update())},calculateCircumference:function(e){return 2*Math.PI*(Math.abs(e)/this.total)},calculateTotal:function(e){this.total=0,n.each(e,function(e){this.total+=Math.abs(e.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(e){e.restore(["fillColor"])}),n.each(this.segments,function(e){e.save()}),this.render()},removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(e){e.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(e){var t=e?e:1;this.clear(),n.each(this.segments,function(e,n){e.transition({circumference:this.calculateCircumference(e.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},t),e.endAngle=e.startAngle+e.circumference,e.draw(),0===n&&(e.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=e.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:n.merge(r,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,r={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
};t.Type.extend({name:"Line",defaults:r,initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(e){return Math.pow(e-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),n.each(e.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),n.each(t.data,function(n,i){r.points.push(new this.PointClass({value:n,label:e.labels[i],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(e.labels),this.eachPoints(function(e,t){n.extend(e,{x:this.scale.calculateX(t),y:this.scale.endPoint}),e.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachPoints(function(e){e.save()}),this.render()},eachPoints:function(e){n.each(this.datasets,function(t){n.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=[],r=n.getRelativePosition(e);return n.each(this.datasets,function(e){n.each(e.points,function(e){e.inRange(r.x,r.y)&&t.push(e)})},this),t},buildScale:function(e){var r=this,i=function(){var e=[];return r.eachPoints(function(t){e.push(t.value)}),e},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=n.calculateScaleRange(i(),e,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,t)},xLabels:e,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(o)},addData:function(e,t){n.each(e,function(e,n){this.datasets[n].points.push(new this.PointClass({value:e,label:t,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(e){e.points.shift()},this),this.update()},reflow:function(){var e=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear();var r=this.chart.ctx,i=function(e){return null!==e.value},o=function(e,t,r){return n.findNextWhere(t,i,r)||e},a=function(e,t,r){return n.findPreviousWhere(t,i,r)||e};this.scale.draw(t),n.each(this.datasets,function(e){var s=n.where(e.points,i);n.each(e.points,function(e,n){e.hasValue()&&e.transition({y:this.scale.calculateY(e.value),x:this.scale.calculateX(n)},t)},this),this.options.bezierCurve&&n.each(s,function(e,t){var r=t>0&&t<s.length-1?this.options.bezierCurveTension:0;e.controlPoints=n.splineCurve(a(e,s,t),e,o(e,s,t),r),e.controlPoints.outer.y>this.scale.endPoint?e.controlPoints.outer.y=this.scale.endPoint:e.controlPoints.outer.y<this.scale.startPoint&&(e.controlPoints.outer.y=this.scale.startPoint),e.controlPoints.inner.y>this.scale.endPoint?e.controlPoints.inner.y=this.scale.endPoint:e.controlPoints.inner.y<this.scale.startPoint&&(e.controlPoints.inner.y=this.scale.startPoint)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=e.strokeColor,r.beginPath(),n.each(s,function(e,t){if(0===t)r.moveTo(e.x,e.y);else if(this.options.bezierCurve){var n=a(e,s,t);r.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y)}else r.lineTo(e.x,e.y)},this),r.stroke(),this.options.datasetFill&&s.length>0&&(r.lineTo(s[s.length-1].x,this.scale.endPoint),r.lineTo(s[0].x,this.scale.endPoint),r.fillStyle=e.fillColor,r.closePath(),r.fill()),n.each(s,function(e){e.draw()})},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,r={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"PolarArea",defaults:r,initialize:function(e){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:e.length}),this.updateScaleRange(e),this.scale.update(),n.each(e,function(e,t){this.addData(e,t,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];n.each(this.segments,function(e){e.restore(["fillColor"])}),n.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.render()},getSegmentsAtEvent:function(e){var t=[],r=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(r.x,r.y)&&t.push(e)},this),t},addData:function(e,t,n){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:e.color,highlightColor:e.highlight||e.color,label:e.label,value:e.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(e.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},calculateTotal:function(e){this.total=0,n.each(e,function(e){this.total+=e.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(e){var t=[];n.each(e,function(e){t.push(e.value)});var r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(t,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(e){e.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(e){e.update({outerRadius:this.scale.calculateCenterOffset(e.value)})},this)},draw:function(e){var t=e||1;this.clear(),n.each(this.segments,function(e,n){e.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(e.value)},t),e.endAngle=e.startAngle+e.circumference,0===n&&(e.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=e.endAngle),e.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(e),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),n.each(e.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r),n.each(t.data,function(n,i){var o;this.scale.animation||(o=this.scale.getPointPosition(i,this.scale.calculateCenterOffset(n))),r.points.push(new this.PointClass({value:n,label:e.labels[i],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(e){n.each(this.datasets,function(t){n.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=n.getRelativePosition(e),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},t),i=2*Math.PI/this.scale.valuesCount,o=Math.round((r.angle-1.5*Math.PI)/i),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(e){a.push(e.points[o])}),a},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(e){var t=function(){var t=[];return n.each(e,function(e){e.data?t=t.concat(e.data):n.each(e.points,function(e){t.push(e.value)})}),t}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(t,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(e,t){this.scale.valuesCount++,n.each(e,function(e,n){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(e));this.datasets[n].points.push(new this.PointClass({value:e,label:t,x:r.x,y:r.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(t),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(e){e.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(e){e.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(e){var t=e||1,r=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(e){n.each(e.points,function(e,n){e.hasValue()&&e.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e.value)),t)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=e.strokeColor,r.beginPath(),n.each(e.points,function(e,t){0===t?r.moveTo(e.x,e.y):r.lineTo(e.x,e.y)},this),r.closePath(),r.stroke(),r.fillStyle=e.fillColor,r.fill(),n.each(e.points,function(e){e.hasValue()&&e.draw()})},this)}})}.call(this),!function(e){function t(e,t){this.element=t,this.data=jQuery.extend(!0,n,e),this.init()}var n={size:60,borderSize:10,colorCircle:"gray",background:"white",fontFamily:"sans-serif",fontColor:"#333333",fontSize:16,delayToFadeIn:0,delayToFadeOut:0,reverseLoading:!1,reverseRotation:!1,duration:{hours:0,minutes:0,seconds:10},beforeStart:function(){},end:function(){}};e.fn.circularCountDown=function(n){new t(n,e(this))},t.prototype={init:function(){this.formatData(),this.draw(),this.start()},start:function(){"function"==typeof this.data.beforeStart&&this.data.beforeStart(this),this.show(),this.starDecrementTimeEvent();var e=this.getFormattedTimeByCircle();this.animate(e)},animate:function(e){var t=this;t.data.reverseLoading?t.rotate(t.circlelRight,180,360,e,function(){t.wrapperCircles.css("clip","rect(0px, "+t.data.size/2+"px, "+t.data.size+"px, 0px)"),t.rotate(t.circlelLeft,0,180,e),t.rotate(t.circlelRight,0,180,e)}):(t.wrapperCircles.css("clip","rect(0px, "+t.data.size+"px, "+t.data.size+"px, "+t.data.size/2+"px)"),t.rotate(t.circlelRight,0,180,e,function(){t.wrapperCircles.css("clip","rect(auto, auto, auto, auto)"),t.rotate(t.circlelLeft,180,360,e)}))},formatData:function(){this.time=this.data.duration.seconds+60*this.data.duration.minutes+3600*this.data.duration.hours,this.data.size=parseInt(this.data.size),this.data.borderSize=parseInt(this.data.borderSize),this.data.borderSize%2!=0&&this.data.borderSize++,this.data.size%2!=0&&this.data.size++},draw:function(){this.hide(),this.circlelLeft=this.drawCircle().addClass("coutndown-circle-left"),this.circlelRight=this.drawCircle().addClass("coutndown-circle-right"),this.wrapperCircles=e("<div>").addClass("coutndown-wrapper").css({width:this.data.size+"px",height:this.data.size+"px",position:"absolute"}).append(this.circlelLeft).append(this.circlelRight),this.wrapperTime=this.drawTime(),this.element.css({position:"relative","box-sizing":"content-box"}).append(this.wrapperCircles).append(this.wrapperTime),this.setTime(this.getStringTime(this.time))},drawCircle:function(){var t=this.data.size-2*this.data.borderSize;return t+="px",e("<div>").addClass("coutndown-circle").css({width:t,height:t,border:this.data.borderSize+"px solid "+this.data.colorCircle,"-moz-border-radius":this.data.size+"px","-webkit-border-radius":this.data.size+"px","-o-border-radius":this.data.size+"px","-ms-border-radius":this.data.size+"px","border-radius":this.data.size+"px","box-sizing":"content-box","background-color":this.data.background,position:"absolute",clip:"rect(0px, "+this.data.size/2+"px, "+this.data.size+"px, 0px)"})},rotate:function(t,n,r,i,o){e({deg:n}).animate({deg:r},{duration:i,easing:"linear",step:function(e){t.css({"-moz-transform":"rotate("+e+"deg)","-webkit-transform":"rotate("+e+"deg)","-o-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"})},complete:o||e.noop})},hide:function(){this.element.fadeOut(this.data.delayToFadeOut),this.visible=!1},show:function(){this.element.fadeIn(this.data.delayToFadeIn),this.visible=!0},isVisible:function(){return this.visible},getStringTime:function(e){var t=this.secondsToTime(e);return t.h>0?this.addDigit(t.h)+":"+this.addDigit(t.m)+":"+this.addDigit(t.s):t.m>0?this.addDigit(t.m)+":"+this.addDigit(t.s):this.addDigit(t.s)},addDigit:function(e){return("0"+e).slice(-2)},secondsToTime:function(e){var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),i=n%60,o=Math.ceil(i);return{h:t,m:r,s:o}},getFormattedTimeByCircle:function(){var e=this.time/2*1e3;return e%2!=0&&e++,e},starDecrementTimeEvent:function(){var e=this;this.decrementTimeEvent=setInterval(function(){e.time-=1,e.setTime(e.getStringTime(e.time)),e.time<=0&&(e.time=0,e.stopDecrementTimeEvent(),"function"==typeof e.data.end&&e.data.end(e))},1e3)},stopDecrementTimeEvent:function(){clearInterval(this.decrementTimeEvent)},drawTime:function(){return e("<div>").addClass("coutndown-wrapper-time").css({position:"absolute",height:this.data.size+"px",width:this.data.size+"px","line-height":this.data.size+"px","text-align":"center","font-size":this.data.fontSize+"px","font-family":this.data.fontFamily,color:this.data.fontColor})},setTime:function(e){this.wrapperTime.html(e)},destroy:function(){this.hide(),this.element.html("").attr("style",null),this.circlelLeft=null,this.circlelRight=null,this.wrapperCircles=null,this.element=null,this.data=n}}}(jQuery);var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,g,v,m,y,x,b,w,_,k,A,S,z,M,C,T,E,j,D,O,N,P,F,I,R,L,B,q,U,V,$,H,Y,W,X,J=null,G=0,Q=0,Z=null,K=null,ee=[],te=null,ne=0,re=0,ie=0,oe=0,ae=0,se=0,le=[],ue=[],ce=[],fe=null,de=null,he=0,pe=0,ge=0,ve=0,me=!1,ye=!1,xe=!1,be=[],we=null,_e=null,ke=null,Ae=null,Se=null,ze=null,Me=null,Ce=null,Te=null,Ee=!1,je=!1,De="cell",Oe={div:[],cname:"redips-only",other:"deny"},Ne={action:"deny",cname:"redips-mark",exception:[]},Pe={},Fe={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1};return n=function(){return!1},e=function(e){var t,n,r,i,o;for(le.length=0,i=void 0===e?fe.getElementsByTagName("table"):document.querySelectorAll(e),t=e=0;e<i.length;e++)if(!("redips_clone"===i[e].parentNode.id||-1<i[e].className.indexOf("redips-nolayout"))){n=i[e].parentNode,r=0;do"TD"===n.nodeName&&r++,n=n.parentNode;while(n&&n!==fe);for(le[t]=i[e],le[t].redips||(le[t].redips={}),le[t].redips.container=fe,le[t].redips.nestedLevel=r,le[t].redips.idx=t,be[t]=0,r=le[t].getElementsByTagName("td"),n=0,o=!1;n<r.length;n++)if(1<r[n].rowSpan){o=!0;break}le[t].redips.rowspan=o,t++}for(e=0,i=H=1;e<le.length;e++)if(0===le[e].redips.nestedLevel){for(le[e].redips.nestedGroup=i,le[e].redips.sort=100*H,n=le[e].getElementsByTagName("table"),t=0;t<n.length;t++)-1<n[t].className.indexOf("redips-nolayout")||(n[t].redips.nestedGroup=i,n[t].redips.sort=100*H+n[t].redips.nestedLevel);i++,H++}},r=function(t){var n,r,i=t||window.event;if(!0===this.redips.animated)return!0;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),ye=i.shiftKey,t=i.which?i.which:i.button,z(i)||!i.touches&&1!==t)return!0;if(window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(l){}return i.touches?(t=he=i.touches[0].clientX,r=pe=i.touches[0].clientY):(t=he=i.clientX,r=pe=i.clientY),ge=t,ve=r,me=!1,REDIPS.drag.objOld=je=Ee||this,REDIPS.drag.obj=Ee=this,xe=-1<Ee.className.indexOf("redips-clone"),REDIPS.drag.tableSort&&o(Ee),fe!==Ee.redips.container&&(fe=Ee.redips.container,e()),-1===Ee.className.indexOf("row")?REDIPS.drag.mode=De="cell":(REDIPS.drag.mode=De="row",REDIPS.drag.obj=Ee=L(Ee)),x(),xe||"cell"!==De||(Ee.style.zIndex=999),we=Ae=Me=null,p(),ke=_e=we,ze=Se=Ae,Te=Ce=Me,REDIPS.drag.td.source=Pe.source=C("TD",Ee),REDIPS.drag.td.current=Pe.current=Pe.source,REDIPS.drag.td.previous=Pe.previous=Pe.source,"cell"===De?REDIPS.drag.event.clicked(Pe.current):REDIPS.drag.event.rowClicked(Pe.current),(null===we||null===Ae||null===Me)&&(p(),ke=_e=we,ze=Se=Ae,Te=Ce=Me,null===we||null===Ae||null===Me)||(Y=W=!1,REDIPS.event.add(document,"mousemove",s),REDIPS.event.add(document,"touchmove",s),REDIPS.event.add(document,"mouseup",a),REDIPS.event.add(document,"touchend",a),Ee.setCapture&&Ee.setCapture(),null!==we&&null!==Ae&&null!==Me&&($=m(we,Ae,Me)),n=M(le[ke],"position"),"fixed"!==n&&(n=M(le[ke].parentNode,"position")),n=y(Ee,n),J=[r-n[0],n[1]-t,n[2]-r,t-n[3]],fe.onselectstart=function(e){if(i=e||window.event,!z(i))return i.shiftKey&&document.selection.clear(),!1},!1)},i=function(e){REDIPS.drag.event.dblClicked()},o=function(e){var t;for(t=C("TABLE",e).redips.nestedGroup,e=0;e<le.length;e++)le[e].redips.nestedGroup===t&&(le[e].redips.sort=100*H+le[e].redips.nestedLevel);le.sort(function(e,t){return t.redips.sort-e.redips.sort}),H++},L=function(e,t){var n,r,i,o,a,s;if("DIV"===e.nodeName)return o=e,e=C("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=o,e;for(r=e,void 0===r.redips&&(r.redips={}),e=C("TABLE",e),xe&&W&&(o=r.redips.div,o.className=U(o.className.replace("redips-clone",""))),n=e.cloneNode(!0),xe&&W&&(o.className+=" redips-clone"),i=n.rows.length-1,o="animated"!==t||0===i,a=i;0<=a;a--)if(a!==r.rowIndex){if(!0===o&&void 0===t)for(i=n.rows[a],s=0;s<i.cells.length;s++)if(-1<i.cells[s].className.indexOf("redips-rowhandler")){o=!1;break}n.deleteRow(a)}return W||(r.redips.emptyRow=o),n.redips={},n.redips.container=e.redips.container,n.redips.sourceRow=r,q(r,n.rows[0]),A(r,n.rows[0]),document.getElementById("redips_clone").appendChild(n),r=y(r,"fixed"),n.style.position="fixed",n.style.top=r[0]+"px",n.style.left=r[3]+"px",n.style.width=r[1]-r[3]+"px",n},B=function(t,n,r){var i,o,a,s,l,u,c,f,d=!1;f=function(e){var t;void 0!==e.redips&&e.redips.emptyRow?R(e,"empty",REDIPS.drag.style.rowEmptyColor):(t=C("TABLE",e),t.deleteRow(e.rowIndex))},void 0===r?r=Ee:d=!0,i=r.redips.sourceRow,o=i.rowIndex,a=C("TABLE",i),s=i.parentNode,t=le[t],n>t.rows.length-1&&(n=t.rows.length-1),l=t.rows[n],u=n,c=l.parentNode,n=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),!1!==REDIPS.drag.event.rowDroppedBefore(a,o)&&(!d&&-1<Pe.target.className.indexOf(REDIPS.drag.trash.className)?W?REDIPS.drag.event.rowDeleted():REDIPS.drag.trash.questionRow?confirm(REDIPS.drag.trash.questionRow)?(f(i),REDIPS.drag.event.rowDeleted()):(delete je.redips.emptyRow,REDIPS.drag.event.rowUndeleted()):(f(i),REDIPS.drag.event.rowDeleted()):(u<t.rows.length?we===ke?o>u?c.insertBefore(n,l):c.insertBefore(n,l.nextSibling):"after"===REDIPS.drag.rowDropMode?c.insertBefore(n,l.nextSibling):c.insertBefore(n,l):(c.appendChild(n),l=t.rows[0]),l&&l.redips&&l.redips.emptyRow?t.deleteRow(l.rowIndex):"overwrite"===REDIPS.drag.rowDropMode?f(l):"switch"!==REDIPS.drag.rowDropMode||W||(s.insertBefore(l,i),void 0!==i.redips&&delete i.redips.emptyRow),!d&&W||f(i),delete n.redips.emptyRow,d||REDIPS.drag.event.rowDropped(n,a,o)),0<n.getElementsByTagName("table").length&&e())},q=function(e,t){var n,r,i,o=[],a=[];for(o[0]=e.getElementsByTagName("input"),o[1]=e.getElementsByTagName("textarea"),o[2]=e.getElementsByTagName("select"),a[0]=t.getElementsByTagName("input"),a[1]=t.getElementsByTagName("textarea"),a[2]=t.getElementsByTagName("select"),n=0;n<o.length;n++)for(r=0;r<o[n].length;r++)switch(i=o[n][r].type){case"text":case"textarea":case"password":a[n][r].value=o[n][r].value;break;case"radio":case"checkbox":a[n][r].checked=o[n][r].checked;break;case"select-one":a[n][r].selectedIndex=o[n][r].selectedIndex;break;case"select-multiple":for(i=0;i<o[n][r].options.length;i++)a[n][r].options[i].selected=o[n][r].options[i].selected}},a=function(t){var n,r,i,o=t||window.event;if(t=o.clientX,i=o.clientY,ae=se=0,Ee.releaseCapture&&Ee.releaseCapture(),REDIPS.event.remove(document,"mousemove",s),REDIPS.event.remove(document,"touchmove",s),REDIPS.event.remove(document,"mouseup",a),REDIPS.event.remove(document,"touchend",a),fe.onselectstart=null,c(Ee),Z=document.documentElement.scrollWidth,K=document.documentElement.scrollHeight,ae=se=0,!W||"cell"!==De||null!==we&&null!==Ae&&null!==Me)if(null===we||null===Ae||null===Me)REDIPS.drag.event.notMoved();else{if(we<le.length?(o=le[we],REDIPS.drag.td.target=Pe.target=o.rows[Ae].cells[Me],v(we,Ae,Me,$),n=we,r=Ae):null===_e||null===Se||null===Ce?(o=le[ke],REDIPS.drag.td.target=Pe.target=o.rows[ze].cells[Te],v(ke,ze,Te,$),n=ke,r=ze):(o=le[_e],REDIPS.drag.td.target=Pe.target=o.rows[Se].cells[Ce],v(_e,Se,Ce,$),n=_e,r=Se),"row"===De)if(Y)if(ke===n&&ze===r){for(o=Ee.getElementsByTagName("tr")[0],je.style.backgroundColor=o.style.backgroundColor,t=0;t<o.cells.length;t++)je.cells[t].style.backgroundColor=o.cells[t].style.backgroundColor;Ee.parentNode.removeChild(Ee),delete je.redips.emptyRow,W?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(Pe.target)}else B(n,r);else REDIPS.drag.event.rowNotMoved();else if(W||me)if(W&&ke===we&&ze===Ae&&Te===Me)Ee.parentNode.removeChild(Ee),--ue[je.id],REDIPS.drag.event.notCloned();else if(W&&!1===REDIPS.drag.clone.drop&&(t<o.redips.offset[3]||t>o.redips.offset[1]||i<o.redips.offset[0]||i>o.redips.offset[2]))Ee.parentNode.removeChild(Ee),--ue[je.id],REDIPS.drag.event.notCloned();else if(-1<Pe.target.className.indexOf(REDIPS.drag.trash.className))Ee.parentNode.removeChild(Ee),REDIPS.drag.trash.question?setTimeout(function(){confirm(REDIPS.drag.trash.question)?u():(W||(le[ke].rows[ze].cells[Te].appendChild(Ee),x()),REDIPS.drag.event.undeleted())},20):u();else if("switch"===REDIPS.drag.dropMode)if(t=REDIPS.drag.event.droppedBefore(Pe.target),!1===t)l(!1);else{for(Ee.parentNode.removeChild(Ee),o=Pe.target.getElementsByTagName("div"),n=o.length,t=0;t<n;t++)void 0!==o[0]&&(REDIPS.drag.objOld=je=o[0],Pe.source.appendChild(je),f(je));l(),n&&REDIPS.drag.event.switched()}else"overwrite"===REDIPS.drag.dropMode?(t=REDIPS.drag.event.droppedBefore(Pe.target),!1!==t&&j(Pe.target)):t=REDIPS.drag.event.droppedBefore(Pe.target),l(t);else REDIPS.drag.event.notMoved();"cell"===De&&0<Ee.getElementsByTagName("table").length&&e(),x(),REDIPS.drag.event.finish()}else Ee.parentNode.removeChild(Ee),--ue[je.id],REDIPS.drag.event.notCloned();_e=Se=Ce=null},l=function(e){var t,n=null;if(!1!==e){if(!0===Fe.sendBack){for(e=Pe.target.getElementsByTagName("DIV"),t=0;t<e.length;t++)if(Ee!==e[t]&&0===Ee.id.indexOf(e[t].id)){n=e[t];break}if(n)return S(n,1),void Ee.parentNode.removeChild(Ee)}"shift"!==REDIPS.drag.dropMode||!V(Pe.target)&&"always"!==REDIPS.drag.shift.after||D(Pe.source,Pe.target),"top"===REDIPS.drag.multipleDrop&&Pe.target.hasChildNodes()?Pe.target.insertBefore(Ee,Pe.target.firstChild):Pe.target.appendChild(Ee),f(Ee),REDIPS.drag.event.dropped(Pe.target),W&&(REDIPS.drag.event.clonedDropped(Pe.target),S(je,-1))}else W&&Ee.parentNode&&Ee.parentNode.removeChild(Ee)},f=function(e,t){!1===t?(e.onmousedown=null,e.ontouchstart=null,e.ondblclick=null):(e.onmousedown=r,e.ontouchstart=r,e.ondblclick=i)},c=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},u=function(){var e;if(W&&S(je,-1),"shift"===REDIPS.drag.dropMode&&("delete"===REDIPS.drag.shift.after||"always"===REDIPS.drag.shift.after)){switch(REDIPS.drag.shift.mode){case"vertical2":e="lastInColumn";break;case"horizontal2":e="lastInRow";break;default:e="last"}D(Pe.source,T(e,Pe.source)[2])}REDIPS.drag.event.deleted(W)},s=function(e){e=e||window.event;var t,n,r,i,o=REDIPS.drag.scroll.bound;if(e.touches?(n=he=e.touches[0].clientX,r=pe=e.touches[0].clientY):(n=he=e.clientX,r=pe=e.clientY),t=Math.abs(ge-n),i=Math.abs(ve-r),Y||("cell"===De&&(xe||!0===REDIPS.drag.clone.keyDiv&&ye)?(REDIPS.drag.objOld=je=Ee,REDIPS.drag.obj=Ee=k(Ee,!0),W=!0,REDIPS.drag.event.cloned()):("row"===De&&((xe||!0===REDIPS.drag.clone.keyRow&&ye)&&(W=!0),REDIPS.drag.objOld=je=Ee,REDIPS.drag.obj=Ee=L(Ee),Ee.style.zIndex=999),Ee.setCapture&&Ee.setCapture(),Ee.style.position="fixed",x(),p(),"row"===De&&(W?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved())),g(),n>G-J[1]&&(Ee.style.left=G-(J[1]+J[3])+"px"),r>Q-J[2]&&(Ee.style.top=Q-(J[0]+J[2])+"px")),Y=!0,"cell"===De&&(7<t||7<i)&&!me&&(me=!0,g(),REDIPS.drag.event.moved(W)),n>J[3]&&n<G-J[1]&&(Ee.style.left=n-J[3]+"px"),r>J[0]&&r<Q-J[2]&&(Ee.style.top=r-J[0]+"px"),n<de[1]&&n>de[3]&&r<de[2]&&r>de[0]&&0===ae&&0===se&&(ce.containTable||n<ce[3]||n>ce[1]||r<ce[0]||r>ce[2])&&(p(),d()),REDIPS.drag.scroll.enable)for(ne=o-(G/2>n?n-J[3]:G-n-J[1]),0<ne?(ne>o&&(ne=o),t=b()[0],ne*=n<G/2?-1:1,0>ne&&0>=t||0<ne&&t>=Z-G||0!==ae++||(REDIPS.event.remove(window,"scroll",x),w(window))):ne=0,re=o-(Q/2>r?r-J[0]:Q-r-J[2]),0<re?(re>o&&(re=o),t=b()[1],re*=r<Q/2?-1:1,0>re&&0>=t||0<re&&t>=K-Q||0!==se++||(REDIPS.event.remove(window,"scroll",x),_(window))):re=0,i=0;i<ee.length;i++){if(t=ee[i],t.autoscroll&&n<t.offset[1]&&n>t.offset[3]&&r<t.offset[2]&&r>t.offset[0]){ie=o-(t.midstX>n?n-J[3]-t.offset[3]:t.offset[1]-n-J[1]),0<ie?(ie>o&&(ie=o),ie*=n<t.midstX?-1:1,0===ae++&&(REDIPS.event.remove(t.div,"scroll",x),w(t.div))):ie=0,oe=o-(t.midstY>r?r-J[0]-t.offset[0]:t.offset[2]-r-J[2]),0<oe?(oe>o&&(oe=o),oe*=r<t.midstY?-1:1,0===se++&&(REDIPS.event.remove(t.div,"scroll",x),_(t.div))):oe=0;break}ie=oe=0}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},d=function(){we<le.length&&(we!==_e||Ae!==Se||Me!==Ce)&&(null!==_e&&null!==Se&&null!==Ce&&(v(_e,Se,Ce,$),REDIPS.drag.td.previous=Pe.previous=le[_e].rows[Se].cells[Ce],REDIPS.drag.td.current=Pe.current=le[we].rows[Ae].cells[Me],"switching"===REDIPS.drag.dropMode&&"cell"===De&&(E(Pe.current,Pe.previous),x(),p()),"cell"===De?REDIPS.drag.event.changed(Pe.current):"row"!==De||we===_e&&Ae===Se||REDIPS.drag.event.rowChanged(Pe.current)),g())},h=function(){"number"==typeof window.innerWidth?(G=window.innerWidth,Q=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(G=document.documentElement.clientWidth,
Q=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(G=document.body.clientWidth,Q=document.body.clientHeight),Z=document.documentElement.scrollWidth,K=document.documentElement.scrollHeight,x()},p=function(){var e,t,n,r,i,o;for(n=[],e=function(){null!==_e&&null!==Se&&null!==Ce&&(we=_e,Ae=Se,Me=Ce)},t=he,o=pe,we=0;we<le.length;we++)if(!1!==le[we].redips.enabled&&(n[0]=le[we].redips.offset[0],n[1]=le[we].redips.offset[1],n[2]=le[we].redips.offset[2],n[3]=le[we].redips.offset[3],void 0!==le[we].sca&&(n[0]=n[0]>le[we].sca.offset[0]?n[0]:le[we].sca.offset[0],n[1]=n[1]<le[we].sca.offset[1]?n[1]:le[we].sca.offset[1],n[2]=n[2]<le[we].sca.offset[2]?n[2]:le[we].sca.offset[2],n[3]=n[3]>le[we].sca.offset[3]?n[3]:le[we].sca.offset[3]),n[3]<t&&t<n[1]&&n[0]<o&&o<n[2])){for(n=le[we].redips.row_offset,Ae=0;Ae<n.length-1;Ae++)if(void 0!==n[Ae]){if(ce[0]=n[Ae][0],void 0!==n[Ae+1])ce[2]=n[Ae+1][0];else for(r=Ae+2;r<n.length;r++)if(void 0!==n[r]){ce[2]=n[r][0];break}if(o<=ce[2])break}r=Ae,Ae===n.length-1&&(ce[0]=n[Ae][0],ce[2]=le[we].redips.offset[2]);do for(Me=i=le[we].rows[Ae].cells.length-1;0<=Me&&(ce[3]=n[Ae][3]+le[we].rows[Ae].cells[Me].offsetLeft,ce[1]=ce[3]+le[we].rows[Ae].cells[Me].offsetWidth,!(ce[3]<=t&&t<=ce[1]));Me--);while(le[we].redips.rowspan&&-1===Me&&0<Ae--);if(0>Ae||0>Me?e():Ae!==r&&(ce[0]=n[Ae][0],ce[2]=ce[0]+le[we].rows[Ae].cells[Me].offsetHeight,(o<ce[0]||o>ce[2])&&e()),t=le[we].rows[Ae].cells[Me],ce.containTable=0<t.childNodes.length&&0<t.getElementsByTagName("table").length,-1===t.className.indexOf(REDIPS.drag.trash.className))if(o=-1<t.className.indexOf(REDIPS.drag.only.cname),!0===o){if(-1===t.className.indexOf(Oe.div[Ee.id])){e();break}}else{if(void 0!==Oe.div[Ee.id]&&"deny"===Oe.other){e();break}if(o=-1<t.className.indexOf(REDIPS.drag.mark.cname),(!0===o&&"deny"===REDIPS.drag.mark.action||!1===o&&"allow"===REDIPS.drag.mark.action)&&-1===t.className.indexOf(Ne.exception[Ee.id])){e();break}}if(o=-1<t.className.indexOf("redips-single"),"cell"===De){if(("single"===REDIPS.drag.dropMode||o)&&0<t.childNodes.length){if(1===t.childNodes.length&&3===t.firstChild.nodeType)break;for(o=!0,r=t.childNodes.length-1;0<=r;r--)if(t.childNodes[r].className&&-1<t.childNodes[r].className.indexOf("redips-drag")){o=!1;break}if(!o&&null!==_e&&null!==Se&&null!==Ce&&(ke!==we||ze!==Ae||Te!==Me)){e();break}}if(-1<t.className.indexOf("redips-rowhandler")){e();break}if(t.parentNode.redips&&t.parentNode.redips.emptyRow){e();break}}break}},g=function(){we<le.length&&null!==we&&null!==Ae&&null!==Me&&($=m(we,Ae,Me),v(we,Ae,Me),_e=we,Se=Ae,Ce=Me)},v=function(e,t,n,r){if("cell"===De&&me)n=le[e].rows[t].cells[n].style,n.backgroundColor=void 0===r?REDIPS.drag.hover.colorTd:r.color[0].toString(),void 0!==REDIPS.drag.hover.borderTd&&(void 0===r?n.border=REDIPS.drag.hover.borderTd:(n.borderTopWidth=r.top[0][0],n.borderTopStyle=r.top[0][1],n.borderTopColor=r.top[0][2],n.borderRightWidth=r.right[0][0],n.borderRightStyle=r.right[0][1],n.borderRightColor=r.right[0][2],n.borderBottomWidth=r.bottom[0][0],n.borderBottomStyle=r.bottom[0][1],n.borderBottomColor=r.bottom[0][2],n.borderLeftWidth=r.left[0][0],n.borderLeftStyle=r.left[0][1],n.borderLeftColor=r.left[0][2]));else if("row"===De)for(e=le[e].rows[t],t=0;t<e.cells.length;t++)n=e.cells[t].style,n.backgroundColor=void 0===r?REDIPS.drag.hover.colorTr:r.color[t].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===r?we===ke?Ae<ze?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:"before"===REDIPS.drag.rowDropMode?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=r.top[t][0],n.borderTopStyle=r.top[t][1],n.borderTopColor=r.top[t][2],n.borderBottomWidth=r.bottom[t][0],n.borderBottomStyle=r.bottom[t][1],n.borderBottomColor=r.bottom[t][2]))},m=function(e,t,n){var r={color:[],top:[],right:[],bottom:[],left:[]},i=function(e,t){var n="border"+t+"Style",r="border"+t+"Color";return[M(e,"border"+t+"Width"),M(e,n),M(e,r)]};if("cell"===De)n=le[e].rows[t].cells[n],r.color[0]=n.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTd&&(r.top[0]=i(n,"Top"),r.right[0]=i(n,"Right"),r.bottom[0]=i(n,"Bottom"),r.left[0]=i(n,"Left"));else for(e=le[e].rows[t],t=0;t<e.cells.length;t++)n=e.cells[t],r.color[t]=n.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(r.top[t]=i(n,"Top"),r.bottom[t]=i(n,"Bottom"));return r},y=function(e,t,n){var r=0,i=0,o=e;if("fixed"!==t&&(r=0-X[0],i=0-X[1]),void 0===n||!0===n){do r+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[i,r+o.offsetWidth,i+o.offsetHeight,r]},x=function(){var e,t,n,r;for(X=b(),e=0;e<le.length;e++){for(n=[],r=M(le[e],"position"),"fixed"!==r&&(r=M(le[e].parentNode,"position")),t=le[e].rows.length-1;0<=t;t--)"none"!==le[e].rows[t].style.display&&(n[t]=y(le[e].rows[t],r));le[e].redips.offset=y(le[e],r),le[e].redips.row_offset=n}for(de=y(fe),e=0;e<ee.length;e++)r=M(ee[e].div,"position"),t=y(ee[e].div,r,!1),ee[e].offset=t,ee[e].midstX=(t[1]+t[3])/2,ee[e].midstY=(t[0]+t[2])/2},b=function(){var e,t;return"number"==typeof window.pageYOffset?(e=window.pageXOffset,t=window.pageYOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(e=document.body.scrollLeft,t=document.body.scrollTop):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?(e=document.documentElement.scrollLeft,t=document.documentElement.scrollTop):e=t=0,[e,t]},w=function(e){var t,n;t=he,n=pe,0<ae&&(x(),p(),t<de[1]&&t>de[3]&&n<de[2]&&n>de[0]&&d()),"object"==typeof e&&(te=e),te===window?(e=b()[0],t=Z-G,n=ne):(e=te.scrollLeft,t=te.scrollWidth-te.clientWidth,n=ie),0<ae&&(0>n&&0<e||0<n&&e<t)?(te===window?(window.scrollBy(n,0),b(),e=parseInt(Ee.style.left,10),isNaN(e)):te.scrollLeft+=n,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(te,"scroll",x),ae=0,ce=[0,0,0,0])},_=function(e){var t,n;t=he,n=pe,0<se&&(x(),p(),t<de[1]&&t>de[3]&&n<de[2]&&n>de[0]&&d()),"object"==typeof e&&(te=e),te===window?(e=b()[1],t=K-Q,n=re):(e=te.scrollTop,t=te.scrollHeight-te.clientHeight,n=oe),0<se&&(0>n&&0<e||0<n&&e<t)?(te===window?(window.scrollBy(0,n),b(),e=parseInt(Ee.style.top,10),isNaN(e)):te.scrollTop+=n,setTimeout(_,REDIPS.drag.scroll.speed)):(REDIPS.event.add(te,"scroll",x),se=0,ce=[0,0,0,0])},k=function(e,t){var n,r,i=e.cloneNode(!0),o=i.className;return!0===t&&(document.getElementById("redips_clone").appendChild(i),i.style.zIndex=999,i.style.position="fixed",n=y(e),r=y(i),i.style.top=n[0]-r[0]+"px",i.style.left=n[3]-r[3]+"px"),i.setCapture&&i.setCapture(),o=o.replace("redips-clone",""),o=o.replace(/climit(\d)_(\d+)/,""),i.className=U(o),void 0===ue[e.id]&&(ue[e.id]=0),i.id=e.id+"c"+ue[e.id],ue[e.id]+=1,A(e,i),i},A=function(e,t){var n,r=[];r[0]=function(e,t){e.redips&&(t.redips={},t.redips.enabled=e.redips.enabled,t.redips.container=e.redips.container,e.redips.enabled&&f(t))},r[1]=function(e,t){e.redips&&(t.redips={},t.redips.emptyRow=e.redips.emptyRow)},n=function(n){var i,o,a;for(o=["DIV","TR"],i=e.getElementsByTagName(o[n]),o=t.getElementsByTagName(o[n]),a=0;a<o.length;a++)r[n](i[a],o[a])},"DIV"===e.nodeName?r[0](e,t):"TR"===e.nodeName&&r[1](e,t),n(0),n(1)},S=function(e,n){var r,i,o;o=e.className,r=o.match(/climit(\d)_(\d+)/),null!==r&&(i=parseInt(r[1],10),r=parseInt(r[2],10),0===r&&1===n&&(o+=" redips-clone",2===i&&t(!0,e)),r+=n,o=o.replace(/climit\d_\d+/g,"climit"+i+"_"+r),0>=r&&(o=o.replace("redips-clone",""),2===i?(t(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=U(o))},z=function(e){var t=!1;switch(e.srcElement?(t=e.srcElement.nodeName,e=e.srcElement.className):(t=e.target.nodeName,e=e.target.className),t){case"A":case"INPUT":case"SELECT":case"OPTION":case"TEXTAREA":t=!0;break;default:t=/\bredips-nodrag\b/i.test(e)}return t},t=function(e,t){var n,r,i,o,a,s,l,u=[],c=[],d=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(a=REDIPS.drag.style.opacityDisabled,!0===e||"init"===e?(o=REDIPS.drag.style.borderEnabled,s="move",l=!0):(o=REDIPS.drag.style.borderDisabled,s="auto",l=!1),void 0===t?u=fe.getElementsByTagName("div"):"string"==typeof t?u=document.querySelectorAll(t):"object"!=typeof t||"DIV"===t.nodeName&&-1!==t.className.indexOf("redips-drag")?u[0]=t:u=t.getElementsByTagName("div"),r=n=0;n<u.length;n++)if(d.test(u[n].className))"init"===e||void 0===u[n].redips?(u[n].redips={},u[n].redips.container=fe):!0===e&&"number"==typeof a?(u[n].style.opacity="",u[n].style.filter=""):!1===e&&"number"==typeof a&&(u[n].style.opacity=a/100,u[n].style.filter="alpha(opacity="+a+")"),f(u[n],l),u[n].style.borderStyle=o,u[n].style.cursor=s,u[n].redips.enabled=l;else if("init"===e&&(i=M(u[n],"overflow"),"visible"!==i)){for(REDIPS.event.add(u[n],"scroll",x),i=M(u[n],"position"),c=y(u[n],i,!1),i=!h.test(u[n].className),ee[r]={div:u[n],offset:c,midstX:(c[1]+c[3])/2,midstY:(c[0]+c[2])/2,autoscroll:i},c=u[n].getElementsByTagName("table"),i=0;i<c.length;i++)c[i].sca=ee[r];r++}},M=function(e,t){var n;return e&&e.currentStyle?n=e.currentStyle[t]:e&&window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null)[t]),n},C=function(e,t,n){for(t=t.parentNode,void 0===n&&(n=0);t;){if(t.nodeName===e){if(!(0<n))break;n--}t=t.parentNode}return t},T=function(e,t){var n,r,i=C("TABLE",t);switch(e){case"firstInColumn":n=0,r=t.cellIndex;break;case"firstInRow":n=t.parentNode.rowIndex,r=0;break;case"lastInColumn":n=i.rows.length-1,r=t.cellIndex;break;case"lastInRow":n=t.parentNode.rowIndex,r=i.rows[n].cells.length-1;break;case"last":n=i.rows.length-1,r=i.rows[n].cells.length-1;break;default:n=r=0}return[n,r,i.rows[n].cells[r]]},E=function(e,t,n){var r,i,o;if(r=function(e,t){REDIPS.drag.event.relocateBefore(e,t);var n=REDIPS.drag.getPosition(t);REDIPS.drag.moveObject({obj:e,target:n,callback:function(e){var n=REDIPS.drag.findParent("TABLE",e),r=n.redips.idx;REDIPS.drag.event.relocateAfter(e,t),be[r]--,0===be[r]&&(REDIPS.drag.event.relocateEnd(),REDIPS.drag.enableTable(!0,n))}})},e!==t&&"object"==typeof e&&"object"==typeof t)if(o=e.childNodes.length,"animation"===n){if(0<o)for(n=C("TABLE",t),i=n.redips.idx,REDIPS.drag.enableTable(!1,n),n=0;n<o;n++)1===e.childNodes[n].nodeType&&"DIV"===e.childNodes[n].nodeName&&(be[i]++,r(e.childNodes[n],t))}else for(r=n=0;n<o;n++)1===e.childNodes[r].nodeType&&"DIV"===e.childNodes[r].nodeName?(i=e.childNodes[r],REDIPS.drag.event.relocateBefore(i,t),t.appendChild(i),i.redips&&!1!==i.redips.enabled&&f(i),REDIPS.drag.event.relocateAfter(i)):r++},j=function(e,t){var n,r,i=[];if("TD"===e.nodeName){if(n=e.childNodes.length,"test"===t)return n=Pe.source===e?void 0:0===e.childNodes.length||1===e.childNodes.length&&3===e.firstChild.nodeType;for(r=0;r<n;r++)i.push(e.childNodes[0]),e.removeChild(e.childNodes[0]);return i}},D=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,p,g,v=!1;if(p=function(e,t){REDIPS.drag.shift.animation?E(e,t,"animation"):E(e,t)},g=function(e){"delete"===REDIPS.drag.shift.overflow?j(e):"source"===REDIPS.drag.shift.overflow?p(e,Pe.source):"object"==typeof REDIPS.drag.shift.overflow&&p(e,REDIPS.drag.shift.overflow),v=!1,REDIPS.drag.event.shiftOverflow(e)},e!==t){switch(a=REDIPS.drag.shift.mode,n=C("TABLE",e),r=C("TABLE",t),s=O(r),i=n===r?[e.redips.rowIndex,e.redips.cellIndex]:[-1,-1],o=[t.redips.rowIndex,t.redips.cellIndex],d=r.rows.length,h=N(r),a){case"vertical2":n=n===r&&e.redips.cellIndex===t.redips.cellIndex?i:[d,t.redips.cellIndex];break;case"horizontal2":n=n===r&&e.parentNode.rowIndex===t.parentNode.rowIndex?i:[t.redips.rowIndex,h];break;default:n=n===r?i:[d,h]}for("vertical1"===a||"vertical2"===a?(a=1e3*n[1]+n[0]<1e3*o[1]+o[0]?1:-1,r=d,d=0,h=1):(a=1e3*n[0]+n[1]<1e3*o[0]+o[1]?1:-1,r=h,d=1,h=0),n[0]!==i[0]&&n[1]!==i[1]&&(v=!0);n[0]!==o[0]||n[1]!==o[1];)l=s[n[0]+"-"+n[1]],n[d]+=a,0>n[d]?(n[d]=r,n[h]--):n[d]>r&&(n[d]=0,n[h]++),i=s[n[0]+"-"+n[1]],void 0!==i&&(u=i),void 0!==l&&(c=l),void 0!==i&&void 0!==c||void 0!==u&&void 0!==l?(i=-1===u.className.indexOf(REDIPS.drag.mark.cname)?0:1,l=-1===c.className.indexOf(REDIPS.drag.mark.cname)?0:1,v&&0===i&&1===l&&g(u),1===i?0===l&&(f=c):(0===i&&1===l&&(c=f),p(u,c))):v&&void 0!==u&&void 0===c&&(i=-1===u.className.indexOf(REDIPS.drag.mark.cname)?0:1,0===i&&g(u))}},O=function(e){var t,n,r,i,o,a,s,l,u,c=[],f={};for(o=e.rows,a=0;a<o.length;a++)for(s=0;s<o[a].cells.length;s++){for(t=o[a].cells[s],e=t.parentNode.rowIndex,n=t.rowSpan||1,r=t.colSpan||1,c[e]=c[e]||[],l=0;l<c[e].length+1;l++)if("undefined"==typeof c[e][l]){i=l;break}for(f[e+"-"+i]=t,void 0===t.redips&&(t.redips={}),t.redips.rowIndex=e,t.redips.cellIndex=i,l=e;l<e+n;l++)for(c[l]=c[l]||[],t=c[l],u=i;u<i+r;u++)t[u]="x"}return f},N=function(e){"string"==typeof e&&(e=document.getElementById(e)),e=e.rows;var t,n,r,i=0;for(n=0;n<e.length;n++){for(r=t=0;r<e[n].cells.length;r++)t+=e[n].cells[r].colSpan||1;t>i&&(i=t)}return i},P=function(e,t){var n,r=(t.k1-t.k2*e)*(t.k1-t.k2*e);e+=REDIPS.drag.animation.step*(4-3*r)*t.direction,n=t.m*e+t.b,"horizontal"===t.type?(t.obj.style.left=e+"px",t.obj.style.top=n+"px"):(t.obj.style.left=n+"px",t.obj.style.top=e+"px"),e<t.last&&0<t.direction||e>t.last&&0>t.direction?setTimeout(function(){P(e,t)},REDIPS.drag.animation.pause*r):(c(t.obj),t.obj.redips&&(t.obj.redips.animated=!1),"cell"===t.mode?(!0===t.overwrite&&j(t.targetCell),t.targetCell.appendChild(t.obj),t.obj.redips&&!1!==t.obj.redips.enabled&&f(t.obj)):B(F(t.target[0]),t.target[1],t.obj),"function"==typeof t.callback&&t.callback(t.obj))},I=function(e){var t,n,r;return t=[],t=n=r=-1,void 0===e?(t=we<le.length?le[we].redips.idx:null===_e||null===Se||null===Ce?le[ke].redips.idx:le[_e].redips.idx,n=le[ke].redips.idx,t=[t,Ae,Me,n,ze,Te]):((e="string"==typeof e?document.getElementById(e):e)&&("TD"!==e.nodeName&&(e=C("TD",e)),e&&"TD"===e.nodeName&&(t=e.cellIndex,n=e.parentNode.rowIndex,e=C("TABLE",e),r=e.redips.idx)),t=[r,n,t]),t},F=function(e){var t;for(t=0;t<le.length&&le[t].redips.idx!==e;t++);return t},U=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},V=function(e){var t;for(t=0;t<e.childNodes.length;t++)if(1===e.childNodes[t].nodeType)return!0;return!1},R=function(e,t,n){var r,i;if("string"==typeof e&&(e=document.getElementById(e),e=C("TABLE",e)),"TR"===e.nodeName)for(e=e.getElementsByTagName("td"),r=0;r<e.length;r++)if(e[r].style.backgroundColor=n?n:"","empty"===t)e[r].innerHTML="";else for(i=0;i<e[r].childNodes.length;i++)1===e[r].childNodes[i].nodeType&&(e[r].childNodes[i].style.opacity=t/100,e[r].childNodes[i].style.filter="alpha(opacity="+t+")");else e.style.opacity=t/100,e.style.filter="alpha(opacity="+t+")",e.style.backgroundColor=n?n:""},{obj:Ee,objOld:je,mode:De,td:Pe,hover:{colorTd:"#E7AB83",colorTr:"#E7AB83"},scroll:{enable:!0,bound:25,speed:20},only:Oe,mark:Ne,style:{borderEnabled:"solid",borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},trash:{className:"redips-trash",question:null,questionRow:null},saveParamName:"p",dropMode:"multiple",multipleDrop:"bottom",clone:Fe,animation:{pause:20,step:2,shift:!1},shift:{mode:"horizontal1",after:"default",overflow:"bunch"},rowDropMode:"before",tableSort:!0,init:function(r){var i;if(void 0!==r&&"string"==typeof r||(r="redips-drag"),fe=document.getElementById(r),null===fe)throw"REDIPS.drag - Drag container is not set!";for(X=b(),document.getElementById("redips_clone")||(r=document.createElement("div"),r.id="redips_clone",r.style.width=r.style.height="1px",fe.appendChild(r)),t("init"),e(),h(),REDIPS.event.add(window,"resize",h),i=fe.getElementsByTagName("img"),r=0;r<i.length;r++)REDIPS.event.add(i[r],"mousemove",n),REDIPS.event.add(i[r],"touchmove",n);REDIPS.event.add(window,"scroll",x)},initTables:e,enableDrag:t,enableTable:function(e,t){var n;if("object"==typeof t&&"TABLE"===t.nodeName)t.redips.enabled=e;else for(n=0;n<le.length;n++)-1<le[n].className.indexOf(t)&&(le[n].redips.enabled=e)},cloneObject:k,saveContent:function(e,t){var n,r,i,o,a,s,l,u="",c=[],f=REDIPS.drag.saveParamName;if("string"==typeof e&&(e=document.getElementById(e)),void 0!==e&&"object"==typeof e&&"TABLE"===e.nodeName){for(n=e.rows.length,a=0;a<n;a++)for(r=e.rows[a].cells.length,s=0;s<r;s++)if(i=e.rows[a].cells[s],0<i.childNodes.length)for(l=0;l<i.childNodes.length;l++)o=i.childNodes[l],"DIV"===o.nodeName&&-1<o.className.indexOf("redips-drag")&&(u+=f+"[]="+o.id+"_"+a+"_"+s+"&",c.push([o.id,a,s]));u="json"===t&&0<c.length?JSON.stringify(c):u.substring(0,u.length-1)}return u},relocate:E,emptyCell:j,moveObject:function(t){var n,r,i,o,a,s,l={direction:1};if(l.callback=t.callback,l.overwrite=t.overwrite,"string"==typeof t.id?l.obj=l.objOld=document.getElementById(t.id):"object"==typeof t.obj&&"DIV"===t.obj.nodeName&&(l.obj=l.objOld=t.obj),"row"===t.mode){if(l.mode="row",s=F(t.source[0]),a=t.source[1],je=l.objOld=le[s].rows[a],je.redips&&!0===je.redips.emptyRow)return!1;l.obj=L(l.objOld,"animated")}else if(l.obj&&-1<l.obj.className.indexOf("redips-row")){if(l.mode="row",l.obj=l.objOld=je=C("TR",l.obj),je.redips&&!0===je.redips.emptyRow)return!1;l.obj=L(l.objOld,"animated")}else l.mode="cell";if("object"==typeof l.obj&&null!==l.obj)return l.obj.style.zIndex=999,l.obj.redips&&fe!==l.obj.redips.container&&(fe=l.obj.redips.container,e()),s=y(l.obj),i=s[1]-s[3],o=s[2]-s[0],n=s[3],r=s[0],!0===t.clone&&"cell"===l.mode&&(l.obj=k(l.obj,!0),REDIPS.drag.event.cloned(l.obj)),void 0===t.target?t.target=I():"object"==typeof t.target&&"TD"===t.target.nodeName&&(t.target=I(t.target)),l.target=t.target,s=F(t.target[0]),a=t.target[1],t=t.target[2],a>le[s].rows.length-1&&(a=le[s].rows.length-1),l.targetCell=le[s].rows[a].cells[t],"cell"===l.mode?(s=y(l.targetCell),a=s[1]-s[3],t=s[2]-s[0],i=s[3]+(a-i)/2,o=s[0]+(t-o)/2):(s=y(le[s].rows[a]),i=s[3],o=s[0]),s=i-n,t=o-r,l.obj.style.position="fixed",Math.abs(s)>Math.abs(t)?(l.type="horizontal",l.m=t/s,l.b=r-l.m*n,l.k1=(n+i)/(n-i),l.k2=2/(n-i),n>i&&(l.direction=-1),s=n,l.last=i):(l.type="vertical",l.m=s/t,l.b=n-l.m*r,l.k1=(r+o)/(r-o),l.k2=2/(r-o),r>o&&(l.direction=-1),s=r,l.last=o),l.obj.redips&&(l.obj.redips.animated=!0),P(s,l),[l.obj,l.objOld]},shiftCells:D,deleteObject:function(e){"object"==typeof e&&"DIV"===e.nodeName?e.parentNode.removeChild(e):"string"==typeof e&&(e=document.getElementById(e))&&e.parentNode.removeChild(e)},getPosition:I,rowOpacity:R,rowEmpty:function(e,t,n){e=document.getElementById(e).rows[t],void 0===n&&(n=REDIPS.drag.style.rowEmptyColor),void 0===e.redips&&(e.redips={}),e.redips.emptyRow=!0,R(e,"empty",n)},getScrollPosition:b,getStyle:M,findParent:C,findCell:T,event:{changed:function(){},clicked:function(){},cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dblClicked:function(){},deleted:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},moved:function(){},notCloned:function(){},notMoved:function(){},shiftOverflow:function(){},relocateBefore:function(){},relocateAfter:function(){},relocateEnd:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDeleted:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){},rowUndeleted:function(){},switched:function(){},undeleted:function(){}}}}(),REDIPS.event||(REDIPS.event=function(){return{add:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},remove:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}}}());